var qB=Object.defineProperty;var GB=(t,e,n)=>e in t?qB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var J=(t,e,n)=>GB(t,typeof e!="symbol"?e+"":e,n);function Ow(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Pt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function md(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function gT(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var yT={exports:{}},ag={},bT={exports:{}},Ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dh=Symbol.for("react.element"),HB=Symbol.for("react.portal"),KB=Symbol.for("react.fragment"),XB=Symbol.for("react.strict_mode"),YB=Symbol.for("react.profiler"),QB=Symbol.for("react.provider"),ZB=Symbol.for("react.context"),JB=Symbol.for("react.forward_ref"),eM=Symbol.for("react.suspense"),tM=Symbol.for("react.memo"),nM=Symbol.for("react.lazy"),VA=Symbol.iterator;function rM(t){return t===null||typeof t!="object"?null:(t=VA&&t[VA]||t["@@iterator"],typeof t=="function"?t:null)}var vT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},wT=Object.assign,xT={};function gd(t,e,n){this.props=t,this.context=e,this.refs=xT,this.updater=n||vT}gd.prototype.isReactComponent={};gd.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};gd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ST(){}ST.prototype=gd.prototype;function Pw(t,e,n){this.props=t,this.context=e,this.refs=xT,this.updater=n||vT}var Dw=Pw.prototype=new ST;Dw.constructor=Pw;wT(Dw,gd.prototype);Dw.isPureReactComponent=!0;var UA=Array.isArray,AT=Object.prototype.hasOwnProperty,Lw={current:null},ET={key:!0,ref:!0,__self:!0,__source:!0};function CT(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)AT.call(e,r)&&!ET.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];s.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Dh,type:t,key:i,ref:o,props:s,_owner:Lw.current}}function sM(t,e){return{$$typeof:Dh,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Fw(t){return typeof t=="object"&&t!==null&&t.$$typeof===Dh}function iM(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var zA=/\/+/g;function Y1(t,e){return typeof t=="object"&&t!==null&&t.key!=null?iM(""+t.key):e.toString(36)}function vm(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Dh:case HB:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Y1(o,0):r,UA(s)?(n="",t!=null&&(n=t.replace(zA,"$&/")+"/"),vm(s,e,n,"",function(l){return l})):s!=null&&(Fw(s)&&(s=sM(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(zA,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",UA(t))for(var a=0;a<t.length;a++){i=t[a];var u=r+Y1(i,a);o+=vm(i,e,n,u,s)}else if(u=rM(t),typeof u=="function")for(t=u.call(t),a=0;!(i=t.next()).done;)i=i.value,u=r+Y1(i,a++),o+=vm(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Cp(t,e,n){if(t==null)return t;var r=[],s=0;return vm(t,r,"","",function(i){return e.call(n,i,s++)}),r}function oM(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var kr={current:null},wm={transition:null},aM={ReactCurrentDispatcher:kr,ReactCurrentBatchConfig:wm,ReactCurrentOwner:Lw};function NT(){throw Error("act(...) is not supported in production builds of React.")}Ze.Children={map:Cp,forEach:function(t,e,n){Cp(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Cp(t,function(){e++}),e},toArray:function(t){return Cp(t,function(e){return e})||[]},only:function(t){if(!Fw(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ze.Component=gd;Ze.Fragment=KB;Ze.Profiler=YB;Ze.PureComponent=Pw;Ze.StrictMode=XB;Ze.Suspense=eM;Ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aM;Ze.act=NT;Ze.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=wT({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Lw.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)AT.call(e,u)&&!ET.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:Dh,type:t.type,key:s,ref:i,props:r,_owner:o}};Ze.createContext=function(t){return t={$$typeof:ZB,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:QB,_context:t},t.Consumer=t};Ze.createElement=CT;Ze.createFactory=function(t){var e=CT.bind(null,t);return e.type=t,e};Ze.createRef=function(){return{current:null}};Ze.forwardRef=function(t){return{$$typeof:JB,render:t}};Ze.isValidElement=Fw;Ze.lazy=function(t){return{$$typeof:nM,_payload:{_status:-1,_result:t},_init:oM}};Ze.memo=function(t,e){return{$$typeof:tM,type:t,compare:e===void 0?null:e}};Ze.startTransition=function(t){var e=wm.transition;wm.transition={};try{t()}finally{wm.transition=e}};Ze.unstable_act=NT;Ze.useCallback=function(t,e){return kr.current.useCallback(t,e)};Ze.useContext=function(t){return kr.current.useContext(t)};Ze.useDebugValue=function(){};Ze.useDeferredValue=function(t){return kr.current.useDeferredValue(t)};Ze.useEffect=function(t,e){return kr.current.useEffect(t,e)};Ze.useId=function(){return kr.current.useId()};Ze.useImperativeHandle=function(t,e,n){return kr.current.useImperativeHandle(t,e,n)};Ze.useInsertionEffect=function(t,e){return kr.current.useInsertionEffect(t,e)};Ze.useLayoutEffect=function(t,e){return kr.current.useLayoutEffect(t,e)};Ze.useMemo=function(t,e){return kr.current.useMemo(t,e)};Ze.useReducer=function(t,e,n){return kr.current.useReducer(t,e,n)};Ze.useRef=function(t){return kr.current.useRef(t)};Ze.useState=function(t){return kr.current.useState(t)};Ze.useSyncExternalStore=function(t,e,n){return kr.current.useSyncExternalStore(t,e,n)};Ze.useTransition=function(){return kr.current.useTransition()};Ze.version="18.3.1";bT.exports=Ze;var P=bT.exports;const Tn=md(P),gb=Ow({__proto__:null,default:Tn},[P]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uM=P,lM=Symbol.for("react.element"),cM=Symbol.for("react.fragment"),dM=Object.prototype.hasOwnProperty,fM=uM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,hM={key:!0,ref:!0,__self:!0,__source:!0};function _T(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)dM.call(e,r)&&!hM.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:lM,type:t,key:i,ref:o,props:s,_owner:fM.current}}ag.Fragment=cM;ag.jsx=_T;ag.jsxs=_T;yT.exports=ag;var E=yT.exports,pM={exports:{}};/*!
  * Bootstrap v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */(function(t,e){(function(n,r){t.exports=r()})(Pt,function(){const n=new Map,r={set(C,m,S){n.has(C)||n.set(C,new Map);const I=n.get(C);I.has(m)||I.size===0?I.set(m,S):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(I.keys())[0]}.`)},get:(C,m)=>n.has(C)&&n.get(C).get(m)||null,remove(C,m){if(!n.has(C))return;const S=n.get(C);S.delete(m),S.size===0&&n.delete(C)}},s="transitionend",i=C=>(C&&window.CSS&&window.CSS.escape&&(C=C.replace(/#([^\s"#']+)/g,(m,S)=>`#${CSS.escape(S)}`)),C),o=C=>{C.dispatchEvent(new Event(s))},a=C=>!(!C||typeof C!="object")&&(C.jquery!==void 0&&(C=C[0]),C.nodeType!==void 0),u=C=>a(C)?C.jquery?C[0]:C:typeof C=="string"&&C.length>0?document.querySelector(i(C)):null,l=C=>{if(!a(C)||C.getClientRects().length===0)return!1;const m=getComputedStyle(C).getPropertyValue("visibility")==="visible",S=C.closest("details:not([open])");if(!S)return m;if(S!==C){const I=C.closest("summary");if(I&&I.parentNode!==S||I===null)return!1}return m},c=C=>!C||C.nodeType!==Node.ELEMENT_NODE||!!C.classList.contains("disabled")||(C.disabled!==void 0?C.disabled:C.hasAttribute("disabled")&&C.getAttribute("disabled")!=="false"),d=C=>{if(!document.documentElement.attachShadow)return null;if(typeof C.getRootNode=="function"){const m=C.getRootNode();return m instanceof ShadowRoot?m:null}return C instanceof ShadowRoot?C:C.parentNode?d(C.parentNode):null},f=()=>{},h=C=>{C.offsetHeight},p=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,y=[],b=()=>document.documentElement.dir==="rtl",g=C=>{var m;m=()=>{const S=p();if(S){const I=C.NAME,G=S.fn[I];S.fn[I]=C.jQueryInterface,S.fn[I].Constructor=C,S.fn[I].noConflict=()=>(S.fn[I]=G,C.jQueryInterface)}},document.readyState==="loading"?(y.length||document.addEventListener("DOMContentLoaded",()=>{for(const S of y)S()}),y.push(m)):m()},v=(C,m=[],S=C)=>typeof C=="function"?C(...m):S,w=(C,m,S=!0)=>{if(!S)return void v(C);const I=(Q=>{if(!Q)return 0;let{transitionDuration:re,transitionDelay:pe}=window.getComputedStyle(Q);const Se=Number.parseFloat(re),Ce=Number.parseFloat(pe);return Se||Ce?(re=re.split(",")[0],pe=pe.split(",")[0],1e3*(Number.parseFloat(re)+Number.parseFloat(pe))):0})(m)+5;let G=!1;const H=({target:Q})=>{Q===m&&(G=!0,m.removeEventListener(s,H),v(C))};m.addEventListener(s,H),setTimeout(()=>{G||o(m)},I)},x=(C,m,S,I)=>{const G=C.length;let H=C.indexOf(m);return H===-1?!S&&I?C[G-1]:C[0]:(H+=S?1:-1,I&&(H=(H+G)%G),C[Math.max(0,Math.min(H,G-1))])},N=/[^.]*(?=\..*)\.|.*/,k=/\..*/,O=/::\d+$/,_={};let $=1;const M={mouseenter:"mouseover",mouseleave:"mouseout"},K=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Z(C,m){return m&&`${m}::${$++}`||C.uidEvent||$++}function ie(C){const m=Z(C);return C.uidEvent=m,_[m]=_[m]||{},_[m]}function ee(C,m,S=null){return Object.values(C).find(I=>I.callable===m&&I.delegationSelector===S)}function W(C,m,S){const I=typeof m=="string",G=I?S:m||S;let H=U(C);return K.has(H)||(H=C),[I,G,H]}function V(C,m,S,I,G){if(typeof m!="string"||!C)return;let[H,Q,re]=W(m,S,I);m in M&&(Q=(Ve=>function($e){if(!$e.relatedTarget||$e.relatedTarget!==$e.delegateTarget&&!$e.delegateTarget.contains($e.relatedTarget))return Ve.call(this,$e)})(Q));const pe=ie(C),Se=pe[re]||(pe[re]={}),Ce=ee(Se,Q,H?S:null);if(Ce)return void(Ce.oneOff=Ce.oneOff&&G);const ve=Z(Q,m.replace(N,"")),We=H?function(Fe,Ve,$e){return function Ue(St){const Ot=Fe.querySelectorAll(Ve);for(let{target:Ke}=St;Ke&&Ke!==this;Ke=Ke.parentNode)for(const dt of Ot)if(dt===Ke)return ue(St,{delegateTarget:Ke}),Ue.oneOff&&F.off(Fe,St.type,Ve,$e),$e.apply(Ke,[St])}}(C,S,Q):function(Fe,Ve){return function $e(Ue){return ue(Ue,{delegateTarget:Fe}),$e.oneOff&&F.off(Fe,Ue.type,Ve),Ve.apply(Fe,[Ue])}}(C,Q);We.delegationSelector=H?S:null,We.callable=Q,We.oneOff=G,We.uidEvent=ve,Se[ve]=We,C.addEventListener(re,We,H)}function D(C,m,S,I,G){const H=ee(m[S],I,G);H&&(C.removeEventListener(S,H,!!G),delete m[S][H.uidEvent])}function L(C,m,S,I){const G=m[S]||{};for(const[H,Q]of Object.entries(G))H.includes(I)&&D(C,m,S,Q.callable,Q.delegationSelector)}function U(C){return C=C.replace(k,""),M[C]||C}const F={on(C,m,S,I){V(C,m,S,I,!1)},one(C,m,S,I){V(C,m,S,I,!0)},off(C,m,S,I){if(typeof m!="string"||!C)return;const[G,H,Q]=W(m,S,I),re=Q!==m,pe=ie(C),Se=pe[Q]||{},Ce=m.startsWith(".");if(H===void 0){if(Ce)for(const ve of Object.keys(pe))L(C,pe,ve,m.slice(1));for(const[ve,We]of Object.entries(Se)){const Fe=ve.replace(O,"");re&&!m.includes(Fe)||D(C,pe,Q,We.callable,We.delegationSelector)}}else{if(!Object.keys(Se).length)return;D(C,pe,Q,H,G?S:null)}},trigger(C,m,S){if(typeof m!="string"||!C)return null;const I=p();let G=null,H=!0,Q=!0,re=!1;m!==U(m)&&I&&(G=I.Event(m,S),I(C).trigger(G),H=!G.isPropagationStopped(),Q=!G.isImmediatePropagationStopped(),re=G.isDefaultPrevented());const pe=ue(new Event(m,{bubbles:H,cancelable:!0}),S);return re&&pe.preventDefault(),Q&&C.dispatchEvent(pe),pe.defaultPrevented&&G&&G.preventDefault(),pe}};function ue(C,m={}){for(const[S,I]of Object.entries(m))try{C[S]=I}catch{Object.defineProperty(C,S,{configurable:!0,get:()=>I})}return C}function se(C){if(C==="true")return!0;if(C==="false")return!1;if(C===Number(C).toString())return Number(C);if(C===""||C==="null")return null;if(typeof C!="string")return C;try{return JSON.parse(decodeURIComponent(C))}catch{return C}}function he(C){return C.replace(/[A-Z]/g,m=>`-${m.toLowerCase()}`)}const ae={setDataAttribute(C,m,S){C.setAttribute(`data-bs-${he(m)}`,S)},removeDataAttribute(C,m){C.removeAttribute(`data-bs-${he(m)}`)},getDataAttributes(C){if(!C)return{};const m={},S=Object.keys(C.dataset).filter(I=>I.startsWith("bs")&&!I.startsWith("bsConfig"));for(const I of S){let G=I.replace(/^bs/,"");G=G.charAt(0).toLowerCase()+G.slice(1,G.length),m[G]=se(C.dataset[I])}return m},getDataAttribute:(C,m)=>se(C.getAttribute(`data-bs-${he(m)}`))};class be{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(m){return m=this._mergeConfigObj(m),m=this._configAfterMerge(m),this._typeCheckConfig(m),m}_configAfterMerge(m){return m}_mergeConfigObj(m,S){const I=a(S)?ae.getDataAttribute(S,"config"):{};return{...this.constructor.Default,...typeof I=="object"?I:{},...a(S)?ae.getDataAttributes(S):{},...typeof m=="object"?m:{}}}_typeCheckConfig(m,S=this.constructor.DefaultType){for(const[G,H]of Object.entries(S)){const Q=m[G],re=a(Q)?"element":(I=Q)==null?`${I}`:Object.prototype.toString.call(I).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(H).test(re))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${G}" provided type "${re}" but expected type "${H}".`)}var I}}class Te extends be{constructor(m,S){super(),(m=u(m))&&(this._element=m,this._config=this._getConfig(S),r.set(this._element,this.constructor.DATA_KEY,this))}dispose(){r.remove(this._element,this.constructor.DATA_KEY),F.off(this._element,this.constructor.EVENT_KEY);for(const m of Object.getOwnPropertyNames(this))this[m]=null}_queueCallback(m,S,I=!0){w(m,S,I)}_getConfig(m){return m=this._mergeConfigObj(m,this._element),m=this._configAfterMerge(m),this._typeCheckConfig(m),m}static getInstance(m){return r.get(u(m),this.DATA_KEY)}static getOrCreateInstance(m,S={}){return this.getInstance(m)||new this(m,typeof S=="object"?S:null)}static get VERSION(){return"5.3.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(m){return`${m}${this.EVENT_KEY}`}}const ct=C=>{let m=C.getAttribute("data-bs-target");if(!m||m==="#"){let S=C.getAttribute("href");if(!S||!S.includes("#")&&!S.startsWith("."))return null;S.includes("#")&&!S.startsWith("#")&&(S=`#${S.split("#")[1]}`),m=S&&S!=="#"?S.trim():null}return m?m.split(",").map(S=>i(S)).join(","):null},we={find:(C,m=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(m,C)),findOne:(C,m=document.documentElement)=>Element.prototype.querySelector.call(m,C),children:(C,m)=>[].concat(...C.children).filter(S=>S.matches(m)),parents(C,m){const S=[];let I=C.parentNode.closest(m);for(;I;)S.push(I),I=I.parentNode.closest(m);return S},prev(C,m){let S=C.previousElementSibling;for(;S;){if(S.matches(m))return[S];S=S.previousElementSibling}return[]},next(C,m){let S=C.nextElementSibling;for(;S;){if(S.matches(m))return[S];S=S.nextElementSibling}return[]},focusableChildren(C){const m=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(S=>`${S}:not([tabindex^="-"])`).join(",");return this.find(m,C).filter(S=>!c(S)&&l(S))},getSelectorFromElement(C){const m=ct(C);return m&&we.findOne(m)?m:null},getElementFromSelector(C){const m=ct(C);return m?we.findOne(m):null},getMultipleElementsFromSelector(C){const m=ct(C);return m?we.find(m):[]}},Kn=(C,m="hide")=>{const S=`click.dismiss${C.EVENT_KEY}`,I=C.NAME;F.on(document,S,`[data-bs-dismiss="${I}"]`,function(G){if(["A","AREA"].includes(this.tagName)&&G.preventDefault(),c(this))return;const H=we.getElementFromSelector(this)||this.closest(`.${I}`);C.getOrCreateInstance(H)[m]()})},pr=".bs.alert",Xn=`close${pr}`,Es=`closed${pr}`;class Cs extends Te{static get NAME(){return"alert"}close(){if(F.trigger(this._element,Xn).defaultPrevented)return;this._element.classList.remove("show");const m=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,m)}_destroyElement(){this._element.remove(),F.trigger(this._element,Es),this.dispose()}static jQueryInterface(m){return this.each(function(){const S=Cs.getOrCreateInstance(this);if(typeof m=="string"){if(S[m]===void 0||m.startsWith("_")||m==="constructor")throw new TypeError(`No method named "${m}"`);S[m](this)}})}}Kn(Cs,"close"),g(Cs);const Kt='[data-bs-toggle="button"]';class En extends Te{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(m){return this.each(function(){const S=En.getOrCreateInstance(this);m==="toggle"&&S[m]()})}}F.on(document,"click.bs.button.data-api",Kt,C=>{C.preventDefault();const m=C.target.closest(Kt);En.getOrCreateInstance(m).toggle()}),g(En);const gn=".bs.swipe",wo=`touchstart${gn}`,Yr=`touchmove${gn}`,Ul=`touchend${gn}`,Vd=`pointerdown${gn}`,ou=`pointerup${gn}`,xo={endCallback:null,leftCallback:null,rightCallback:null},Ud={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class zl extends be{constructor(m,S){super(),this._element=m,m&&zl.isSupported()&&(this._config=this._getConfig(S),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return xo}static get DefaultType(){return Ud}static get NAME(){return"swipe"}dispose(){F.off(this._element,gn)}_start(m){this._supportPointerEvents?this._eventIsPointerPenTouch(m)&&(this._deltaX=m.clientX):this._deltaX=m.touches[0].clientX}_end(m){this._eventIsPointerPenTouch(m)&&(this._deltaX=m.clientX-this._deltaX),this._handleSwipe(),v(this._config.endCallback)}_move(m){this._deltaX=m.touches&&m.touches.length>1?0:m.touches[0].clientX-this._deltaX}_handleSwipe(){const m=Math.abs(this._deltaX);if(m<=40)return;const S=m/this._deltaX;this._deltaX=0,S&&v(S>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(F.on(this._element,Vd,m=>this._start(m)),F.on(this._element,ou,m=>this._end(m)),this._element.classList.add("pointer-event")):(F.on(this._element,wo,m=>this._start(m)),F.on(this._element,Yr,m=>this._move(m)),F.on(this._element,Ul,m=>this._end(m)))}_eventIsPointerPenTouch(m){return this._supportPointerEvents&&(m.pointerType==="pen"||m.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Mi=".bs.carousel",na=".data-api",oi="next",So="prev",Vi="left",Qr="right",ai=`slide${Mi}`,jl=`slid${Mi}`,Wl=`keydown${Mi}`,w1=`mouseenter${Mi}`,Ui=`mouseleave${Mi}`,sp=`dragstart${Mi}`,ip=`load${Mi}${na}`,op=`click${Mi}${na}`,ap="carousel",au="active",uu=".active",zd=".carousel-item",jd=uu+zd,ql={ArrowLeft:Qr,ArrowRight:Vi},Wd={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},x1={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Ao extends Te{constructor(m,S){super(m,S),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=we.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===ap&&this.cycle()}static get Default(){return Wd}static get DefaultType(){return x1}static get NAME(){return"carousel"}next(){this._slide(oi)}nextWhenVisible(){!document.hidden&&l(this._element)&&this.next()}prev(){this._slide(So)}pause(){this._isSliding&&o(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?F.one(this._element,jl,()=>this.cycle()):this.cycle())}to(m){const S=this._getItems();if(m>S.length-1||m<0)return;if(this._isSliding)return void F.one(this._element,jl,()=>this.to(m));const I=this._getItemIndex(this._getActive());if(I===m)return;const G=m>I?oi:So;this._slide(G,S[m])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(m){return m.defaultInterval=m.interval,m}_addEventListeners(){this._config.keyboard&&F.on(this._element,Wl,m=>this._keydown(m)),this._config.pause==="hover"&&(F.on(this._element,w1,()=>this.pause()),F.on(this._element,Ui,()=>this._maybeEnableCycle())),this._config.touch&&zl.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const S of we.find(".carousel-item img",this._element))F.on(S,sp,I=>I.preventDefault());const m={leftCallback:()=>this._slide(this._directionToOrder(Vi)),rightCallback:()=>this._slide(this._directionToOrder(Qr)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new zl(this._element,m)}_keydown(m){if(/input|textarea/i.test(m.target.tagName))return;const S=ql[m.key];S&&(m.preventDefault(),this._slide(this._directionToOrder(S)))}_getItemIndex(m){return this._getItems().indexOf(m)}_setActiveIndicatorElement(m){if(!this._indicatorsElement)return;const S=we.findOne(uu,this._indicatorsElement);S.classList.remove(au),S.removeAttribute("aria-current");const I=we.findOne(`[data-bs-slide-to="${m}"]`,this._indicatorsElement);I&&(I.classList.add(au),I.setAttribute("aria-current","true"))}_updateInterval(){const m=this._activeElement||this._getActive();if(!m)return;const S=Number.parseInt(m.getAttribute("data-bs-interval"),10);this._config.interval=S||this._config.defaultInterval}_slide(m,S=null){if(this._isSliding)return;const I=this._getActive(),G=m===oi,H=S||x(this._getItems(),I,G,this._config.wrap);if(H===I)return;const Q=this._getItemIndex(H),re=ve=>F.trigger(this._element,ve,{relatedTarget:H,direction:this._orderToDirection(m),from:this._getItemIndex(I),to:Q});if(re(ai).defaultPrevented||!I||!H)return;const pe=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(Q),this._activeElement=H;const Se=G?"carousel-item-start":"carousel-item-end",Ce=G?"carousel-item-next":"carousel-item-prev";H.classList.add(Ce),h(H),I.classList.add(Se),H.classList.add(Se),this._queueCallback(()=>{H.classList.remove(Se,Ce),H.classList.add(au),I.classList.remove(au,Ce,Se),this._isSliding=!1,re(jl)},I,this._isAnimated()),pe&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return we.findOne(jd,this._element)}_getItems(){return we.find(zd,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(m){return b()?m===Vi?So:oi:m===Vi?oi:So}_orderToDirection(m){return b()?m===So?Vi:Qr:m===So?Qr:Vi}static jQueryInterface(m){return this.each(function(){const S=Ao.getOrCreateInstance(this,m);if(typeof m!="number"){if(typeof m=="string"){if(S[m]===void 0||m.startsWith("_")||m==="constructor")throw new TypeError(`No method named "${m}"`);S[m]()}}else S.to(m)})}}F.on(document,op,"[data-bs-slide], [data-bs-slide-to]",function(C){const m=we.getElementFromSelector(this);if(!m||!m.classList.contains(ap))return;C.preventDefault();const S=Ao.getOrCreateInstance(m),I=this.getAttribute("data-bs-slide-to");return I?(S.to(I),void S._maybeEnableCycle()):ae.getDataAttribute(this,"slide")==="next"?(S.next(),void S._maybeEnableCycle()):(S.prev(),void S._maybeEnableCycle())}),F.on(window,ip,()=>{const C=we.find('[data-bs-ride="carousel"]');for(const m of C)Ao.getOrCreateInstance(m)}),g(Ao);const lu=".bs.collapse",up=`show${lu}`,Gl=`shown${lu}`,Hl=`hide${lu}`,lp=`hidden${lu}`,S1=`click${lu}.data-api`,qd="show",z="collapse",q="collapsing",Y=`:scope .${z} .${z}`,ne='[data-bs-toggle="collapse"]',xe={parent:null,toggle:!0},_e={parent:"(null|element)",toggle:"boolean"};class Oe extends Te{constructor(m,S){super(m,S),this._isTransitioning=!1,this._triggerArray=[];const I=we.find(ne);for(const G of I){const H=we.getSelectorFromElement(G),Q=we.find(H).filter(re=>re===this._element);H!==null&&Q.length&&this._triggerArray.push(G)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return xe}static get DefaultType(){return _e}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let m=[];if(this._config.parent&&(m=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(G=>G!==this._element).map(G=>Oe.getOrCreateInstance(G,{toggle:!1}))),m.length&&m[0]._isTransitioning||F.trigger(this._element,up).defaultPrevented)return;for(const G of m)G.hide();const S=this._getDimension();this._element.classList.remove(z),this._element.classList.add(q),this._element.style[S]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const I=`scroll${S[0].toUpperCase()+S.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(q),this._element.classList.add(z,qd),this._element.style[S]="",F.trigger(this._element,Gl)},this._element,!0),this._element.style[S]=`${this._element[I]}px`}hide(){if(this._isTransitioning||!this._isShown()||F.trigger(this._element,Hl).defaultPrevented)return;const m=this._getDimension();this._element.style[m]=`${this._element.getBoundingClientRect()[m]}px`,h(this._element),this._element.classList.add(q),this._element.classList.remove(z,qd);for(const S of this._triggerArray){const I=we.getElementFromSelector(S);I&&!this._isShown(I)&&this._addAriaAndCollapsedClass([S],!1)}this._isTransitioning=!0,this._element.style[m]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(q),this._element.classList.add(z),F.trigger(this._element,lp)},this._element,!0)}_isShown(m=this._element){return m.classList.contains(qd)}_configAfterMerge(m){return m.toggle=!!m.toggle,m.parent=u(m.parent),m}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const m=this._getFirstLevelChildren(ne);for(const S of m){const I=we.getElementFromSelector(S);I&&this._addAriaAndCollapsedClass([S],this._isShown(I))}}_getFirstLevelChildren(m){const S=we.find(Y,this._config.parent);return we.find(m,this._config.parent).filter(I=>!S.includes(I))}_addAriaAndCollapsedClass(m,S){if(m.length)for(const I of m)I.classList.toggle("collapsed",!S),I.setAttribute("aria-expanded",S)}static jQueryInterface(m){const S={};return typeof m=="string"&&/show|hide/.test(m)&&(S.toggle=!1),this.each(function(){const I=Oe.getOrCreateInstance(this,S);if(typeof m=="string"){if(I[m]===void 0)throw new TypeError(`No method named "${m}"`);I[m]()}})}}F.on(document,S1,ne,function(C){(C.target.tagName==="A"||C.delegateTarget&&C.delegateTarget.tagName==="A")&&C.preventDefault();for(const m of we.getMultipleElementsFromSelector(this))Oe.getOrCreateInstance(m,{toggle:!1}).toggle()}),g(Oe);var le="top",Re="bottom",Ee="right",Ie="left",at="auto",Je=[le,Re,Ee,Ie],nt="start",Xe="end",fn="clippingParents",zt="viewport",Ns="popper",ui="reference",zi=Je.reduce(function(C,m){return C.concat([m+"-"+nt,m+"-"+Xe])},[]),ji=[].concat(Je,[at]).reduce(function(C,m){return C.concat([m,m+"-"+nt,m+"-"+Xe])},[]),Eo="beforeRead",Zr="read",cu="afterRead",du="beforeMain",fu="main",ze="afterMain",Mt="beforeWrite",Yn="write",Tt="afterWrite",_s=[Eo,Zr,cu,du,fu,ze,Mt,Yn,Tt];function Jr(C){return C?(C.nodeName||"").toLowerCase():null}function mr(C){if(C==null)return window;if(C.toString()!=="[object Window]"){var m=C.ownerDocument;return m&&m.defaultView||window}return C}function hu(C){return C instanceof mr(C).Element||C instanceof Element}function Ts(C){return C instanceof mr(C).HTMLElement||C instanceof HTMLElement}function A1(C){return typeof ShadowRoot<"u"&&(C instanceof mr(C).ShadowRoot||C instanceof ShadowRoot)}const E1={name:"applyStyles",enabled:!0,phase:"write",fn:function(C){var m=C.state;Object.keys(m.elements).forEach(function(S){var I=m.styles[S]||{},G=m.attributes[S]||{},H=m.elements[S];Ts(H)&&Jr(H)&&(Object.assign(H.style,I),Object.keys(G).forEach(function(Q){var re=G[Q];re===!1?H.removeAttribute(Q):H.setAttribute(Q,re===!0?"":re)}))})},effect:function(C){var m=C.state,S={popper:{position:m.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(m.elements.popper.style,S.popper),m.styles=S,m.elements.arrow&&Object.assign(m.elements.arrow.style,S.arrow),function(){Object.keys(m.elements).forEach(function(I){var G=m.elements[I],H=m.attributes[I]||{},Q=Object.keys(m.styles.hasOwnProperty(I)?m.styles[I]:S[I]).reduce(function(re,pe){return re[pe]="",re},{});Ts(G)&&Jr(G)&&(Object.assign(G.style,Q),Object.keys(H).forEach(function(re){G.removeAttribute(re)}))})}},requires:["computeStyles"]};function Wi(C){return C.split("-")[0]}var pu=Math.max,cp=Math.min,Kl=Math.round;function C1(){var C=navigator.userAgentData;return C!=null&&C.brands&&Array.isArray(C.brands)?C.brands.map(function(m){return m.brand+"/"+m.version}).join(" "):navigator.userAgent}function NS(){return!/^((?!chrome|android).)*safari/i.test(C1())}function Xl(C,m,S){m===void 0&&(m=!1),S===void 0&&(S=!1);var I=C.getBoundingClientRect(),G=1,H=1;m&&Ts(C)&&(G=C.offsetWidth>0&&Kl(I.width)/C.offsetWidth||1,H=C.offsetHeight>0&&Kl(I.height)/C.offsetHeight||1);var Q=(hu(C)?mr(C):window).visualViewport,re=!NS()&&S,pe=(I.left+(re&&Q?Q.offsetLeft:0))/G,Se=(I.top+(re&&Q?Q.offsetTop:0))/H,Ce=I.width/G,ve=I.height/H;return{width:Ce,height:ve,top:Se,right:pe+Ce,bottom:Se+ve,left:pe,x:pe,y:Se}}function N1(C){var m=Xl(C),S=C.offsetWidth,I=C.offsetHeight;return Math.abs(m.width-S)<=1&&(S=m.width),Math.abs(m.height-I)<=1&&(I=m.height),{x:C.offsetLeft,y:C.offsetTop,width:S,height:I}}function _S(C,m){var S=m.getRootNode&&m.getRootNode();if(C.contains(m))return!0;if(S&&A1(S)){var I=m;do{if(I&&C.isSameNode(I))return!0;I=I.parentNode||I.host}while(I)}return!1}function Co(C){return mr(C).getComputedStyle(C)}function s$(C){return["table","td","th"].indexOf(Jr(C))>=0}function ra(C){return((hu(C)?C.ownerDocument:C.document)||window.document).documentElement}function dp(C){return Jr(C)==="html"?C:C.assignedSlot||C.parentNode||(A1(C)?C.host:null)||ra(C)}function TS(C){return Ts(C)&&Co(C).position!=="fixed"?C.offsetParent:null}function Gd(C){for(var m=mr(C),S=TS(C);S&&s$(S)&&Co(S).position==="static";)S=TS(S);return S&&(Jr(S)==="html"||Jr(S)==="body"&&Co(S).position==="static")?m:S||function(I){var G=/firefox/i.test(C1());if(/Trident/i.test(C1())&&Ts(I)&&Co(I).position==="fixed")return null;var H=dp(I);for(A1(H)&&(H=H.host);Ts(H)&&["html","body"].indexOf(Jr(H))<0;){var Q=Co(H);if(Q.transform!=="none"||Q.perspective!=="none"||Q.contain==="paint"||["transform","perspective"].indexOf(Q.willChange)!==-1||G&&Q.willChange==="filter"||G&&Q.filter&&Q.filter!=="none")return H;H=H.parentNode}return null}(C)||m}function _1(C){return["top","bottom"].indexOf(C)>=0?"x":"y"}function Hd(C,m,S){return pu(C,cp(m,S))}function IS(C){return Object.assign({},{top:0,right:0,bottom:0,left:0},C)}function kS(C,m){return m.reduce(function(S,I){return S[I]=C,S},{})}const RS={name:"arrow",enabled:!0,phase:"main",fn:function(C){var m,S=C.state,I=C.name,G=C.options,H=S.elements.arrow,Q=S.modifiersData.popperOffsets,re=Wi(S.placement),pe=_1(re),Se=[Ie,Ee].indexOf(re)>=0?"height":"width";if(H&&Q){var Ce=function(At,yt){return IS(typeof(At=typeof At=="function"?At(Object.assign({},yt.rects,{placement:yt.placement})):At)!="number"?At:kS(At,Je))}(G.padding,S),ve=N1(H),We=pe==="y"?le:Ie,Fe=pe==="y"?Re:Ee,Ve=S.rects.reference[Se]+S.rects.reference[pe]-Q[pe]-S.rects.popper[Se],$e=Q[pe]-S.rects.reference[pe],Ue=Gd(H),St=Ue?pe==="y"?Ue.clientHeight||0:Ue.clientWidth||0:0,Ot=Ve/2-$e/2,Ke=Ce[We],dt=St-ve[Se]-Ce[Fe],qe=St/2-ve[Se]/2+Ot,rt=Hd(Ke,qe,dt),gt=pe;S.modifiersData[I]=((m={})[gt]=rt,m.centerOffset=rt-qe,m)}},effect:function(C){var m=C.state,S=C.options.element,I=S===void 0?"[data-popper-arrow]":S;I!=null&&(typeof I!="string"||(I=m.elements.popper.querySelector(I)))&&_S(m.elements.popper,I)&&(m.elements.arrow=I)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Yl(C){return C.split("-")[1]}var i$={top:"auto",right:"auto",bottom:"auto",left:"auto"};function OS(C){var m,S=C.popper,I=C.popperRect,G=C.placement,H=C.variation,Q=C.offsets,re=C.position,pe=C.gpuAcceleration,Se=C.adaptive,Ce=C.roundOffsets,ve=C.isFixed,We=Q.x,Fe=We===void 0?0:We,Ve=Q.y,$e=Ve===void 0?0:Ve,Ue=typeof Ce=="function"?Ce({x:Fe,y:$e}):{x:Fe,y:$e};Fe=Ue.x,$e=Ue.y;var St=Q.hasOwnProperty("x"),Ot=Q.hasOwnProperty("y"),Ke=Ie,dt=le,qe=window;if(Se){var rt=Gd(S),gt="clientHeight",At="clientWidth";rt===mr(S)&&Co(rt=ra(S)).position!=="static"&&re==="absolute"&&(gt="scrollHeight",At="scrollWidth"),(G===le||(G===Ie||G===Ee)&&H===Xe)&&(dt=Re,$e-=(ve&&rt===qe&&qe.visualViewport?qe.visualViewport.height:rt[gt])-I.height,$e*=pe?1:-1),G!==Ie&&(G!==le&&G!==Re||H!==Xe)||(Ke=Ee,Fe-=(ve&&rt===qe&&qe.visualViewport?qe.visualViewport.width:rt[At])-I.width,Fe*=pe?1:-1)}var yt,on=Object.assign({position:re},Se&&i$),es=Ce===!0?function(ci,gr){var ks=ci.x,Rs=ci.y,tn=gr.devicePixelRatio||1;return{x:Kl(ks*tn)/tn||0,y:Kl(Rs*tn)/tn||0}}({x:Fe,y:$e},mr(S)):{x:Fe,y:$e};return Fe=es.x,$e=es.y,pe?Object.assign({},on,((yt={})[dt]=Ot?"0":"",yt[Ke]=St?"0":"",yt.transform=(qe.devicePixelRatio||1)<=1?"translate("+Fe+"px, "+$e+"px)":"translate3d("+Fe+"px, "+$e+"px, 0)",yt)):Object.assign({},on,((m={})[dt]=Ot?$e+"px":"",m[Ke]=St?Fe+"px":"",m.transform="",m))}const T1={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(C){var m=C.state,S=C.options,I=S.gpuAcceleration,G=I===void 0||I,H=S.adaptive,Q=H===void 0||H,re=S.roundOffsets,pe=re===void 0||re,Se={placement:Wi(m.placement),variation:Yl(m.placement),popper:m.elements.popper,popperRect:m.rects.popper,gpuAcceleration:G,isFixed:m.options.strategy==="fixed"};m.modifiersData.popperOffsets!=null&&(m.styles.popper=Object.assign({},m.styles.popper,OS(Object.assign({},Se,{offsets:m.modifiersData.popperOffsets,position:m.options.strategy,adaptive:Q,roundOffsets:pe})))),m.modifiersData.arrow!=null&&(m.styles.arrow=Object.assign({},m.styles.arrow,OS(Object.assign({},Se,{offsets:m.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:pe})))),m.attributes.popper=Object.assign({},m.attributes.popper,{"data-popper-placement":m.placement})},data:{}};var fp={passive:!0};const I1={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(C){var m=C.state,S=C.instance,I=C.options,G=I.scroll,H=G===void 0||G,Q=I.resize,re=Q===void 0||Q,pe=mr(m.elements.popper),Se=[].concat(m.scrollParents.reference,m.scrollParents.popper);return H&&Se.forEach(function(Ce){Ce.addEventListener("scroll",S.update,fp)}),re&&pe.addEventListener("resize",S.update,fp),function(){H&&Se.forEach(function(Ce){Ce.removeEventListener("scroll",S.update,fp)}),re&&pe.removeEventListener("resize",S.update,fp)}},data:{}};var o$={left:"right",right:"left",bottom:"top",top:"bottom"};function hp(C){return C.replace(/left|right|bottom|top/g,function(m){return o$[m]})}var a$={start:"end",end:"start"};function PS(C){return C.replace(/start|end/g,function(m){return a$[m]})}function k1(C){var m=mr(C);return{scrollLeft:m.pageXOffset,scrollTop:m.pageYOffset}}function R1(C){return Xl(ra(C)).left+k1(C).scrollLeft}function O1(C){var m=Co(C),S=m.overflow,I=m.overflowX,G=m.overflowY;return/auto|scroll|overlay|hidden/.test(S+G+I)}function DS(C){return["html","body","#document"].indexOf(Jr(C))>=0?C.ownerDocument.body:Ts(C)&&O1(C)?C:DS(dp(C))}function Kd(C,m){var S;m===void 0&&(m=[]);var I=DS(C),G=I===((S=C.ownerDocument)==null?void 0:S.body),H=mr(I),Q=G?[H].concat(H.visualViewport||[],O1(I)?I:[]):I,re=m.concat(Q);return G?re:re.concat(Kd(dp(Q)))}function P1(C){return Object.assign({},C,{left:C.x,top:C.y,right:C.x+C.width,bottom:C.y+C.height})}function LS(C,m,S){return m===zt?P1(function(I,G){var H=mr(I),Q=ra(I),re=H.visualViewport,pe=Q.clientWidth,Se=Q.clientHeight,Ce=0,ve=0;if(re){pe=re.width,Se=re.height;var We=NS();(We||!We&&G==="fixed")&&(Ce=re.offsetLeft,ve=re.offsetTop)}return{width:pe,height:Se,x:Ce+R1(I),y:ve}}(C,S)):hu(m)?function(I,G){var H=Xl(I,!1,G==="fixed");return H.top=H.top+I.clientTop,H.left=H.left+I.clientLeft,H.bottom=H.top+I.clientHeight,H.right=H.left+I.clientWidth,H.width=I.clientWidth,H.height=I.clientHeight,H.x=H.left,H.y=H.top,H}(m,S):P1(function(I){var G,H=ra(I),Q=k1(I),re=(G=I.ownerDocument)==null?void 0:G.body,pe=pu(H.scrollWidth,H.clientWidth,re?re.scrollWidth:0,re?re.clientWidth:0),Se=pu(H.scrollHeight,H.clientHeight,re?re.scrollHeight:0,re?re.clientHeight:0),Ce=-Q.scrollLeft+R1(I),ve=-Q.scrollTop;return Co(re||H).direction==="rtl"&&(Ce+=pu(H.clientWidth,re?re.clientWidth:0)-pe),{width:pe,height:Se,x:Ce,y:ve}}(ra(C)))}function FS(C){var m,S=C.reference,I=C.element,G=C.placement,H=G?Wi(G):null,Q=G?Yl(G):null,re=S.x+S.width/2-I.width/2,pe=S.y+S.height/2-I.height/2;switch(H){case le:m={x:re,y:S.y-I.height};break;case Re:m={x:re,y:S.y+S.height};break;case Ee:m={x:S.x+S.width,y:pe};break;case Ie:m={x:S.x-I.width,y:pe};break;default:m={x:S.x,y:S.y}}var Se=H?_1(H):null;if(Se!=null){var Ce=Se==="y"?"height":"width";switch(Q){case nt:m[Se]=m[Se]-(S[Ce]/2-I[Ce]/2);break;case Xe:m[Se]=m[Se]+(S[Ce]/2-I[Ce]/2)}}return m}function Ql(C,m){m===void 0&&(m={});var S=m,I=S.placement,G=I===void 0?C.placement:I,H=S.strategy,Q=H===void 0?C.strategy:H,re=S.boundary,pe=re===void 0?fn:re,Se=S.rootBoundary,Ce=Se===void 0?zt:Se,ve=S.elementContext,We=ve===void 0?Ns:ve,Fe=S.altBoundary,Ve=Fe!==void 0&&Fe,$e=S.padding,Ue=$e===void 0?0:$e,St=IS(typeof Ue!="number"?Ue:kS(Ue,Je)),Ot=We===Ns?ui:Ns,Ke=C.rects.popper,dt=C.elements[Ve?Ot:We],qe=function(gr,ks,Rs,tn){var qi=ks==="clippingParents"?function(It){var yr=Kd(dp(It)),Os=["absolute","fixed"].indexOf(Co(It).position)>=0&&Ts(It)?Gd(It):It;return hu(Os)?yr.filter(function(ia){return hu(ia)&&_S(ia,Os)&&Jr(ia)!=="body"}):[]}(gr):[].concat(ks),Gi=[].concat(qi,[Rs]),ec=Gi[0],Cn=Gi.reduce(function(It,yr){var Os=LS(gr,yr,tn);return It.top=pu(Os.top,It.top),It.right=cp(Os.right,It.right),It.bottom=cp(Os.bottom,It.bottom),It.left=pu(Os.left,It.left),It},LS(gr,ec,tn));return Cn.width=Cn.right-Cn.left,Cn.height=Cn.bottom-Cn.top,Cn.x=Cn.left,Cn.y=Cn.top,Cn}(hu(dt)?dt:dt.contextElement||ra(C.elements.popper),pe,Ce,Q),rt=Xl(C.elements.reference),gt=FS({reference:rt,element:Ke,strategy:"absolute",placement:G}),At=P1(Object.assign({},Ke,gt)),yt=We===Ns?At:rt,on={top:qe.top-yt.top+St.top,bottom:yt.bottom-qe.bottom+St.bottom,left:qe.left-yt.left+St.left,right:yt.right-qe.right+St.right},es=C.modifiersData.offset;if(We===Ns&&es){var ci=es[G];Object.keys(on).forEach(function(gr){var ks=[Ee,Re].indexOf(gr)>=0?1:-1,Rs=[le,Re].indexOf(gr)>=0?"y":"x";on[gr]+=ci[Rs]*ks})}return on}function u$(C,m){m===void 0&&(m={});var S=m,I=S.placement,G=S.boundary,H=S.rootBoundary,Q=S.padding,re=S.flipVariations,pe=S.allowedAutoPlacements,Se=pe===void 0?ji:pe,Ce=Yl(I),ve=Ce?re?zi:zi.filter(function(Ve){return Yl(Ve)===Ce}):Je,We=ve.filter(function(Ve){return Se.indexOf(Ve)>=0});We.length===0&&(We=ve);var Fe=We.reduce(function(Ve,$e){return Ve[$e]=Ql(C,{placement:$e,boundary:G,rootBoundary:H,padding:Q})[Wi($e)],Ve},{});return Object.keys(Fe).sort(function(Ve,$e){return Fe[Ve]-Fe[$e]})}const $S={name:"flip",enabled:!0,phase:"main",fn:function(C){var m=C.state,S=C.options,I=C.name;if(!m.modifiersData[I]._skip){for(var G=S.mainAxis,H=G===void 0||G,Q=S.altAxis,re=Q===void 0||Q,pe=S.fallbackPlacements,Se=S.padding,Ce=S.boundary,ve=S.rootBoundary,We=S.altBoundary,Fe=S.flipVariations,Ve=Fe===void 0||Fe,$e=S.allowedAutoPlacements,Ue=m.options.placement,St=Wi(Ue),Ot=pe||(St!==Ue&&Ve?function(It){if(Wi(It)===at)return[];var yr=hp(It);return[PS(It),yr,PS(yr)]}(Ue):[hp(Ue)]),Ke=[Ue].concat(Ot).reduce(function(It,yr){return It.concat(Wi(yr)===at?u$(m,{placement:yr,boundary:Ce,rootBoundary:ve,padding:Se,flipVariations:Ve,allowedAutoPlacements:$e}):yr)},[]),dt=m.rects.reference,qe=m.rects.popper,rt=new Map,gt=!0,At=Ke[0],yt=0;yt<Ke.length;yt++){var on=Ke[yt],es=Wi(on),ci=Yl(on)===nt,gr=[le,Re].indexOf(es)>=0,ks=gr?"width":"height",Rs=Ql(m,{placement:on,boundary:Ce,rootBoundary:ve,altBoundary:We,padding:Se}),tn=gr?ci?Ee:Ie:ci?Re:le;dt[ks]>qe[ks]&&(tn=hp(tn));var qi=hp(tn),Gi=[];if(H&&Gi.push(Rs[es]<=0),re&&Gi.push(Rs[tn]<=0,Rs[qi]<=0),Gi.every(function(It){return It})){At=on,gt=!1;break}rt.set(on,Gi)}if(gt)for(var ec=function(It){var yr=Ke.find(function(Os){var ia=rt.get(Os);if(ia)return ia.slice(0,It).every(function(Sp){return Sp})});if(yr)return At=yr,"break"},Cn=Ve?3:1;Cn>0&&ec(Cn)!=="break";Cn--);m.placement!==At&&(m.modifiersData[I]._skip=!0,m.placement=At,m.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function BS(C,m,S){return S===void 0&&(S={x:0,y:0}),{top:C.top-m.height-S.y,right:C.right-m.width+S.x,bottom:C.bottom-m.height+S.y,left:C.left-m.width-S.x}}function MS(C){return[le,Ee,Re,Ie].some(function(m){return C[m]>=0})}const VS={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(C){var m=C.state,S=C.name,I=m.rects.reference,G=m.rects.popper,H=m.modifiersData.preventOverflow,Q=Ql(m,{elementContext:"reference"}),re=Ql(m,{altBoundary:!0}),pe=BS(Q,I),Se=BS(re,G,H),Ce=MS(pe),ve=MS(Se);m.modifiersData[S]={referenceClippingOffsets:pe,popperEscapeOffsets:Se,isReferenceHidden:Ce,hasPopperEscaped:ve},m.attributes.popper=Object.assign({},m.attributes.popper,{"data-popper-reference-hidden":Ce,"data-popper-escaped":ve})}},US={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(C){var m=C.state,S=C.options,I=C.name,G=S.offset,H=G===void 0?[0,0]:G,Q=ji.reduce(function(Ce,ve){return Ce[ve]=function(We,Fe,Ve){var $e=Wi(We),Ue=[Ie,le].indexOf($e)>=0?-1:1,St=typeof Ve=="function"?Ve(Object.assign({},Fe,{placement:We})):Ve,Ot=St[0],Ke=St[1];return Ot=Ot||0,Ke=(Ke||0)*Ue,[Ie,Ee].indexOf($e)>=0?{x:Ke,y:Ot}:{x:Ot,y:Ke}}(ve,m.rects,H),Ce},{}),re=Q[m.placement],pe=re.x,Se=re.y;m.modifiersData.popperOffsets!=null&&(m.modifiersData.popperOffsets.x+=pe,m.modifiersData.popperOffsets.y+=Se),m.modifiersData[I]=Q}},D1={name:"popperOffsets",enabled:!0,phase:"read",fn:function(C){var m=C.state,S=C.name;m.modifiersData[S]=FS({reference:m.rects.reference,element:m.rects.popper,strategy:"absolute",placement:m.placement})},data:{}},zS={name:"preventOverflow",enabled:!0,phase:"main",fn:function(C){var m=C.state,S=C.options,I=C.name,G=S.mainAxis,H=G===void 0||G,Q=S.altAxis,re=Q!==void 0&&Q,pe=S.boundary,Se=S.rootBoundary,Ce=S.altBoundary,ve=S.padding,We=S.tether,Fe=We===void 0||We,Ve=S.tetherOffset,$e=Ve===void 0?0:Ve,Ue=Ql(m,{boundary:pe,rootBoundary:Se,padding:ve,altBoundary:Ce}),St=Wi(m.placement),Ot=Yl(m.placement),Ke=!Ot,dt=_1(St),qe=dt==="x"?"y":"x",rt=m.modifiersData.popperOffsets,gt=m.rects.reference,At=m.rects.popper,yt=typeof $e=="function"?$e(Object.assign({},m.rects,{placement:m.placement})):$e,on=typeof yt=="number"?{mainAxis:yt,altAxis:yt}:Object.assign({mainAxis:0,altAxis:0},yt),es=m.modifiersData.offset?m.modifiersData.offset[m.placement]:null,ci={x:0,y:0};if(rt){if(H){var gr,ks=dt==="y"?le:Ie,Rs=dt==="y"?Re:Ee,tn=dt==="y"?"height":"width",qi=rt[dt],Gi=qi+Ue[ks],ec=qi-Ue[Rs],Cn=Fe?-At[tn]/2:0,It=Ot===nt?gt[tn]:At[tn],yr=Ot===nt?-At[tn]:-gt[tn],Os=m.elements.arrow,ia=Fe&&Os?N1(Os):{width:0,height:0},Sp=m.modifiersData["arrow#persistent"]?m.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},TA=Sp[ks],IA=Sp[Rs],Ap=Hd(0,gt[tn],ia[tn]),$B=Ke?gt[tn]/2-Cn-Ap-TA-on.mainAxis:It-Ap-TA-on.mainAxis,BB=Ke?-gt[tn]/2+Cn+Ap+IA+on.mainAxis:yr+Ap+IA+on.mainAxis,H1=m.elements.arrow&&Gd(m.elements.arrow),MB=H1?dt==="y"?H1.clientTop||0:H1.clientLeft||0:0,kA=(gr=es==null?void 0:es[dt])!=null?gr:0,VB=qi+BB-kA,RA=Hd(Fe?cp(Gi,qi+$B-kA-MB):Gi,qi,Fe?pu(ec,VB):ec);rt[dt]=RA,ci[dt]=RA-qi}if(re){var OA,UB=dt==="x"?le:Ie,zB=dt==="x"?Re:Ee,Su=rt[qe],Ep=qe==="y"?"height":"width",PA=Su+Ue[UB],DA=Su-Ue[zB],K1=[le,Ie].indexOf(St)!==-1,LA=(OA=es==null?void 0:es[qe])!=null?OA:0,FA=K1?PA:Su-gt[Ep]-At[Ep]-LA+on.altAxis,$A=K1?Su+gt[Ep]+At[Ep]-LA-on.altAxis:DA,BA=Fe&&K1?function(jB,WB,X1){var MA=Hd(jB,WB,X1);return MA>X1?X1:MA}(FA,Su,$A):Hd(Fe?FA:PA,Su,Fe?$A:DA);rt[qe]=BA,ci[qe]=BA-Su}m.modifiersData[I]=ci}},requiresIfExists:["offset"]};function l$(C,m,S){S===void 0&&(S=!1);var I,G,H=Ts(m),Q=Ts(m)&&function(ve){var We=ve.getBoundingClientRect(),Fe=Kl(We.width)/ve.offsetWidth||1,Ve=Kl(We.height)/ve.offsetHeight||1;return Fe!==1||Ve!==1}(m),re=ra(m),pe=Xl(C,Q,S),Se={scrollLeft:0,scrollTop:0},Ce={x:0,y:0};return(H||!H&&!S)&&((Jr(m)!=="body"||O1(re))&&(Se=(I=m)!==mr(I)&&Ts(I)?{scrollLeft:(G=I).scrollLeft,scrollTop:G.scrollTop}:k1(I)),Ts(m)?((Ce=Xl(m,!0)).x+=m.clientLeft,Ce.y+=m.clientTop):re&&(Ce.x=R1(re))),{x:pe.left+Se.scrollLeft-Ce.x,y:pe.top+Se.scrollTop-Ce.y,width:pe.width,height:pe.height}}function c$(C){var m=new Map,S=new Set,I=[];function G(H){S.add(H.name),[].concat(H.requires||[],H.requiresIfExists||[]).forEach(function(Q){if(!S.has(Q)){var re=m.get(Q);re&&G(re)}}),I.push(H)}return C.forEach(function(H){m.set(H.name,H)}),C.forEach(function(H){S.has(H.name)||G(H)}),I}var jS={placement:"bottom",modifiers:[],strategy:"absolute"};function WS(){for(var C=arguments.length,m=new Array(C),S=0;S<C;S++)m[S]=arguments[S];return!m.some(function(I){return!(I&&typeof I.getBoundingClientRect=="function")})}function pp(C){C===void 0&&(C={});var m=C,S=m.defaultModifiers,I=S===void 0?[]:S,G=m.defaultOptions,H=G===void 0?jS:G;return function(Q,re,pe){pe===void 0&&(pe=H);var Se,Ce,ve={placement:"bottom",orderedModifiers:[],options:Object.assign({},jS,H),modifiersData:{},elements:{reference:Q,popper:re},attributes:{},styles:{}},We=[],Fe=!1,Ve={state:ve,setOptions:function(Ue){var St=typeof Ue=="function"?Ue(ve.options):Ue;$e(),ve.options=Object.assign({},H,ve.options,St),ve.scrollParents={reference:hu(Q)?Kd(Q):Q.contextElement?Kd(Q.contextElement):[],popper:Kd(re)};var Ot,Ke,dt=function(qe){var rt=c$(qe);return _s.reduce(function(gt,At){return gt.concat(rt.filter(function(yt){return yt.phase===At}))},[])}((Ot=[].concat(I,ve.options.modifiers),Ke=Ot.reduce(function(qe,rt){var gt=qe[rt.name];return qe[rt.name]=gt?Object.assign({},gt,rt,{options:Object.assign({},gt.options,rt.options),data:Object.assign({},gt.data,rt.data)}):rt,qe},{}),Object.keys(Ke).map(function(qe){return Ke[qe]})));return ve.orderedModifiers=dt.filter(function(qe){return qe.enabled}),ve.orderedModifiers.forEach(function(qe){var rt=qe.name,gt=qe.options,At=gt===void 0?{}:gt,yt=qe.effect;if(typeof yt=="function"){var on=yt({state:ve,name:rt,instance:Ve,options:At});We.push(on||function(){})}}),Ve.update()},forceUpdate:function(){if(!Fe){var Ue=ve.elements,St=Ue.reference,Ot=Ue.popper;if(WS(St,Ot)){ve.rects={reference:l$(St,Gd(Ot),ve.options.strategy==="fixed"),popper:N1(Ot)},ve.reset=!1,ve.placement=ve.options.placement,ve.orderedModifiers.forEach(function(yt){return ve.modifiersData[yt.name]=Object.assign({},yt.data)});for(var Ke=0;Ke<ve.orderedModifiers.length;Ke++)if(ve.reset!==!0){var dt=ve.orderedModifiers[Ke],qe=dt.fn,rt=dt.options,gt=rt===void 0?{}:rt,At=dt.name;typeof qe=="function"&&(ve=qe({state:ve,options:gt,name:At,instance:Ve})||ve)}else ve.reset=!1,Ke=-1}}},update:(Se=function(){return new Promise(function(Ue){Ve.forceUpdate(),Ue(ve)})},function(){return Ce||(Ce=new Promise(function(Ue){Promise.resolve().then(function(){Ce=void 0,Ue(Se())})})),Ce}),destroy:function(){$e(),Fe=!0}};if(!WS(Q,re))return Ve;function $e(){We.forEach(function(Ue){return Ue()}),We=[]}return Ve.setOptions(pe).then(function(Ue){!Fe&&pe.onFirstUpdate&&pe.onFirstUpdate(Ue)}),Ve}}var d$=pp(),f$=pp({defaultModifiers:[I1,D1,T1,E1]}),L1=pp({defaultModifiers:[I1,D1,T1,E1,US,$S,zS,RS,VS]});const qS=Object.freeze(Object.defineProperty({__proto__:null,afterMain:ze,afterRead:cu,afterWrite:Tt,applyStyles:E1,arrow:RS,auto:at,basePlacements:Je,beforeMain:du,beforeRead:Eo,beforeWrite:Mt,bottom:Re,clippingParents:fn,computeStyles:T1,createPopper:L1,createPopperBase:d$,createPopperLite:f$,detectOverflow:Ql,end:Xe,eventListeners:I1,flip:$S,hide:VS,left:Ie,main:fu,modifierPhases:_s,offset:US,placements:ji,popper:Ns,popperGenerator:pp,popperOffsets:D1,preventOverflow:zS,read:Zr,reference:ui,right:Ee,start:nt,top:le,variationPlacements:zi,viewport:zt,write:Yn},Symbol.toStringTag,{value:"Module"})),GS="dropdown",mu=".bs.dropdown",F1=".data-api",h$="ArrowUp",HS="ArrowDown",p$=`hide${mu}`,m$=`hidden${mu}`,g$=`show${mu}`,y$=`shown${mu}`,KS=`click${mu}${F1}`,XS=`keydown${mu}${F1}`,b$=`keyup${mu}${F1}`,Zl="show",gu='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',v$=`${gu}.${Zl}`,mp=".dropdown-menu",w$=b()?"top-end":"top-start",x$=b()?"top-start":"top-end",S$=b()?"bottom-end":"bottom-start",A$=b()?"bottom-start":"bottom-end",E$=b()?"left-start":"right-start",C$=b()?"right-start":"left-start",N$={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},_$={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class li extends Te{constructor(m,S){super(m,S),this._popper=null,this._parent=this._element.parentNode,this._menu=we.next(this._element,mp)[0]||we.prev(this._element,mp)[0]||we.findOne(mp,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return N$}static get DefaultType(){return _$}static get NAME(){return GS}toggle(){return this._isShown()?this.hide():this.show()}show(){if(c(this._element)||this._isShown())return;const m={relatedTarget:this._element};if(!F.trigger(this._element,g$,m).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const S of[].concat(...document.body.children))F.on(S,"mouseover",f);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Zl),this._element.classList.add(Zl),F.trigger(this._element,y$,m)}}hide(){if(c(this._element)||!this._isShown())return;const m={relatedTarget:this._element};this._completeHide(m)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(m){if(!F.trigger(this._element,p$,m).defaultPrevented){if("ontouchstart"in document.documentElement)for(const S of[].concat(...document.body.children))F.off(S,"mouseover",f);this._popper&&this._popper.destroy(),this._menu.classList.remove(Zl),this._element.classList.remove(Zl),this._element.setAttribute("aria-expanded","false"),ae.removeDataAttribute(this._menu,"popper"),F.trigger(this._element,m$,m)}}_getConfig(m){if(typeof(m=super._getConfig(m)).reference=="object"&&!a(m.reference)&&typeof m.reference.getBoundingClientRect!="function")throw new TypeError(`${GS.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return m}_createPopper(){if(qS===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let m=this._element;this._config.reference==="parent"?m=this._parent:a(this._config.reference)?m=u(this._config.reference):typeof this._config.reference=="object"&&(m=this._config.reference);const S=this._getPopperConfig();this._popper=L1(m,this._menu,S)}_isShown(){return this._menu.classList.contains(Zl)}_getPlacement(){const m=this._parent;if(m.classList.contains("dropend"))return E$;if(m.classList.contains("dropstart"))return C$;if(m.classList.contains("dropup-center"))return"top";if(m.classList.contains("dropdown-center"))return"bottom";const S=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return m.classList.contains("dropup")?S?x$:w$:S?A$:S$}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:m}=this._config;return typeof m=="string"?m.split(",").map(S=>Number.parseInt(S,10)):typeof m=="function"?S=>m(S,this._element):m}_getPopperConfig(){const m={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(ae.setDataAttribute(this._menu,"popper","static"),m.modifiers=[{name:"applyStyles",enabled:!1}]),{...m,...v(this._config.popperConfig,[m])}}_selectMenuItem({key:m,target:S}){const I=we.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(G=>l(G));I.length&&x(I,S,m===HS,!I.includes(S)).focus()}static jQueryInterface(m){return this.each(function(){const S=li.getOrCreateInstance(this,m);if(typeof m=="string"){if(S[m]===void 0)throw new TypeError(`No method named "${m}"`);S[m]()}})}static clearMenus(m){if(m.button===2||m.type==="keyup"&&m.key!=="Tab")return;const S=we.find(v$);for(const I of S){const G=li.getInstance(I);if(!G||G._config.autoClose===!1)continue;const H=m.composedPath(),Q=H.includes(G._menu);if(H.includes(G._element)||G._config.autoClose==="inside"&&!Q||G._config.autoClose==="outside"&&Q||G._menu.contains(m.target)&&(m.type==="keyup"&&m.key==="Tab"||/input|select|option|textarea|form/i.test(m.target.tagName)))continue;const re={relatedTarget:G._element};m.type==="click"&&(re.clickEvent=m),G._completeHide(re)}}static dataApiKeydownHandler(m){const S=/input|textarea/i.test(m.target.tagName),I=m.key==="Escape",G=[h$,HS].includes(m.key);if(!G&&!I||S&&!I)return;m.preventDefault();const H=this.matches(gu)?this:we.prev(this,gu)[0]||we.next(this,gu)[0]||we.findOne(gu,m.delegateTarget.parentNode),Q=li.getOrCreateInstance(H);if(G)return m.stopPropagation(),Q.show(),void Q._selectMenuItem(m);Q._isShown()&&(m.stopPropagation(),Q.hide(),H.focus())}}F.on(document,XS,gu,li.dataApiKeydownHandler),F.on(document,XS,mp,li.dataApiKeydownHandler),F.on(document,KS,li.clearMenus),F.on(document,b$,li.clearMenus),F.on(document,KS,gu,function(C){C.preventDefault(),li.getOrCreateInstance(this).toggle()}),g(li);const YS="backdrop",QS="show",ZS=`mousedown.bs.${YS}`,T$={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},I$={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class JS extends be{constructor(m){super(),this._config=this._getConfig(m),this._isAppended=!1,this._element=null}static get Default(){return T$}static get DefaultType(){return I$}static get NAME(){return YS}show(m){if(!this._config.isVisible)return void v(m);this._append();const S=this._getElement();this._config.isAnimated&&h(S),S.classList.add(QS),this._emulateAnimation(()=>{v(m)})}hide(m){this._config.isVisible?(this._getElement().classList.remove(QS),this._emulateAnimation(()=>{this.dispose(),v(m)})):v(m)}dispose(){this._isAppended&&(F.off(this._element,ZS),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const m=document.createElement("div");m.className=this._config.className,this._config.isAnimated&&m.classList.add("fade"),this._element=m}return this._element}_configAfterMerge(m){return m.rootElement=u(m.rootElement),m}_append(){if(this._isAppended)return;const m=this._getElement();this._config.rootElement.append(m),F.on(m,ZS,()=>{v(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(m){w(m,this._getElement(),this._config.isAnimated)}}const gp=".bs.focustrap",k$=`focusin${gp}`,R$=`keydown.tab${gp}`,eA="backward",O$={autofocus:!0,trapElement:null},P$={autofocus:"boolean",trapElement:"element"};class tA extends be{constructor(m){super(),this._config=this._getConfig(m),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return O$}static get DefaultType(){return P$}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),F.off(document,gp),F.on(document,k$,m=>this._handleFocusin(m)),F.on(document,R$,m=>this._handleKeydown(m)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,F.off(document,gp))}_handleFocusin(m){const{trapElement:S}=this._config;if(m.target===document||m.target===S||S.contains(m.target))return;const I=we.focusableChildren(S);I.length===0?S.focus():this._lastTabNavDirection===eA?I[I.length-1].focus():I[0].focus()}_handleKeydown(m){m.key==="Tab"&&(this._lastTabNavDirection=m.shiftKey?eA:"forward")}}const nA=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",rA=".sticky-top",yp="padding-right",sA="margin-right";class $1{constructor(){this._element=document.body}getWidth(){const m=document.documentElement.clientWidth;return Math.abs(window.innerWidth-m)}hide(){const m=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,yp,S=>S+m),this._setElementAttributes(nA,yp,S=>S+m),this._setElementAttributes(rA,sA,S=>S-m)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,yp),this._resetElementAttributes(nA,yp),this._resetElementAttributes(rA,sA)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(m,S,I){const G=this.getWidth();this._applyManipulationCallback(m,H=>{if(H!==this._element&&window.innerWidth>H.clientWidth+G)return;this._saveInitialAttribute(H,S);const Q=window.getComputedStyle(H).getPropertyValue(S);H.style.setProperty(S,`${I(Number.parseFloat(Q))}px`)})}_saveInitialAttribute(m,S){const I=m.style.getPropertyValue(S);I&&ae.setDataAttribute(m,S,I)}_resetElementAttributes(m,S){this._applyManipulationCallback(m,I=>{const G=ae.getDataAttribute(I,S);G!==null?(ae.removeDataAttribute(I,S),I.style.setProperty(S,G)):I.style.removeProperty(S)})}_applyManipulationCallback(m,S){if(a(m))S(m);else for(const I of we.find(m,this._element))S(I)}}const Is=".bs.modal",D$=`hide${Is}`,L$=`hidePrevented${Is}`,iA=`hidden${Is}`,oA=`show${Is}`,F$=`shown${Is}`,$$=`resize${Is}`,B$=`click.dismiss${Is}`,M$=`mousedown.dismiss${Is}`,V$=`keydown.dismiss${Is}`,U$=`click${Is}.data-api`,aA="modal-open",uA="show",B1="modal-static",z$={backdrop:!0,focus:!0,keyboard:!0},j$={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class yu extends Te{constructor(m,S){super(m,S),this._dialog=we.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new $1,this._addEventListeners()}static get Default(){return z$}static get DefaultType(){return j$}static get NAME(){return"modal"}toggle(m){return this._isShown?this.hide():this.show(m)}show(m){this._isShown||this._isTransitioning||F.trigger(this._element,oA,{relatedTarget:m}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(aA),this._adjustDialog(),this._backdrop.show(()=>this._showElement(m)))}hide(){this._isShown&&!this._isTransitioning&&(F.trigger(this._element,D$).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(uA),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){F.off(window,Is),F.off(this._dialog,Is),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new JS({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new tA({trapElement:this._element})}_showElement(m){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const S=we.findOne(".modal-body",this._dialog);S&&(S.scrollTop=0),h(this._element),this._element.classList.add(uA),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,F.trigger(this._element,F$,{relatedTarget:m})},this._dialog,this._isAnimated())}_addEventListeners(){F.on(this._element,V$,m=>{m.key==="Escape"&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),F.on(window,$$,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),F.on(this._element,M$,m=>{F.one(this._element,B$,S=>{this._element===m.target&&this._element===S.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(aA),this._resetAdjustments(),this._scrollBar.reset(),F.trigger(this._element,iA)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(F.trigger(this._element,L$).defaultPrevented)return;const m=this._element.scrollHeight>document.documentElement.clientHeight,S=this._element.style.overflowY;S==="hidden"||this._element.classList.contains(B1)||(m||(this._element.style.overflowY="hidden"),this._element.classList.add(B1),this._queueCallback(()=>{this._element.classList.remove(B1),this._queueCallback(()=>{this._element.style.overflowY=S},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const m=this._element.scrollHeight>document.documentElement.clientHeight,S=this._scrollBar.getWidth(),I=S>0;if(I&&!m){const G=b()?"paddingLeft":"paddingRight";this._element.style[G]=`${S}px`}if(!I&&m){const G=b()?"paddingRight":"paddingLeft";this._element.style[G]=`${S}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(m,S){return this.each(function(){const I=yu.getOrCreateInstance(this,m);if(typeof m=="string"){if(I[m]===void 0)throw new TypeError(`No method named "${m}"`);I[m](S)}})}}F.on(document,U$,'[data-bs-toggle="modal"]',function(C){const m=we.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&C.preventDefault(),F.one(m,oA,I=>{I.defaultPrevented||F.one(m,iA,()=>{l(this)&&this.focus()})});const S=we.findOne(".modal.show");S&&yu.getInstance(S).hide(),yu.getOrCreateInstance(m).toggle(this)}),Kn(yu),g(yu);const No=".bs.offcanvas",lA=".data-api",W$=`load${No}${lA}`,cA="show",dA="showing",fA="hiding",hA=".offcanvas.show",q$=`show${No}`,G$=`shown${No}`,H$=`hide${No}`,pA=`hidePrevented${No}`,mA=`hidden${No}`,K$=`resize${No}`,X$=`click${No}${lA}`,Y$=`keydown.dismiss${No}`,Q$={backdrop:!0,keyboard:!0,scroll:!1},Z$={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class _o extends Te{constructor(m,S){super(m,S),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Q$}static get DefaultType(){return Z$}static get NAME(){return"offcanvas"}toggle(m){return this._isShown?this.hide():this.show(m)}show(m){this._isShown||F.trigger(this._element,q$,{relatedTarget:m}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new $1().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(dA),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(cA),this._element.classList.remove(dA),F.trigger(this._element,G$,{relatedTarget:m})},this._element,!0))}hide(){this._isShown&&(F.trigger(this._element,H$).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(fA),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(cA,fA),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new $1().reset(),F.trigger(this._element,mA)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const m=!!this._config.backdrop;return new JS({className:"offcanvas-backdrop",isVisible:m,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:m?()=>{this._config.backdrop!=="static"?this.hide():F.trigger(this._element,pA)}:null})}_initializeFocusTrap(){return new tA({trapElement:this._element})}_addEventListeners(){F.on(this._element,Y$,m=>{m.key==="Escape"&&(this._config.keyboard?this.hide():F.trigger(this._element,pA))})}static jQueryInterface(m){return this.each(function(){const S=_o.getOrCreateInstance(this,m);if(typeof m=="string"){if(S[m]===void 0||m.startsWith("_")||m==="constructor")throw new TypeError(`No method named "${m}"`);S[m](this)}})}}F.on(document,X$,'[data-bs-toggle="offcanvas"]',function(C){const m=we.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&C.preventDefault(),c(this))return;F.one(m,mA,()=>{l(this)&&this.focus()});const S=we.findOne(hA);S&&S!==m&&_o.getInstance(S).hide(),_o.getOrCreateInstance(m).toggle(this)}),F.on(window,W$,()=>{for(const C of we.find(hA))_o.getOrCreateInstance(C).show()}),F.on(window,K$,()=>{for(const C of we.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(C).position!=="fixed"&&_o.getOrCreateInstance(C).hide()}),Kn(_o),g(_o);const gA={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},J$=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),eB=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,tB=(C,m)=>{const S=C.nodeName.toLowerCase();return m.includes(S)?!J$.has(S)||!!eB.test(C.nodeValue):m.filter(I=>I instanceof RegExp).some(I=>I.test(S))},nB={allowList:gA,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},rB={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},sB={entry:"(string|element|function|null)",selector:"(string|element)"};class iB extends be{constructor(m){super(),this._config=this._getConfig(m)}static get Default(){return nB}static get DefaultType(){return rB}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(m=>this._resolvePossibleFunction(m)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(m){return this._checkContent(m),this._config.content={...this._config.content,...m},this}toHtml(){const m=document.createElement("div");m.innerHTML=this._maybeSanitize(this._config.template);for(const[G,H]of Object.entries(this._config.content))this._setContent(m,H,G);const S=m.children[0],I=this._resolvePossibleFunction(this._config.extraClass);return I&&S.classList.add(...I.split(" ")),S}_typeCheckConfig(m){super._typeCheckConfig(m),this._checkContent(m.content)}_checkContent(m){for(const[S,I]of Object.entries(m))super._typeCheckConfig({selector:S,entry:I},sB)}_setContent(m,S,I){const G=we.findOne(I,m);G&&((S=this._resolvePossibleFunction(S))?a(S)?this._putElementInTemplate(u(S),G):this._config.html?G.innerHTML=this._maybeSanitize(S):G.textContent=S:G.remove())}_maybeSanitize(m){return this._config.sanitize?function(S,I,G){if(!S.length)return S;if(G&&typeof G=="function")return G(S);const H=new window.DOMParser().parseFromString(S,"text/html"),Q=[].concat(...H.body.querySelectorAll("*"));for(const re of Q){const pe=re.nodeName.toLowerCase();if(!Object.keys(I).includes(pe)){re.remove();continue}const Se=[].concat(...re.attributes),Ce=[].concat(I["*"]||[],I[pe]||[]);for(const ve of Se)tB(ve,Ce)||re.removeAttribute(ve.nodeName)}return H.body.innerHTML}(m,this._config.allowList,this._config.sanitizeFn):m}_resolvePossibleFunction(m){return v(m,[this])}_putElementInTemplate(m,S){if(this._config.html)return S.innerHTML="",void S.append(m);S.textContent=m.textContent}}const oB=new Set(["sanitize","allowList","sanitizeFn"]),M1="fade",bp="show",yA=".modal",bA="hide.bs.modal",Xd="hover",V1="focus",aB={AUTO:"auto",TOP:"top",RIGHT:b()?"left":"right",BOTTOM:"bottom",LEFT:b()?"right":"left"},uB={allowList:gA,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},lB={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class bu extends Te{constructor(m,S){if(qS===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(m,S),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return uB}static get DefaultType(){return lB}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),F.off(this._element.closest(yA),bA,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const m=F.trigger(this._element,this.constructor.eventName("show")),S=(d(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(m.defaultPrevented||!S)return;this._disposePopper();const I=this._getTipElement();this._element.setAttribute("aria-describedby",I.getAttribute("id"));const{container:G}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(G.append(I),F.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(I),I.classList.add(bp),"ontouchstart"in document.documentElement)for(const H of[].concat(...document.body.children))F.on(H,"mouseover",f);this._queueCallback(()=>{F.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!F.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(bp),"ontouchstart"in document.documentElement)for(const m of[].concat(...document.body.children))F.off(m,"mouseover",f);this._activeTrigger.click=!1,this._activeTrigger[V1]=!1,this._activeTrigger[Xd]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),F.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(m){const S=this._getTemplateFactory(m).toHtml();if(!S)return null;S.classList.remove(M1,bp),S.classList.add(`bs-${this.constructor.NAME}-auto`);const I=(G=>{do G+=Math.floor(1e6*Math.random());while(document.getElementById(G));return G})(this.constructor.NAME).toString();return S.setAttribute("id",I),this._isAnimated()&&S.classList.add(M1),S}setContent(m){this._newContent=m,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(m){return this._templateFactory?this._templateFactory.changeContent(m):this._templateFactory=new iB({...this._config,content:m,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(m){return this.constructor.getOrCreateInstance(m.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(M1)}_isShown(){return this.tip&&this.tip.classList.contains(bp)}_createPopper(m){const S=v(this._config.placement,[this,m,this._element]),I=aB[S.toUpperCase()];return L1(this._element,m,this._getPopperConfig(I))}_getOffset(){const{offset:m}=this._config;return typeof m=="string"?m.split(",").map(S=>Number.parseInt(S,10)):typeof m=="function"?S=>m(S,this._element):m}_resolvePossibleFunction(m){return v(m,[this._element])}_getPopperConfig(m){const S={placement:m,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:I=>{this._getTipElement().setAttribute("data-popper-placement",I.state.placement)}}]};return{...S,...v(this._config.popperConfig,[S])}}_setListeners(){const m=this._config.trigger.split(" ");for(const S of m)if(S==="click")F.on(this._element,this.constructor.eventName("click"),this._config.selector,I=>{this._initializeOnDelegatedTarget(I).toggle()});else if(S!=="manual"){const I=S===Xd?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),G=S===Xd?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");F.on(this._element,I,this._config.selector,H=>{const Q=this._initializeOnDelegatedTarget(H);Q._activeTrigger[H.type==="focusin"?V1:Xd]=!0,Q._enter()}),F.on(this._element,G,this._config.selector,H=>{const Q=this._initializeOnDelegatedTarget(H);Q._activeTrigger[H.type==="focusout"?V1:Xd]=Q._element.contains(H.relatedTarget),Q._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},F.on(this._element.closest(yA),bA,this._hideModalHandler)}_fixTitle(){const m=this._element.getAttribute("title");m&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",m),this._element.setAttribute("data-bs-original-title",m),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(m,S){clearTimeout(this._timeout),this._timeout=setTimeout(m,S)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(m){const S=ae.getDataAttributes(this._element);for(const I of Object.keys(S))oB.has(I)&&delete S[I];return m={...S,...typeof m=="object"&&m?m:{}},m=this._mergeConfigObj(m),m=this._configAfterMerge(m),this._typeCheckConfig(m),m}_configAfterMerge(m){return m.container=m.container===!1?document.body:u(m.container),typeof m.delay=="number"&&(m.delay={show:m.delay,hide:m.delay}),typeof m.title=="number"&&(m.title=m.title.toString()),typeof m.content=="number"&&(m.content=m.content.toString()),m}_getDelegateConfig(){const m={};for(const[S,I]of Object.entries(this._config))this.constructor.Default[S]!==I&&(m[S]=I);return m.selector=!1,m.trigger="manual",m}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(m){return this.each(function(){const S=bu.getOrCreateInstance(this,m);if(typeof m=="string"){if(S[m]===void 0)throw new TypeError(`No method named "${m}"`);S[m]()}})}}g(bu);const cB={...bu.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},dB={...bu.DefaultType,content:"(null|string|element|function)"};class vp extends bu{static get Default(){return cB}static get DefaultType(){return dB}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(m){return this.each(function(){const S=vp.getOrCreateInstance(this,m);if(typeof m=="string"){if(S[m]===void 0)throw new TypeError(`No method named "${m}"`);S[m]()}})}}g(vp);const U1=".bs.scrollspy",fB=`activate${U1}`,vA=`click${U1}`,hB=`load${U1}.data-api`,Jl="active",z1="[href]",wA=".nav-link",pB=`${wA}, .nav-item > ${wA}, .list-group-item`,mB={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},gB={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Yd extends Te{constructor(m,S){super(m,S),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return mB}static get DefaultType(){return gB}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const m of this._observableSections.values())this._observer.observe(m)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(m){return m.target=u(m.target)||document.body,m.rootMargin=m.offset?`${m.offset}px 0px -30%`:m.rootMargin,typeof m.threshold=="string"&&(m.threshold=m.threshold.split(",").map(S=>Number.parseFloat(S))),m}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(F.off(this._config.target,vA),F.on(this._config.target,vA,z1,m=>{const S=this._observableSections.get(m.target.hash);if(S){m.preventDefault();const I=this._rootElement||window,G=S.offsetTop-this._element.offsetTop;if(I.scrollTo)return void I.scrollTo({top:G,behavior:"smooth"});I.scrollTop=G}}))}_getNewObserver(){const m={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(S=>this._observerCallback(S),m)}_observerCallback(m){const S=Q=>this._targetLinks.get(`#${Q.target.id}`),I=Q=>{this._previousScrollData.visibleEntryTop=Q.target.offsetTop,this._process(S(Q))},G=(this._rootElement||document.documentElement).scrollTop,H=G>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=G;for(const Q of m){if(!Q.isIntersecting){this._activeTarget=null,this._clearActiveClass(S(Q));continue}const re=Q.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(H&&re){if(I(Q),!G)return}else H||re||I(Q)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const m=we.find(z1,this._config.target);for(const S of m){if(!S.hash||c(S))continue;const I=we.findOne(decodeURI(S.hash),this._element);l(I)&&(this._targetLinks.set(decodeURI(S.hash),S),this._observableSections.set(S.hash,I))}}_process(m){this._activeTarget!==m&&(this._clearActiveClass(this._config.target),this._activeTarget=m,m.classList.add(Jl),this._activateParents(m),F.trigger(this._element,fB,{relatedTarget:m}))}_activateParents(m){if(m.classList.contains("dropdown-item"))we.findOne(".dropdown-toggle",m.closest(".dropdown")).classList.add(Jl);else for(const S of we.parents(m,".nav, .list-group"))for(const I of we.prev(S,pB))I.classList.add(Jl)}_clearActiveClass(m){m.classList.remove(Jl);const S=we.find(`${z1}.${Jl}`,m);for(const I of S)I.classList.remove(Jl)}static jQueryInterface(m){return this.each(function(){const S=Yd.getOrCreateInstance(this,m);if(typeof m=="string"){if(S[m]===void 0||m.startsWith("_")||m==="constructor")throw new TypeError(`No method named "${m}"`);S[m]()}})}}F.on(window,hB,()=>{for(const C of we.find('[data-bs-spy="scroll"]'))Yd.getOrCreateInstance(C)}),g(Yd);const vu=".bs.tab",yB=`hide${vu}`,bB=`hidden${vu}`,vB=`show${vu}`,wB=`shown${vu}`,xB=`click${vu}`,SB=`keydown${vu}`,AB=`load${vu}`,EB="ArrowLeft",xA="ArrowRight",CB="ArrowUp",SA="ArrowDown",j1="Home",AA="End",wu="active",EA="fade",W1="show",CA=".dropdown-toggle",q1=`:not(${CA})`,NA='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',G1=`.nav-link${q1}, .list-group-item${q1}, [role="tab"]${q1}, ${NA}`,NB=`.${wu}[data-bs-toggle="tab"], .${wu}[data-bs-toggle="pill"], .${wu}[data-bs-toggle="list"]`;class xu extends Te{constructor(m){super(m),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),F.on(this._element,SB,S=>this._keydown(S)))}static get NAME(){return"tab"}show(){const m=this._element;if(this._elemIsActive(m))return;const S=this._getActiveElem(),I=S?F.trigger(S,yB,{relatedTarget:m}):null;F.trigger(m,vB,{relatedTarget:S}).defaultPrevented||I&&I.defaultPrevented||(this._deactivate(S,m),this._activate(m,S))}_activate(m,S){m&&(m.classList.add(wu),this._activate(we.getElementFromSelector(m)),this._queueCallback(()=>{m.getAttribute("role")==="tab"?(m.removeAttribute("tabindex"),m.setAttribute("aria-selected",!0),this._toggleDropDown(m,!0),F.trigger(m,wB,{relatedTarget:S})):m.classList.add(W1)},m,m.classList.contains(EA)))}_deactivate(m,S){m&&(m.classList.remove(wu),m.blur(),this._deactivate(we.getElementFromSelector(m)),this._queueCallback(()=>{m.getAttribute("role")==="tab"?(m.setAttribute("aria-selected",!1),m.setAttribute("tabindex","-1"),this._toggleDropDown(m,!1),F.trigger(m,bB,{relatedTarget:S})):m.classList.remove(W1)},m,m.classList.contains(EA)))}_keydown(m){if(![EB,xA,CB,SA,j1,AA].includes(m.key))return;m.stopPropagation(),m.preventDefault();const S=this._getChildren().filter(G=>!c(G));let I;if([j1,AA].includes(m.key))I=S[m.key===j1?0:S.length-1];else{const G=[xA,SA].includes(m.key);I=x(S,m.target,G,!0)}I&&(I.focus({preventScroll:!0}),xu.getOrCreateInstance(I).show())}_getChildren(){return we.find(G1,this._parent)}_getActiveElem(){return this._getChildren().find(m=>this._elemIsActive(m))||null}_setInitialAttributes(m,S){this._setAttributeIfNotExists(m,"role","tablist");for(const I of S)this._setInitialAttributesOnChild(I)}_setInitialAttributesOnChild(m){m=this._getInnerElement(m);const S=this._elemIsActive(m),I=this._getOuterElement(m);m.setAttribute("aria-selected",S),I!==m&&this._setAttributeIfNotExists(I,"role","presentation"),S||m.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(m,"role","tab"),this._setInitialAttributesOnTargetPanel(m)}_setInitialAttributesOnTargetPanel(m){const S=we.getElementFromSelector(m);S&&(this._setAttributeIfNotExists(S,"role","tabpanel"),m.id&&this._setAttributeIfNotExists(S,"aria-labelledby",`${m.id}`))}_toggleDropDown(m,S){const I=this._getOuterElement(m);if(!I.classList.contains("dropdown"))return;const G=(H,Q)=>{const re=we.findOne(H,I);re&&re.classList.toggle(Q,S)};G(CA,wu),G(".dropdown-menu",W1),I.setAttribute("aria-expanded",S)}_setAttributeIfNotExists(m,S,I){m.hasAttribute(S)||m.setAttribute(S,I)}_elemIsActive(m){return m.classList.contains(wu)}_getInnerElement(m){return m.matches(G1)?m:we.findOne(G1,m)}_getOuterElement(m){return m.closest(".nav-item, .list-group-item")||m}static jQueryInterface(m){return this.each(function(){const S=xu.getOrCreateInstance(this);if(typeof m=="string"){if(S[m]===void 0||m.startsWith("_")||m==="constructor")throw new TypeError(`No method named "${m}"`);S[m]()}})}}F.on(document,xB,NA,function(C){["A","AREA"].includes(this.tagName)&&C.preventDefault(),c(this)||xu.getOrCreateInstance(this).show()}),F.on(window,AB,()=>{for(const C of we.find(NB))xu.getOrCreateInstance(C)}),g(xu);const sa=".bs.toast",_B=`mouseover${sa}`,TB=`mouseout${sa}`,IB=`focusin${sa}`,kB=`focusout${sa}`,RB=`hide${sa}`,OB=`hidden${sa}`,PB=`show${sa}`,DB=`shown${sa}`,_A="hide",wp="show",xp="showing",LB={animation:"boolean",autohide:"boolean",delay:"number"},FB={animation:!0,autohide:!0,delay:5e3};class Qd extends Te{constructor(m,S){super(m,S),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return FB}static get DefaultType(){return LB}static get NAME(){return"toast"}show(){F.trigger(this._element,PB).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(_A),h(this._element),this._element.classList.add(wp,xp),this._queueCallback(()=>{this._element.classList.remove(xp),F.trigger(this._element,DB),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(F.trigger(this._element,RB).defaultPrevented||(this._element.classList.add(xp),this._queueCallback(()=>{this._element.classList.add(_A),this._element.classList.remove(xp,wp),F.trigger(this._element,OB)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(wp),super.dispose()}isShown(){return this._element.classList.contains(wp)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(m,S){switch(m.type){case"mouseover":case"mouseout":this._hasMouseInteraction=S;break;case"focusin":case"focusout":this._hasKeyboardInteraction=S}if(S)return void this._clearTimeout();const I=m.relatedTarget;this._element===I||this._element.contains(I)||this._maybeScheduleHide()}_setListeners(){F.on(this._element,_B,m=>this._onInteraction(m,!0)),F.on(this._element,TB,m=>this._onInteraction(m,!1)),F.on(this._element,IB,m=>this._onInteraction(m,!0)),F.on(this._element,kB,m=>this._onInteraction(m,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(m){return this.each(function(){const S=Qd.getOrCreateInstance(this,m);if(typeof m=="string"){if(S[m]===void 0)throw new TypeError(`No method named "${m}"`);S[m](this)}})}}return Kn(Qd),g(Qd),{Alert:Cs,Button:En,Carousel:Ao,Collapse:Oe,Dropdown:li,Modal:yu,Offcanvas:_o,Popover:vp,ScrollSpy:Yd,Tab:xu,Toast:Qd,Tooltip:bu}})})(pM);var TT={exports:{}},ys={},IT={exports:{}},kT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(L,U){var F=L.length;L.push(U);e:for(;0<F;){var ue=F-1>>>1,se=L[ue];if(0<s(se,U))L[ue]=U,L[F]=se,F=ue;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var U=L[0],F=L.pop();if(F!==U){L[0]=F;e:for(var ue=0,se=L.length,he=se>>>1;ue<he;){var ae=2*(ue+1)-1,be=L[ae],Te=ae+1,ct=L[Te];if(0>s(be,F))Te<se&&0>s(ct,be)?(L[ue]=ct,L[Te]=F,ue=Te):(L[ue]=be,L[ae]=F,ue=ae);else if(Te<se&&0>s(ct,F))L[ue]=ct,L[Te]=F,ue=Te;else break e}}return U}function s(L,U){var F=L.sortIndex-U.sortIndex;return F!==0?F:L.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,d=null,f=3,h=!1,p=!1,y=!1,b=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(L){for(var U=n(l);U!==null;){if(U.callback===null)r(l);else if(U.startTime<=L)r(l),U.sortIndex=U.expirationTime,e(u,U);else break;U=n(l)}}function x(L){if(y=!1,w(L),!p)if(n(u)!==null)p=!0,V(N);else{var U=n(l);U!==null&&D(x,U.startTime-L)}}function N(L,U){p=!1,y&&(y=!1,g(_),_=-1),h=!0;var F=f;try{for(w(U),d=n(u);d!==null&&(!(d.expirationTime>U)||L&&!K());){var ue=d.callback;if(typeof ue=="function"){d.callback=null,f=d.priorityLevel;var se=ue(d.expirationTime<=U);U=t.unstable_now(),typeof se=="function"?d.callback=se:d===n(u)&&r(u),w(U)}else r(u);d=n(u)}if(d!==null)var he=!0;else{var ae=n(l);ae!==null&&D(x,ae.startTime-U),he=!1}return he}finally{d=null,f=F,h=!1}}var k=!1,O=null,_=-1,$=5,M=-1;function K(){return!(t.unstable_now()-M<$)}function Z(){if(O!==null){var L=t.unstable_now();M=L;var U=!0;try{U=O(!0,L)}finally{U?ie():(k=!1,O=null)}}else k=!1}var ie;if(typeof v=="function")ie=function(){v(Z)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,W=ee.port2;ee.port1.onmessage=Z,ie=function(){W.postMessage(null)}}else ie=function(){b(Z,0)};function V(L){O=L,k||(k=!0,ie())}function D(L,U){_=b(function(){L(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){p||h||(p=!0,V(N))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(L){switch(f){case 1:case 2:case 3:var U=3;break;default:U=f}var F=f;f=U;try{return L()}finally{f=F}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,U){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var F=f;f=L;try{return U()}finally{f=F}},t.unstable_scheduleCallback=function(L,U,F){var ue=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?ue+F:ue):F=ue,L){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=F+se,L={id:c++,callback:U,priorityLevel:L,startTime:F,expirationTime:se,sortIndex:-1},F>ue?(L.sortIndex=F,e(l,L),n(u)===null&&L===n(l)&&(y?(g(_),_=-1):y=!0,D(x,F-ue))):(L.sortIndex=se,e(u,L),p||h||(p=!0,V(N))),L},t.unstable_shouldYield=K,t.unstable_wrapCallback=function(L){var U=f;return function(){var F=f;f=U;try{return L.apply(this,arguments)}finally{f=F}}}})(kT);IT.exports=kT;var mM=IT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gM=P,hs=mM;function ce(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var RT=new Set,Jf={};function Al(t,e){Xc(t,e),Xc(t+"Capture",e)}function Xc(t,e){for(Jf[t]=e,t=0;t<e.length;t++)RT.add(e[t])}var jo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yb=Object.prototype.hasOwnProperty,yM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,jA={},WA={};function bM(t){return yb.call(WA,t)?!0:yb.call(jA,t)?!1:yM.test(t)?WA[t]=!0:(jA[t]=!0,!1)}function vM(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function wM(t,e,n,r){if(e===null||typeof e>"u"||vM(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Rr(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Gn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Gn[t]=new Rr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Gn[e]=new Rr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Gn[t]=new Rr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Gn[t]=new Rr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Gn[t]=new Rr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Gn[t]=new Rr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Gn[t]=new Rr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Gn[t]=new Rr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Gn[t]=new Rr(t,5,!1,t.toLowerCase(),null,!1,!1)});var $w=/[\-:]([a-z])/g;function Bw(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace($w,Bw);Gn[e]=new Rr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace($w,Bw);Gn[e]=new Rr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace($w,Bw);Gn[e]=new Rr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Gn[t]=new Rr(t,1,!1,t.toLowerCase(),null,!1,!1)});Gn.xlinkHref=new Rr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Gn[t]=new Rr(t,1,!1,t.toLowerCase(),null,!0,!0)});function Mw(t,e,n,r){var s=Gn.hasOwnProperty(e)?Gn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(wM(e,n,s,r)&&(n=null),r||s===null?bM(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Qo=gM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Np=Symbol.for("react.element"),mc=Symbol.for("react.portal"),gc=Symbol.for("react.fragment"),Vw=Symbol.for("react.strict_mode"),bb=Symbol.for("react.profiler"),OT=Symbol.for("react.provider"),PT=Symbol.for("react.context"),Uw=Symbol.for("react.forward_ref"),vb=Symbol.for("react.suspense"),wb=Symbol.for("react.suspense_list"),zw=Symbol.for("react.memo"),ma=Symbol.for("react.lazy"),DT=Symbol.for("react.offscreen"),qA=Symbol.iterator;function Zd(t){return t===null||typeof t!="object"?null:(t=qA&&t[qA]||t["@@iterator"],typeof t=="function"?t:null)}var Jt=Object.assign,Q1;function Af(t){if(Q1===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Q1=e&&e[1]||""}return`
`+Q1+t}var Z1=!1;function J1(t,e){if(!t||Z1)return"";Z1=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var s=l.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=a);break}}}finally{Z1=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Af(t):""}function xM(t){switch(t.tag){case 5:return Af(t.type);case 16:return Af("Lazy");case 13:return Af("Suspense");case 19:return Af("SuspenseList");case 0:case 2:case 15:return t=J1(t.type,!1),t;case 11:return t=J1(t.type.render,!1),t;case 1:return t=J1(t.type,!0),t;default:return""}}function xb(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case gc:return"Fragment";case mc:return"Portal";case bb:return"Profiler";case Vw:return"StrictMode";case vb:return"Suspense";case wb:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case PT:return(t.displayName||"Context")+".Consumer";case OT:return(t._context.displayName||"Context")+".Provider";case Uw:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case zw:return e=t.displayName||null,e!==null?e:xb(t.type)||"Memo";case ma:e=t._payload,t=t._init;try{return xb(t(e))}catch{}}return null}function SM(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xb(e);case 8:return e===Vw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function za(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function LT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function AM(t){var e=LT(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function _p(t){t._valueTracker||(t._valueTracker=AM(t))}function FT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=LT(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Qm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Sb(t,e){var n=e.checked;return Jt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function GA(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=za(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function $T(t,e){e=e.checked,e!=null&&Mw(t,"checked",e,!1)}function Ab(t,e){$T(t,e);var n=za(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Eb(t,e.type,n):e.hasOwnProperty("defaultValue")&&Eb(t,e.type,za(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function HA(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Eb(t,e,n){(e!=="number"||Qm(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ef=Array.isArray;function Dc(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+za(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Cb(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ce(91));return Jt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function KA(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ce(92));if(Ef(n)){if(1<n.length)throw Error(ce(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:za(n)}}function BT(t,e){var n=za(e.value),r=za(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function XA(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function MT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Nb(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?MT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Tp,VT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Tp=Tp||document.createElement("div"),Tp.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Tp.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function eh(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Mf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},EM=["Webkit","ms","Moz","O"];Object.keys(Mf).forEach(function(t){EM.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Mf[e]=Mf[t]})});function UT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Mf.hasOwnProperty(t)&&Mf[t]?(""+e).trim():e+"px"}function zT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=UT(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var CM=Jt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _b(t,e){if(e){if(CM[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ce(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ce(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ce(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ce(62))}}function Tb(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ib=null;function jw(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var kb=null,Lc=null,Fc=null;function YA(t){if(t=$h(t)){if(typeof kb!="function")throw Error(ce(280));var e=t.stateNode;e&&(e=fg(e),kb(t.stateNode,t.type,e))}}function jT(t){Lc?Fc?Fc.push(t):Fc=[t]:Lc=t}function WT(){if(Lc){var t=Lc,e=Fc;if(Fc=Lc=null,YA(t),e)for(t=0;t<e.length;t++)YA(e[t])}}function qT(t,e){return t(e)}function GT(){}var ey=!1;function HT(t,e,n){if(ey)return t(e,n);ey=!0;try{return qT(t,e,n)}finally{ey=!1,(Lc!==null||Fc!==null)&&(GT(),WT())}}function th(t,e){var n=t.stateNode;if(n===null)return null;var r=fg(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ce(231,e,typeof n));return n}var Rb=!1;if(jo)try{var Jd={};Object.defineProperty(Jd,"passive",{get:function(){Rb=!0}}),window.addEventListener("test",Jd,Jd),window.removeEventListener("test",Jd,Jd)}catch{Rb=!1}function NM(t,e,n,r,s,i,o,a,u){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(c){this.onError(c)}}var Vf=!1,Zm=null,Jm=!1,Ob=null,_M={onError:function(t){Vf=!0,Zm=t}};function TM(t,e,n,r,s,i,o,a,u){Vf=!1,Zm=null,NM.apply(_M,arguments)}function IM(t,e,n,r,s,i,o,a,u){if(TM.apply(this,arguments),Vf){if(Vf){var l=Zm;Vf=!1,Zm=null}else throw Error(ce(198));Jm||(Jm=!0,Ob=l)}}function El(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function KT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function QA(t){if(El(t)!==t)throw Error(ce(188))}function kM(t){var e=t.alternate;if(!e){if(e=El(t),e===null)throw Error(ce(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return QA(s),t;if(i===r)return QA(s),e;i=i.sibling}throw Error(ce(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(ce(189))}}if(n.alternate!==r)throw Error(ce(190))}if(n.tag!==3)throw Error(ce(188));return n.stateNode.current===n?t:e}function XT(t){return t=kM(t),t!==null?YT(t):null}function YT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=YT(t);if(e!==null)return e;t=t.sibling}return null}var QT=hs.unstable_scheduleCallback,ZA=hs.unstable_cancelCallback,RM=hs.unstable_shouldYield,OM=hs.unstable_requestPaint,un=hs.unstable_now,PM=hs.unstable_getCurrentPriorityLevel,Ww=hs.unstable_ImmediatePriority,ZT=hs.unstable_UserBlockingPriority,e0=hs.unstable_NormalPriority,DM=hs.unstable_LowPriority,JT=hs.unstable_IdlePriority,ug=null,oo=null;function LM(t){if(oo&&typeof oo.onCommitFiberRoot=="function")try{oo.onCommitFiberRoot(ug,t,void 0,(t.current.flags&128)===128)}catch{}}var Ii=Math.clz32?Math.clz32:BM,FM=Math.log,$M=Math.LN2;function BM(t){return t>>>=0,t===0?32:31-(FM(t)/$M|0)|0}var Ip=64,kp=4194304;function Cf(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function t0(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Cf(a):(i&=o,i!==0&&(r=Cf(i)))}else o=n&~s,o!==0?r=Cf(o):i!==0&&(r=Cf(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ii(e),s=1<<n,r|=t[n],e&=~s;return r}function MM(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function VM(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Ii(i),a=1<<o,u=s[o];u===-1?(!(a&n)||a&r)&&(s[o]=MM(a,e)):u<=e&&(t.expiredLanes|=a),i&=~a}}function Pb(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function eI(){var t=Ip;return Ip<<=1,!(Ip&4194240)&&(Ip=64),t}function ty(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Lh(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ii(e),t[e]=n}function UM(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Ii(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function qw(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ii(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var vt=0;function tI(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var nI,Gw,rI,sI,iI,Db=!1,Rp=[],ka=null,Ra=null,Oa=null,nh=new Map,rh=new Map,xa=[],zM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function JA(t,e){switch(t){case"focusin":case"focusout":ka=null;break;case"dragenter":case"dragleave":Ra=null;break;case"mouseover":case"mouseout":Oa=null;break;case"pointerover":case"pointerout":nh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":rh.delete(e.pointerId)}}function ef(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=$h(e),e!==null&&Gw(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function jM(t,e,n,r,s){switch(e){case"focusin":return ka=ef(ka,t,e,n,r,s),!0;case"dragenter":return Ra=ef(Ra,t,e,n,r,s),!0;case"mouseover":return Oa=ef(Oa,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return nh.set(i,ef(nh.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,rh.set(i,ef(rh.get(i)||null,t,e,n,r,s)),!0}return!1}function oI(t){var e=Uu(t.target);if(e!==null){var n=El(e);if(n!==null){if(e=n.tag,e===13){if(e=KT(n),e!==null){t.blockedOn=e,iI(t.priority,function(){rI(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function xm(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Lb(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ib=r,n.target.dispatchEvent(r),Ib=null}else return e=$h(n),e!==null&&Gw(e),t.blockedOn=n,!1;e.shift()}return!0}function eE(t,e,n){xm(t)&&n.delete(e)}function WM(){Db=!1,ka!==null&&xm(ka)&&(ka=null),Ra!==null&&xm(Ra)&&(Ra=null),Oa!==null&&xm(Oa)&&(Oa=null),nh.forEach(eE),rh.forEach(eE)}function tf(t,e){t.blockedOn===e&&(t.blockedOn=null,Db||(Db=!0,hs.unstable_scheduleCallback(hs.unstable_NormalPriority,WM)))}function sh(t){function e(s){return tf(s,t)}if(0<Rp.length){tf(Rp[0],t);for(var n=1;n<Rp.length;n++){var r=Rp[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ka!==null&&tf(ka,t),Ra!==null&&tf(Ra,t),Oa!==null&&tf(Oa,t),nh.forEach(e),rh.forEach(e),n=0;n<xa.length;n++)r=xa[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<xa.length&&(n=xa[0],n.blockedOn===null);)oI(n),n.blockedOn===null&&xa.shift()}var $c=Qo.ReactCurrentBatchConfig,n0=!0;function qM(t,e,n,r){var s=vt,i=$c.transition;$c.transition=null;try{vt=1,Hw(t,e,n,r)}finally{vt=s,$c.transition=i}}function GM(t,e,n,r){var s=vt,i=$c.transition;$c.transition=null;try{vt=4,Hw(t,e,n,r)}finally{vt=s,$c.transition=i}}function Hw(t,e,n,r){if(n0){var s=Lb(t,e,n,r);if(s===null)dy(t,e,r,r0,n),JA(t,r);else if(jM(s,t,e,n,r))r.stopPropagation();else if(JA(t,r),e&4&&-1<zM.indexOf(t)){for(;s!==null;){var i=$h(s);if(i!==null&&nI(i),i=Lb(t,e,n,r),i===null&&dy(t,e,r,r0,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else dy(t,e,r,null,n)}}var r0=null;function Lb(t,e,n,r){if(r0=null,t=jw(r),t=Uu(t),t!==null)if(e=El(t),e===null)t=null;else if(n=e.tag,n===13){if(t=KT(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return r0=t,null}function aI(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(PM()){case Ww:return 1;case ZT:return 4;case e0:case DM:return 16;case JT:return 536870912;default:return 16}default:return 16}}var Aa=null,Kw=null,Sm=null;function uI(){if(Sm)return Sm;var t,e=Kw,n=e.length,r,s="value"in Aa?Aa.value:Aa.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Sm=s.slice(t,1<r?1-r:void 0)}function Am(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Op(){return!0}function tE(){return!1}function bs(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Op:tE,this.isPropagationStopped=tE,this}return Jt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Op)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Op)},persist:function(){},isPersistent:Op}),e}var yd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xw=bs(yd),Fh=Jt({},yd,{view:0,detail:0}),HM=bs(Fh),ny,ry,nf,lg=Jt({},Fh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yw,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==nf&&(nf&&t.type==="mousemove"?(ny=t.screenX-nf.screenX,ry=t.screenY-nf.screenY):ry=ny=0,nf=t),ny)},movementY:function(t){return"movementY"in t?t.movementY:ry}}),nE=bs(lg),KM=Jt({},lg,{dataTransfer:0}),XM=bs(KM),YM=Jt({},Fh,{relatedTarget:0}),sy=bs(YM),QM=Jt({},yd,{animationName:0,elapsedTime:0,pseudoElement:0}),ZM=bs(QM),JM=Jt({},yd,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),e8=bs(JM),t8=Jt({},yd,{data:0}),rE=bs(t8),n8={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},r8={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},s8={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function i8(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=s8[t])?!!e[t]:!1}function Yw(){return i8}var o8=Jt({},Fh,{key:function(t){if(t.key){var e=n8[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Am(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?r8[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yw,charCode:function(t){return t.type==="keypress"?Am(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Am(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),a8=bs(o8),u8=Jt({},lg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sE=bs(u8),l8=Jt({},Fh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yw}),c8=bs(l8),d8=Jt({},yd,{propertyName:0,elapsedTime:0,pseudoElement:0}),f8=bs(d8),h8=Jt({},lg,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),p8=bs(h8),m8=[9,13,27,32],Qw=jo&&"CompositionEvent"in window,Uf=null;jo&&"documentMode"in document&&(Uf=document.documentMode);var g8=jo&&"TextEvent"in window&&!Uf,lI=jo&&(!Qw||Uf&&8<Uf&&11>=Uf),iE=" ",oE=!1;function cI(t,e){switch(t){case"keyup":return m8.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dI(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var yc=!1;function y8(t,e){switch(t){case"compositionend":return dI(e);case"keypress":return e.which!==32?null:(oE=!0,iE);case"textInput":return t=e.data,t===iE&&oE?null:t;default:return null}}function b8(t,e){if(yc)return t==="compositionend"||!Qw&&cI(t,e)?(t=uI(),Sm=Kw=Aa=null,yc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return lI&&e.locale!=="ko"?null:e.data;default:return null}}var v8={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function aE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!v8[t.type]:e==="textarea"}function fI(t,e,n,r){jT(r),e=s0(e,"onChange"),0<e.length&&(n=new Xw("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var zf=null,ih=null;function w8(t){AI(t,0)}function cg(t){var e=wc(t);if(FT(e))return t}function x8(t,e){if(t==="change")return e}var hI=!1;if(jo){var iy;if(jo){var oy="oninput"in document;if(!oy){var uE=document.createElement("div");uE.setAttribute("oninput","return;"),oy=typeof uE.oninput=="function"}iy=oy}else iy=!1;hI=iy&&(!document.documentMode||9<document.documentMode)}function lE(){zf&&(zf.detachEvent("onpropertychange",pI),ih=zf=null)}function pI(t){if(t.propertyName==="value"&&cg(ih)){var e=[];fI(e,ih,t,jw(t)),HT(w8,e)}}function S8(t,e,n){t==="focusin"?(lE(),zf=e,ih=n,zf.attachEvent("onpropertychange",pI)):t==="focusout"&&lE()}function A8(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return cg(ih)}function E8(t,e){if(t==="click")return cg(e)}function C8(t,e){if(t==="input"||t==="change")return cg(e)}function N8(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Pi=typeof Object.is=="function"?Object.is:N8;function oh(t,e){if(Pi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!yb.call(e,s)||!Pi(t[s],e[s]))return!1}return!0}function cE(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function dE(t,e){var n=cE(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cE(n)}}function mI(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?mI(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function gI(){for(var t=window,e=Qm();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Qm(t.document)}return e}function Zw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function _8(t){var e=gI(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&mI(n.ownerDocument.documentElement,n)){if(r!==null&&Zw(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=dE(n,i);var o=dE(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var T8=jo&&"documentMode"in document&&11>=document.documentMode,bc=null,Fb=null,jf=null,$b=!1;function fE(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;$b||bc==null||bc!==Qm(r)||(r=bc,"selectionStart"in r&&Zw(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),jf&&oh(jf,r)||(jf=r,r=s0(Fb,"onSelect"),0<r.length&&(e=new Xw("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=bc)))}function Pp(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var vc={animationend:Pp("Animation","AnimationEnd"),animationiteration:Pp("Animation","AnimationIteration"),animationstart:Pp("Animation","AnimationStart"),transitionend:Pp("Transition","TransitionEnd")},ay={},yI={};jo&&(yI=document.createElement("div").style,"AnimationEvent"in window||(delete vc.animationend.animation,delete vc.animationiteration.animation,delete vc.animationstart.animation),"TransitionEvent"in window||delete vc.transitionend.transition);function dg(t){if(ay[t])return ay[t];if(!vc[t])return t;var e=vc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in yI)return ay[t]=e[n];return t}var bI=dg("animationend"),vI=dg("animationiteration"),wI=dg("animationstart"),xI=dg("transitionend"),SI=new Map,hE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qa(t,e){SI.set(t,e),Al(e,[t])}for(var uy=0;uy<hE.length;uy++){var ly=hE[uy],I8=ly.toLowerCase(),k8=ly[0].toUpperCase()+ly.slice(1);Qa(I8,"on"+k8)}Qa(bI,"onAnimationEnd");Qa(vI,"onAnimationIteration");Qa(wI,"onAnimationStart");Qa("dblclick","onDoubleClick");Qa("focusin","onFocus");Qa("focusout","onBlur");Qa(xI,"onTransitionEnd");Xc("onMouseEnter",["mouseout","mouseover"]);Xc("onMouseLeave",["mouseout","mouseover"]);Xc("onPointerEnter",["pointerout","pointerover"]);Xc("onPointerLeave",["pointerout","pointerover"]);Al("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Al("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Al("onBeforeInput",["compositionend","keypress","textInput","paste"]);Al("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Al("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Al("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),R8=new Set("cancel close invalid load scroll toggle".split(" ").concat(Nf));function pE(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,IM(r,e,void 0,t),t.currentTarget=null}function AI(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==i&&s.isPropagationStopped())break e;pE(s,a,l),i=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,l=a.currentTarget,a=a.listener,u!==i&&s.isPropagationStopped())break e;pE(s,a,l),i=u}}}if(Jm)throw t=Ob,Jm=!1,Ob=null,t}function Vt(t,e){var n=e[zb];n===void 0&&(n=e[zb]=new Set);var r=t+"__bubble";n.has(r)||(EI(e,t,2,!1),n.add(r))}function cy(t,e,n){var r=0;e&&(r|=4),EI(n,t,r,e)}var Dp="_reactListening"+Math.random().toString(36).slice(2);function ah(t){if(!t[Dp]){t[Dp]=!0,RT.forEach(function(n){n!=="selectionchange"&&(R8.has(n)||cy(n,!1,t),cy(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Dp]||(e[Dp]=!0,cy("selectionchange",!1,e))}}function EI(t,e,n,r){switch(aI(e)){case 1:var s=qM;break;case 4:s=GM;break;default:s=Hw}n=s.bind(null,e,n,t),s=void 0,!Rb||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function dy(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Uu(a),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}a=a.parentNode}}r=r.return}HT(function(){var l=i,c=jw(n),d=[];e:{var f=SI.get(t);if(f!==void 0){var h=Xw,p=t;switch(t){case"keypress":if(Am(n)===0)break e;case"keydown":case"keyup":h=a8;break;case"focusin":p="focus",h=sy;break;case"focusout":p="blur",h=sy;break;case"beforeblur":case"afterblur":h=sy;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=nE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=XM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=c8;break;case bI:case vI:case wI:h=ZM;break;case xI:h=f8;break;case"scroll":h=HM;break;case"wheel":h=p8;break;case"copy":case"cut":case"paste":h=e8;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=sE}var y=(e&4)!==0,b=!y&&t==="scroll",g=y?f!==null?f+"Capture":null:f;y=[];for(var v=l,w;v!==null;){w=v;var x=w.stateNode;if(w.tag===5&&x!==null&&(w=x,g!==null&&(x=th(v,g),x!=null&&y.push(uh(v,x,w)))),b)break;v=v.return}0<y.length&&(f=new h(f,p,null,n,c),d.push({event:f,listeners:y}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",f&&n!==Ib&&(p=n.relatedTarget||n.fromElement)&&(Uu(p)||p[Wo]))break e;if((h||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?Uu(p):null,p!==null&&(b=El(p),p!==b||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(y=nE,x="onMouseLeave",g="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(y=sE,x="onPointerLeave",g="onPointerEnter",v="pointer"),b=h==null?f:wc(h),w=p==null?f:wc(p),f=new y(x,v+"leave",h,n,c),f.target=b,f.relatedTarget=w,x=null,Uu(c)===l&&(y=new y(g,v+"enter",p,n,c),y.target=w,y.relatedTarget=b,x=y),b=x,h&&p)t:{for(y=h,g=p,v=0,w=y;w;w=tc(w))v++;for(w=0,x=g;x;x=tc(x))w++;for(;0<v-w;)y=tc(y),v--;for(;0<w-v;)g=tc(g),w--;for(;v--;){if(y===g||g!==null&&y===g.alternate)break t;y=tc(y),g=tc(g)}y=null}else y=null;h!==null&&mE(d,f,h,y,!1),p!==null&&b!==null&&mE(d,b,p,y,!0)}}e:{if(f=l?wc(l):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var N=x8;else if(aE(f))if(hI)N=C8;else{N=A8;var k=S8}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(N=E8);if(N&&(N=N(t,l))){fI(d,N,n,c);break e}k&&k(t,f,l),t==="focusout"&&(k=f._wrapperState)&&k.controlled&&f.type==="number"&&Eb(f,"number",f.value)}switch(k=l?wc(l):window,t){case"focusin":(aE(k)||k.contentEditable==="true")&&(bc=k,Fb=l,jf=null);break;case"focusout":jf=Fb=bc=null;break;case"mousedown":$b=!0;break;case"contextmenu":case"mouseup":case"dragend":$b=!1,fE(d,n,c);break;case"selectionchange":if(T8)break;case"keydown":case"keyup":fE(d,n,c)}var O;if(Qw)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else yc?cI(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(lI&&n.locale!=="ko"&&(yc||_!=="onCompositionStart"?_==="onCompositionEnd"&&yc&&(O=uI()):(Aa=c,Kw="value"in Aa?Aa.value:Aa.textContent,yc=!0)),k=s0(l,_),0<k.length&&(_=new rE(_,t,null,n,c),d.push({event:_,listeners:k}),O?_.data=O:(O=dI(n),O!==null&&(_.data=O)))),(O=g8?y8(t,n):b8(t,n))&&(l=s0(l,"onBeforeInput"),0<l.length&&(c=new rE("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:l}),c.data=O))}AI(d,e)})}function uh(t,e,n){return{instance:t,listener:e,currentTarget:n}}function s0(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=th(t,n),i!=null&&r.unshift(uh(t,i,s)),i=th(t,e),i!=null&&r.push(uh(t,i,s))),t=t.return}return r}function tc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function mE(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&l!==null&&(a=l,s?(u=th(n,i),u!=null&&o.unshift(uh(n,u,a))):s||(u=th(n,i),u!=null&&o.push(uh(n,u,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var O8=/\r\n?/g,P8=/\u0000|\uFFFD/g;function gE(t){return(typeof t=="string"?t:""+t).replace(O8,`
`).replace(P8,"")}function Lp(t,e,n){if(e=gE(e),gE(t)!==e&&n)throw Error(ce(425))}function i0(){}var Bb=null,Mb=null;function Vb(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ub=typeof setTimeout=="function"?setTimeout:void 0,D8=typeof clearTimeout=="function"?clearTimeout:void 0,yE=typeof Promise=="function"?Promise:void 0,L8=typeof queueMicrotask=="function"?queueMicrotask:typeof yE<"u"?function(t){return yE.resolve(null).then(t).catch(F8)}:Ub;function F8(t){setTimeout(function(){throw t})}function fy(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),sh(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);sh(e)}function Pa(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function bE(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var bd=Math.random().toString(36).slice(2),Zi="__reactFiber$"+bd,lh="__reactProps$"+bd,Wo="__reactContainer$"+bd,zb="__reactEvents$"+bd,$8="__reactListeners$"+bd,B8="__reactHandles$"+bd;function Uu(t){var e=t[Zi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Wo]||n[Zi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=bE(t);t!==null;){if(n=t[Zi])return n;t=bE(t)}return e}t=n,n=t.parentNode}return null}function $h(t){return t=t[Zi]||t[Wo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function wc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ce(33))}function fg(t){return t[lh]||null}var jb=[],xc=-1;function Za(t){return{current:t}}function Ut(t){0>xc||(t.current=jb[xc],jb[xc]=null,xc--)}function Dt(t,e){xc++,jb[xc]=t.current,t.current=e}var ja={},cr=Za(ja),Wr=Za(!1),rl=ja;function Yc(t,e){var n=t.type.contextTypes;if(!n)return ja;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function qr(t){return t=t.childContextTypes,t!=null}function o0(){Ut(Wr),Ut(cr)}function vE(t,e,n){if(cr.current!==ja)throw Error(ce(168));Dt(cr,e),Dt(Wr,n)}function CI(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(ce(108,SM(t)||"Unknown",s));return Jt({},n,r)}function a0(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ja,rl=cr.current,Dt(cr,t),Dt(Wr,Wr.current),!0}function wE(t,e,n){var r=t.stateNode;if(!r)throw Error(ce(169));n?(t=CI(t,e,rl),r.__reactInternalMemoizedMergedChildContext=t,Ut(Wr),Ut(cr),Dt(cr,t)):Ut(Wr),Dt(Wr,n)}var Oo=null,hg=!1,hy=!1;function NI(t){Oo===null?Oo=[t]:Oo.push(t)}function M8(t){hg=!0,NI(t)}function Ja(){if(!hy&&Oo!==null){hy=!0;var t=0,e=vt;try{var n=Oo;for(vt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Oo=null,hg=!1}catch(s){throw Oo!==null&&(Oo=Oo.slice(t+1)),QT(Ww,Ja),s}finally{vt=e,hy=!1}}return null}var Sc=[],Ac=0,u0=null,l0=0,Ms=[],Vs=0,sl=null,Fo=1,$o="";function Ou(t,e){Sc[Ac++]=l0,Sc[Ac++]=u0,u0=t,l0=e}function _I(t,e,n){Ms[Vs++]=Fo,Ms[Vs++]=$o,Ms[Vs++]=sl,sl=t;var r=Fo;t=$o;var s=32-Ii(r)-1;r&=~(1<<s),n+=1;var i=32-Ii(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Fo=1<<32-Ii(e)+s|n<<s|r,$o=i+t}else Fo=1<<i|n<<s|r,$o=t}function Jw(t){t.return!==null&&(Ou(t,1),_I(t,1,0))}function ex(t){for(;t===u0;)u0=Sc[--Ac],Sc[Ac]=null,l0=Sc[--Ac],Sc[Ac]=null;for(;t===sl;)sl=Ms[--Vs],Ms[Vs]=null,$o=Ms[--Vs],Ms[Vs]=null,Fo=Ms[--Vs],Ms[Vs]=null}var cs=null,as=null,qt=!1,Ei=null;function TI(t,e){var n=Us(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function xE(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,cs=t,as=Pa(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,cs=t,as=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=sl!==null?{id:Fo,overflow:$o}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Us(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,cs=t,as=null,!0):!1;default:return!1}}function Wb(t){return(t.mode&1)!==0&&(t.flags&128)===0}function qb(t){if(qt){var e=as;if(e){var n=e;if(!xE(t,e)){if(Wb(t))throw Error(ce(418));e=Pa(n.nextSibling);var r=cs;e&&xE(t,e)?TI(r,n):(t.flags=t.flags&-4097|2,qt=!1,cs=t)}}else{if(Wb(t))throw Error(ce(418));t.flags=t.flags&-4097|2,qt=!1,cs=t}}}function SE(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;cs=t}function Fp(t){if(t!==cs)return!1;if(!qt)return SE(t),qt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Vb(t.type,t.memoizedProps)),e&&(e=as)){if(Wb(t))throw II(),Error(ce(418));for(;e;)TI(t,e),e=Pa(e.nextSibling)}if(SE(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ce(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){as=Pa(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}as=null}}else as=cs?Pa(t.stateNode.nextSibling):null;return!0}function II(){for(var t=as;t;)t=Pa(t.nextSibling)}function Qc(){as=cs=null,qt=!1}function tx(t){Ei===null?Ei=[t]:Ei.push(t)}var V8=Qo.ReactCurrentBatchConfig;function rf(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ce(309));var r=n.stateNode}if(!r)throw Error(ce(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(ce(284));if(!n._owner)throw Error(ce(290,t))}return t}function $p(t,e){throw t=Object.prototype.toString.call(e),Error(ce(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function AE(t){var e=t._init;return e(t._payload)}function kI(t){function e(g,v){if(t){var w=g.deletions;w===null?(g.deletions=[v],g.flags|=16):w.push(v)}}function n(g,v){if(!t)return null;for(;v!==null;)e(g,v),v=v.sibling;return null}function r(g,v){for(g=new Map;v!==null;)v.key!==null?g.set(v.key,v):g.set(v.index,v),v=v.sibling;return g}function s(g,v){return g=$a(g,v),g.index=0,g.sibling=null,g}function i(g,v,w){return g.index=w,t?(w=g.alternate,w!==null?(w=w.index,w<v?(g.flags|=2,v):w):(g.flags|=2,v)):(g.flags|=1048576,v)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,v,w,x){return v===null||v.tag!==6?(v=wy(w,g.mode,x),v.return=g,v):(v=s(v,w),v.return=g,v)}function u(g,v,w,x){var N=w.type;return N===gc?c(g,v,w.props.children,x,w.key):v!==null&&(v.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===ma&&AE(N)===v.type)?(x=s(v,w.props),x.ref=rf(g,v,w),x.return=g,x):(x=km(w.type,w.key,w.props,null,g.mode,x),x.ref=rf(g,v,w),x.return=g,x)}function l(g,v,w,x){return v===null||v.tag!==4||v.stateNode.containerInfo!==w.containerInfo||v.stateNode.implementation!==w.implementation?(v=xy(w,g.mode,x),v.return=g,v):(v=s(v,w.children||[]),v.return=g,v)}function c(g,v,w,x,N){return v===null||v.tag!==7?(v=Yu(w,g.mode,x,N),v.return=g,v):(v=s(v,w),v.return=g,v)}function d(g,v,w){if(typeof v=="string"&&v!==""||typeof v=="number")return v=wy(""+v,g.mode,w),v.return=g,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Np:return w=km(v.type,v.key,v.props,null,g.mode,w),w.ref=rf(g,null,v),w.return=g,w;case mc:return v=xy(v,g.mode,w),v.return=g,v;case ma:var x=v._init;return d(g,x(v._payload),w)}if(Ef(v)||Zd(v))return v=Yu(v,g.mode,w,null),v.return=g,v;$p(g,v)}return null}function f(g,v,w,x){var N=v!==null?v.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return N!==null?null:a(g,v,""+w,x);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Np:return w.key===N?u(g,v,w,x):null;case mc:return w.key===N?l(g,v,w,x):null;case ma:return N=w._init,f(g,v,N(w._payload),x)}if(Ef(w)||Zd(w))return N!==null?null:c(g,v,w,x,null);$p(g,w)}return null}function h(g,v,w,x,N){if(typeof x=="string"&&x!==""||typeof x=="number")return g=g.get(w)||null,a(v,g,""+x,N);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Np:return g=g.get(x.key===null?w:x.key)||null,u(v,g,x,N);case mc:return g=g.get(x.key===null?w:x.key)||null,l(v,g,x,N);case ma:var k=x._init;return h(g,v,w,k(x._payload),N)}if(Ef(x)||Zd(x))return g=g.get(w)||null,c(v,g,x,N,null);$p(v,x)}return null}function p(g,v,w,x){for(var N=null,k=null,O=v,_=v=0,$=null;O!==null&&_<w.length;_++){O.index>_?($=O,O=null):$=O.sibling;var M=f(g,O,w[_],x);if(M===null){O===null&&(O=$);break}t&&O&&M.alternate===null&&e(g,O),v=i(M,v,_),k===null?N=M:k.sibling=M,k=M,O=$}if(_===w.length)return n(g,O),qt&&Ou(g,_),N;if(O===null){for(;_<w.length;_++)O=d(g,w[_],x),O!==null&&(v=i(O,v,_),k===null?N=O:k.sibling=O,k=O);return qt&&Ou(g,_),N}for(O=r(g,O);_<w.length;_++)$=h(O,g,_,w[_],x),$!==null&&(t&&$.alternate!==null&&O.delete($.key===null?_:$.key),v=i($,v,_),k===null?N=$:k.sibling=$,k=$);return t&&O.forEach(function(K){return e(g,K)}),qt&&Ou(g,_),N}function y(g,v,w,x){var N=Zd(w);if(typeof N!="function")throw Error(ce(150));if(w=N.call(w),w==null)throw Error(ce(151));for(var k=N=null,O=v,_=v=0,$=null,M=w.next();O!==null&&!M.done;_++,M=w.next()){O.index>_?($=O,O=null):$=O.sibling;var K=f(g,O,M.value,x);if(K===null){O===null&&(O=$);break}t&&O&&K.alternate===null&&e(g,O),v=i(K,v,_),k===null?N=K:k.sibling=K,k=K,O=$}if(M.done)return n(g,O),qt&&Ou(g,_),N;if(O===null){for(;!M.done;_++,M=w.next())M=d(g,M.value,x),M!==null&&(v=i(M,v,_),k===null?N=M:k.sibling=M,k=M);return qt&&Ou(g,_),N}for(O=r(g,O);!M.done;_++,M=w.next())M=h(O,g,_,M.value,x),M!==null&&(t&&M.alternate!==null&&O.delete(M.key===null?_:M.key),v=i(M,v,_),k===null?N=M:k.sibling=M,k=M);return t&&O.forEach(function(Z){return e(g,Z)}),qt&&Ou(g,_),N}function b(g,v,w,x){if(typeof w=="object"&&w!==null&&w.type===gc&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Np:e:{for(var N=w.key,k=v;k!==null;){if(k.key===N){if(N=w.type,N===gc){if(k.tag===7){n(g,k.sibling),v=s(k,w.props.children),v.return=g,g=v;break e}}else if(k.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===ma&&AE(N)===k.type){n(g,k.sibling),v=s(k,w.props),v.ref=rf(g,k,w),v.return=g,g=v;break e}n(g,k);break}else e(g,k);k=k.sibling}w.type===gc?(v=Yu(w.props.children,g.mode,x,w.key),v.return=g,g=v):(x=km(w.type,w.key,w.props,null,g.mode,x),x.ref=rf(g,v,w),x.return=g,g=x)}return o(g);case mc:e:{for(k=w.key;v!==null;){if(v.key===k)if(v.tag===4&&v.stateNode.containerInfo===w.containerInfo&&v.stateNode.implementation===w.implementation){n(g,v.sibling),v=s(v,w.children||[]),v.return=g,g=v;break e}else{n(g,v);break}else e(g,v);v=v.sibling}v=xy(w,g.mode,x),v.return=g,g=v}return o(g);case ma:return k=w._init,b(g,v,k(w._payload),x)}if(Ef(w))return p(g,v,w,x);if(Zd(w))return y(g,v,w,x);$p(g,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,v!==null&&v.tag===6?(n(g,v.sibling),v=s(v,w),v.return=g,g=v):(n(g,v),v=wy(w,g.mode,x),v.return=g,g=v),o(g)):n(g,v)}return b}var Zc=kI(!0),RI=kI(!1),c0=Za(null),d0=null,Ec=null,nx=null;function rx(){nx=Ec=d0=null}function sx(t){var e=c0.current;Ut(c0),t._currentValue=e}function Gb(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Bc(t,e){d0=t,nx=Ec=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(zr=!0),t.firstContext=null)}function Qs(t){var e=t._currentValue;if(nx!==t)if(t={context:t,memoizedValue:e,next:null},Ec===null){if(d0===null)throw Error(ce(308));Ec=t,d0.dependencies={lanes:0,firstContext:t}}else Ec=Ec.next=t;return e}var zu=null;function ix(t){zu===null?zu=[t]:zu.push(t)}function OI(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,ix(e)):(n.next=s.next,s.next=n),e.interleaved=n,qo(t,r)}function qo(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ga=!1;function ox(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function PI(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Mo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Da(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ut&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,qo(t,n)}return s=r.interleaved,s===null?(e.next=e,ix(r)):(e.next=s.next,s.next=e),r.interleaved=e,qo(t,n)}function Em(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,qw(t,n)}}function EE(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function f0(t,e,n,r){var s=t.updateQueue;ga=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var u=a,l=u.next;u.next=null,o===null?i=l:o.next=l,o=u;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(i!==null){var d=s.baseState;o=0,c=l=u=null,a=i;do{var f=a.lane,h=a.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,y=a;switch(f=e,h=n,y.tag){case 1:if(p=y.payload,typeof p=="function"){d=p.call(h,d,f);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=y.payload,f=typeof p=="function"?p.call(h,d,f):p,f==null)break e;d=Jt({},d,f);break e;case 2:ga=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else h={eventTime:h,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=h,u=d):c=c.next=h,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(c===null&&(u=d),s.baseState=u,s.firstBaseUpdate=l,s.lastBaseUpdate=c,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ol|=o,t.lanes=o,t.memoizedState=d}}function CE(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ce(191,s));s.call(r)}}}var Bh={},ao=Za(Bh),ch=Za(Bh),dh=Za(Bh);function ju(t){if(t===Bh)throw Error(ce(174));return t}function ax(t,e){switch(Dt(dh,e),Dt(ch,t),Dt(ao,Bh),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Nb(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Nb(e,t)}Ut(ao),Dt(ao,e)}function Jc(){Ut(ao),Ut(ch),Ut(dh)}function DI(t){ju(dh.current);var e=ju(ao.current),n=Nb(e,t.type);e!==n&&(Dt(ch,t),Dt(ao,n))}function ux(t){ch.current===t&&(Ut(ao),Ut(ch))}var Qt=Za(0);function h0(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var py=[];function lx(){for(var t=0;t<py.length;t++)py[t]._workInProgressVersionPrimary=null;py.length=0}var Cm=Qo.ReactCurrentDispatcher,my=Qo.ReactCurrentBatchConfig,il=0,Zt=null,vn=null,In=null,p0=!1,Wf=!1,fh=0,U8=0;function Qn(){throw Error(ce(321))}function cx(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Pi(t[n],e[n]))return!1;return!0}function dx(t,e,n,r,s,i){if(il=i,Zt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Cm.current=t===null||t.memoizedState===null?q8:G8,t=n(r,s),Wf){i=0;do{if(Wf=!1,fh=0,25<=i)throw Error(ce(301));i+=1,In=vn=null,e.updateQueue=null,Cm.current=H8,t=n(r,s)}while(Wf)}if(Cm.current=m0,e=vn!==null&&vn.next!==null,il=0,In=vn=Zt=null,p0=!1,e)throw Error(ce(300));return t}function fx(){var t=fh!==0;return fh=0,t}function Yi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return In===null?Zt.memoizedState=In=t:In=In.next=t,In}function Zs(){if(vn===null){var t=Zt.alternate;t=t!==null?t.memoizedState:null}else t=vn.next;var e=In===null?Zt.memoizedState:In.next;if(e!==null)In=e,vn=t;else{if(t===null)throw Error(ce(310));vn=t,t={memoizedState:vn.memoizedState,baseState:vn.baseState,baseQueue:vn.baseQueue,queue:vn.queue,next:null},In===null?Zt.memoizedState=In=t:In=In.next=t}return In}function hh(t,e){return typeof e=="function"?e(t):e}function gy(t){var e=Zs(),n=e.queue;if(n===null)throw Error(ce(311));n.lastRenderedReducer=t;var r=vn,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,u=null,l=i;do{var c=l.lane;if((il&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var d={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=d,o=r):u=u.next=d,Zt.lanes|=c,ol|=c}l=l.next}while(l!==null&&l!==i);u===null?o=r:u.next=a,Pi(r,e.memoizedState)||(zr=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Zt.lanes|=i,ol|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function yy(t){var e=Zs(),n=e.queue;if(n===null)throw Error(ce(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Pi(i,e.memoizedState)||(zr=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function LI(){}function FI(t,e){var n=Zt,r=Zs(),s=e(),i=!Pi(r.memoizedState,s);if(i&&(r.memoizedState=s,zr=!0),r=r.queue,hx(MI.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||In!==null&&In.memoizedState.tag&1){if(n.flags|=2048,ph(9,BI.bind(null,n,r,s,e),void 0,null),Dn===null)throw Error(ce(349));il&30||$I(n,e,s)}return s}function $I(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Zt.updateQueue,e===null?(e={lastEffect:null,stores:null},Zt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function BI(t,e,n,r){e.value=n,e.getSnapshot=r,VI(e)&&UI(t)}function MI(t,e,n){return n(function(){VI(e)&&UI(t)})}function VI(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Pi(t,n)}catch{return!0}}function UI(t){var e=qo(t,1);e!==null&&ki(e,t,1,-1)}function NE(t){var e=Yi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hh,lastRenderedState:t},e.queue=t,t=t.dispatch=W8.bind(null,Zt,t),[e.memoizedState,t]}function ph(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Zt.updateQueue,e===null?(e={lastEffect:null,stores:null},Zt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function zI(){return Zs().memoizedState}function Nm(t,e,n,r){var s=Yi();Zt.flags|=t,s.memoizedState=ph(1|e,n,void 0,r===void 0?null:r)}function pg(t,e,n,r){var s=Zs();r=r===void 0?null:r;var i=void 0;if(vn!==null){var o=vn.memoizedState;if(i=o.destroy,r!==null&&cx(r,o.deps)){s.memoizedState=ph(e,n,i,r);return}}Zt.flags|=t,s.memoizedState=ph(1|e,n,i,r)}function _E(t,e){return Nm(8390656,8,t,e)}function hx(t,e){return pg(2048,8,t,e)}function jI(t,e){return pg(4,2,t,e)}function WI(t,e){return pg(4,4,t,e)}function qI(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function GI(t,e,n){return n=n!=null?n.concat([t]):null,pg(4,4,qI.bind(null,e,t),n)}function px(){}function HI(t,e){var n=Zs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&cx(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function KI(t,e){var n=Zs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&cx(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function XI(t,e,n){return il&21?(Pi(n,e)||(n=eI(),Zt.lanes|=n,ol|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,zr=!0),t.memoizedState=n)}function z8(t,e){var n=vt;vt=n!==0&&4>n?n:4,t(!0);var r=my.transition;my.transition={};try{t(!1),e()}finally{vt=n,my.transition=r}}function YI(){return Zs().memoizedState}function j8(t,e,n){var r=Fa(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},QI(t))ZI(e,n);else if(n=OI(t,e,n,r),n!==null){var s=_r();ki(n,t,r,s),JI(n,e,r)}}function W8(t,e,n){var r=Fa(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(QI(t))ZI(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Pi(a,o)){var u=e.interleaved;u===null?(s.next=s,ix(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=OI(t,e,s,r),n!==null&&(s=_r(),ki(n,t,r,s),JI(n,e,r))}}function QI(t){var e=t.alternate;return t===Zt||e!==null&&e===Zt}function ZI(t,e){Wf=p0=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function JI(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,qw(t,n)}}var m0={readContext:Qs,useCallback:Qn,useContext:Qn,useEffect:Qn,useImperativeHandle:Qn,useInsertionEffect:Qn,useLayoutEffect:Qn,useMemo:Qn,useReducer:Qn,useRef:Qn,useState:Qn,useDebugValue:Qn,useDeferredValue:Qn,useTransition:Qn,useMutableSource:Qn,useSyncExternalStore:Qn,useId:Qn,unstable_isNewReconciler:!1},q8={readContext:Qs,useCallback:function(t,e){return Yi().memoizedState=[t,e===void 0?null:e],t},useContext:Qs,useEffect:_E,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Nm(4194308,4,qI.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Nm(4194308,4,t,e)},useInsertionEffect:function(t,e){return Nm(4,2,t,e)},useMemo:function(t,e){var n=Yi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Yi();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=j8.bind(null,Zt,t),[r.memoizedState,t]},useRef:function(t){var e=Yi();return t={current:t},e.memoizedState=t},useState:NE,useDebugValue:px,useDeferredValue:function(t){return Yi().memoizedState=t},useTransition:function(){var t=NE(!1),e=t[0];return t=z8.bind(null,t[1]),Yi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Zt,s=Yi();if(qt){if(n===void 0)throw Error(ce(407));n=n()}else{if(n=e(),Dn===null)throw Error(ce(349));il&30||$I(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,_E(MI.bind(null,r,i,t),[t]),r.flags|=2048,ph(9,BI.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Yi(),e=Dn.identifierPrefix;if(qt){var n=$o,r=Fo;n=(r&~(1<<32-Ii(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=fh++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=U8++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},G8={readContext:Qs,useCallback:HI,useContext:Qs,useEffect:hx,useImperativeHandle:GI,useInsertionEffect:jI,useLayoutEffect:WI,useMemo:KI,useReducer:gy,useRef:zI,useState:function(){return gy(hh)},useDebugValue:px,useDeferredValue:function(t){var e=Zs();return XI(e,vn.memoizedState,t)},useTransition:function(){var t=gy(hh)[0],e=Zs().memoizedState;return[t,e]},useMutableSource:LI,useSyncExternalStore:FI,useId:YI,unstable_isNewReconciler:!1},H8={readContext:Qs,useCallback:HI,useContext:Qs,useEffect:hx,useImperativeHandle:GI,useInsertionEffect:jI,useLayoutEffect:WI,useMemo:KI,useReducer:yy,useRef:zI,useState:function(){return yy(hh)},useDebugValue:px,useDeferredValue:function(t){var e=Zs();return vn===null?e.memoizedState=t:XI(e,vn.memoizedState,t)},useTransition:function(){var t=yy(hh)[0],e=Zs().memoizedState;return[t,e]},useMutableSource:LI,useSyncExternalStore:FI,useId:YI,unstable_isNewReconciler:!1};function bi(t,e){if(t&&t.defaultProps){e=Jt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Hb(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Jt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var mg={isMounted:function(t){return(t=t._reactInternals)?El(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=_r(),s=Fa(t),i=Mo(r,s);i.payload=e,n!=null&&(i.callback=n),e=Da(t,i,s),e!==null&&(ki(e,t,s,r),Em(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=_r(),s=Fa(t),i=Mo(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Da(t,i,s),e!==null&&(ki(e,t,s,r),Em(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=_r(),r=Fa(t),s=Mo(n,r);s.tag=2,e!=null&&(s.callback=e),e=Da(t,s,r),e!==null&&(ki(e,t,r,n),Em(e,t,r))}};function TE(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!oh(n,r)||!oh(s,i):!0}function ek(t,e,n){var r=!1,s=ja,i=e.contextType;return typeof i=="object"&&i!==null?i=Qs(i):(s=qr(e)?rl:cr.current,r=e.contextTypes,i=(r=r!=null)?Yc(t,s):ja),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=mg,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function IE(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&mg.enqueueReplaceState(e,e.state,null)}function Kb(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},ox(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Qs(i):(i=qr(e)?rl:cr.current,s.context=Yc(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Hb(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&mg.enqueueReplaceState(s,s.state,null),f0(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ed(t,e){try{var n="",r=e;do n+=xM(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function by(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Xb(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var K8=typeof WeakMap=="function"?WeakMap:Map;function tk(t,e,n){n=Mo(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){y0||(y0=!0,iv=r),Xb(t,e)},n}function nk(t,e,n){n=Mo(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Xb(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Xb(t,e),typeof r!="function"&&(La===null?La=new Set([this]):La.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function kE(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new K8;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=uV.bind(null,t,e,n),e.then(t,t))}function RE(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function OE(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Mo(-1,1),e.tag=2,Da(n,e,1))),n.lanes|=1),t)}var X8=Qo.ReactCurrentOwner,zr=!1;function Ar(t,e,n,r){e.child=t===null?RI(e,null,n,r):Zc(e,t.child,n,r)}function PE(t,e,n,r,s){n=n.render;var i=e.ref;return Bc(e,s),r=dx(t,e,n,r,i,s),n=fx(),t!==null&&!zr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Go(t,e,s)):(qt&&n&&Jw(e),e.flags|=1,Ar(t,e,r,s),e.child)}function DE(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Sx(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,rk(t,e,i,r,s)):(t=km(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:oh,n(o,r)&&t.ref===e.ref)return Go(t,e,s)}return e.flags|=1,t=$a(i,r),t.ref=e.ref,t.return=e,e.child=t}function rk(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(oh(i,r)&&t.ref===e.ref)if(zr=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(zr=!0);else return e.lanes=t.lanes,Go(t,e,s)}return Yb(t,e,n,r,s)}function sk(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Dt(Nc,rs),rs|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Dt(Nc,rs),rs|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Dt(Nc,rs),rs|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Dt(Nc,rs),rs|=r;return Ar(t,e,s,n),e.child}function ik(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Yb(t,e,n,r,s){var i=qr(n)?rl:cr.current;return i=Yc(e,i),Bc(e,s),n=dx(t,e,n,r,i,s),r=fx(),t!==null&&!zr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Go(t,e,s)):(qt&&r&&Jw(e),e.flags|=1,Ar(t,e,n,s),e.child)}function LE(t,e,n,r,s){if(qr(n)){var i=!0;a0(e)}else i=!1;if(Bc(e,s),e.stateNode===null)_m(t,e),ek(e,n,r),Kb(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=Qs(l):(l=qr(n)?rl:cr.current,l=Yc(e,l));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==l)&&IE(e,o,r,l),ga=!1;var f=e.memoizedState;o.state=f,f0(e,r,o,s),u=e.memoizedState,a!==r||f!==u||Wr.current||ga?(typeof c=="function"&&(Hb(e,n,c,r),u=e.memoizedState),(a=ga||TE(e,n,a,r,f,u,l))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,PI(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:bi(e.type,a),o.props=l,d=e.pendingProps,f=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Qs(u):(u=qr(n)?rl:cr.current,u=Yc(e,u));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==u)&&IE(e,o,r,u),ga=!1,f=e.memoizedState,o.state=f,f0(e,r,o,s);var p=e.memoizedState;a!==d||f!==p||Wr.current||ga?(typeof h=="function"&&(Hb(e,n,h,r),p=e.memoizedState),(l=ga||TE(e,n,l,r,f,p,u)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Qb(t,e,n,r,i,s)}function Qb(t,e,n,r,s,i){ik(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&wE(e,n,!1),Go(t,e,i);r=e.stateNode,X8.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Zc(e,t.child,null,i),e.child=Zc(e,null,a,i)):Ar(t,e,a,i),e.memoizedState=r.state,s&&wE(e,n,!0),e.child}function ok(t){var e=t.stateNode;e.pendingContext?vE(t,e.pendingContext,e.pendingContext!==e.context):e.context&&vE(t,e.context,!1),ax(t,e.containerInfo)}function FE(t,e,n,r,s){return Qc(),tx(s),e.flags|=256,Ar(t,e,n,r),e.child}var Zb={dehydrated:null,treeContext:null,retryLane:0};function Jb(t){return{baseLanes:t,cachePool:null,transitions:null}}function ak(t,e,n){var r=e.pendingProps,s=Qt.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Dt(Qt,s&1),t===null)return qb(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=bg(o,r,0,null),t=Yu(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Jb(n),e.memoizedState=Zb,t):mx(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return Y8(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=$a(s,u),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=$a(a,i):(i=Yu(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Jb(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Zb,r}return i=t.child,t=i.sibling,r=$a(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function mx(t,e){return e=bg({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Bp(t,e,n,r){return r!==null&&tx(r),Zc(e,t.child,null,n),t=mx(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Y8(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=by(Error(ce(422))),Bp(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=bg({mode:"visible",children:r.children},s,0,null),i=Yu(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Zc(e,t.child,null,o),e.child.memoizedState=Jb(o),e.memoizedState=Zb,i);if(!(e.mode&1))return Bp(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(ce(419)),r=by(i,r,void 0),Bp(t,e,o,r)}if(a=(o&t.childLanes)!==0,zr||a){if(r=Dn,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,qo(t,s),ki(r,t,s,-1))}return xx(),r=by(Error(ce(421))),Bp(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=lV.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,as=Pa(s.nextSibling),cs=e,qt=!0,Ei=null,t!==null&&(Ms[Vs++]=Fo,Ms[Vs++]=$o,Ms[Vs++]=sl,Fo=t.id,$o=t.overflow,sl=e),e=mx(e,r.children),e.flags|=4096,e)}function $E(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Gb(t.return,e,n)}function vy(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function uk(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Ar(t,e,r.children,n),r=Qt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&$E(t,n,e);else if(t.tag===19)$E(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Dt(Qt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&h0(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),vy(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&h0(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}vy(e,!0,n,null,i);break;case"together":vy(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function _m(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Go(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ol|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ce(153));if(e.child!==null){for(t=e.child,n=$a(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=$a(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Q8(t,e,n){switch(e.tag){case 3:ok(e),Qc();break;case 5:DI(e);break;case 1:qr(e.type)&&a0(e);break;case 4:ax(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Dt(c0,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Dt(Qt,Qt.current&1),e.flags|=128,null):n&e.child.childLanes?ak(t,e,n):(Dt(Qt,Qt.current&1),t=Go(t,e,n),t!==null?t.sibling:null);Dt(Qt,Qt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return uk(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Dt(Qt,Qt.current),r)break;return null;case 22:case 23:return e.lanes=0,sk(t,e,n)}return Go(t,e,n)}var lk,ev,ck,dk;lk=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ev=function(){};ck=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ju(ao.current);var i=null;switch(n){case"input":s=Sb(t,s),r=Sb(t,r),i=[];break;case"select":s=Jt({},s,{value:void 0}),r=Jt({},r,{value:void 0}),i=[];break;case"textarea":s=Cb(t,s),r=Cb(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=i0)}_b(n,r);var o;n=null;for(l in s)if(!r.hasOwnProperty(l)&&s.hasOwnProperty(l)&&s[l]!=null)if(l==="style"){var a=s[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Jf.hasOwnProperty(l)?i||(i=[]):(i=i||[]).push(l,null));for(l in r){var u=r[l];if(a=s!=null?s[l]:void 0,r.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(i=i||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(Jf.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&Vt("scroll",t),i||a===u||(i=[])):(i=i||[]).push(l,u))}n&&(i=i||[]).push("style",n);var l=i;(e.updateQueue=l)&&(e.flags|=4)}};dk=function(t,e,n,r){n!==r&&(e.flags|=4)};function sf(t,e){if(!qt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Zn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Z8(t,e,n){var r=e.pendingProps;switch(ex(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zn(e),null;case 1:return qr(e.type)&&o0(),Zn(e),null;case 3:return r=e.stateNode,Jc(),Ut(Wr),Ut(cr),lx(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Fp(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ei!==null&&(uv(Ei),Ei=null))),ev(t,e),Zn(e),null;case 5:ux(e);var s=ju(dh.current);if(n=e.type,t!==null&&e.stateNode!=null)ck(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ce(166));return Zn(e),null}if(t=ju(ao.current),Fp(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Zi]=e,r[lh]=i,t=(e.mode&1)!==0,n){case"dialog":Vt("cancel",r),Vt("close",r);break;case"iframe":case"object":case"embed":Vt("load",r);break;case"video":case"audio":for(s=0;s<Nf.length;s++)Vt(Nf[s],r);break;case"source":Vt("error",r);break;case"img":case"image":case"link":Vt("error",r),Vt("load",r);break;case"details":Vt("toggle",r);break;case"input":GA(r,i),Vt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Vt("invalid",r);break;case"textarea":KA(r,i),Vt("invalid",r)}_b(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Lp(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Lp(r.textContent,a,t),s=["children",""+a]):Jf.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Vt("scroll",r)}switch(n){case"input":_p(r),HA(r,i,!0);break;case"textarea":_p(r),XA(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=i0)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=MT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Zi]=e,t[lh]=r,lk(t,e,!1,!1),e.stateNode=t;e:{switch(o=Tb(n,r),n){case"dialog":Vt("cancel",t),Vt("close",t),s=r;break;case"iframe":case"object":case"embed":Vt("load",t),s=r;break;case"video":case"audio":for(s=0;s<Nf.length;s++)Vt(Nf[s],t);s=r;break;case"source":Vt("error",t),s=r;break;case"img":case"image":case"link":Vt("error",t),Vt("load",t),s=r;break;case"details":Vt("toggle",t),s=r;break;case"input":GA(t,r),s=Sb(t,r),Vt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Jt({},r,{value:void 0}),Vt("invalid",t);break;case"textarea":KA(t,r),s=Cb(t,r),Vt("invalid",t);break;default:s=r}_b(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var u=a[i];i==="style"?zT(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&VT(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&eh(t,u):typeof u=="number"&&eh(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Jf.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Vt("scroll",t):u!=null&&Mw(t,i,u,o))}switch(n){case"input":_p(t),HA(t,r,!1);break;case"textarea":_p(t),XA(t);break;case"option":r.value!=null&&t.setAttribute("value",""+za(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Dc(t,!!r.multiple,i,!1):r.defaultValue!=null&&Dc(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=i0)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Zn(e),null;case 6:if(t&&e.stateNode!=null)dk(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ce(166));if(n=ju(dh.current),ju(ao.current),Fp(e)){if(r=e.stateNode,n=e.memoizedProps,r[Zi]=e,(i=r.nodeValue!==n)&&(t=cs,t!==null))switch(t.tag){case 3:Lp(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Lp(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Zi]=e,e.stateNode=r}return Zn(e),null;case 13:if(Ut(Qt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(qt&&as!==null&&e.mode&1&&!(e.flags&128))II(),Qc(),e.flags|=98560,i=!1;else if(i=Fp(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(ce(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ce(317));i[Zi]=e}else Qc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Zn(e),i=!1}else Ei!==null&&(uv(Ei),Ei=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Qt.current&1?xn===0&&(xn=3):xx())),e.updateQueue!==null&&(e.flags|=4),Zn(e),null);case 4:return Jc(),ev(t,e),t===null&&ah(e.stateNode.containerInfo),Zn(e),null;case 10:return sx(e.type._context),Zn(e),null;case 17:return qr(e.type)&&o0(),Zn(e),null;case 19:if(Ut(Qt),i=e.memoizedState,i===null)return Zn(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)sf(i,!1);else{if(xn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=h0(t),o!==null){for(e.flags|=128,sf(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Dt(Qt,Qt.current&1|2),e.child}t=t.sibling}i.tail!==null&&un()>td&&(e.flags|=128,r=!0,sf(i,!1),e.lanes=4194304)}else{if(!r)if(t=h0(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),sf(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!qt)return Zn(e),null}else 2*un()-i.renderingStartTime>td&&n!==1073741824&&(e.flags|=128,r=!0,sf(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=un(),e.sibling=null,n=Qt.current,Dt(Qt,r?n&1|2:n&1),e):(Zn(e),null);case 22:case 23:return wx(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?rs&1073741824&&(Zn(e),e.subtreeFlags&6&&(e.flags|=8192)):Zn(e),null;case 24:return null;case 25:return null}throw Error(ce(156,e.tag))}function J8(t,e){switch(ex(e),e.tag){case 1:return qr(e.type)&&o0(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Jc(),Ut(Wr),Ut(cr),lx(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ux(e),null;case 13:if(Ut(Qt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ce(340));Qc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ut(Qt),null;case 4:return Jc(),null;case 10:return sx(e.type._context),null;case 22:case 23:return wx(),null;case 24:return null;default:return null}}var Mp=!1,ir=!1,eV=typeof WeakSet=="function"?WeakSet:Set,Ae=null;function Cc(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){nn(t,e,r)}else n.current=null}function tv(t,e,n){try{n()}catch(r){nn(t,e,r)}}var BE=!1;function tV(t,e){if(Bb=n0,t=gI(),Zw(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,l=0,c=0,d=t,f=null;t:for(;;){for(var h;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(u=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===t)break t;if(f===n&&++l===s&&(a=o),f===i&&++c===r&&(u=o),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Mb={focusedElem:t,selectionRange:n},n0=!1,Ae=e;Ae!==null;)if(e=Ae,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ae=t;else for(;Ae!==null;){e=Ae;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var y=p.memoizedProps,b=p.memoizedState,g=e.stateNode,v=g.getSnapshotBeforeUpdate(e.elementType===e.type?y:bi(e.type,y),b);g.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ce(163))}}catch(x){nn(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,Ae=t;break}Ae=e.return}return p=BE,BE=!1,p}function qf(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&tv(e,n,i)}s=s.next}while(s!==r)}}function gg(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function nv(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function fk(t){var e=t.alternate;e!==null&&(t.alternate=null,fk(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Zi],delete e[lh],delete e[zb],delete e[$8],delete e[B8])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function hk(t){return t.tag===5||t.tag===3||t.tag===4}function ME(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||hk(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function rv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=i0));else if(r!==4&&(t=t.child,t!==null))for(rv(t,e,n),t=t.sibling;t!==null;)rv(t,e,n),t=t.sibling}function sv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(sv(t,e,n),t=t.sibling;t!==null;)sv(t,e,n),t=t.sibling}var zn=null,xi=!1;function oa(t,e,n){for(n=n.child;n!==null;)pk(t,e,n),n=n.sibling}function pk(t,e,n){if(oo&&typeof oo.onCommitFiberUnmount=="function")try{oo.onCommitFiberUnmount(ug,n)}catch{}switch(n.tag){case 5:ir||Cc(n,e);case 6:var r=zn,s=xi;zn=null,oa(t,e,n),zn=r,xi=s,zn!==null&&(xi?(t=zn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):zn.removeChild(n.stateNode));break;case 18:zn!==null&&(xi?(t=zn,n=n.stateNode,t.nodeType===8?fy(t.parentNode,n):t.nodeType===1&&fy(t,n),sh(t)):fy(zn,n.stateNode));break;case 4:r=zn,s=xi,zn=n.stateNode.containerInfo,xi=!0,oa(t,e,n),zn=r,xi=s;break;case 0:case 11:case 14:case 15:if(!ir&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&tv(n,e,o),s=s.next}while(s!==r)}oa(t,e,n);break;case 1:if(!ir&&(Cc(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){nn(n,e,a)}oa(t,e,n);break;case 21:oa(t,e,n);break;case 22:n.mode&1?(ir=(r=ir)||n.memoizedState!==null,oa(t,e,n),ir=r):oa(t,e,n);break;default:oa(t,e,n)}}function VE(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new eV),e.forEach(function(r){var s=cV.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function di(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:zn=a.stateNode,xi=!1;break e;case 3:zn=a.stateNode.containerInfo,xi=!0;break e;case 4:zn=a.stateNode.containerInfo,xi=!0;break e}a=a.return}if(zn===null)throw Error(ce(160));pk(i,o,s),zn=null,xi=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(l){nn(s,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)mk(e,t),e=e.sibling}function mk(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(di(e,t),Hi(t),r&4){try{qf(3,t,t.return),gg(3,t)}catch(y){nn(t,t.return,y)}try{qf(5,t,t.return)}catch(y){nn(t,t.return,y)}}break;case 1:di(e,t),Hi(t),r&512&&n!==null&&Cc(n,n.return);break;case 5:if(di(e,t),Hi(t),r&512&&n!==null&&Cc(n,n.return),t.flags&32){var s=t.stateNode;try{eh(s,"")}catch(y){nn(t,t.return,y)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&$T(s,i),Tb(a,o);var l=Tb(a,i);for(o=0;o<u.length;o+=2){var c=u[o],d=u[o+1];c==="style"?zT(s,d):c==="dangerouslySetInnerHTML"?VT(s,d):c==="children"?eh(s,d):Mw(s,c,d,l)}switch(a){case"input":Ab(s,i);break;case"textarea":BT(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var h=i.value;h!=null?Dc(s,!!i.multiple,h,!1):f!==!!i.multiple&&(i.defaultValue!=null?Dc(s,!!i.multiple,i.defaultValue,!0):Dc(s,!!i.multiple,i.multiple?[]:"",!1))}s[lh]=i}catch(y){nn(t,t.return,y)}}break;case 6:if(di(e,t),Hi(t),r&4){if(t.stateNode===null)throw Error(ce(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(y){nn(t,t.return,y)}}break;case 3:if(di(e,t),Hi(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{sh(e.containerInfo)}catch(y){nn(t,t.return,y)}break;case 4:di(e,t),Hi(t);break;case 13:di(e,t),Hi(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(bx=un())),r&4&&VE(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(ir=(l=ir)||c,di(e,t),ir=l):di(e,t),Hi(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!c&&t.mode&1)for(Ae=t,c=t.child;c!==null;){for(d=Ae=c;Ae!==null;){switch(f=Ae,h=f.child,f.tag){case 0:case 11:case 14:case 15:qf(4,f,f.return);break;case 1:Cc(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(y){nn(r,n,y)}}break;case 5:Cc(f,f.return);break;case 22:if(f.memoizedState!==null){zE(d);continue}}h!==null?(h.return=f,Ae=h):zE(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{s=d.stateNode,l?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,u=d.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=UT("display",o))}catch(y){nn(t,t.return,y)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(y){nn(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:di(e,t),Hi(t),r&4&&VE(t);break;case 21:break;default:di(e,t),Hi(t)}}function Hi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(hk(n)){var r=n;break e}n=n.return}throw Error(ce(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(eh(s,""),r.flags&=-33);var i=ME(t);sv(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=ME(t);rv(t,a,o);break;default:throw Error(ce(161))}}catch(u){nn(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function nV(t,e,n){Ae=t,gk(t)}function gk(t,e,n){for(var r=(t.mode&1)!==0;Ae!==null;){var s=Ae,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Mp;if(!o){var a=s.alternate,u=a!==null&&a.memoizedState!==null||ir;a=Mp;var l=ir;if(Mp=o,(ir=u)&&!l)for(Ae=s;Ae!==null;)o=Ae,u=o.child,o.tag===22&&o.memoizedState!==null?jE(s):u!==null?(u.return=o,Ae=u):jE(s);for(;i!==null;)Ae=i,gk(i),i=i.sibling;Ae=s,Mp=a,ir=l}UE(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Ae=i):UE(t)}}function UE(t){for(;Ae!==null;){var e=Ae;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ir||gg(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ir)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:bi(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&CE(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}CE(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&sh(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ce(163))}ir||e.flags&512&&nv(e)}catch(f){nn(e,e.return,f)}}if(e===t){Ae=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ae=n;break}Ae=e.return}}function zE(t){for(;Ae!==null;){var e=Ae;if(e===t){Ae=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ae=n;break}Ae=e.return}}function jE(t){for(;Ae!==null;){var e=Ae;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{gg(4,e)}catch(u){nn(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){nn(e,s,u)}}var i=e.return;try{nv(e)}catch(u){nn(e,i,u)}break;case 5:var o=e.return;try{nv(e)}catch(u){nn(e,o,u)}}}catch(u){nn(e,e.return,u)}if(e===t){Ae=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ae=a;break}Ae=e.return}}var rV=Math.ceil,g0=Qo.ReactCurrentDispatcher,gx=Qo.ReactCurrentOwner,Ks=Qo.ReactCurrentBatchConfig,ut=0,Dn=null,pn=null,qn=0,rs=0,Nc=Za(0),xn=0,mh=null,ol=0,yg=0,yx=0,Gf=null,Ur=null,bx=0,td=1/0,Ro=null,y0=!1,iv=null,La=null,Vp=!1,Ea=null,b0=0,Hf=0,ov=null,Tm=-1,Im=0;function _r(){return ut&6?un():Tm!==-1?Tm:Tm=un()}function Fa(t){return t.mode&1?ut&2&&qn!==0?qn&-qn:V8.transition!==null?(Im===0&&(Im=eI()),Im):(t=vt,t!==0||(t=window.event,t=t===void 0?16:aI(t.type)),t):1}function ki(t,e,n,r){if(50<Hf)throw Hf=0,ov=null,Error(ce(185));Lh(t,n,r),(!(ut&2)||t!==Dn)&&(t===Dn&&(!(ut&2)&&(yg|=n),xn===4&&Sa(t,qn)),Gr(t,r),n===1&&ut===0&&!(e.mode&1)&&(td=un()+500,hg&&Ja()))}function Gr(t,e){var n=t.callbackNode;VM(t,e);var r=t0(t,t===Dn?qn:0);if(r===0)n!==null&&ZA(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ZA(n),e===1)t.tag===0?M8(WE.bind(null,t)):NI(WE.bind(null,t)),L8(function(){!(ut&6)&&Ja()}),n=null;else{switch(tI(r)){case 1:n=Ww;break;case 4:n=ZT;break;case 16:n=e0;break;case 536870912:n=JT;break;default:n=e0}n=Ek(n,yk.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function yk(t,e){if(Tm=-1,Im=0,ut&6)throw Error(ce(327));var n=t.callbackNode;if(Mc()&&t.callbackNode!==n)return null;var r=t0(t,t===Dn?qn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=v0(t,r);else{e=r;var s=ut;ut|=2;var i=vk();(Dn!==t||qn!==e)&&(Ro=null,td=un()+500,Xu(t,e));do try{oV();break}catch(a){bk(t,a)}while(!0);rx(),g0.current=i,ut=s,pn!==null?e=0:(Dn=null,qn=0,e=xn)}if(e!==0){if(e===2&&(s=Pb(t),s!==0&&(r=s,e=av(t,s))),e===1)throw n=mh,Xu(t,0),Sa(t,r),Gr(t,un()),n;if(e===6)Sa(t,r);else{if(s=t.current.alternate,!(r&30)&&!sV(s)&&(e=v0(t,r),e===2&&(i=Pb(t),i!==0&&(r=i,e=av(t,i))),e===1))throw n=mh,Xu(t,0),Sa(t,r),Gr(t,un()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(ce(345));case 2:Pu(t,Ur,Ro);break;case 3:if(Sa(t,r),(r&130023424)===r&&(e=bx+500-un(),10<e)){if(t0(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){_r(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Ub(Pu.bind(null,t,Ur,Ro),e);break}Pu(t,Ur,Ro);break;case 4:if(Sa(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Ii(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=un()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*rV(r/1960))-r,10<r){t.timeoutHandle=Ub(Pu.bind(null,t,Ur,Ro),r);break}Pu(t,Ur,Ro);break;case 5:Pu(t,Ur,Ro);break;default:throw Error(ce(329))}}}return Gr(t,un()),t.callbackNode===n?yk.bind(null,t):null}function av(t,e){var n=Gf;return t.current.memoizedState.isDehydrated&&(Xu(t,e).flags|=256),t=v0(t,e),t!==2&&(e=Ur,Ur=n,e!==null&&uv(e)),t}function uv(t){Ur===null?Ur=t:Ur.push.apply(Ur,t)}function sV(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Pi(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Sa(t,e){for(e&=~yx,e&=~yg,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ii(e),r=1<<n;t[n]=-1,e&=~r}}function WE(t){if(ut&6)throw Error(ce(327));Mc();var e=t0(t,0);if(!(e&1))return Gr(t,un()),null;var n=v0(t,e);if(t.tag!==0&&n===2){var r=Pb(t);r!==0&&(e=r,n=av(t,r))}if(n===1)throw n=mh,Xu(t,0),Sa(t,e),Gr(t,un()),n;if(n===6)throw Error(ce(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Pu(t,Ur,Ro),Gr(t,un()),null}function vx(t,e){var n=ut;ut|=1;try{return t(e)}finally{ut=n,ut===0&&(td=un()+500,hg&&Ja())}}function al(t){Ea!==null&&Ea.tag===0&&!(ut&6)&&Mc();var e=ut;ut|=1;var n=Ks.transition,r=vt;try{if(Ks.transition=null,vt=1,t)return t()}finally{vt=r,Ks.transition=n,ut=e,!(ut&6)&&Ja()}}function wx(){rs=Nc.current,Ut(Nc)}function Xu(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,D8(n)),pn!==null)for(n=pn.return;n!==null;){var r=n;switch(ex(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&o0();break;case 3:Jc(),Ut(Wr),Ut(cr),lx();break;case 5:ux(r);break;case 4:Jc();break;case 13:Ut(Qt);break;case 19:Ut(Qt);break;case 10:sx(r.type._context);break;case 22:case 23:wx()}n=n.return}if(Dn=t,pn=t=$a(t.current,null),qn=rs=e,xn=0,mh=null,yx=yg=ol=0,Ur=Gf=null,zu!==null){for(e=0;e<zu.length;e++)if(n=zu[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}zu=null}return t}function bk(t,e){do{var n=pn;try{if(rx(),Cm.current=m0,p0){for(var r=Zt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}p0=!1}if(il=0,In=vn=Zt=null,Wf=!1,fh=0,gx.current=null,n===null||n.return===null){xn=1,mh=e,pn=null;break}e:{var i=t,o=n.return,a=n,u=e;if(e=qn,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=RE(o);if(h!==null){h.flags&=-257,OE(h,o,a,i,e),h.mode&1&&kE(i,l,e),e=h,u=l;var p=e.updateQueue;if(p===null){var y=new Set;y.add(u),e.updateQueue=y}else p.add(u);break e}else{if(!(e&1)){kE(i,l,e),xx();break e}u=Error(ce(426))}}else if(qt&&a.mode&1){var b=RE(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),OE(b,o,a,i,e),tx(ed(u,a));break e}}i=u=ed(u,a),xn!==4&&(xn=2),Gf===null?Gf=[i]:Gf.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var g=tk(i,u,e);EE(i,g);break e;case 1:a=u;var v=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(La===null||!La.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var x=nk(i,a,e);EE(i,x);break e}}i=i.return}while(i!==null)}xk(n)}catch(N){e=N,pn===n&&n!==null&&(pn=n=n.return);continue}break}while(!0)}function vk(){var t=g0.current;return g0.current=m0,t===null?m0:t}function xx(){(xn===0||xn===3||xn===2)&&(xn=4),Dn===null||!(ol&268435455)&&!(yg&268435455)||Sa(Dn,qn)}function v0(t,e){var n=ut;ut|=2;var r=vk();(Dn!==t||qn!==e)&&(Ro=null,Xu(t,e));do try{iV();break}catch(s){bk(t,s)}while(!0);if(rx(),ut=n,g0.current=r,pn!==null)throw Error(ce(261));return Dn=null,qn=0,xn}function iV(){for(;pn!==null;)wk(pn)}function oV(){for(;pn!==null&&!RM();)wk(pn)}function wk(t){var e=Ak(t.alternate,t,rs);t.memoizedProps=t.pendingProps,e===null?xk(t):pn=e,gx.current=null}function xk(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=J8(n,e),n!==null){n.flags&=32767,pn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{xn=6,pn=null;return}}else if(n=Z8(n,e,rs),n!==null){pn=n;return}if(e=e.sibling,e!==null){pn=e;return}pn=e=t}while(e!==null);xn===0&&(xn=5)}function Pu(t,e,n){var r=vt,s=Ks.transition;try{Ks.transition=null,vt=1,aV(t,e,n,r)}finally{Ks.transition=s,vt=r}return null}function aV(t,e,n,r){do Mc();while(Ea!==null);if(ut&6)throw Error(ce(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ce(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(UM(t,i),t===Dn&&(pn=Dn=null,qn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Vp||(Vp=!0,Ek(e0,function(){return Mc(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ks.transition,Ks.transition=null;var o=vt;vt=1;var a=ut;ut|=4,gx.current=null,tV(t,n),mk(n,t),_8(Mb),n0=!!Bb,Mb=Bb=null,t.current=n,nV(n),OM(),ut=a,vt=o,Ks.transition=i}else t.current=n;if(Vp&&(Vp=!1,Ea=t,b0=s),i=t.pendingLanes,i===0&&(La=null),LM(n.stateNode),Gr(t,un()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(y0)throw y0=!1,t=iv,iv=null,t;return b0&1&&t.tag!==0&&Mc(),i=t.pendingLanes,i&1?t===ov?Hf++:(Hf=0,ov=t):Hf=0,Ja(),null}function Mc(){if(Ea!==null){var t=tI(b0),e=Ks.transition,n=vt;try{if(Ks.transition=null,vt=16>t?16:t,Ea===null)var r=!1;else{if(t=Ea,Ea=null,b0=0,ut&6)throw Error(ce(331));var s=ut;for(ut|=4,Ae=t.current;Ae!==null;){var i=Ae,o=i.child;if(Ae.flags&16){var a=i.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(Ae=l;Ae!==null;){var c=Ae;switch(c.tag){case 0:case 11:case 15:qf(8,c,i)}var d=c.child;if(d!==null)d.return=c,Ae=d;else for(;Ae!==null;){c=Ae;var f=c.sibling,h=c.return;if(fk(c),c===l){Ae=null;break}if(f!==null){f.return=h,Ae=f;break}Ae=h}}}var p=i.alternate;if(p!==null){var y=p.child;if(y!==null){p.child=null;do{var b=y.sibling;y.sibling=null,y=b}while(y!==null)}}Ae=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Ae=o;else e:for(;Ae!==null;){if(i=Ae,i.flags&2048)switch(i.tag){case 0:case 11:case 15:qf(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,Ae=g;break e}Ae=i.return}}var v=t.current;for(Ae=v;Ae!==null;){o=Ae;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Ae=w;else e:for(o=v;Ae!==null;){if(a=Ae,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:gg(9,a)}}catch(N){nn(a,a.return,N)}if(a===o){Ae=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,Ae=x;break e}Ae=a.return}}if(ut=s,Ja(),oo&&typeof oo.onPostCommitFiberRoot=="function")try{oo.onPostCommitFiberRoot(ug,t)}catch{}r=!0}return r}finally{vt=n,Ks.transition=e}}return!1}function qE(t,e,n){e=ed(n,e),e=tk(t,e,1),t=Da(t,e,1),e=_r(),t!==null&&(Lh(t,1,e),Gr(t,e))}function nn(t,e,n){if(t.tag===3)qE(t,t,n);else for(;e!==null;){if(e.tag===3){qE(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(La===null||!La.has(r))){t=ed(n,t),t=nk(e,t,1),e=Da(e,t,1),t=_r(),e!==null&&(Lh(e,1,t),Gr(e,t));break}}e=e.return}}function uV(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=_r(),t.pingedLanes|=t.suspendedLanes&n,Dn===t&&(qn&n)===n&&(xn===4||xn===3&&(qn&130023424)===qn&&500>un()-bx?Xu(t,0):yx|=n),Gr(t,e)}function Sk(t,e){e===0&&(t.mode&1?(e=kp,kp<<=1,!(kp&130023424)&&(kp=4194304)):e=1);var n=_r();t=qo(t,e),t!==null&&(Lh(t,e,n),Gr(t,n))}function lV(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Sk(t,n)}function cV(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ce(314))}r!==null&&r.delete(e),Sk(t,n)}var Ak;Ak=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Wr.current)zr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return zr=!1,Q8(t,e,n);zr=!!(t.flags&131072)}else zr=!1,qt&&e.flags&1048576&&_I(e,l0,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;_m(t,e),t=e.pendingProps;var s=Yc(e,cr.current);Bc(e,n),s=dx(null,e,r,t,s,n);var i=fx();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,qr(r)?(i=!0,a0(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ox(e),s.updater=mg,e.stateNode=s,s._reactInternals=e,Kb(e,r,t,n),e=Qb(null,e,r,!0,i,n)):(e.tag=0,qt&&i&&Jw(e),Ar(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(_m(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=fV(r),t=bi(r,t),s){case 0:e=Yb(null,e,r,t,n);break e;case 1:e=LE(null,e,r,t,n);break e;case 11:e=PE(null,e,r,t,n);break e;case 14:e=DE(null,e,r,bi(r.type,t),n);break e}throw Error(ce(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:bi(r,s),Yb(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:bi(r,s),LE(t,e,r,s,n);case 3:e:{if(ok(e),t===null)throw Error(ce(387));r=e.pendingProps,i=e.memoizedState,s=i.element,PI(t,e),f0(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ed(Error(ce(423)),e),e=FE(t,e,r,n,s);break e}else if(r!==s){s=ed(Error(ce(424)),e),e=FE(t,e,r,n,s);break e}else for(as=Pa(e.stateNode.containerInfo.firstChild),cs=e,qt=!0,Ei=null,n=RI(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Qc(),r===s){e=Go(t,e,n);break e}Ar(t,e,r,n)}e=e.child}return e;case 5:return DI(e),t===null&&qb(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Vb(r,s)?o=null:i!==null&&Vb(r,i)&&(e.flags|=32),ik(t,e),Ar(t,e,o,n),e.child;case 6:return t===null&&qb(e),null;case 13:return ak(t,e,n);case 4:return ax(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Zc(e,null,r,n):Ar(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:bi(r,s),PE(t,e,r,s,n);case 7:return Ar(t,e,e.pendingProps,n),e.child;case 8:return Ar(t,e,e.pendingProps.children,n),e.child;case 12:return Ar(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Dt(c0,r._currentValue),r._currentValue=o,i!==null)if(Pi(i.value,o)){if(i.children===s.children&&!Wr.current){e=Go(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Mo(-1,n&-n),u.tag=2;var l=i.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Gb(i.return,n,e),a.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ce(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Gb(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ar(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Bc(e,n),s=Qs(s),r=r(s),e.flags|=1,Ar(t,e,r,n),e.child;case 14:return r=e.type,s=bi(r,e.pendingProps),s=bi(r.type,s),DE(t,e,r,s,n);case 15:return rk(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:bi(r,s),_m(t,e),e.tag=1,qr(r)?(t=!0,a0(e)):t=!1,Bc(e,n),ek(e,r,s),Kb(e,r,s,n),Qb(null,e,r,!0,t,n);case 19:return uk(t,e,n);case 22:return sk(t,e,n)}throw Error(ce(156,e.tag))};function Ek(t,e){return QT(t,e)}function dV(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Us(t,e,n,r){return new dV(t,e,n,r)}function Sx(t){return t=t.prototype,!(!t||!t.isReactComponent)}function fV(t){if(typeof t=="function")return Sx(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Uw)return 11;if(t===zw)return 14}return 2}function $a(t,e){var n=t.alternate;return n===null?(n=Us(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function km(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Sx(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case gc:return Yu(n.children,s,i,e);case Vw:o=8,s|=8;break;case bb:return t=Us(12,n,e,s|2),t.elementType=bb,t.lanes=i,t;case vb:return t=Us(13,n,e,s),t.elementType=vb,t.lanes=i,t;case wb:return t=Us(19,n,e,s),t.elementType=wb,t.lanes=i,t;case DT:return bg(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case OT:o=10;break e;case PT:o=9;break e;case Uw:o=11;break e;case zw:o=14;break e;case ma:o=16,r=null;break e}throw Error(ce(130,t==null?t:typeof t,""))}return e=Us(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Yu(t,e,n,r){return t=Us(7,t,r,e),t.lanes=n,t}function bg(t,e,n,r){return t=Us(22,t,r,e),t.elementType=DT,t.lanes=n,t.stateNode={isHidden:!1},t}function wy(t,e,n){return t=Us(6,t,null,e),t.lanes=n,t}function xy(t,e,n){return e=Us(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function hV(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ty(0),this.expirationTimes=ty(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ty(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Ax(t,e,n,r,s,i,o,a,u){return t=new hV(t,e,n,a,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Us(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ox(i),t}function pV(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:mc,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Ck(t){if(!t)return ja;t=t._reactInternals;e:{if(El(t)!==t||t.tag!==1)throw Error(ce(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(qr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ce(171))}if(t.tag===1){var n=t.type;if(qr(n))return CI(t,n,e)}return e}function Nk(t,e,n,r,s,i,o,a,u){return t=Ax(n,r,!0,t,s,i,o,a,u),t.context=Ck(null),n=t.current,r=_r(),s=Fa(n),i=Mo(r,s),i.callback=e??null,Da(n,i,s),t.current.lanes=s,Lh(t,s,r),Gr(t,r),t}function vg(t,e,n,r){var s=e.current,i=_r(),o=Fa(s);return n=Ck(n),e.context===null?e.context=n:e.pendingContext=n,e=Mo(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Da(s,e,o),t!==null&&(ki(t,s,o,i),Em(t,s,o)),o}function w0(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function GE(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ex(t,e){GE(t,e),(t=t.alternate)&&GE(t,e)}function mV(){return null}var _k=typeof reportError=="function"?reportError:function(t){console.error(t)};function Cx(t){this._internalRoot=t}wg.prototype.render=Cx.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ce(409));vg(t,e,null,null)};wg.prototype.unmount=Cx.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;al(function(){vg(null,t,null,null)}),e[Wo]=null}};function wg(t){this._internalRoot=t}wg.prototype.unstable_scheduleHydration=function(t){if(t){var e=sI();t={blockedOn:null,target:t,priority:e};for(var n=0;n<xa.length&&e!==0&&e<xa[n].priority;n++);xa.splice(n,0,t),n===0&&oI(t)}};function Nx(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function xg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function HE(){}function gV(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var l=w0(o);i.call(l)}}var o=Nk(e,r,t,0,null,!1,!1,"",HE);return t._reactRootContainer=o,t[Wo]=o.current,ah(t.nodeType===8?t.parentNode:t),al(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var l=w0(u);a.call(l)}}var u=Ax(t,0,!1,null,null,!1,!1,"",HE);return t._reactRootContainer=u,t[Wo]=u.current,ah(t.nodeType===8?t.parentNode:t),al(function(){vg(e,u,n,r)}),u}function Sg(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var u=w0(o);a.call(u)}}vg(e,o,t,s)}else o=gV(n,e,t,s,r);return w0(o)}nI=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Cf(e.pendingLanes);n!==0&&(qw(e,n|1),Gr(e,un()),!(ut&6)&&(td=un()+500,Ja()))}break;case 13:al(function(){var r=qo(t,1);if(r!==null){var s=_r();ki(r,t,1,s)}}),Ex(t,1)}};Gw=function(t){if(t.tag===13){var e=qo(t,134217728);if(e!==null){var n=_r();ki(e,t,134217728,n)}Ex(t,134217728)}};rI=function(t){if(t.tag===13){var e=Fa(t),n=qo(t,e);if(n!==null){var r=_r();ki(n,t,e,r)}Ex(t,e)}};sI=function(){return vt};iI=function(t,e){var n=vt;try{return vt=t,e()}finally{vt=n}};kb=function(t,e,n){switch(e){case"input":if(Ab(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=fg(r);if(!s)throw Error(ce(90));FT(r),Ab(r,s)}}}break;case"textarea":BT(t,n);break;case"select":e=n.value,e!=null&&Dc(t,!!n.multiple,e,!1)}};qT=vx;GT=al;var yV={usingClientEntryPoint:!1,Events:[$h,wc,fg,jT,WT,vx]},of={findFiberByHostInstance:Uu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},bV={bundleType:of.bundleType,version:of.version,rendererPackageName:of.rendererPackageName,rendererConfig:of.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qo.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=XT(t),t===null?null:t.stateNode},findFiberByHostInstance:of.findFiberByHostInstance||mV,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Up=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Up.isDisabled&&Up.supportsFiber)try{ug=Up.inject(bV),oo=Up}catch{}}ys.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yV;ys.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Nx(e))throw Error(ce(200));return pV(t,e,null,n)};ys.createRoot=function(t,e){if(!Nx(t))throw Error(ce(299));var n=!1,r="",s=_k;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Ax(t,1,!1,null,null,n,!1,r,s),t[Wo]=e.current,ah(t.nodeType===8?t.parentNode:t),new Cx(e)};ys.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ce(188)):(t=Object.keys(t).join(","),Error(ce(268,t)));return t=XT(e),t=t===null?null:t.stateNode,t};ys.flushSync=function(t){return al(t)};ys.hydrate=function(t,e,n){if(!xg(e))throw Error(ce(200));return Sg(null,t,e,!0,n)};ys.hydrateRoot=function(t,e,n){if(!Nx(t))throw Error(ce(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=_k;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Nk(e,null,t,1,n??null,s,!1,i,o),t[Wo]=e.current,ah(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new wg(e)};ys.render=function(t,e,n){if(!xg(e))throw Error(ce(200));return Sg(null,t,e,!1,n)};ys.unmountComponentAtNode=function(t){if(!xg(t))throw Error(ce(40));return t._reactRootContainer?(al(function(){Sg(null,null,t,!1,function(){t._reactRootContainer=null,t[Wo]=null})}),!0):!1};ys.unstable_batchedUpdates=vx;ys.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!xg(n))throw Error(ce(200));if(t==null||t._reactInternals===void 0)throw Error(ce(38));return Sg(t,e,n,!1,r)};ys.version="18.3.1-next-f1338f8080-20240426";function Tk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Tk)}catch(t){console.error(t)}}Tk(),TT.exports=ys;var Mh=TT.exports;const vV=md(Mh),wV=Ow({__proto__:null,default:vV},[Mh]);/**
 * @remix-run/router v1.19.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yt(){return Yt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yt.apply(this,arguments)}var hn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(hn||(hn={}));const KE="popstate";function xV(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return gh("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Vh(s)}return AV(e,n,null,t)}function Ye(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function nd(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function SV(){return Math.random().toString(36).substr(2,8)}function XE(t,e){return{usr:t.state,key:t.key,idx:e}}function gh(t,e,n,r){return n===void 0&&(n=null),Yt({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?eu(e):e,{state:n,key:e&&e.key||r||SV()})}function Vh(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function eu(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function AV(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=hn.Pop,u=null,l=c();l==null&&(l=0,o.replaceState(Yt({},o.state,{idx:l}),""));function c(){return(o.state||{idx:null}).idx}function d(){a=hn.Pop;let b=c(),g=b==null?null:b-l;l=b,u&&u({action:a,location:y.location,delta:g})}function f(b,g){a=hn.Push;let v=gh(y.location,b,g);l=c()+1;let w=XE(v,l),x=y.createHref(v);try{o.pushState(w,"",x)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;s.location.assign(x)}i&&u&&u({action:a,location:y.location,delta:1})}function h(b,g){a=hn.Replace;let v=gh(y.location,b,g);l=c();let w=XE(v,l),x=y.createHref(v);o.replaceState(w,"",x),i&&u&&u({action:a,location:y.location,delta:0})}function p(b){let g=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof b=="string"?b:Vh(b);return v=v.replace(/ $/,"%20"),Ye(g,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,g)}let y={get action(){return a},get location(){return t(s,o)},listen(b){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(KE,d),u=b,()=>{s.removeEventListener(KE,d),u=null}},createHref(b){return e(s,b)},createURL:p,encodeLocation(b){let g=p(b);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:f,replace:h,go(b){return o.go(b)}};return y}var _t;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(_t||(_t={}));const EV=new Set(["lazy","caseSensitive","path","id","index","children"]);function CV(t){return t.index===!0}function yh(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((s,i)=>{let o=[...n,String(i)],a=typeof s.id=="string"?s.id:o.join("-");if(Ye(s.index!==!0||!s.children,"Cannot specify children on an index route"),Ye(!r[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),CV(s)){let u=Yt({},s,e(s),{id:a});return r[a]=u,u}else{let u=Yt({},s,e(s),{id:a,children:void 0});return r[a]=u,s.children&&(u.children=yh(s.children,e,o,r)),u}})}function Fu(t,e,n){return n===void 0&&(n="/"),Rm(t,e,n,!1)}function Rm(t,e,n,r){let s=typeof e=="string"?eu(e):e,i=Uh(s.pathname||"/",n);if(i==null)return null;let o=Ik(t);_V(o);let a=null;for(let u=0;a==null&&u<o.length;++u){let l=BV(i);a=FV(o[u],l,r)}return a}function NV(t,e){let{route:n,pathname:r,params:s}=t;return{id:n.id,pathname:r,params:s,data:e[n.id],handle:n.handle}}function Ik(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let u={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&(Ye(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let l=Ba([r,u.relativePath]),c=n.concat(u);i.children&&i.children.length>0&&(Ye(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),Ik(i.children,e,c,l)),!(i.path==null&&!i.index)&&e.push({path:l,score:DV(l,i.index),routesMeta:c})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let u of kk(i.path))s(i,o,u)}),e}function kk(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=kk(r.join("/")),a=[];return a.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&a.push(...o),a.map(u=>t.startsWith("/")&&u===""?"/":u)}function _V(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:LV(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const TV=/^:[\w-]+$/,IV=3,kV=2,RV=1,OV=10,PV=-2,YE=t=>t==="*";function DV(t,e){let n=t.split("/"),r=n.length;return n.some(YE)&&(r+=PV),e&&(r+=kV),n.filter(s=>!YE(s)).reduce((s,i)=>s+(TV.test(i)?IV:i===""?RV:OV),r)}function LV(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function FV(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let u=r[a],l=a===r.length-1,c=i==="/"?e:e.slice(i.length)||"/",d=QE({path:u.relativePath,caseSensitive:u.caseSensitive,end:l},c),f=u.route;if(!d&&l&&n&&!r[r.length-1].route.index&&(d=QE({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},c)),!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:Ba([i,d.pathname]),pathnameBase:UV(Ba([i,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(i=Ba([i,d.pathnameBase]))}return o}function QE(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=$V(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((l,c,d)=>{let{paramName:f,isOptional:h}=c;if(f==="*"){let y=a[d]||"";o=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const p=a[d];return h&&!p?l[f]=void 0:l[f]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:i,pathnameBase:o,pattern:t}}function $V(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),nd(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function BV(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return nd(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Uh(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function MV(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?eu(t):t;return{pathname:n?n.startsWith("/")?n:VV(n,e):e,search:zV(r),hash:jV(s)}}function VV(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Sy(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Rk(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Ok(t,e){let n=Rk(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Pk(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=eu(t):(s=Yt({},t),Ye(!s.pathname||!s.pathname.includes("?"),Sy("?","pathname","search",s)),Ye(!s.pathname||!s.pathname.includes("#"),Sy("#","pathname","hash",s)),Ye(!s.search||!s.search.includes("#"),Sy("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;s.pathname=f.join("/")}a=d>=0?e[d]:"/"}let u=MV(s,a),l=o&&o!=="/"&&o.endsWith("/"),c=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const Ba=t=>t.join("/").replace(/\/\/+/g,"/"),UV=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),zV=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,jV=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class x0{constructor(e,n,r,s){s===void 0&&(s=!1),this.status=e,this.statusText=n||"",this.internal=s,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function Ag(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Dk=["post","put","patch","delete"],WV=new Set(Dk),qV=["get",...Dk],GV=new Set(qV),HV=new Set([301,302,303,307,308]),KV=new Set([307,308]),Ay={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},XV={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},af={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},_x=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,YV=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),Lk="remix-router-transitions";function QV(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;Ye(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let s;if(t.mapRouteProperties)s=t.mapRouteProperties;else if(t.detectErrorBoundary){let z=t.detectErrorBoundary;s=q=>({hasErrorBoundary:z(q)})}else s=YV;let i={},o=yh(t.routes,s,void 0,i),a,u=t.basename||"/",l=t.unstable_dataStrategy||n5,c=t.unstable_patchRoutesOnNavigation,d=Yt({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),f=null,h=new Set,p=1e3,y=new Set,b=null,g=null,v=null,w=t.hydrationData!=null,x=Fu(o,t.history.location,u),N=null;if(x==null&&!c){let z=xr(404,{pathname:t.history.location.pathname}),{matches:q,route:Y}=aC(o);x=q,N={[Y.id]:z}}x&&!t.hydrationData&&Gl(x,o,t.history.location.pathname).active&&(x=null);let k;if(x)if(x.some(z=>z.route.lazy))k=!1;else if(!x.some(z=>z.route.loader))k=!0;else if(d.v7_partialHydration){let z=t.hydrationData?t.hydrationData.loaderData:null,q=t.hydrationData?t.hydrationData.errors:null,Y=ne=>ne.route.loader?typeof ne.route.loader=="function"&&ne.route.loader.hydrate===!0?!1:z&&z[ne.route.id]!==void 0||q&&q[ne.route.id]!==void 0:!0;if(q){let ne=x.findIndex(xe=>q[xe.route.id]!==void 0);k=x.slice(0,ne+1).every(Y)}else k=x.every(Y)}else k=t.hydrationData!=null;else if(k=!1,x=[],d.v7_partialHydration){let z=Gl(null,o,t.history.location.pathname);z.active&&z.matches&&(x=z.matches)}let O,_={historyAction:t.history.action,location:t.history.location,matches:x,initialized:k,navigation:Ay,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||N,fetchers:new Map,blockers:new Map},$=hn.Pop,M=!1,K,Z=!1,ie=new Map,ee=null,W=!1,V=!1,D=[],L=new Set,U=new Map,F=0,ue=-1,se=new Map,he=new Set,ae=new Map,be=new Map,Te=new Set,ct=new Map,we=new Map,Kn=new Map,pr=!1;function Xn(){if(f=t.history.listen(z=>{let{action:q,location:Y,delta:ne}=z;if(pr){pr=!1;return}nd(we.size===0||ne!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let xe=zd({currentLocation:_.location,nextLocation:Y,historyAction:q});if(xe&&ne!=null){pr=!0,t.history.go(ne*-1),uu(xe,{state:"blocked",location:Y,proceed(){uu(xe,{state:"proceeding",proceed:void 0,reset:void 0,location:Y}),t.history.go(ne)},reset(){let _e=new Map(_.blockers);_e.set(xe,af),Kt({blockers:_e})}});return}return Yr(q,Y)}),n){m5(e,ie);let z=()=>g5(e,ie);e.addEventListener("pagehide",z),ee=()=>e.removeEventListener("pagehide",z)}return _.initialized||Yr(hn.Pop,_.location,{initialHydration:!0}),O}function Es(){f&&f(),ee&&ee(),h.clear(),K&&K.abort(),_.fetchers.forEach((z,q)=>Wl(q)),_.blockers.forEach((z,q)=>au(q))}function Cs(z){return h.add(z),()=>h.delete(z)}function Kt(z,q){q===void 0&&(q={}),_=Yt({},_,z);let Y=[],ne=[];d.v7_fetcherPersist&&_.fetchers.forEach((xe,_e)=>{xe.state==="idle"&&(Te.has(_e)?ne.push(_e):Y.push(_e))}),[...h].forEach(xe=>xe(_,{deletedFetchers:ne,unstable_viewTransitionOpts:q.viewTransitionOpts,unstable_flushSync:q.flushSync===!0})),d.v7_fetcherPersist&&(Y.forEach(xe=>_.fetchers.delete(xe)),ne.forEach(xe=>Wl(xe)))}function En(z,q,Y){var ne,xe;let{flushSync:_e}=Y===void 0?{}:Y,Oe=_.actionData!=null&&_.navigation.formMethod!=null&&Si(_.navigation.formMethod)&&_.navigation.state==="loading"&&((ne=z.state)==null?void 0:ne._isRedirect)!==!0,le;q.actionData?Object.keys(q.actionData).length>0?le=q.actionData:le=null:Oe?le=_.actionData:le=null;let Re=q.loaderData?iC(_.loaderData,q.loaderData,q.matches||[],q.errors):_.loaderData,Ee=_.blockers;Ee.size>0&&(Ee=new Map(Ee),Ee.forEach((Je,nt)=>Ee.set(nt,af)));let Ie=M===!0||_.navigation.formMethod!=null&&Si(_.navigation.formMethod)&&((xe=z.state)==null?void 0:xe._isRedirect)!==!0;a&&(o=a,a=void 0),W||$===hn.Pop||($===hn.Push?t.history.push(z,z.state):$===hn.Replace&&t.history.replace(z,z.state));let at;if($===hn.Pop){let Je=ie.get(_.location.pathname);Je&&Je.has(z.pathname)?at={currentLocation:_.location,nextLocation:z}:ie.has(z.pathname)&&(at={currentLocation:z,nextLocation:_.location})}else if(Z){let Je=ie.get(_.location.pathname);Je?Je.add(z.pathname):(Je=new Set([z.pathname]),ie.set(_.location.pathname,Je)),at={currentLocation:_.location,nextLocation:z}}Kt(Yt({},q,{actionData:le,loaderData:Re,historyAction:$,location:z,initialized:!0,navigation:Ay,revalidation:"idle",restoreScrollPosition:up(z,q.matches||_.matches),preventScrollReset:Ie,blockers:Ee}),{viewTransitionOpts:at,flushSync:_e===!0}),$=hn.Pop,M=!1,Z=!1,W=!1,V=!1,D=[]}async function gn(z,q){if(typeof z=="number"){t.history.go(z);return}let Y=lv(_.location,_.matches,u,d.v7_prependBasename,z,d.v7_relativeSplatPath,q==null?void 0:q.fromRouteId,q==null?void 0:q.relative),{path:ne,submission:xe,error:_e}=ZE(d.v7_normalizeFormMethod,!1,Y,q),Oe=_.location,le=gh(_.location,ne,q&&q.state);le=Yt({},le,t.history.encodeLocation(le));let Re=q&&q.replace!=null?q.replace:void 0,Ee=hn.Push;Re===!0?Ee=hn.Replace:Re===!1||xe!=null&&Si(xe.formMethod)&&xe.formAction===_.location.pathname+_.location.search&&(Ee=hn.Replace);let Ie=q&&"preventScrollReset"in q?q.preventScrollReset===!0:void 0,at=(q&&q.unstable_flushSync)===!0,Je=zd({currentLocation:Oe,nextLocation:le,historyAction:Ee});if(Je){uu(Je,{state:"blocked",location:le,proceed(){uu(Je,{state:"proceeding",proceed:void 0,reset:void 0,location:le}),gn(z,q)},reset(){let nt=new Map(_.blockers);nt.set(Je,af),Kt({blockers:nt})}});return}return await Yr(Ee,le,{submission:xe,pendingError:_e,preventScrollReset:Ie,replace:q&&q.replace,enableViewTransition:q&&q.unstable_viewTransition,flushSync:at})}function wo(){if(Vi(),Kt({revalidation:"loading"}),_.navigation.state!=="submitting"){if(_.navigation.state==="idle"){Yr(_.historyAction,_.location,{startUninterruptedRevalidation:!0});return}Yr($||_.historyAction,_.navigation.location,{overrideNavigation:_.navigation})}}async function Yr(z,q,Y){K&&K.abort(),K=null,$=z,W=(Y&&Y.startUninterruptedRevalidation)===!0,lu(_.location,_.matches),M=(Y&&Y.preventScrollReset)===!0,Z=(Y&&Y.enableViewTransition)===!0;let ne=a||o,xe=Y&&Y.overrideNavigation,_e=Fu(ne,q,u),Oe=(Y&&Y.flushSync)===!0,le=Gl(_e,ne,q.pathname);if(le.active&&le.matches&&(_e=le.matches),!_e){let{error:Xe,notFoundMatches:fn,route:zt}=jd(q.pathname);En(q,{matches:fn,loaderData:{},errors:{[zt.id]:Xe}},{flushSync:Oe});return}if(_.initialized&&!V&&u5(_.location,q)&&!(Y&&Y.submission&&Si(Y.submission.formMethod))){En(q,{matches:_e},{flushSync:Oe});return}K=new AbortController;let Re=nc(t.history,q,K.signal,Y&&Y.submission),Ee;if(Y&&Y.pendingError)Ee=[_c(_e).route.id,{type:_t.error,error:Y.pendingError}];else if(Y&&Y.submission&&Si(Y.submission.formMethod)){let Xe=await Ul(Re,q,Y.submission,_e,le.active,{replace:Y.replace,flushSync:Oe});if(Xe.shortCircuited)return;if(Xe.pendingActionResult){let[fn,zt]=Xe.pendingActionResult;if(is(zt)&&Ag(zt.error)&&zt.error.status===404){K=null,En(q,{matches:Xe.matches,loaderData:{},errors:{[fn]:zt.error}});return}}_e=Xe.matches||_e,Ee=Xe.pendingActionResult,xe=Ey(q,Y.submission),Oe=!1,le.active=!1,Re=nc(t.history,Re.url,Re.signal)}let{shortCircuited:Ie,matches:at,loaderData:Je,errors:nt}=await Vd(Re,q,_e,le.active,xe,Y&&Y.submission,Y&&Y.fetcherSubmission,Y&&Y.replace,Y&&Y.initialHydration===!0,Oe,Ee);Ie||(K=null,En(q,Yt({matches:at||_e},oC(Ee),{loaderData:Je,errors:nt})))}async function Ul(z,q,Y,ne,xe,_e){_e===void 0&&(_e={}),Vi();let Oe=h5(q,Y);if(Kt({navigation:Oe},{flushSync:_e.flushSync===!0}),xe){let Ee=await Hl(ne,q.pathname,z.signal);if(Ee.type==="aborted")return{shortCircuited:!0};if(Ee.type==="error"){let{boundaryId:Ie,error:at}=ql(q.pathname,Ee);return{matches:Ee.partialMatches,pendingActionResult:[Ie,{type:_t.error,error:at}]}}else if(Ee.matches)ne=Ee.matches;else{let{notFoundMatches:Ie,error:at,route:Je}=jd(q.pathname);return{matches:Ie,pendingActionResult:[Je.id,{type:_t.error,error:at}]}}}let le,Re=_f(ne,q);if(!Re.route.action&&!Re.route.lazy)le={type:_t.error,error:xr(405,{method:z.method,pathname:q.pathname,routeId:Re.route.id})};else if(le=(await oi("action",z,[Re],ne))[0],z.signal.aborted)return{shortCircuited:!0};if(qu(le)){let Ee;return _e&&_e.replace!=null?Ee=_e.replace:Ee=nC(le.response.headers.get("Location"),new URL(z.url),u)===_.location.pathname+_.location.search,await na(z,le,{submission:Y,replace:Ee}),{shortCircuited:!0}}if(Wu(le))throw xr(400,{type:"defer-action"});if(is(le)){let Ee=_c(ne,Re.route.id);return(_e&&_e.replace)!==!0&&($=hn.Push),{matches:ne,pendingActionResult:[Ee.route.id,le]}}return{matches:ne,pendingActionResult:[Re.route.id,le]}}async function Vd(z,q,Y,ne,xe,_e,Oe,le,Re,Ee,Ie){let at=xe||Ey(q,_e),Je=_e||Oe||dC(at),nt=!W&&(!d.v7_partialHydration||!Re);if(ne){if(nt){let Mt=ou(Ie);Kt(Yt({navigation:at},Mt!==void 0?{actionData:Mt}:{}),{flushSync:Ee})}let ze=await Hl(Y,q.pathname,z.signal);if(ze.type==="aborted")return{shortCircuited:!0};if(ze.type==="error"){let{boundaryId:Mt,error:Yn}=ql(q.pathname,ze);return{matches:ze.partialMatches,loaderData:{},errors:{[Mt]:Yn}}}else if(ze.matches)Y=ze.matches;else{let{error:Mt,notFoundMatches:Yn,route:Tt}=jd(q.pathname);return{matches:Yn,loaderData:{},errors:{[Tt.id]:Mt}}}}let Xe=a||o,[fn,zt]=JE(t.history,_,Y,Je,q,d.v7_partialHydration&&Re===!0,d.v7_skipActionErrorRevalidation,V,D,L,Te,ae,he,Xe,u,Ie);if(Wd(ze=>!(Y&&Y.some(Mt=>Mt.route.id===ze))||fn&&fn.some(Mt=>Mt.route.id===ze)),ue=++F,fn.length===0&&zt.length===0){let ze=ip();return En(q,Yt({matches:Y,loaderData:{},errors:Ie&&is(Ie[1])?{[Ie[0]]:Ie[1].error}:null},oC(Ie),ze?{fetchers:new Map(_.fetchers)}:{}),{flushSync:Ee}),{shortCircuited:!0}}if(nt){let ze={};if(!ne){ze.navigation=at;let Mt=ou(Ie);Mt!==void 0&&(ze.actionData=Mt)}zt.length>0&&(ze.fetchers=xo(zt)),Kt(ze,{flushSync:Ee})}zt.forEach(ze=>{U.has(ze.key)&&Ui(ze.key),ze.controller&&U.set(ze.key,ze.controller)});let Ns=()=>zt.forEach(ze=>Ui(ze.key));K&&K.signal.addEventListener("abort",Ns);let{loaderResults:ui,fetcherResults:zi}=await So(_.matches,Y,fn,zt,z);if(z.signal.aborted)return{shortCircuited:!0};K&&K.signal.removeEventListener("abort",Ns),zt.forEach(ze=>U.delete(ze.key));let ji=uC([...ui,...zi]);if(ji){if(ji.idx>=fn.length){let ze=zt[ji.idx-fn.length].key;he.add(ze)}return await na(z,ji.result,{replace:le}),{shortCircuited:!0}}let{loaderData:Eo,errors:Zr}=sC(_,Y,fn,ui,Ie,zt,zi,ct);ct.forEach((ze,Mt)=>{ze.subscribe(Yn=>{(Yn||ze.done)&&ct.delete(Mt)})}),d.v7_partialHydration&&Re&&_.errors&&Object.entries(_.errors).filter(ze=>{let[Mt]=ze;return!fn.some(Yn=>Yn.route.id===Mt)}).forEach(ze=>{let[Mt,Yn]=ze;Zr=Object.assign(Zr||{},{[Mt]:Yn})});let cu=ip(),du=op(ue),fu=cu||du||zt.length>0;return Yt({matches:Y,loaderData:Eo,errors:Zr},fu?{fetchers:new Map(_.fetchers)}:{})}function ou(z){if(z&&!is(z[1]))return{[z[0]]:z[1].data};if(_.actionData)return Object.keys(_.actionData).length===0?null:_.actionData}function xo(z){return z.forEach(q=>{let Y=_.fetchers.get(q.key),ne=uf(void 0,Y?Y.data:void 0);_.fetchers.set(q.key,ne)}),new Map(_.fetchers)}function Ud(z,q,Y,ne){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");U.has(z)&&Ui(z);let xe=(ne&&ne.unstable_flushSync)===!0,_e=a||o,Oe=lv(_.location,_.matches,u,d.v7_prependBasename,Y,d.v7_relativeSplatPath,q,ne==null?void 0:ne.relative),le=Fu(_e,Oe,u),Re=Gl(le,_e,Oe);if(Re.active&&Re.matches&&(le=Re.matches),!le){ai(z,q,xr(404,{pathname:Oe}),{flushSync:xe});return}let{path:Ee,submission:Ie,error:at}=ZE(d.v7_normalizeFormMethod,!0,Oe,ne);if(at){ai(z,q,at,{flushSync:xe});return}let Je=_f(le,Ee);if(M=(ne&&ne.preventScrollReset)===!0,Ie&&Si(Ie.formMethod)){zl(z,q,Ee,Je,le,Re.active,xe,Ie);return}ae.set(z,{routeId:q,path:Ee}),Mi(z,q,Ee,Je,le,Re.active,xe,Ie)}async function zl(z,q,Y,ne,xe,_e,Oe,le){Vi(),ae.delete(z);function Re(Tt){if(!Tt.route.action&&!Tt.route.lazy){let _s=xr(405,{method:le.formMethod,pathname:Y,routeId:q});return ai(z,q,_s,{flushSync:Oe}),!0}return!1}if(!_e&&Re(ne))return;let Ee=_.fetchers.get(z);Qr(z,p5(le,Ee),{flushSync:Oe});let Ie=new AbortController,at=nc(t.history,Y,Ie.signal,le);if(_e){let Tt=await Hl(xe,Y,at.signal);if(Tt.type==="aborted")return;if(Tt.type==="error"){let{error:_s}=ql(Y,Tt);ai(z,q,_s,{flushSync:Oe});return}else if(Tt.matches){if(xe=Tt.matches,ne=_f(xe,Y),Re(ne))return}else{ai(z,q,xr(404,{pathname:Y}),{flushSync:Oe});return}}U.set(z,Ie);let Je=F,Xe=(await oi("action",at,[ne],xe))[0];if(at.signal.aborted){U.get(z)===Ie&&U.delete(z);return}if(d.v7_fetcherPersist&&Te.has(z)){if(qu(Xe)||is(Xe)){Qr(z,pa(void 0));return}}else{if(qu(Xe))if(U.delete(z),ue>Je){Qr(z,pa(void 0));return}else return he.add(z),Qr(z,uf(le)),na(at,Xe,{fetcherSubmission:le});if(is(Xe)){ai(z,q,Xe.error);return}}if(Wu(Xe))throw xr(400,{type:"defer-action"});let fn=_.navigation.location||_.location,zt=nc(t.history,fn,Ie.signal),Ns=a||o,ui=_.navigation.state!=="idle"?Fu(Ns,_.navigation.location,u):_.matches;Ye(ui,"Didn't find any matches after fetcher action");let zi=++F;se.set(z,zi);let ji=uf(le,Xe.data);_.fetchers.set(z,ji);let[Eo,Zr]=JE(t.history,_,ui,le,fn,!1,d.v7_skipActionErrorRevalidation,V,D,L,Te,ae,he,Ns,u,[ne.route.id,Xe]);Zr.filter(Tt=>Tt.key!==z).forEach(Tt=>{let _s=Tt.key,Jr=_.fetchers.get(_s),mr=uf(void 0,Jr?Jr.data:void 0);_.fetchers.set(_s,mr),U.has(_s)&&Ui(_s),Tt.controller&&U.set(_s,Tt.controller)}),Kt({fetchers:new Map(_.fetchers)});let cu=()=>Zr.forEach(Tt=>Ui(Tt.key));Ie.signal.addEventListener("abort",cu);let{loaderResults:du,fetcherResults:fu}=await So(_.matches,ui,Eo,Zr,zt);if(Ie.signal.aborted)return;Ie.signal.removeEventListener("abort",cu),se.delete(z),U.delete(z),Zr.forEach(Tt=>U.delete(Tt.key));let ze=uC([...du,...fu]);if(ze){if(ze.idx>=Eo.length){let Tt=Zr[ze.idx-Eo.length].key;he.add(Tt)}return na(zt,ze.result)}let{loaderData:Mt,errors:Yn}=sC(_,_.matches,Eo,du,void 0,Zr,fu,ct);if(_.fetchers.has(z)){let Tt=pa(Xe.data);_.fetchers.set(z,Tt)}op(zi),_.navigation.state==="loading"&&zi>ue?(Ye($,"Expected pending action"),K&&K.abort(),En(_.navigation.location,{matches:ui,loaderData:Mt,errors:Yn,fetchers:new Map(_.fetchers)})):(Kt({errors:Yn,loaderData:iC(_.loaderData,Mt,ui,Yn),fetchers:new Map(_.fetchers)}),V=!1)}async function Mi(z,q,Y,ne,xe,_e,Oe,le){let Re=_.fetchers.get(z);Qr(z,uf(le,Re?Re.data:void 0),{flushSync:Oe});let Ee=new AbortController,Ie=nc(t.history,Y,Ee.signal);if(_e){let Xe=await Hl(xe,Y,Ie.signal);if(Xe.type==="aborted")return;if(Xe.type==="error"){let{error:fn}=ql(Y,Xe);ai(z,q,fn,{flushSync:Oe});return}else if(Xe.matches)xe=Xe.matches,ne=_f(xe,Y);else{ai(z,q,xr(404,{pathname:Y}),{flushSync:Oe});return}}U.set(z,Ee);let at=F,nt=(await oi("loader",Ie,[ne],xe))[0];if(Wu(nt)&&(nt=await Vk(nt,Ie.signal,!0)||nt),U.get(z)===Ee&&U.delete(z),!Ie.signal.aborted){if(Te.has(z)){Qr(z,pa(void 0));return}if(qu(nt))if(ue>at){Qr(z,pa(void 0));return}else{he.add(z),await na(Ie,nt);return}if(is(nt)){ai(z,q,nt.error);return}Ye(!Wu(nt),"Unhandled fetcher deferred data"),Qr(z,pa(nt.data))}}async function na(z,q,Y){let{submission:ne,fetcherSubmission:xe,replace:_e}=Y===void 0?{}:Y;q.response.headers.has("X-Remix-Revalidate")&&(V=!0);let Oe=q.response.headers.get("Location");Ye(Oe,"Expected a Location header on the redirect Response"),Oe=nC(Oe,new URL(z.url),u);let le=gh(_.location,Oe,{_isRedirect:!0});if(n){let nt=!1;if(q.response.headers.has("X-Remix-Reload-Document"))nt=!0;else if(_x.test(Oe)){const Xe=t.history.createURL(Oe);nt=Xe.origin!==e.location.origin||Uh(Xe.pathname,u)==null}if(nt){_e?e.location.replace(Oe):e.location.assign(Oe);return}}K=null;let Re=_e===!0||q.response.headers.has("X-Remix-Replace")?hn.Replace:hn.Push,{formMethod:Ee,formAction:Ie,formEncType:at}=_.navigation;!ne&&!xe&&Ee&&Ie&&at&&(ne=dC(_.navigation));let Je=ne||xe;if(KV.has(q.response.status)&&Je&&Si(Je.formMethod))await Yr(Re,le,{submission:Yt({},Je,{formAction:Oe}),preventScrollReset:M});else{let nt=Ey(le,ne);await Yr(Re,le,{overrideNavigation:nt,fetcherSubmission:xe,preventScrollReset:M})}}async function oi(z,q,Y,ne){try{let xe=await r5(l,z,q,Y,ne,i,s);return await Promise.all(xe.map((_e,Oe)=>{if(c5(_e)){let le=_e.result;return{type:_t.redirect,response:o5(le,q,Y[Oe].route.id,ne,u,d.v7_relativeSplatPath)}}return i5(_e)}))}catch(xe){return Y.map(()=>({type:_t.error,error:xe}))}}async function So(z,q,Y,ne,xe){let[_e,...Oe]=await Promise.all([Y.length?oi("loader",xe,Y,q):[],...ne.map(le=>{if(le.matches&&le.match&&le.controller){let Re=nc(t.history,le.path,le.controller.signal);return oi("loader",Re,[le.match],le.matches).then(Ee=>Ee[0])}else return Promise.resolve({type:_t.error,error:xr(404,{pathname:le.path})})})]);return await Promise.all([cC(z,Y,_e,_e.map(()=>xe.signal),!1,_.loaderData),cC(z,ne.map(le=>le.match),Oe,ne.map(le=>le.controller?le.controller.signal:null),!0)]),{loaderResults:_e,fetcherResults:Oe}}function Vi(){V=!0,D.push(...Wd()),ae.forEach((z,q)=>{U.has(q)&&(L.add(q),Ui(q))})}function Qr(z,q,Y){Y===void 0&&(Y={}),_.fetchers.set(z,q),Kt({fetchers:new Map(_.fetchers)},{flushSync:(Y&&Y.flushSync)===!0})}function ai(z,q,Y,ne){ne===void 0&&(ne={});let xe=_c(_.matches,q);Wl(z),Kt({errors:{[xe.route.id]:Y},fetchers:new Map(_.fetchers)},{flushSync:(ne&&ne.flushSync)===!0})}function jl(z){return d.v7_fetcherPersist&&(be.set(z,(be.get(z)||0)+1),Te.has(z)&&Te.delete(z)),_.fetchers.get(z)||XV}function Wl(z){let q=_.fetchers.get(z);U.has(z)&&!(q&&q.state==="loading"&&se.has(z))&&Ui(z),ae.delete(z),se.delete(z),he.delete(z),Te.delete(z),L.delete(z),_.fetchers.delete(z)}function w1(z){if(d.v7_fetcherPersist){let q=(be.get(z)||0)-1;q<=0?(be.delete(z),Te.add(z)):be.set(z,q)}else Wl(z);Kt({fetchers:new Map(_.fetchers)})}function Ui(z){let q=U.get(z);Ye(q,"Expected fetch controller: "+z),q.abort(),U.delete(z)}function sp(z){for(let q of z){let Y=jl(q),ne=pa(Y.data);_.fetchers.set(q,ne)}}function ip(){let z=[],q=!1;for(let Y of he){let ne=_.fetchers.get(Y);Ye(ne,"Expected fetcher: "+Y),ne.state==="loading"&&(he.delete(Y),z.push(Y),q=!0)}return sp(z),q}function op(z){let q=[];for(let[Y,ne]of se)if(ne<z){let xe=_.fetchers.get(Y);Ye(xe,"Expected fetcher: "+Y),xe.state==="loading"&&(Ui(Y),se.delete(Y),q.push(Y))}return sp(q),q.length>0}function ap(z,q){let Y=_.blockers.get(z)||af;return we.get(z)!==q&&we.set(z,q),Y}function au(z){_.blockers.delete(z),we.delete(z)}function uu(z,q){let Y=_.blockers.get(z)||af;Ye(Y.state==="unblocked"&&q.state==="blocked"||Y.state==="blocked"&&q.state==="blocked"||Y.state==="blocked"&&q.state==="proceeding"||Y.state==="blocked"&&q.state==="unblocked"||Y.state==="proceeding"&&q.state==="unblocked","Invalid blocker state transition: "+Y.state+" -> "+q.state);let ne=new Map(_.blockers);ne.set(z,q),Kt({blockers:ne})}function zd(z){let{currentLocation:q,nextLocation:Y,historyAction:ne}=z;if(we.size===0)return;we.size>1&&nd(!1,"A router only supports one blocker at a time");let xe=Array.from(we.entries()),[_e,Oe]=xe[xe.length-1],le=_.blockers.get(_e);if(!(le&&le.state==="proceeding")&&Oe({currentLocation:q,nextLocation:Y,historyAction:ne}))return _e}function jd(z){let q=xr(404,{pathname:z}),Y=a||o,{matches:ne,route:xe}=aC(Y);return Wd(),{notFoundMatches:ne,route:xe,error:q}}function ql(z,q){return{boundaryId:_c(q.partialMatches).route.id,error:xr(400,{type:"route-discovery",pathname:z,message:q.error!=null&&"message"in q.error?q.error:String(q.error)})}}function Wd(z){let q=[];return ct.forEach((Y,ne)=>{(!z||z(ne))&&(Y.cancel(),q.push(ne),ct.delete(ne))}),q}function x1(z,q,Y){if(b=z,v=q,g=Y||null,!w&&_.navigation===Ay){w=!0;let ne=up(_.location,_.matches);ne!=null&&Kt({restoreScrollPosition:ne})}return()=>{b=null,v=null,g=null}}function Ao(z,q){return g&&g(z,q.map(ne=>NV(ne,_.loaderData)))||z.key}function lu(z,q){if(b&&v){let Y=Ao(z,q);b[Y]=v()}}function up(z,q){if(b){let Y=Ao(z,q),ne=b[Y];if(typeof ne=="number")return ne}return null}function Gl(z,q,Y){if(c){if(y.has(Y))return{active:!1,matches:z};if(z){if(Object.keys(z[0].params).length>0)return{active:!0,matches:Rm(q,Y,u,!0)}}else return{active:!0,matches:Rm(q,Y,u,!0)||[]}}return{active:!1,matches:null}}async function Hl(z,q,Y){let ne=z;for(;;){let xe=a==null,_e=a||o;try{await t5(c,q,ne,_e,i,s,Kn,Y)}catch(Re){return{type:"error",error:Re,partialMatches:ne}}finally{xe&&(o=[...o])}if(Y.aborted)return{type:"aborted"};let Oe=Fu(_e,q,u);if(Oe)return lp(q,y),{type:"success",matches:Oe};let le=Rm(_e,q,u,!0);if(!le||ne.length===le.length&&ne.every((Re,Ee)=>Re.route.id===le[Ee].route.id))return lp(q,y),{type:"success",matches:null};ne=le}}function lp(z,q){if(q.size>=p){let Y=q.values().next().value;q.delete(Y)}q.add(z)}function S1(z){i={},a=yh(z,s,void 0,i)}function qd(z,q){let Y=a==null;$k(z,q,a||o,i,s),Y&&(o=[...o],Kt({}))}return O={get basename(){return u},get future(){return d},get state(){return _},get routes(){return o},get window(){return e},initialize:Xn,subscribe:Cs,enableScrollRestoration:x1,navigate:gn,fetch:Ud,revalidate:wo,createHref:z=>t.history.createHref(z),encodeLocation:z=>t.history.encodeLocation(z),getFetcher:jl,deleteFetcher:w1,dispose:Es,getBlocker:ap,deleteBlocker:au,patchRoutes:qd,_internalFetchControllers:U,_internalActiveDeferreds:ct,_internalSetRoutes:S1},O}function ZV(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function lv(t,e,n,r,s,i,o,a){let u,l;if(o){u=[];for(let d of e)if(u.push(d),d.route.id===o){l=d;break}}else u=e,l=e[e.length-1];let c=Pk(s||".",Ok(u,i),Uh(t.pathname,n)||t.pathname,a==="path");return s==null&&(c.search=t.search,c.hash=t.hash),(s==null||s===""||s===".")&&l&&l.route.index&&!Tx(c.search)&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(c.pathname=c.pathname==="/"?n:Ba([n,c.pathname])),Vh(c)}function ZE(t,e,n,r){if(!r||!ZV(r))return{path:n};if(r.formMethod&&!f5(r.formMethod))return{path:n,error:xr(405,{method:r.formMethod})};let s=()=>({path:n,error:xr(400,{type:"invalid-body"})}),i=r.formMethod||"get",o=t?i.toUpperCase():i.toLowerCase(),a=Bk(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!Si(o))return s();let f=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((h,p)=>{let[y,b]=p;return""+h+y+"="+b+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:f}}}else if(r.formEncType==="application/json"){if(!Si(o))return s();try{let f=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:f,text:void 0}}}catch{return s()}}}Ye(typeof FormData=="function","FormData is not available in this environment");let u,l;if(r.formData)u=cv(r.formData),l=r.formData;else if(r.body instanceof FormData)u=cv(r.body),l=r.body;else if(r.body instanceof URLSearchParams)u=r.body,l=rC(u);else if(r.body==null)u=new URLSearchParams,l=new FormData;else try{u=new URLSearchParams(r.body),l=rC(u)}catch{return s()}let c={formMethod:o,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:l,json:void 0,text:void 0};if(Si(c.formMethod))return{path:n,submission:c};let d=eu(n);return e&&d.search&&Tx(d.search)&&u.append("index",""),d.search="?"+u,{path:Vh(d),submission:c}}function JV(t,e){let n=t;if(e){let r=t.findIndex(s=>s.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function JE(t,e,n,r,s,i,o,a,u,l,c,d,f,h,p,y){let b=y?is(y[1])?y[1].error:y[1].data:void 0,g=t.createURL(e.location),v=t.createURL(s),w=y&&is(y[1])?y[0]:void 0,x=w?JV(n,w):n,N=y?y[1].statusCode:void 0,k=o&&N&&N>=400,O=x.filter(($,M)=>{let{route:K}=$;if(K.lazy)return!0;if(K.loader==null)return!1;if(i)return typeof K.loader!="function"||K.loader.hydrate?!0:e.loaderData[K.id]===void 0&&(!e.errors||e.errors[K.id]===void 0);if(e5(e.loaderData,e.matches[M],$)||u.some(ee=>ee===$.route.id))return!0;let Z=e.matches[M],ie=$;return eC($,Yt({currentUrl:g,currentParams:Z.params,nextUrl:v,nextParams:ie.params},r,{actionResult:b,actionStatus:N,defaultShouldRevalidate:k?!1:a||g.pathname+g.search===v.pathname+v.search||g.search!==v.search||Fk(Z,ie)}))}),_=[];return d.forEach(($,M)=>{if(i||!n.some(W=>W.route.id===$.routeId)||c.has(M))return;let K=Fu(h,$.path,p);if(!K){_.push({key:M,routeId:$.routeId,path:$.path,matches:null,match:null,controller:null});return}let Z=e.fetchers.get(M),ie=_f(K,$.path),ee=!1;f.has(M)?ee=!1:l.has(M)?(l.delete(M),ee=!0):Z&&Z.state!=="idle"&&Z.data===void 0?ee=a:ee=eC(ie,Yt({currentUrl:g,currentParams:e.matches[e.matches.length-1].params,nextUrl:v,nextParams:n[n.length-1].params},r,{actionResult:b,actionStatus:N,defaultShouldRevalidate:k?!1:a})),ee&&_.push({key:M,routeId:$.routeId,path:$.path,matches:K,match:ie,controller:new AbortController})}),[O,_]}function e5(t,e,n){let r=!e||n.route.id!==e.route.id,s=t[n.route.id]===void 0;return r||s}function Fk(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function eC(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function t5(t,e,n,r,s,i,o,a){let u=[e,...n.map(l=>l.route.id)].join("-");try{let l=o.get(u);l||(l=t({path:e,matches:n,patch:(c,d)=>{a.aborted||$k(c,d,r,s,i)}}),o.set(u,l)),l&&l5(l)&&await l}finally{o.delete(u)}}function $k(t,e,n,r,s){if(t){var i;let o=r[t];Ye(o,"No route found to patch children into: routeId = "+t);let a=yh(e,s,[t,"patch",String(((i=o.children)==null?void 0:i.length)||"0")],r);o.children?o.children.push(...a):o.children=a}else{let o=yh(e,s,["patch",String(n.length||"0")],r);n.push(...o)}}async function tC(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let s=n[t.id];Ye(s,"No route found in manifest");let i={};for(let o in r){let u=s[o]!==void 0&&o!=="hasErrorBoundary";nd(!u,'Route "'+s.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!u&&!EV.has(o)&&(i[o]=r[o])}Object.assign(s,i),Object.assign(s,Yt({},e(s),{lazy:void 0}))}function n5(t){return Promise.all(t.matches.map(e=>e.resolve()))}async function r5(t,e,n,r,s,i,o,a){let u=r.reduce((d,f)=>d.add(f.route.id),new Set),l=new Set,c=await t({matches:s.map(d=>{let f=u.has(d.route.id);return Yt({},d,{shouldLoad:f,resolve:p=>(l.add(d.route.id),f?s5(e,n,d,i,o,p,a):Promise.resolve({type:_t.data,result:void 0}))})}),request:n,params:s[0].params,context:a});return s.forEach(d=>Ye(l.has(d.route.id),'`match.resolve()` was not called for route id "'+d.route.id+'". You must call `match.resolve()` on every match passed to `dataStrategy` to ensure all routes are properly loaded.')),c.filter((d,f)=>u.has(s[f].route.id))}async function s5(t,e,n,r,s,i,o){let a,u,l=c=>{let d,f=new Promise((y,b)=>d=b);u=()=>d(),e.signal.addEventListener("abort",u);let h=y=>typeof c!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):c({request:e,params:n.params,context:o},...y!==void 0?[y]:[]),p;return i?p=i(y=>h(y)):p=(async()=>{try{return{type:"data",result:await h()}}catch(y){return{type:"error",result:y}}})(),Promise.race([p,f])};try{let c=n.route[t];if(n.route.lazy)if(c){let d,[f]=await Promise.all([l(c).catch(h=>{d=h}),tC(n.route,s,r)]);if(d!==void 0)throw d;a=f}else if(await tC(n.route,s,r),c=n.route[t],c)a=await l(c);else if(t==="action"){let d=new URL(e.url),f=d.pathname+d.search;throw xr(405,{method:e.method,pathname:f,routeId:n.route.id})}else return{type:_t.data,result:void 0};else if(c)a=await l(c);else{let d=new URL(e.url),f=d.pathname+d.search;throw xr(404,{pathname:f})}Ye(a.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(c){return{type:_t.error,result:c}}finally{u&&e.signal.removeEventListener("abort",u)}return a}async function i5(t){let{result:e,type:n}=t;if(Mk(e)){let l;try{let c=e.headers.get("Content-Type");c&&/\bapplication\/json\b/.test(c)?e.body==null?l=null:l=await e.json():l=await e.text()}catch(c){return{type:_t.error,error:c}}return n===_t.error?{type:_t.error,error:new x0(e.status,e.statusText,l),statusCode:e.status,headers:e.headers}:{type:_t.data,data:l,statusCode:e.status,headers:e.headers}}if(n===_t.error){if(lC(e)){var r;if(e.data instanceof Error){var s;return{type:_t.error,error:e.data,statusCode:(s=e.init)==null?void 0:s.status}}e=new x0(((r=e.init)==null?void 0:r.status)||500,void 0,e.data)}return{type:_t.error,error:e,statusCode:Ag(e)?e.status:void 0}}if(d5(e)){var i,o;return{type:_t.deferred,deferredData:e,statusCode:(i=e.init)==null?void 0:i.status,headers:((o=e.init)==null?void 0:o.headers)&&new Headers(e.init.headers)}}if(lC(e)){var a,u;return{type:_t.data,data:e.data,statusCode:(a=e.init)==null?void 0:a.status,headers:(u=e.init)!=null&&u.headers?new Headers(e.init.headers):void 0}}return{type:_t.data,data:e}}function o5(t,e,n,r,s,i){let o=t.headers.get("Location");if(Ye(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!_x.test(o)){let a=r.slice(0,r.findIndex(u=>u.route.id===n)+1);o=lv(new URL(e.url),a,s,!0,o,i),t.headers.set("Location",o)}return t}function nC(t,e,n){if(_x.test(t)){let r=t,s=r.startsWith("//")?new URL(e.protocol+r):new URL(r),i=Uh(s.pathname,n)!=null;if(s.origin===e.origin&&i)return s.pathname+s.search+s.hash}return t}function nc(t,e,n,r){let s=t.createURL(Bk(e)).toString(),i={signal:n};if(r&&Si(r.formMethod)){let{formMethod:o,formEncType:a}=r;i.method=o.toUpperCase(),a==="application/json"?(i.headers=new Headers({"Content-Type":a}),i.body=JSON.stringify(r.json)):a==="text/plain"?i.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?i.body=cv(r.formData):i.body=r.formData}return new Request(s,i)}function cv(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function rC(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function a5(t,e,n,r,s,i){let o={},a=null,u,l=!1,c={},d=r&&is(r[1])?r[1].error:void 0;return n.forEach((f,h)=>{let p=e[h].route.id;if(Ye(!qu(f),"Cannot handle redirect results in processLoaderData"),is(f)){let y=f.error;d!==void 0&&(y=d,d=void 0),a=a||{};{let b=_c(t,p);a[b.route.id]==null&&(a[b.route.id]=y)}o[p]=void 0,l||(l=!0,u=Ag(f.error)?f.error.status:500),f.headers&&(c[p]=f.headers)}else Wu(f)?(s.set(p,f.deferredData),o[p]=f.deferredData.data,f.statusCode!=null&&f.statusCode!==200&&!l&&(u=f.statusCode),f.headers&&(c[p]=f.headers)):(o[p]=f.data,f.statusCode&&f.statusCode!==200&&!l&&(u=f.statusCode),f.headers&&(c[p]=f.headers))}),d!==void 0&&r&&(a={[r[0]]:d},o[r[0]]=void 0),{loaderData:o,errors:a,statusCode:u||200,loaderHeaders:c}}function sC(t,e,n,r,s,i,o,a){let{loaderData:u,errors:l}=a5(e,n,r,s,a);for(let c=0;c<i.length;c++){let{key:d,match:f,controller:h}=i[c];Ye(o!==void 0&&o[c]!==void 0,"Did not find corresponding fetcher result");let p=o[c];if(!(h&&h.signal.aborted))if(is(p)){let y=_c(t.matches,f==null?void 0:f.route.id);l&&l[y.route.id]||(l=Yt({},l,{[y.route.id]:p.error})),t.fetchers.delete(d)}else if(qu(p))Ye(!1,"Unhandled fetcher revalidation redirect");else if(Wu(p))Ye(!1,"Unhandled fetcher deferred data");else{let y=pa(p.data);t.fetchers.set(d,y)}}return{loaderData:u,errors:l}}function iC(t,e,n,r){let s=Yt({},e);for(let i of n){let o=i.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(s[o]=e[o]):t[o]!==void 0&&i.route.loader&&(s[o]=t[o]),r&&r.hasOwnProperty(o))break}return s}function oC(t){return t?is(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function _c(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function aC(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function xr(t,e){let{pathname:n,routeId:r,method:s,type:i,message:o}=e===void 0?{}:e,a="Unknown Server Error",u="Unknown @remix-run/router error";return t===400?(a="Bad Request",i==="route-discovery"?u='Unable to match URL "'+n+'" - the `unstable_patchRoutesOnNavigation()` '+(`function threw the following error:
`+o):s&&n&&r?u="You made a "+s+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":i==="defer-action"?u="defer() is not supported in actions":i==="invalid-body"&&(u="Unable to encode submission body")):t===403?(a="Forbidden",u='Route "'+r+'" does not match URL "'+n+'"'):t===404?(a="Not Found",u='No route matches URL "'+n+'"'):t===405&&(a="Method Not Allowed",s&&n&&r?u="You made a "+s.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":s&&(u='Invalid request method "'+s.toUpperCase()+'"')),new x0(t||500,a,new Error(u),!0)}function uC(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(qu(n))return{result:n,idx:e}}}function Bk(t){let e=typeof t=="string"?eu(t):t;return Vh(Yt({},e,{hash:""}))}function u5(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function l5(t){return typeof t=="object"&&t!=null&&"then"in t}function c5(t){return Mk(t.result)&&HV.has(t.result.status)}function Wu(t){return t.type===_t.deferred}function is(t){return t.type===_t.error}function qu(t){return(t&&t.type)===_t.redirect}function lC(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function d5(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function Mk(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function f5(t){return GV.has(t.toLowerCase())}function Si(t){return WV.has(t.toLowerCase())}async function cC(t,e,n,r,s,i){for(let o=0;o<n.length;o++){let a=n[o],u=e[o];if(!u)continue;let l=t.find(d=>d.route.id===u.route.id),c=l!=null&&!Fk(l,u)&&(i&&i[u.route.id])!==void 0;if(Wu(a)&&(s||c)){let d=r[o];Ye(d,"Expected an AbortSignal for revalidating fetcher deferred result"),await Vk(a,d,s).then(f=>{f&&(n[o]=f||n[o])})}}}async function Vk(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:_t.data,data:t.deferredData.unwrappedData}}catch(s){return{type:_t.error,error:s}}return{type:_t.data,data:t.deferredData.data}}}function Tx(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function _f(t,e){let n=typeof e=="string"?eu(e).search:e.search;if(t[t.length-1].route.index&&Tx(n||""))return t[t.length-1];let r=Rk(t);return r[r.length-1]}function dC(t){let{formMethod:e,formAction:n,formEncType:r,text:s,formData:i,json:o}=t;if(!(!e||!n||!r)){if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:s};if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:i,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function Ey(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function h5(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function uf(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function p5(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function pa(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function m5(t,e){try{let n=t.sessionStorage.getItem(Lk);if(n){let r=JSON.parse(n);for(let[s,i]of Object.entries(r||{}))i&&Array.isArray(i)&&e.set(s,new Set(i||[]))}}catch{}}function g5(t,e){if(e.size>0){let n={};for(let[r,s]of e)n[r]=[...s];try{t.sessionStorage.setItem(Lk,JSON.stringify(n))}catch(r){nd(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.26.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function S0(){return S0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},S0.apply(this,arguments)}const Eg=P.createContext(null),Uk=P.createContext(null),Cg=P.createContext(null),Ix=P.createContext(null),Cl=P.createContext({outlet:null,matches:[],isDataRoute:!1}),zk=P.createContext(null);function Ng(){return P.useContext(Ix)!=null}function jk(){return Ng()||Ye(!1),P.useContext(Ix).location}function Wk(t){P.useContext(Cg).static||P.useLayoutEffect(t)}function _g(){let{isDataRoute:t}=P.useContext(Cl);return t?k5():y5()}function y5(){Ng()||Ye(!1);let t=P.useContext(Eg),{basename:e,future:n,navigator:r}=P.useContext(Cg),{matches:s}=P.useContext(Cl),{pathname:i}=jk(),o=JSON.stringify(Ok(s,n.v7_relativeSplatPath)),a=P.useRef(!1);return Wk(()=>{a.current=!0}),P.useCallback(function(l,c){if(c===void 0&&(c={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let d=Pk(l,JSON.parse(o),i,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Ba([e,d.pathname])),(c.replace?r.replace:r.push)(d,c.state,c)},[e,r,o,i,t])}const qk=P.createContext(null);function b5(){return P.useContext(qk)}function v5(t){let e=P.useContext(Cl).outlet;return e&&P.createElement(qk.Provider,{value:t},e)}function w5(t,e,n,r){Ng()||Ye(!1);let{navigator:s}=P.useContext(Cg),{matches:i}=P.useContext(Cl),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let l=jk(),c;c=l;let d=c.pathname||"/",f=d;if(u!=="/"){let y=u.replace(/^\//,"").split("/");f="/"+d.replace(/^\//,"").split("/").slice(y.length).join("/")}let h=Fu(t,{pathname:f});return C5(h&&h.map(y=>Object.assign({},y,{params:Object.assign({},a,y.params),pathname:Ba([u,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?u:Ba([u,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,n,r)}function x5(){let t=I5(),e=Ag(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),n?P.createElement("pre",{style:s},n):null,null)}const S5=P.createElement(x5,null);class A5 extends P.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?P.createElement(Cl.Provider,{value:this.props.routeContext},P.createElement(zk.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function E5(t){let{routeContext:e,match:n,children:r}=t,s=P.useContext(Eg);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),P.createElement(Cl.Provider,{value:e},r)}function C5(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let c=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);c>=0||Ye(!1),o=o.slice(0,Math.min(o.length,c+1))}let u=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let d=o[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=c),d.route.id){let{loaderData:f,errors:h}=n,p=d.route.loader&&f[d.route.id]===void 0&&(!h||h[d.route.id]===void 0);if(d.route.lazy||p){u=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((c,d,f)=>{let h,p=!1,y=null,b=null;n&&(h=a&&d.route.id?a[d.route.id]:void 0,y=d.route.errorElement||S5,u&&(l<0&&f===0?(R5("route-fallback"),p=!0,b=null):l===f&&(p=!0,b=d.route.hydrateFallbackElement||null)));let g=e.concat(o.slice(0,f+1)),v=()=>{let w;return h?w=y:p?w=b:d.route.Component?w=P.createElement(d.route.Component,null):d.route.element?w=d.route.element:w=c,P.createElement(E5,{match:d,routeContext:{outlet:c,matches:g,isDataRoute:n!=null},children:w})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?P.createElement(A5,{location:n.location,revalidation:n.revalidation,component:y,error:h,children:v(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):v()},null)}var Gk=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Gk||{}),A0=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(A0||{});function N5(t){let e=P.useContext(Eg);return e||Ye(!1),e}function _5(t){let e=P.useContext(Uk);return e||Ye(!1),e}function T5(t){let e=P.useContext(Cl);return e||Ye(!1),e}function Hk(t){let e=T5(),n=e.matches[e.matches.length-1];return n.route.id||Ye(!1),n.route.id}function I5(){var t;let e=P.useContext(zk),n=_5(A0.UseRouteError),r=Hk(A0.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function k5(){let{router:t}=N5(Gk.UseNavigateStable),e=Hk(A0.UseNavigateStable),n=P.useRef(!1);return Wk(()=>{n.current=!0}),P.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,S0({fromRouteId:e},i)))},[t,e])}const fC={};function R5(t,e,n){fC[t]||(fC[t]=!0)}function O5(t){return v5(t.context)}function P5(t){let{basename:e="/",children:n=null,location:r,navigationType:s=hn.Pop,navigator:i,static:o=!1,future:a}=t;Ng()&&Ye(!1);let u=e.replace(/^\/*/,"/"),l=P.useMemo(()=>({basename:u,navigator:i,static:o,future:S0({v7_relativeSplatPath:!1},a)}),[u,a,i,o]);typeof r=="string"&&(r=eu(r));let{pathname:c="/",search:d="",hash:f="",state:h=null,key:p="default"}=r,y=P.useMemo(()=>{let b=Uh(c,u);return b==null?null:{location:{pathname:b,search:d,hash:f,state:h,key:p},navigationType:s}},[u,c,d,f,h,p,s]);return y==null?null:P.createElement(Cg.Provider,{value:l},P.createElement(Ix.Provider,{children:n,value:y}))}new Promise(()=>{});function D5(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:P.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:P.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:P.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.26.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function E0(){return E0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},E0.apply(this,arguments)}const L5="6";try{window.__reactRouterVersion=L5}catch{}function F5(t,e){return QV({basename:void 0,future:E0({},void 0,{v7_prependBasename:!0}),history:xV({window:void 0}),hydrationData:$5(),routes:t,mapRouteProperties:D5,unstable_dataStrategy:void 0,unstable_patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function $5(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=E0({},e,{errors:B5(e.errors)})),e}function B5(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,s]of e)if(s&&s.__type==="RouteErrorResponse")n[r]=new x0(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let i=window[s.__subType];if(typeof i=="function")try{let o=new i(s.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let i=new Error(s.message);i.stack="",n[r]=i}}else n[r]=s;return n}const M5=P.createContext({isTransitioning:!1}),V5=P.createContext(new Map),U5="startTransition",hC=gb[U5],z5="flushSync",pC=wV[z5];function j5(t){hC?hC(t):t()}function lf(t){pC?pC(t):t()}class W5{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}}function q5(t){let{fallbackElement:e,router:n,future:r}=t,[s,i]=P.useState(n.state),[o,a]=P.useState(),[u,l]=P.useState({isTransitioning:!1}),[c,d]=P.useState(),[f,h]=P.useState(),[p,y]=P.useState(),b=P.useRef(new Map),{v7_startTransition:g}=r||{},v=P.useCallback(_=>{g?j5(_):_()},[g]),w=P.useCallback((_,$)=>{let{deletedFetchers:M,unstable_flushSync:K,unstable_viewTransitionOpts:Z}=$;M.forEach(ee=>b.current.delete(ee)),_.fetchers.forEach((ee,W)=>{ee.data!==void 0&&b.current.set(W,ee.data)});let ie=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!Z||ie){K?lf(()=>i(_)):v(()=>i(_));return}if(K){lf(()=>{f&&(c&&c.resolve(),f.skipTransition()),l({isTransitioning:!0,flushSync:!0,currentLocation:Z.currentLocation,nextLocation:Z.nextLocation})});let ee=n.window.document.startViewTransition(()=>{lf(()=>i(_))});ee.finished.finally(()=>{lf(()=>{d(void 0),h(void 0),a(void 0),l({isTransitioning:!1})})}),lf(()=>h(ee));return}f?(c&&c.resolve(),f.skipTransition(),y({state:_,currentLocation:Z.currentLocation,nextLocation:Z.nextLocation})):(a(_),l({isTransitioning:!0,flushSync:!1,currentLocation:Z.currentLocation,nextLocation:Z.nextLocation}))},[n.window,f,c,b,v]);P.useLayoutEffect(()=>n.subscribe(w),[n,w]),P.useEffect(()=>{u.isTransitioning&&!u.flushSync&&d(new W5)},[u]),P.useEffect(()=>{if(c&&o&&n.window){let _=o,$=c.promise,M=n.window.document.startViewTransition(async()=>{v(()=>i(_)),await $});M.finished.finally(()=>{d(void 0),h(void 0),a(void 0),l({isTransitioning:!1})}),h(M)}},[v,o,c,n.window]),P.useEffect(()=>{c&&o&&s.location.key===o.location.key&&c.resolve()},[c,f,s.location,o]),P.useEffect(()=>{!u.isTransitioning&&p&&(a(p.state),l({isTransitioning:!0,flushSync:!1,currentLocation:p.currentLocation,nextLocation:p.nextLocation}),y(void 0))},[u.isTransitioning,p]),P.useEffect(()=>{},[]);let x=P.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:_=>n.navigate(_),push:(_,$,M)=>n.navigate(_,{state:$,preventScrollReset:M==null?void 0:M.preventScrollReset}),replace:(_,$,M)=>n.navigate(_,{replace:!0,state:$,preventScrollReset:M==null?void 0:M.preventScrollReset})}),[n]),N=n.basename||"/",k=P.useMemo(()=>({router:n,navigator:x,static:!1,basename:N}),[n,x,N]),O=P.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return P.createElement(P.Fragment,null,P.createElement(Eg.Provider,{value:k},P.createElement(Uk.Provider,{value:s},P.createElement(V5.Provider,{value:b.current},P.createElement(M5.Provider,{value:u},P.createElement(P5,{basename:N,location:s.location,navigationType:s.historyAction,navigator:x,future:O},s.initialized||n.future.v7_partialHydration?P.createElement(G5,{routes:n.routes,future:n.future,state:s}):e))))),null)}const G5=P.memo(H5);function H5(t){let{routes:e,future:n,state:r}=t;return w5(e,void 0,r,n)}var mC;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(mC||(mC={}));var gC;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(gC||(gC={}));function Un(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var K5=typeof Symbol=="function"&&Symbol.observable||"@@observable",yC=K5,Cy=()=>Math.random().toString(36).substring(7).split("").join("."),X5={INIT:`@@redux/INIT${Cy()}`,REPLACE:`@@redux/REPLACE${Cy()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Cy()}`},C0=X5;function kx(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function Rx(t,e,n){if(typeof t!="function")throw new Error(Un(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Un(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Un(1));return n(Rx)(t,e)}let r=t,s=e,i=new Map,o=i,a=0,u=!1;function l(){o===i&&(o=new Map,i.forEach((b,g)=>{o.set(g,b)}))}function c(){if(u)throw new Error(Un(3));return s}function d(b){if(typeof b!="function")throw new Error(Un(4));if(u)throw new Error(Un(5));let g=!0;l();const v=a++;return o.set(v,b),function(){if(g){if(u)throw new Error(Un(6));g=!1,l(),o.delete(v),i=null}}}function f(b){if(!kx(b))throw new Error(Un(7));if(typeof b.type>"u")throw new Error(Un(8));if(typeof b.type!="string")throw new Error(Un(17));if(u)throw new Error(Un(9));try{u=!0,s=r(s,b)}finally{u=!1}return(i=o).forEach(v=>{v()}),b}function h(b){if(typeof b!="function")throw new Error(Un(10));r=b,f({type:C0.REPLACE})}function p(){const b=d;return{subscribe(g){if(typeof g!="object"||g===null)throw new Error(Un(11));function v(){const x=g;x.next&&x.next(c())}return v(),{unsubscribe:b(v)}},[yC](){return this}}}return f({type:C0.INIT}),{dispatch:f,subscribe:d,getState:c,replaceReducer:h,[yC]:p}}function Y5(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:C0.INIT})>"u")throw new Error(Un(12));if(typeof n(void 0,{type:C0.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Un(13))})}function Kk(t){const e=Object.keys(t),n={};for(let i=0;i<e.length;i++){const o=e[i];typeof t[o]=="function"&&(n[o]=t[o])}const r=Object.keys(n);let s;try{Y5(n)}catch(i){s=i}return function(o={},a){if(s)throw s;let u=!1;const l={};for(let c=0;c<r.length;c++){const d=r[c],f=n[d],h=o[d],p=f(h,a);if(typeof p>"u")throw a&&a.type,new Error(Un(14));l[d]=p,u=u||p!==h}return u=u||r.length!==Object.keys(o).length,u?l:o}}function N0(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function Q5(...t){return e=>(n,r)=>{const s=e(n,r);let i=()=>{throw new Error(Un(15))};const o={getState:s.getState,dispatch:(u,...l)=>i(u,...l)},a=t.map(u=>u(o));return i=N0(...a)(s.dispatch),{...s,dispatch:i}}}function Z5(t){return kx(t)&&"type"in t&&typeof t.type=="string"}var Xk=Symbol.for("immer-nothing"),bC=Symbol.for("immer-draftable"),ps=Symbol.for("immer-state");function _i(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var rd=Object.getPrototypeOf;function ul(t){return!!t&&!!t[ps]}function Ho(t){var e;return t?Yk(t)||Array.isArray(t)||!!t[bC]||!!((e=t.constructor)!=null&&e[bC])||Ig(t)||kg(t):!1}var J5=Object.prototype.constructor.toString();function Yk(t){if(!t||typeof t!="object")return!1;const e=rd(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===J5}function _0(t,e){Tg(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,r)=>e(r,n,t))}function Tg(t){const e=t[ps];return e?e.type_:Array.isArray(t)?1:Ig(t)?2:kg(t)?3:0}function dv(t,e){return Tg(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function Qk(t,e,n){const r=Tg(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function eU(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Ig(t){return t instanceof Map}function kg(t){return t instanceof Set}function Du(t){return t.copy_||t.base_}function fv(t,e){if(Ig(t))return new Map(t);if(kg(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=Yk(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[ps];let s=Reflect.ownKeys(r);for(let i=0;i<s.length;i++){const o=s[i],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:t[o]})}return Object.create(rd(t),r)}else{const r=rd(t);if(r!==null&&n)return{...t};const s=Object.create(r);return Object.assign(s,t)}}function Ox(t,e=!1){return Rg(t)||ul(t)||!Ho(t)||(Tg(t)>1&&(t.set=t.add=t.clear=t.delete=tU),Object.freeze(t),e&&Object.entries(t).forEach(([n,r])=>Ox(r,!0))),t}function tU(){_i(2)}function Rg(t){return Object.isFrozen(t)}var nU={};function ll(t){const e=nU[t];return e||_i(0,t),e}var bh;function Zk(){return bh}function rU(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function vC(t,e){e&&(ll("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function hv(t){pv(t),t.drafts_.forEach(sU),t.drafts_=null}function pv(t){t===bh&&(bh=t.parent_)}function wC(t){return bh=rU(bh,t)}function sU(t){const e=t[ps];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function xC(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[ps].modified_&&(hv(e),_i(4)),Ho(t)&&(t=T0(e,t),e.parent_||I0(e,t)),e.patches_&&ll("Patches").generateReplacementPatches_(n[ps].base_,t,e.patches_,e.inversePatches_)):t=T0(e,n,[]),hv(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==Xk?t:void 0}function T0(t,e,n){if(Rg(e))return e;const r=e[ps];if(!r)return _0(e,(s,i)=>SC(t,r,e,s,i,n)),e;if(r.scope_!==t)return e;if(!r.modified_)return I0(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const s=r.copy_;let i=s,o=!1;r.type_===3&&(i=new Set(s),s.clear(),o=!0),_0(i,(a,u)=>SC(t,r,s,a,u,n,o)),I0(t,s,!1),n&&t.patches_&&ll("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function SC(t,e,n,r,s,i,o){if(ul(s)){const a=i&&e&&e.type_!==3&&!dv(e.assigned_,r)?i.concat(r):void 0,u=T0(t,s,a);if(Qk(n,r,u),ul(u))t.canAutoFreeze_=!1;else return}else o&&n.add(s);if(Ho(s)&&!Rg(s)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;T0(t,s),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&I0(t,s)}}function I0(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&Ox(e,n)}function iU(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:Zk(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=r,i=Px;n&&(s=[r],i=vh);const{revoke:o,proxy:a}=Proxy.revocable(s,i);return r.draft_=a,r.revoke_=o,a}var Px={get(t,e){if(e===ps)return t;const n=Du(t);if(!dv(n,e))return oU(t,n,e);const r=n[e];return t.finalized_||!Ho(r)?r:r===Ny(t.base_,e)?(_y(t),t.copy_[e]=gv(r,t)):r},has(t,e){return e in Du(t)},ownKeys(t){return Reflect.ownKeys(Du(t))},set(t,e,n){const r=Jk(Du(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const s=Ny(Du(t),e),i=s==null?void 0:s[ps];if(i&&i.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(eU(n,s)&&(n!==void 0||dv(t.base_,e)))return!0;_y(t),mv(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return Ny(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,_y(t),mv(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Du(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){_i(11)},getPrototypeOf(t){return rd(t.base_)},setPrototypeOf(){_i(12)}},vh={};_0(Px,(t,e)=>{vh[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});vh.deleteProperty=function(t,e){return vh.set.call(this,t,e,void 0)};vh.set=function(t,e,n){return Px.set.call(this,t[0],e,n,t[0])};function Ny(t,e){const n=t[ps];return(n?Du(n):t)[e]}function oU(t,e,n){var s;const r=Jk(e,n);return r?"value"in r?r.value:(s=r.get)==null?void 0:s.call(t.draft_):void 0}function Jk(t,e){if(!(e in t))return;let n=rd(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=rd(n)}}function mv(t){t.modified_||(t.modified_=!0,t.parent_&&mv(t.parent_))}function _y(t){t.copy_||(t.copy_=fv(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var aU=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const i=n;n=e;const o=this;return function(u=i,...l){return o.produce(u,c=>n.call(this,c,...l))}}typeof n!="function"&&_i(6),r!==void 0&&typeof r!="function"&&_i(7);let s;if(Ho(e)){const i=wC(this),o=gv(e,void 0);let a=!0;try{s=n(o),a=!1}finally{a?hv(i):pv(i)}return vC(i,r),xC(s,i)}else if(!e||typeof e!="object"){if(s=n(e),s===void 0&&(s=e),s===Xk&&(s=void 0),this.autoFreeze_&&Ox(s,!0),r){const i=[],o=[];ll("Patches").generateReplacementPatches_(e,s,i,o),r(i,o)}return s}else _i(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(o,...a)=>this.produceWithPatches(o,u=>e(u,...a));let r,s;return[this.produce(e,n,(o,a)=>{r=o,s=a}),r,s]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){Ho(t)||_i(8),ul(t)&&(t=uU(t));const e=wC(this),n=gv(t,void 0);return n[ps].isManual_=!0,pv(e),n}finishDraft(t,e){const n=t&&t[ps];(!n||!n.isManual_)&&_i(9);const{scope_:r}=n;return vC(r,e),xC(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const s=e[n];if(s.path.length===0&&s.op==="replace"){t=s.value;break}}n>-1&&(e=e.slice(n+1));const r=ll("Patches").applyPatches_;return ul(t)?r(t,e):this.produce(t,s=>r(s,e))}};function gv(t,e){const n=Ig(t)?ll("MapSet").proxyMap_(t,e):kg(t)?ll("MapSet").proxySet_(t,e):iU(t,e);return(e?e.scope_:Zk()).drafts_.push(n),n}function uU(t){return ul(t)||_i(10,t),e3(t)}function e3(t){if(!Ho(t)||Rg(t))return t;const e=t[ps];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=fv(t,e.scope_.immer_.useStrictShallowCopy_)}else n=fv(t,!0);return _0(n,(r,s)=>{Qk(n,r,e3(s))}),e&&(e.finalized_=!1),n}var ms=new aU,t3=ms.produce;ms.produceWithPatches.bind(ms);ms.setAutoFreeze.bind(ms);ms.setUseStrictShallowCopy.bind(ms);ms.applyPatches.bind(ms);ms.createDraft.bind(ms);ms.finishDraft.bind(ms);function n3(t){return({dispatch:n,getState:r})=>s=>i=>typeof i=="function"?i(n,r,t):s(i)}var lU=n3(),cU=n3,dU=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?N0:N0.apply(null,arguments)};function AC(t,e){function n(...r){if(e){let s=e(...r);if(!s)throw new Error(Ri(0));return{type:t,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>Z5(r)&&r.type===t,n}var r3=class Tf extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Tf.prototype)}static get[Symbol.species](){return Tf}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Tf(...e[0].concat(this)):new Tf(...e.concat(this))}};function EC(t){return Ho(t)?t3(t,()=>{}):t}function CC(t,e,n){if(t.has(e)){let s=t.get(e);return n.update&&(s=n.update(s,e,t),t.set(e,s)),s}if(!n.insert)throw new Error(Ri(10));const r=n.insert(e,t);return t.set(e,r),r}function fU(t){return typeof t=="boolean"}var hU=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:s=!0,actionCreatorCheck:i=!0}=e??{};let o=new r3;return n&&(fU(n)?o.push(lU):o.push(cU(n.extraArgument))),o},pU="RTK_autoBatch",s3=t=>e=>{setTimeout(e,t)},mU=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:s3(10),gU=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let s=!0,i=!1,o=!1;const a=new Set,u=t.type==="tick"?queueMicrotask:t.type==="raf"?mU:t.type==="callback"?t.queueNotification:s3(t.timeout),l=()=>{o=!1,i&&(i=!1,a.forEach(c=>c()))};return Object.assign({},r,{subscribe(c){const d=()=>s&&c(),f=r.subscribe(d);return a.add(c),()=>{f(),a.delete(c)}},dispatch(c){var d;try{return s=!((d=c==null?void 0:c.meta)!=null&&d[pU]),i=!s,i&&(o||(o=!0,u(l))),r.dispatch(c)}finally{s=!0}}})},yU=t=>function(n){const{autoBatch:r=!0}=n??{};let s=new r3(t);return r&&s.push(gU(typeof r=="object"?r:void 0)),s};function bU(t){const e=hU(),{reducer:n=void 0,middleware:r,devTools:s=!0,preloadedState:i=void 0,enhancers:o=void 0}=t||{};let a;if(typeof n=="function")a=n;else if(kx(n))a=Kk(n);else throw new Error(Ri(1));let u;typeof r=="function"?u=r(e):u=e();let l=N0;s&&(l=dU({trace:!1,...typeof s=="object"&&s}));const c=Q5(...u),d=yU(c);let f=typeof o=="function"?o(d):d();const h=l(...f);return Rx(a,i,h)}function i3(t){const e={},n=[];let r;const s={addCase(i,o){const a=typeof i=="string"?i:i.type;if(!a)throw new Error(Ri(28));if(a in e)throw new Error(Ri(29));return e[a]=o,s},addMatcher(i,o){return n.push({matcher:i,reducer:o}),s},addDefaultCase(i){return r=i,s}};return t(s),[e,n,r]}function vU(t){return typeof t=="function"}function wU(t,e){let[n,r,s]=i3(e),i;if(vU(t))i=()=>EC(t());else{const a=EC(t);i=()=>a}function o(a=i(),u){let l=[n[u.type],...r.filter(({matcher:c})=>c(u)).map(({reducer:c})=>c)];return l.filter(c=>!!c).length===0&&(l=[s]),l.reduce((c,d)=>{if(d)if(ul(c)){const h=d(c,u);return h===void 0?c:h}else{if(Ho(c))return t3(c,f=>d(f,u));{const f=d(c,u);if(f===void 0){if(c===null)return c;throw new Error(Ri(9))}return f}}return c},a)}return o.getInitialState=i,o}var xU=Symbol.for("rtk-slice-createasyncthunk");function SU(t,e){return`${t}/${e}`}function AU({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[xU];return function(s){const{name:i,reducerPath:o=i}=s;if(!i)throw new Error(Ri(11));typeof process<"u";const a=(typeof s.reducers=="function"?s.reducers(CU()):s.reducers)||{},u=Object.keys(a),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(w,x){const N=typeof w=="string"?w:w.type;if(!N)throw new Error(Ri(12));if(N in l.sliceCaseReducersByType)throw new Error(Ri(13));return l.sliceCaseReducersByType[N]=x,c},addMatcher(w,x){return l.sliceMatchers.push({matcher:w,reducer:x}),c},exposeAction(w,x){return l.actionCreators[w]=x,c},exposeCaseReducer(w,x){return l.sliceCaseReducersByName[w]=x,c}};u.forEach(w=>{const x=a[w],N={reducerName:w,type:SU(i,w),createNotation:typeof s.reducers=="function"};_U(x)?IU(N,x,c,e):NU(N,x,c)});function d(){const[w={},x=[],N=void 0]=typeof s.extraReducers=="function"?i3(s.extraReducers):[s.extraReducers],k={...w,...l.sliceCaseReducersByType};return wU(s.initialState,O=>{for(let _ in k)O.addCase(_,k[_]);for(let _ of l.sliceMatchers)O.addMatcher(_.matcher,_.reducer);for(let _ of x)O.addMatcher(_.matcher,_.reducer);N&&O.addDefaultCase(N)})}const f=w=>w,h=new Map;let p;function y(w,x){return p||(p=d()),p(w,x)}function b(){return p||(p=d()),p.getInitialState()}function g(w,x=!1){function N(O){let _=O[w];return typeof _>"u"&&x&&(_=b()),_}function k(O=f){const _=CC(h,x,{insert:()=>new WeakMap});return CC(_,O,{insert:()=>{const $={};for(const[M,K]of Object.entries(s.selectors??{}))$[M]=EU(K,O,b,x);return $}})}return{reducerPath:w,getSelectors:k,get selectors(){return k(N)},selectSlice:N}}const v={name:i,reducer:y,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:b,...g(o),injectInto(w,{reducerPath:x,...N}={}){const k=x??o;return w.inject({reducerPath:k,reducer:y},N),{...v,...g(k,!0)}}};return v}}function EU(t,e,n,r){function s(i,...o){let a=e(i);return typeof a>"u"&&r&&(a=n()),t(a,...o)}return s.unwrapped=t,s}var Dx=AU();function CU(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function NU({type:t,reducerName:e,createNotation:n},r,s){let i,o;if("reducer"in r){if(n&&!TU(r))throw new Error(Ri(17));i=r.reducer,o=r.prepare}else i=r;s.addCase(t,i).exposeCaseReducer(e,i).exposeAction(e,o?AC(t,o):AC(t))}function _U(t){return t._reducerDefinitionType==="asyncThunk"}function TU(t){return t._reducerDefinitionType==="reducerWithPrepare"}function IU({type:t,reducerName:e},n,r,s){if(!s)throw new Error(Ri(18));const{payloadCreator:i,fulfilled:o,pending:a,rejected:u,settled:l,options:c}=n,d=s(t,i,c);r.exposeAction(e,d),o&&r.addCase(d.fulfilled,o),a&&r.addCase(d.pending,a),u&&r.addCase(d.rejected,u),l&&r.addMatcher(d.settled,l),r.exposeCaseReducer(e,{fulfilled:o||zp,pending:a||zp,rejected:u||zp,settled:l||zp})}function zp(){}function Ri(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var o3={exports:{}},a3={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zh=P;function kU(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var RU=typeof Object.is=="function"?Object.is:kU,OU=zh.useSyncExternalStore,PU=zh.useRef,DU=zh.useEffect,LU=zh.useMemo,FU=zh.useDebugValue;a3.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=PU(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=LU(function(){function u(h){if(!l){if(l=!0,c=h,h=r(h),s!==void 0&&o.hasValue){var p=o.value;if(s(p,h))return d=p}return d=h}if(p=d,RU(c,h))return p;var y=r(h);return s!==void 0&&s(p,y)?p:(c=h,d=y)}var l=!1,c,d,f=n===void 0?null:n;return[function(){return u(e())},f===null?void 0:function(){return u(f())}]},[e,n,r,s]);var a=OU(t,i[0],i[1]);return DU(function(){o.hasValue=!0,o.value=a},[a]),FU(a),a};o3.exports=a3;var $U=o3.exports,us="default"in gb?Tn:gb,NC=Symbol.for("react-redux-context"),_C=typeof globalThis<"u"?globalThis:{};function BU(){if(!us.createContext)return{};const t=_C[NC]??(_C[NC]=new Map);let e=t.get(us.createContext);return e||(e=us.createContext(null),t.set(us.createContext,e)),e}var Wa=BU(),MU=()=>{throw new Error("uSES not initialized!")};function Lx(t=Wa){return function(){return us.useContext(t)}}var u3=Lx(),l3=MU,VU=t=>{l3=t},UU=(t,e)=>t===e;function zU(t=Wa){const e=t===Wa?u3:Lx(t),n=(r,s={})=>{const{equalityFn:i=UU,devModeChecks:o={}}=typeof s=="function"?{equalityFn:s}:s,{store:a,subscription:u,getServerState:l,stabilityCheck:c,identityFunctionCheck:d}=e();us.useRef(!0);const f=us.useCallback({[r.name](p){return r(p)}}[r.name],[r,c,o.stabilityCheck]),h=l3(u.addNestedSub,a.getState,l||a.getState,f,i);return us.useDebugValue(h),h};return Object.assign(n,{withTypes:()=>n}),n}var Fx=zU();function jU(t){t()}function WU(){let t=null,e=null;return{clear(){t=null,e=null},notify(){jU(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const s=e={callback:n,next:null,prev:e};return s.prev?s.prev.next=s:t=s,function(){!r||t===null||(r=!1,s.next?s.next.prev=s.prev:e=s.prev,s.prev?s.prev.next=s.next:t=s.next)}}}}var TC={notify(){},get:()=>[]};function qU(t,e){let n,r=TC,s=0,i=!1;function o(y){c();const b=r.subscribe(y);let g=!1;return()=>{g||(g=!0,b(),d())}}function a(){r.notify()}function u(){p.onStateChange&&p.onStateChange()}function l(){return i}function c(){s++,n||(n=t.subscribe(u),r=WU())}function d(){s--,n&&s===0&&(n(),n=void 0,r.clear(),r=TC)}function f(){i||(i=!0,c())}function h(){i&&(i=!1,d())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:u,isSubscribed:l,trySubscribe:f,tryUnsubscribe:h,getListeners:()=>r};return p}var GU=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",HU=typeof navigator<"u"&&navigator.product==="ReactNative",KU=GU||HU?us.useLayoutEffect:us.useEffect;function XU({store:t,context:e,children:n,serverState:r,stabilityCheck:s="once",identityFunctionCheck:i="once"}){const o=us.useMemo(()=>{const l=qU(t);return{store:t,subscription:l,getServerState:r?()=>r:void 0,stabilityCheck:s,identityFunctionCheck:i}},[t,r,s,i]),a=us.useMemo(()=>t.getState(),[t]);KU(()=>{const{subscription:l}=o;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==t.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[o,a]);const u=e||Wa;return us.createElement(u.Provider,{value:o},n)}var YU=XU;function c3(t=Wa){const e=t===Wa?u3:Lx(t),n=()=>{const{store:r}=e();return r};return Object.assign(n,{withTypes:()=>n}),n}var QU=c3();function ZU(t=Wa){const e=t===Wa?QU:c3(t),n=()=>e().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var ei=ZU();VU($U.useSyncExternalStoreWithSelector);const IC={token:"",username:""},d3=Dx({name:"user",initialState:IC,reducers:{userSetToken(t,e){t.token=e.payload},userSetUsername(t,e){t.username=e.payload},userReset(){return IC}}}),Zo=()=>Fx(t=>t.user),{userSetToken:JU,userSetUsername:ez,userReset:tz}=d3.actions,nz=d3.reducer;var f3={};(function(t){var e=Pt&&Pt.__extends||function(){var W=function(V,D){return W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,U){L.__proto__=U}||function(L,U){for(var F in U)U.hasOwnProperty(F)&&(L[F]=U[F])},W(V,D)};return function(V,D){W(V,D);function L(){this.constructor=V}V.prototype=D===null?Object.create(D):(L.prototype=D.prototype,new L)}}(),n=Pt&&Pt.__assign||function(){return n=Object.assign||function(W){for(var V,D=1,L=arguments.length;D<L;D++){V=arguments[D];for(var U in V)Object.prototype.hasOwnProperty.call(V,U)&&(W[U]=V[U])}return W},n.apply(this,arguments)},r=Pt&&Pt.__awaiter||function(W,V,D,L){function U(F){return F instanceof D?F:new D(function(ue){ue(F)})}return new(D||(D=Promise))(function(F,ue){function se(be){try{ae(L.next(be))}catch(Te){ue(Te)}}function he(be){try{ae(L.throw(be))}catch(Te){ue(Te)}}function ae(be){be.done?F(be.value):U(be.value).then(se,he)}ae((L=L.apply(W,V||[])).next())})},s=Pt&&Pt.__generator||function(W,V){var D={label:0,sent:function(){if(F[0]&1)throw F[1];return F[1]},trys:[],ops:[]},L,U,F,ue;return ue={next:se(0),throw:se(1),return:se(2)},typeof Symbol=="function"&&(ue[Symbol.iterator]=function(){return this}),ue;function se(ae){return function(be){return he([ae,be])}}function he(ae){if(L)throw new TypeError("Generator is already executing.");for(;D;)try{if(L=1,U&&(F=ae[0]&2?U.return:ae[0]?U.throw||((F=U.return)&&F.call(U),0):U.next)&&!(F=F.call(U,ae[1])).done)return F;switch(U=0,F&&(ae=[ae[0]&2,F.value]),ae[0]){case 0:case 1:F=ae;break;case 4:return D.label++,{value:ae[1],done:!1};case 5:D.label++,U=ae[1],ae=[0];continue;case 7:ae=D.ops.pop(),D.trys.pop();continue;default:if(F=D.trys,!(F=F.length>0&&F[F.length-1])&&(ae[0]===6||ae[0]===2)){D=0;continue}if(ae[0]===3&&(!F||ae[1]>F[0]&&ae[1]<F[3])){D.label=ae[1];break}if(ae[0]===6&&D.label<F[1]){D.label=F[1],F=ae;break}if(F&&D.label<F[2]){D.label=F[2],D.ops.push(ae);break}F[2]&&D.ops.pop(),D.trys.pop();continue}ae=V.call(W,D)}catch(be){ae=[6,be],U=0}finally{L=F=0}if(ae[0]&5)throw ae[1];return{value:ae[0]?ae[1]:void 0,done:!0}}},i=Pt&&Pt.__spreadArrays||function(){for(var W=0,V=0,D=arguments.length;V<D;V++)W+=arguments[V].length;for(var L=Array(W),U=0,V=0;V<D;V++)for(var F=arguments[V],ue=0,se=F.length;ue<se;ue++,U++)L[U]=F[ue];return L};Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function W(){}return W.prototype.toString=function(){return"ErrorOAuth2"},W}();t.ErrorOAuth2=o;var a=function(W){e(V,W);function V(){return W!==null&&W.apply(this,arguments)||this}return V.prototype.toString=function(){return"ErrorUnknown"},V}(o);t.ErrorUnknown=a;var u=function(W){e(V,W);function V(){return W!==null&&W.apply(this,arguments)||this}return V.prototype.toString=function(){return"ErrorNoAuthCode"},V}(o);t.ErrorNoAuthCode=u;var l=function(W){e(V,W);function V(){return W!==null&&W.apply(this,arguments)||this}return V.prototype.toString=function(){return"ErrorInvalidReturnedStateParam"},V}(o);t.ErrorInvalidReturnedStateParam=l;var c=function(W){e(V,W);function V(){return W!==null&&W.apply(this,arguments)||this}return V.prototype.toString=function(){return"ErrorInvalidJson"},V}(o);t.ErrorInvalidJson=c;var d=function(W){e(V,W);function V(){return W!==null&&W.apply(this,arguments)||this}return V.prototype.toString=function(){return"ErrorInvalidScope"},V}(o);t.ErrorInvalidScope=d;var f=function(W){e(V,W);function V(){return W!==null&&W.apply(this,arguments)||this}return V.prototype.toString=function(){return"ErrorInvalidRequest"},V}(o);t.ErrorInvalidRequest=f;var h=function(W){e(V,W);function V(){return W!==null&&W.apply(this,arguments)||this}return V.prototype.toString=function(){return"ErrorInvalidToken"},V}(o);t.ErrorInvalidToken=h;var p=function(W){e(V,W);function V(){return W!==null&&W.apply(this,arguments)||this}return V.prototype.toString=function(){return"ErrorAuthenticationGrant"},V}(o);t.ErrorAuthenticationGrant=p;var y=function(W){e(V,W);function V(){return W!==null&&W.apply(this,arguments)||this}return V.prototype.toString=function(){return"ErrorUnauthorizedClient"},V}(p);t.ErrorUnauthorizedClient=y;var b=function(W){e(V,W);function V(){return W!==null&&W.apply(this,arguments)||this}return V.prototype.toString=function(){return"ErrorAccessDenied"},V}(p);t.ErrorAccessDenied=b;var g=function(W){e(V,W);function V(){return W!==null&&W.apply(this,arguments)||this}return V.prototype.toString=function(){return"ErrorUnsupportedResponseType"},V}(p);t.ErrorUnsupportedResponseType=g;var v=function(W){e(V,W);function V(){return W!==null&&W.apply(this,arguments)||this}return V.prototype.toString=function(){return"ErrorServerError"},V}(p);t.ErrorServerError=v;var w=function(W){e(V,W);function V(){return W!==null&&W.apply(this,arguments)||this}return V.prototype.toString=function(){return"ErrorTemporarilyUnavailable"},V}(p);t.ErrorTemporarilyUnavailable=w;var x=function(W){e(V,W);function V(){return W!==null&&W.apply(this,arguments)||this}return V.prototype.toString=function(){return"ErrorAccessTokenResponse"},V}(o);t.ErrorAccessTokenResponse=x;var N=function(W){e(V,W);function V(){return W!==null&&W.apply(this,arguments)||this}return V.prototype.toString=function(){return"ErrorInvalidClient"},V}(x);t.ErrorInvalidClient=N;var k=function(W){e(V,W);function V(){return W!==null&&W.apply(this,arguments)||this}return V.prototype.toString=function(){return"ErrorInvalidGrant"},V}(x);t.ErrorInvalidGrant=k;var O=function(W){e(V,W);function V(){return W!==null&&W.apply(this,arguments)||this}return V.prototype.toString=function(){return"ErrorUnsupportedGrantType"},V}(x);t.ErrorUnsupportedGrantType=O;var _=function(){function W(){this.realm="",this.error=""}return W}();t.ErrorWWWAuthenticate=_,t.RawErrorToErrorClassMap={invalid_request:f,invalid_grant:k,unauthorized_client:y,access_denied:b,unsupported_response_type:g,invalid_scope:d,server_error:v,temporarily_unavailable:w,invalid_client:N,unsupported_grant_type:O,invalid_json:c,invalid_token:h};function $(W){return new(t.RawErrorToErrorClassMap[W]||a)}t.toErrorClass=$;function M(W){var V=W.slice(7).replace(/"/g,"").split(", ").map(function(D){var L,U=D.split("="),F=U[0],ue=U[1];return L={},L[F]=ue,L}).reduce(function(D,L){return n(n({},D),L)},{});return{realm:V.realm,error:V.error}}t.fromWWWAuthenticateHeaderStringToObject=M;var K="Authorization",Z="WWW-Authenticate";t.LOCALSTORAGE_ID="oauth2authcodepkce",t.LOCALSTORAGE_STATE=t.LOCALSTORAGE_ID+"-state",t.RECOMMENDED_CODE_VERIFIER_LENGTH=96,t.RECOMMENDED_STATE_LENGTH=32;var ie="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",ee=function(){function W(V){return this.state={},this.config=V,this.recoverState(),this}return W.prototype.decorateFetchHTTPClient=function(V){var D=this;return function(L,U){for(var F=[],ue=2;ue<arguments.length;ue++)F[ue-2]=arguments[ue];return D.state.isHTTPDecoratorActive?D.getAccessToken().then(function(se){var he=se.token,ae=Object.assign({},U);return ae.headers||(ae.headers={}),ae.headers[K]="Bearer "+he.value,V.apply(void 0,i([L,ae],F))}).then(function(se){if(se.ok||!se.headers.has(Z.toLowerCase()))return se;var he=$(M(se.headers.get(Z.toLowerCase())).error);return he instanceof h&&D.config.onAccessTokenExpiry(function(){return D.exchangeRefreshTokenForAccessToken()}),Promise.reject(he)}):V.apply(void 0,i([L,U],F))}},W.prototype.isReturningFromAuthServer=function(){var V=W.extractParamFromUrl(location.href,"error");if(V)return Promise.reject($(V));var D=W.extractParamFromUrl(location.href,"code");if(!D)return Promise.resolve(!1);var L=JSON.parse(localStorage.getItem(t.LOCALSTORAGE_STATE)||"{}"),U=W.extractParamFromUrl(location.href,"state");return U!==L.stateQueryParam?(console.warn("state query string parameter doesn't match the one sent! Possible malicious activity somewhere."),Promise.reject(new l)):(L.authorizationCode=D,L.hasAuthCodeBeenExchangedForAccessToken=!1,localStorage.setItem(t.LOCALSTORAGE_STATE,JSON.stringify(L)),this.setState(L),Promise.resolve(!0))},W.prototype.fetchAuthorizationCode=function(V){return r(this,void 0,void 0,function(){var D,L,U,F,ue,se,he,ae,be,Te,ct;return s(this,function(we){switch(we.label){case 0:return this.assertStateAndConfigArePresent(),D=this.config,L=D.clientId,U=D.extraAuthorizationParams,F=D.redirectUrl,ue=D.scopes,[4,W.generatePKCECodes()];case 1:return se=we.sent(),he=se.codeChallenge,ae=se.codeVerifier,be=W.generateRandomState(t.RECOMMENDED_STATE_LENGTH),this.state=n(n({},this.state),{codeChallenge:he,codeVerifier:ae,stateQueryParam:be,isHTTPDecoratorActive:!0}),localStorage.setItem(t.LOCALSTORAGE_STATE,JSON.stringify(this.state)),Te=this.config.authorizationUrl+"?response_type=code&"+("client_id="+encodeURIComponent(L)+"&")+("redirect_uri="+encodeURIComponent(F)+"&")+("scope="+encodeURIComponent(ue.join(" "))+"&")+("state="+be+"&")+("code_challenge="+encodeURIComponent(he)+"&")+"code_challenge_method=S256",(U||V)&&(ct=n(n({},U),V),Te=Te+"&"+W.objectToQueryString(ct)),location.replace(Te),[2]}})})},W.prototype.getAccessToken=function(){var V=this;this.assertStateAndConfigArePresent();var D=this.config.onAccessTokenExpiry,L=this.state,U=L.accessToken,F=L.authorizationCode,ue=L.explicitlyExposedTokens,se=L.hasAuthCodeBeenExchangedForAccessToken,he=L.refreshToken,ae=L.scopes;return F?this.authCodeForAccessTokenRequest?this.authCodeForAccessTokenRequest:!this.isAuthorized()||!se?(this.authCodeForAccessTokenRequest=this.exchangeAuthCodeForAccessToken(),this.authCodeForAccessTokenRequest):he&&this.isAccessTokenExpired()?D(function(){return V.exchangeRefreshTokenForAccessToken()}):Promise.resolve({token:U,explicitlyExposedTokens:ue,scopes:ae,refreshToken:he}):Promise.reject(new u)},W.prototype.exchangeRefreshTokenForAccessToken=function(){var V=this,D;this.assertStateAndConfigArePresent();var L=this.config,U=L.extraRefreshParams,F=L.clientId,ue=L.tokenUrl,se=this.state.refreshToken;se||console.warn("No refresh token is present.");var he=ue,ae="grant_type=refresh_token&"+("refresh_token="+((D=se)===null||D===void 0?void 0:D.value)+"&")+("client_id="+F);return U&&(ae=he+"&"+W.objectToQueryString(U)),fetch(he,{method:"POST",body:ae,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(be){return be.status>=400?be.json().then(function(Te){return Promise.reject(Te)}):be.json()}).then(function(be){var Te=be.access_token,ct=be.expires_in,we=be.refresh_token,Kn=be.scope,pr=V.config.explicitlyExposedTokens,Xn=[],Es={},Cs={value:Te,expiry:new Date(Date.now()+parseInt(ct)*1e3).toString()};if(V.state.accessToken=Cs,we){var Kt={value:we};V.state.refreshToken=Kt}pr&&(Es=Object.fromEntries(pr.map(function(gn){return[gn,be[gn]]}).filter(function(gn){gn[0];var wo=gn[1];return wo!==void 0})),V.state.explicitlyExposedTokens=Es),Kn&&(Xn=Kn.split(" "),V.state.scopes=Xn),localStorage.setItem(t.LOCALSTORAGE_STATE,JSON.stringify(V.state));var En={token:Cs,scopes:Xn};return pr&&(En.explicitlyExposedTokens=Es),En}).catch(function(be){var Te=V.config.onInvalidGrant,ct=be.error||"There was a network error.";switch(ct){case"invalid_grant":Te(function(){return V.fetchAuthorizationCode()});break}return Promise.reject($(ct))})},W.prototype.getGrantedScopes=function(){return this.state.scopes},W.prototype.isHTTPDecoratorActive=function(V){this.state.isHTTPDecoratorActive=V,localStorage.setItem(t.LOCALSTORAGE_STATE,JSON.stringify(this.state))},W.prototype.isAuthorized=function(){return!!this.state.accessToken},W.prototype.isAccessTokenExpired=function(){var V=this.state.accessToken;return!!(V&&new Date>=new Date(V.expiry))},W.prototype.reset=function(){this.setState({}),this.authCodeForAccessTokenRequest=void 0},W.prototype.assertStateAndConfigArePresent=function(){if(!this.state||!this.config)throw console.error("state:",this.state,"config:",this.config),new Error("state or config is not set.")},W.prototype.exchangeAuthCodeForAccessToken=function(V){var D=this;this.assertStateAndConfigArePresent();var L=this.state,U=L.authorizationCode,F=U===void 0?V:U,ue=L.codeVerifier,se=ue===void 0?"":ue,he=this.config,ae=he.clientId,be=he.onInvalidGrant,Te=he.redirectUrl;se?F||console.warn("No authorization grant code is being passed."):console.warn("No code verifier is being sent.");var ct=this.config.tokenUrl,we="grant_type=authorization_code&"+("code="+encodeURIComponent(F||"")+"&")+("redirect_uri="+encodeURIComponent(Te)+"&")+("client_id="+encodeURIComponent(ae)+"&")+("code_verifier="+se);return fetch(ct,{method:"POST",body:we,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(Kn){var pr=Kn.json().catch(function(Xn){return{error:"invalid_json"}});return Kn.ok?pr.then(function(Xn){var Es=Xn.access_token,Cs=Xn.expires_in,Kt=Xn.refresh_token,En=Xn.scope,gn=D.config.explicitlyExposedTokens,wo=[],Yr={};D.state.hasAuthCodeBeenExchangedForAccessToken=!0,D.authCodeForAccessTokenRequest=void 0;var Ul={value:Es,expiry:new Date(Date.now()+parseInt(Cs)*1e3).toString()};if(D.state.accessToken=Ul,Kt){var Vd={value:Kt};D.state.refreshToken=Vd}gn&&(Yr=Object.fromEntries(gn.map(function(xo){return[xo,Xn[xo]]}).filter(function(xo){xo[0];var Ud=xo[1];return Ud!==void 0})),D.state.explicitlyExposedTokens=Yr),En&&(wo=En.split(" "),D.state.scopes=wo),localStorage.setItem(t.LOCALSTORAGE_STATE,JSON.stringify(D.state));var ou={token:Ul,scopes:wo};return gn&&(ou.explicitlyExposedTokens=Yr),ou}):pr.then(function(Xn){var Es=Xn.error;switch(Es){case"invalid_grant":be(function(){return D.fetchAuthorizationCode()});break}return Promise.reject($(Es))})})},W.prototype.recoverState=function(){return this.state=JSON.parse(localStorage.getItem(t.LOCALSTORAGE_STATE)||"{}"),this},W.prototype.setState=function(V){return this.state=V,localStorage.setItem(t.LOCALSTORAGE_STATE,JSON.stringify(V)),this},W.base64urlEncode=function(V){var D=btoa(V);return D=D.replace(/\+/g,"-"),D=D.replace(/\//g,"_"),D=D.replace(/=/g,""),D},W.extractParamFromUrl=function(V,D){var L=V.split("?");if(L.length<2)return"";L=L[1].split("#");var U=L[0].split("&").reduce(function(ue,se){return ue.concat(se.split("="))},[]);if(U.length<2)return"";var F=U.indexOf(D);return decodeURIComponent(F>=0?U[F+1]:"")},W.objectToQueryString=function(V){return Object.entries(V).map(function(D){var L=D[0],U=D[1];return L+"="+encodeURIComponent(U)}).join("&")},W.generatePKCECodes=function(){var V=new Uint32Array(t.RECOMMENDED_CODE_VERIFIER_LENGTH);crypto.getRandomValues(V);var D=W.base64urlEncode(Array.from(V).map(function(L){return ie[L%ie.length]}).join(""));return crypto.subtle.digest("SHA-256",new TextEncoder().encode(D)).then(function(L){for(var U=new Uint8Array(L),F="",ue=U.byteLength,se=0;se<ue;se++)F+=String.fromCharCode(U[se]);return F}).then(W.base64urlEncode).then(function(L){return{codeChallenge:L,codeVerifier:D}})},W.generateRandomState=function(V){var D=new Uint32Array(V);return crypto.getRandomValues(D),Array.from(D).map(function(L){return ie[L%ie.length]}).join("")},W}();t.OAuth2AuthCodePKCE=ee})(f3);const yv="https://lichess.org",rz=["study:write","study:read","challenge:read","bot:play","board:play"],sz="lichess-api-demo",iz=`${location.protocol}//${location.host}/`,h3=()=>new f3.OAuth2AuthCodePKCE({authorizationUrl:`${yv}/oauth`,tokenUrl:`${yv}/api/token`,clientId:sz,scopes:rz,redirectUrl:iz,onAccessTokenExpiry:e=>e(),onInvalidGrant:console.warn}),$x=t=>e=>{const n=e.body.getReader(),r=/\r?\n/,s=new TextDecoder;let i="";const o=()=>n.read().then(({done:a,value:u})=>{if(a)i.length>0&&t(JSON.parse(i));else{const l=s.decode(u,{stream:!0});i+=l;const c=i.split(r);i=c.pop();for(const d of c.filter(f=>f))t(JSON.parse(d));return o()}});return o()},Bx=async(t,e,n={})=>await(await Nl(t,e,n)).json(),Nl=async(t,e,n={})=>{const r={...n,headers:{Authorization:`Bearer ${t}`}},s=await window.fetch(`${yv}${e}`,r);if(!s.ok){const i=`${s.status} ${s.statusText}`;throw alert(i),i}return s},oz=async(t,e,n,r)=>{const s=`/api/study/by/${e}`,i=r.map(a=>a.id),o=[];Nl(t,s).then($x(async a=>{const u=a.id;i.includes(u)||o.push({id:u,name:a.name})})).then(()=>n(o))},az=()=>{h3().fetchAuthorizationCode()},uz=t=>{localStorage.removeItem("oauth2authcodepkce-state"),t(tz())},lz=t=>Bx(t,"/api/account"),cz=(t,e,n,r)=>{const s="/api/broadcast/my-rounds",i=[];Nl(t,s).then($x(async o=>{i.push({id:o.round.id,name:o.round.name})})).then(()=>{r?e(i):oz(t,n,e,i)})},dz=(t,e)=>{const n="/api/import",r={body:new URLSearchParams({pgn:e}),method:"POST"};return Bx(t,n,r)},fz=(t,e,n,r)=>{const s=`/api/study/${r}/import-pgn`,i={body:new URLSearchParams({pgn:e,name:n}),method:"POST"};Nl(t,s,i)},hz=(t,e,n)=>{const r=`/api/broadcast/round/${n}/push`;Nl(t,r,{body:e,method:"POST"})},pz=(t,e,n)=>{const r=`/api/board/game/stream/${n}`;Nl(t,r).then($x(e))},mz=t=>Bx(t,"/api/account/playing"),gz=(t,e,n)=>{const r=`/api/board/game/${e}/move/${n}`;Nl(t,r,{method:"POST"})},yz=async(t,e)=>{var u;const n=h3();if(!await n.isReturningFromAuthServer())return;const s=await n.getAccessToken(),i=(u=s==null?void 0:s.token)==null?void 0:u.value;if(i===void 0){console.log("Access Context token is undefined");return}e(JU(i));const a=(await lz(i)).username;e(ez(a)),t("/")},bz=()=>{const t=_g(),e=ei(),n=Zo().username,r=()=>{n===""?az():(uz(e),t("/"))};return E.jsxs("div",{className:"row m-2",children:[E.jsxs("div",{className:"h1 col-6 h-100 d-flex justify-content-center align-items-end m-0",children:[E.jsx("img",{src:"favicon.ico"}),E.jsx(E.Fragment,{children:""}),E.jsx("div",{children:"ChessCam"})]}),E.jsx("div",{className:"col-6 h-100",children:E.jsx("div",{className:"h-100 d-flex justify-content-center align-items-end m-0",children:E.jsx("button",{className:"btn btn-dark btn-outline-light m-0",onClick:r,children:n===""?"Login":`Logout from "${n}"`})})})]})},k0="sharethis",vz={display:"inline-block",width:"50px",height:"50px",position:"relative",overflow:"hidden",verticalAlign:"middle"},p3={position:"absolute",top:"0",left:"0",width:"100%",height:"100%"},wz={...p3,borderRadius:"50%",fillRule:"evenodd"},kC={transition:"fill 170ms ease-in-out",fill:"transparent"},m3=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return new RegExp("(?:[/.]|^)($SOCIALS)([.]|$|/)".replace("$SOCIALS",t.join("|").replace(/\./gu,"\\.")),"u")},Om=new Map,RC=new Set;let g3=m3();function Mx(t,e){return Om.set(t,e),RC.add(t),g3=m3([...RC].sort((n,r)=>r.length-n.length)),e}function xz(t){var e;return t?t.startsWith("mailto:")?"mailto":((e=t.match(g3))==null?void 0:e[1])||k0:k0}const Sz=P.forwardRef(function(e,n){const{as:r="a",href:s,url:i,network:o,bgColor:a,fgColor:u,className:l,label:c,children:d,fallback:f,defaultSVG:h,...p}=e,y=o||xz(i),b=c||e["aria-label"]||y,g=(typeof f=="string"?Om.get(f):f||h)||Om.get(k0),{color:v,path:w}=y===k0?g:Om.get(y)||{};return P.createElement(r,{href:s||i,className:`social-icon${l?` ${l}`:""}`,...p,style:{...vz,...p.style},"aria-label":b,ref:n},P.createElement("span",{className:"social-container",style:p3},P.createElement("svg",{role:"img","aria-label":`${b} social icon`,className:"social-svg",viewBox:"0 0 64 64",style:wz},P.createElement("g",{className:"social-svg-icon",style:{...kC,fill:u||"white"}},P.createElement("path",{d:`M0,0H64V64H0Z${w}`})),P.createElement("g",{className:"social-svg-mask",style:{...kC,fill:a||v}},P.createElement("path",{d:w})))),d)});Mx("youtube",{color:"#ff3333",path:"M0 0v64h64V0zm47 33.1c0 2.4-.3 4.9-.3 4.9s-.3 2.1-1.2 3c-1.1 1.2-2.4 1.2-3 1.3-4.2.2-10.5.3-10.5.3s-7.8-.1-10.2-.3c-.7-.1-2.2-.1-3.3-1.3-.9-.9-1.2-3-1.2-3s-.3-2.4-.3-4.9v-2.3c0-2.4.3-4.9.3-4.9s.3-2.1 1.2-3c1.1-1.2 2.4-1.2 3-1.3 4.2-.3 10.5-.3 10.5-.3s6.3 0 10.5.3c.6.1 1.9.1 3 1.3.9.9 1.2 3 1.2 3s.3 2.4.3 4.9zm-18.1 2.8 8.1-4.2-8.1-4.2z"});Mx("github",{color:"#24292e",path:"M0 0v64h64V0zm37.1 47.2c-.8.2-1.1-.3-1.1-.8V42c0-1.5-.5-2.5-1.1-3 3.6-.4 7.3-1.7 7.3-7.9 0-1.7-.6-3.2-1.6-4.3.2-.4.7-2-.2-4.2 0 0-1.3-.4-4.4 1.6-1.3-.4-2.6-.5-4-.5s-2.7.2-4 .5c-3.1-2.1-4.4-1.6-4.4-1.6-.9 2.2-.3 3.8-.2 4.2-1 1.1-1.6 2.5-1.6 4.3 0 6.1 3.7 7.5 7.3 7.9-.5.4-.9 1.1-1 2.1-.9.4-3.2 1.1-4.7-1.3 0 0-.8-1.5-2.5-1.6 0 0-1.6 0-.1 1 0 0 1 .5 1.8 2.3 0 0 .9 3.1 5.4 2.1v2.7c0 .4-.3.9-1.1.8-6.3-2-10.9-8-10.9-15.1 0-8.8 7.2-16 16-16s16 7.2 16 16c0 7.1-4.6 13.1-10.9 15.2"});Mx("google_play",{color:"#40BBC1",path:"M0 0v64h64V0zm40.4 27.1-3.6 3.6-12.3-12.3zM22 44.5V19.4c0-.4.1-.7.2-.9L35.6 32 22.2 45.4c-.1-.2-.2-.5-.2-.9m2.4 1.1 12.4-12.4 3.6 3.6zm22.7-12.4-5 2.8-4-4 3.9-3.9 5.1 2.8c1.2.5 1.2 1.6 0 2.3"});const Az=()=>{const t=[{network:"github",url:"https://github.com/Pbatch/CameraChessWeb",bgColor:"#111111"},{network:"youtube",url:"https://www.youtube.com/channel/UCtgc3RevHj6UHq1D8Ymarmw"},{network:"google_play",url:"https://play.google.com/store/apps/details?id=com.camerachess.www.twa"}],e=[];return t.forEach(n=>{e.push(E.jsx("div",{className:"col",children:E.jsx(Sz,{target:"_blank",network:n.network,url:n.url,bgColor:n==null?void 0:n.bgColor})},n.network))}),e},rc=({text:t,tokenRequired:e})=>{const n=_g(),s=Zo().token===""&&e,i=()=>{s||n(`/${t.toLowerCase()}`)};return E.jsx("button",{className:"btn btn-dark btn-lg btn-outline-light w-100",onClick:i,children:s?`${t} (must Login)`:`${t}`})},Ez=()=>E.jsxs("div",{className:"container-flex d-flex overflow-hidden h-100 flex-column p-0 m-0 text-center text-white bg-dark",children:[E.jsx(bz,{}),E.jsxs("div",{className:"row m-2",children:[E.jsx("div",{className:"col",children:E.jsx(rc,{text:"Upload",tokenRequired:!1})}),E.jsx("div",{className:"col",children:E.jsx(rc,{text:"Record",tokenRequired:!1})})]}),E.jsxs("div",{className:"row m-2",children:[E.jsx("div",{className:"col",children:E.jsx(rc,{text:"Broadcast",tokenRequired:!0})}),E.jsx("div",{className:"col",children:E.jsx(rc,{text:"Play",tokenRequired:!0})})]}),E.jsxs("div",{className:"row m-2",children:[E.jsx("div",{className:"col",children:E.jsx(rc,{text:"Export",tokenRequired:!0})}),E.jsx("div",{className:"col",children:E.jsx(rc,{text:"FAQ",tokenRequired:!1})})]}),E.jsx("div",{className:"row my-2 mx-0 mt-auto",children:E.jsx(Az,{})})]}),ho=t=>E.jsx("button",{onClick:t.onClick,className:"btn btn-dark btn-sm btn-outline-light w-100",children:t.children});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cz=1e-7,Nz=1e-4;class _z{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class y3{refCount(e){return Pr("refCount")}incRef(e){return Pr("incRef")}timerAvailable(){return!0}time(e){return Pr("time")}read(e){return Pr("read")}readSync(e){return Pr("readSync")}readToGPU(e,n){return Pr("readToGPU")}numDataIds(){return Pr("numDataIds")}disposeData(e,n){return Pr("disposeData")}write(e,n,r){return Pr("write")}move(e,n,r,s,i){return Pr("move")}createTensorFromGPUData(e,n,r){return Pr("createTensorFromGPUData")}memory(){return Pr("memory")}floatPrecision(){return Pr("floatPrecision")}epsilon(){return this.floatPrecision()===32?Cz:Nz}dispose(){return Pr("dispose")}}function Pr(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R0(t,e,n){return Math.max(t,Math.min(e,n))}function Vx(t){return t%2===0?t:t+1}function cf(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Tz(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function R(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function vs(t,e,n=""){R(Gt(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function vd(t){R(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function de(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function Iz(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==null&&e[n]!==null&&t[n]!==e[n])return!1;return!0}function Gt(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function sd(t){return t%1===0}function bv(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function Vc(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function OC(t,e=s=>0,n,r){return new Promise((s,i)=>{let o=0;const a=()=>{if(t()){s();return}o++;const u=e(o);if(n!=null&&o>=n){i();return}r!=null?r(a,u):setTimeout(a,u)};a()})}function kz(t,e){let n=1,r=-1;for(let i=0;i<t.length;++i)if(t[i]>=0)n*=t[i];else if(t[i]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${i}`);r=i}else if(t[i]<0)throw Error(`Shapes can not be < 0. Found ${t[i]} at dim ${i}`);if(r===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const s=t.slice();return s[r]=e/n,s}function An(t,e){const n=e.length;return t=t==null?e.map((r,s)=>s):[].concat(t),R(t.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),R(t.every(r=>sd(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?n+r:r)}function tu(t,e){const n=[],r=[],s=e!=null&&Array.isArray(e)&&e.length===0,i=e==null||s?null:An(e,t).sort();let o=0;for(let a=0;a<t.length;++a){if(i!=null){if(i[o]===a&&t[a]!==1)throw new Error(`Can't squeeze axis ${a} since its dim '${t[a]}' is not 1`);(i[o]==null||i[o]>a)&&t[a]===1&&(n.push(t[a]),r.push(a)),i[o]<=a&&o++}t[a]!==1&&(n.push(t[a]),r.push(a))}return{newShape:n,keptDims:r}}function qa(t,e){return Sn(t,e)}function Sn(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function Rz(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function Oz(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function Pz(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function O0(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function Dz(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function Og(t){return typeof t=="string"||t instanceof String}function Lz(t){return typeof t=="boolean"}function Fz(t){return typeof t=="number"}function jh(t){return Array.isArray(t)?jh(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":Fz(t)?"float32":Og(t)?"string":Lz(t)?"bool":"float32"}function vv(t){return!!(t&&t.constructor&&t.call&&t.apply)}function wv(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function Ln(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function b3(t,e,n,r=!1){const s=new Array;if(e.length===1){const i=e[0]*(r?2:1);for(let o=0;o<i;o++)s[o]=n[t+o]}else{const i=e[0],o=e.slice(1),a=o.reduce((u,l)=>u*l)*(r?2:1);for(let u=0;u<i;u++)s[u]=b3(t+u*a,o,n,r)}return s}function xv(t,e,n=!1){if(t.length===0)return e[0];const r=t.reduce((s,i)=>s*i)*(n?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return b3(0,t,e,n)}function v3(t,e){const n=Ga(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function Ga(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function ws(t){t.forEach(e=>{R(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function Sv(t,e,n){if(e===0)return 0;if(e===1)return t[0];let r=t[t.length-1];for(let s=0;s<t.length-1;++s)r+=n[s]*t[s];return r}function Ux(t,e,n){if(e===0)return[];if(e===1)return[t];const r=new Array(e);for(let s=0;s<r.length-1;++s)r[s]=Math.floor(t/n[s]),t-=r[s]*n[s];return r[r.length-1]=t,r}function cl(t){return t&&t.then&&typeof t.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PC="tfjsflags";class $z{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=Bz,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(X().getBool("IS_TEST")||X().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){const s=this.urlFlags[e];X().getBool("IS_TEST")||X().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${s}.`),this.set(e,s)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(cl(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);PC in e&&e[PC].split(",").forEach(r=>{const[s,i]=r.split(":");this.urlFlags[s]=Vz(s,i)})}}function Bz(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(Mz(e,r[0],r[1]),r.join("="))),e}function Mz(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function Vz(t,e){const n=e.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:e}function X(){return w3}let w3=null;function Uz(t){w3=t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let Ty;function x3(){if(Ty==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");Ty=t}return Ty}function zz(){const t=x3();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function zx(t,e){const n=zz();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}const S3="Abs",A3="Acos",E3="Acosh",jx="Add",C3="AddN",N3="All",_3="Any",T3="ArgMax",I3="ArgMin",k3="Asin",R3="Asinh",O3="Atan",P3="Atanh",D3="Atan2",L3="AvgPool",jz="AvgPoolGrad",F3="AvgPool3D",Wz="AvgPool3DGrad",$3="BatchMatMul",B3="BatchToSpaceND",M3="Bincount",V3="BitwiseAnd",U3="BroadcastArgs",Wx="Cast",z3="Ceil",j3="ClipByValue",W3="Complex",q3="ComplexAbs",G3="Concat",H3="Conv2D",K3="Conv2DBackpropFilter",X3="Conv2DBackpropInput",Y3="Conv3D",qz="Conv3DBackpropFilterV2",Q3="Conv3DBackpropInputV2",Z3="Cos",J3="Cosh",eR="Cumprod",tR="Cumsum",nR="CropAndResize",rR="DenseBincount",sR="DepthToSpace",iR="DepthwiseConv2dNative",oR="DepthwiseConv2dNativeBackpropFilter",aR="DepthwiseConv2dNativeBackpropInput",uR="Diag",lR="Dilation2D",cR="RealDiv",dR="Einsum",fR="Elu",Gz="EluGrad",hR="Erf",pR="Equal",mR="Exp",gR="ExpandDims",yR="Expm1",bR="FFT",vR="Fill",wR="FlipLeftRight",xR="Floor",SR="FloorDiv",AR="FusedBatchNorm",ER="GatherV2",CR="GatherNd",NR="Greater",_R="GreaterEqual",qx="Identity",TR="IFFT",IR="Imag",kR="IsFinite",RR="IsInf",OR="IsNan",PR="LeakyRelu",DR="Less",LR="LessEqual",FR="LinSpace",$R="Log",BR="Log1p",MR="LogicalAnd",VR="LogicalNot",UR="LogicalOr",zR="LRN",Hz="LRNGrad",jR="Max",WR="Maximum",qR="MaxPool",Kz="MaxPoolGrad",GR="MaxPool3D",Xz="MaxPool3DGrad",HR="MaxPoolWithArgmax",KR="Mean",XR="Min",YR="Minimum",QR="MirrorPad",ZR="Mod",JR="Multinomial",eO="Multiply",tO="Neg",nO="NotEqual",rO="NonMaxSuppressionV3",sO="NonMaxSuppressionV4",iO="NonMaxSuppressionV5",oO="OnesLike",aO="OneHot",uO="Pack",lO="PadV2",cO="Pow",dO="Prelu",fO="Prod",hO="RaggedGather",pO="RaggedRange",mO="RaggedTensorToTensor",gO="Range",yO="Real",bO="Reciprocal",vO="Relu",wO="Reshape",xO="ResizeNearestNeighbor",Yz="ResizeNearestNeighborGrad",SO="ResizeBilinear",Qz="ResizeBilinearGrad",AO="Relu6",EO="Reverse",CO="Round",NO="Rsqrt",_O="ScatterNd",TO="TensorScatterUpdate",IO="SearchSorted",kO="Select",RO="Selu",OO="Slice",PO="Sin",DO="Sinh",LO="Sign",FO="Sigmoid",$O="Softplus",BO="Sqrt",MO="Sum",VO="SpaceToBatchND",UO="SplitV",zO="Softmax",jO="SparseFillEmptyRows",WO="SparseReshape",qO="SparseSegmentMean",GO="SparseSegmentSum",HO="SparseToDense",KO="SquaredDifference",Zz="Square",XO="StaticRegexReplace",YO="StridedSlice",QO="StringNGrams",ZO="StringSplit",JO="StringToHashBucketFast",eP="Sub",tP="Tan",nP="Tanh",Gx="Tile",rP="TopK",sP="Transform",Pm="Transpose",iP="Unique",oP="Unpack",aP="UnsortedSegmentSum",uP="ZerosLike",lP="Step",Av="FromPixels",cP="RotateWithOffset",Ev="_FusedMatMul",Cv="FusedConv2D",Nv="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ti(...t){X().getBool("IS_TEST")||X().getBool("PROD")||console.warn(...t)}function Jz(...t){X().getBool("IS_TEST")||X().getBool("PROD")||console.log(...t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P0=zx("kernelRegistry",()=>new Map),e7=zx("gradRegistry",()=>new Map);function _v(t,e){const n=dP(t,e);return P0.get(n)}function DC(t){return e7.get(t)}function LC(t){const e=P0.entries(),n=[];for(;;){const{done:r,value:s}=e.next();if(r)break;const[i,o]=s,[a]=i.split("_");a===t&&n.push(o)}return n}function t7(t){const{kernelName:e,backendName:n}=t,r=dP(e,n);P0.has(r)&&Ti(`The kernel '${e}' for backend '${n}' is already registered`),P0.set(r,t)}function dP(t,e){return`${e}_${t}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fP(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var hP=Ft,zs=null;try{zs=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Ft(t,e,n){this.low=t|0,this.high=e|0,this.unsigned=!!n}Ft.prototype.__isLong__;Object.defineProperty(Ft.prototype,"__isLong__",{value:!0});function Kr(t){return(t&&t.__isLong__)===!0}Ft.isLong=Kr;var FC={},$C={};function _l(t,e){var n,r,s;return e?(t>>>=0,(s=0<=t&&t<256)&&(r=$C[t],r)?r:(n=$t(t,(t|0)<0?-1:0,!0),s&&($C[t]=n),n)):(t|=0,(s=-128<=t&&t<128)&&(r=FC[t],r)?r:(n=$t(t,t<0?-1:0,!1),s&&(FC[t]=n),n))}Ft.fromInt=_l;function js(t,e){if(isNaN(t))return e?Gu:Ws;if(e){if(t<0)return Gu;if(t>=pP)return yP}else{if(t<=-MC)return jr;if(t+1>=MC)return gP}return t<0?js(-t,e).neg():$t(t%id|0,t/id|0,e)}Ft.fromNumber=js;function $t(t,e,n){return new Ft(t,e,n)}Ft.fromBits=$t;var D0=Math.pow;function Hx(t,e,n){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return Ws;if(typeof e=="number"?(n=e,e=!1):e=!!e,n=n||10,n<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return Hx(t.substring(1),e,n).neg();for(var s=js(D0(n,8)),i=Ws,o=0;o<t.length;o+=8){var a=Math.min(8,t.length-o),u=parseInt(t.substring(o,o+a),n);if(a<8){var l=js(D0(n,a));i=i.mul(l).add(js(u))}else i=i.mul(s),i=i.add(js(u))}return i.unsigned=e,i}Ft.fromString=Hx;function Fi(t,e){return typeof t=="number"?js(t,e):typeof t=="string"?Hx(t,e):$t(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}Ft.fromValue=Fi;var BC=65536,n7=1<<24,id=BC*BC,pP=id*id,MC=pP/2,VC=_l(n7),Ws=_l(0);Ft.ZERO=Ws;var Gu=_l(0,!0);Ft.UZERO=Gu;var Tc=_l(1);Ft.ONE=Tc;var mP=_l(1,!0);Ft.UONE=mP;var Tv=_l(-1);Ft.NEG_ONE=Tv;var gP=$t(-1,2147483647,!1);Ft.MAX_VALUE=gP;var yP=$t(-1,-1,!0);Ft.MAX_UNSIGNED_VALUE=yP;var jr=$t(0,-2147483648,!1);Ft.MIN_VALUE=jr;var ge=Ft.prototype;ge.toInt=function(){return this.unsigned?this.low>>>0:this.low};ge.toNumber=function(){return this.unsigned?(this.high>>>0)*id+(this.low>>>0):this.high*id+(this.low>>>0)};ge.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(jr)){var n=js(e),r=this.div(n),s=r.mul(n).sub(this);return r.toString(e)+s.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var i=js(D0(e,6),this.unsigned),o=this,a="";;){var u=o.div(i),l=o.sub(u.mul(i)).toInt()>>>0,c=l.toString(e);if(o=u,o.isZero())return c+a;for(;c.length<6;)c="0"+c;a=""+c+a}};ge.getHighBits=function(){return this.high};ge.getHighBitsUnsigned=function(){return this.high>>>0};ge.getLowBits=function(){return this.low};ge.getLowBitsUnsigned=function(){return this.low>>>0};ge.getNumBitsAbs=function(){if(this.isNegative())return this.eq(jr)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,n=31;n>0&&!(e&1<<n);n--);return this.high!=0?n+33:n+1};ge.isZero=function(){return this.high===0&&this.low===0};ge.eqz=ge.isZero;ge.isNegative=function(){return!this.unsigned&&this.high<0};ge.isPositive=function(){return this.unsigned||this.high>=0};ge.isOdd=function(){return(this.low&1)===1};ge.isEven=function(){return(this.low&1)===0};ge.equals=function(e){return Kr(e)||(e=Fi(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};ge.eq=ge.equals;ge.notEquals=function(e){return!this.eq(e)};ge.neq=ge.notEquals;ge.ne=ge.notEquals;ge.lessThan=function(e){return this.comp(e)<0};ge.lt=ge.lessThan;ge.lessThanOrEqual=function(e){return this.comp(e)<=0};ge.lte=ge.lessThanOrEqual;ge.le=ge.lessThanOrEqual;ge.greaterThan=function(e){return this.comp(e)>0};ge.gt=ge.greaterThan;ge.greaterThanOrEqual=function(e){return this.comp(e)>=0};ge.gte=ge.greaterThanOrEqual;ge.ge=ge.greaterThanOrEqual;ge.compare=function(e){if(Kr(e)||(e=Fi(e)),this.eq(e))return 0;var n=this.isNegative(),r=e.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};ge.comp=ge.compare;ge.negate=function(){return!this.unsigned&&this.eq(jr)?jr:this.not().add(Tc)};ge.neg=ge.negate;ge.add=function(e){Kr(e)||(e=Fi(e));var n=this.high>>>16,r=this.high&65535,s=this.low>>>16,i=this.low&65535,o=e.high>>>16,a=e.high&65535,u=e.low>>>16,l=e.low&65535,c=0,d=0,f=0,h=0;return h+=i+l,f+=h>>>16,h&=65535,f+=s+u,d+=f>>>16,f&=65535,d+=r+a,c+=d>>>16,d&=65535,c+=n+o,c&=65535,$t(f<<16|h,c<<16|d,this.unsigned)};ge.subtract=function(e){return Kr(e)||(e=Fi(e)),this.add(e.neg())};ge.sub=ge.subtract;ge.multiply=function(e){if(this.isZero())return Ws;if(Kr(e)||(e=Fi(e)),zs){var n=zs.mul(this.low,this.high,e.low,e.high);return $t(n,zs.get_high(),this.unsigned)}if(e.isZero())return Ws;if(this.eq(jr))return e.isOdd()?jr:Ws;if(e.eq(jr))return this.isOdd()?jr:Ws;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(VC)&&e.lt(VC))return js(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,s=this.high&65535,i=this.low>>>16,o=this.low&65535,a=e.high>>>16,u=e.high&65535,l=e.low>>>16,c=e.low&65535,d=0,f=0,h=0,p=0;return p+=o*c,h+=p>>>16,p&=65535,h+=i*c,f+=h>>>16,h&=65535,h+=o*l,f+=h>>>16,h&=65535,f+=s*c,d+=f>>>16,f&=65535,f+=i*l,d+=f>>>16,f&=65535,f+=o*u,d+=f>>>16,f&=65535,d+=r*c+s*l+i*u+o*a,d&=65535,$t(h<<16|p,d<<16|f,this.unsigned)};ge.mul=ge.multiply;ge.divide=function(e){if(Kr(e)||(e=Fi(e)),e.isZero())throw Error("division by zero");if(zs){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var n=(this.unsigned?zs.div_u:zs.div_s)(this.low,this.high,e.low,e.high);return $t(n,zs.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Gu:Ws;var r,s,i;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return Gu;if(e.gt(this.shru(1)))return mP;i=Gu}else{if(this.eq(jr)){if(e.eq(Tc)||e.eq(Tv))return jr;if(e.eq(jr))return Tc;var o=this.shr(1);return r=o.div(e).shl(1),r.eq(Ws)?e.isNegative()?Tc:Tv:(s=this.sub(e.mul(r)),i=r.add(s.div(e)),i)}else if(e.eq(jr))return this.unsigned?Gu:Ws;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=Ws}for(s=this;s.gte(e);){r=Math.max(1,Math.floor(s.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),u=a<=48?1:D0(2,a-48),l=js(r),c=l.mul(e);c.isNegative()||c.gt(s);)r-=u,l=js(r,this.unsigned),c=l.mul(e);l.isZero()&&(l=Tc),i=i.add(l),s=s.sub(c)}return i};ge.div=ge.divide;ge.modulo=function(e){if(Kr(e)||(e=Fi(e)),zs){var n=(this.unsigned?zs.rem_u:zs.rem_s)(this.low,this.high,e.low,e.high);return $t(n,zs.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};ge.mod=ge.modulo;ge.rem=ge.modulo;ge.not=function(){return $t(~this.low,~this.high,this.unsigned)};ge.and=function(e){return Kr(e)||(e=Fi(e)),$t(this.low&e.low,this.high&e.high,this.unsigned)};ge.or=function(e){return Kr(e)||(e=Fi(e)),$t(this.low|e.low,this.high|e.high,this.unsigned)};ge.xor=function(e){return Kr(e)||(e=Fi(e)),$t(this.low^e.low,this.high^e.high,this.unsigned)};ge.shiftLeft=function(e){return Kr(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?$t(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):$t(0,this.low<<e-32,this.unsigned)};ge.shl=ge.shiftLeft;ge.shiftRight=function(e){return Kr(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?$t(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):$t(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};ge.shr=ge.shiftRight;ge.shiftRightUnsigned=function(e){if(Kr(e)&&(e=e.toInt()),e&=63,e===0)return this;var n=this.high;if(e<32){var r=this.low;return $t(r>>>e|n<<32-e,n>>>e,this.unsigned)}else return e===32?$t(n,0,this.unsigned):$t(n>>>e-32,0,this.unsigned)};ge.shru=ge.shiftRightUnsigned;ge.shr_u=ge.shiftRightUnsigned;ge.toSigned=function(){return this.unsigned?$t(this.low,this.high,!1):this};ge.toUnsigned=function(){return this.unsigned?this:$t(this.low,this.high,!0)};ge.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};ge.toBytesLE=function(){var e=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};ge.toBytesBE=function(){var e=this.high,n=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};Ft.fromBytes=function(e,n,r){return r?Ft.fromBytesLE(e,n):Ft.fromBytesBE(e,n)};Ft.fromBytesLE=function(e,n){return new Ft(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,n)};Ft.fromBytesBE=function(e,n){return new Ft(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],n)};const bP=md(hP),r7=Ow({__proto__:null,default:bP},[hP]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $u=bP||r7;function Pg(t){return $u.fromString(t,!0,16)}const vP=Pg("c3a5c85c97cb3127"),Lu=Pg("b492b66fbe98f273"),or=Pg("9ae16a3b2f90404f");function Iv(t){return t.xor(t.shru(47))}function wP(t,e,n){const r=t.slice(e,e+n);return $u.fromBytes(Array.from(r),!0,!0)}function kt(t,e){return wP(t,e,8)}function UC(t,e){return wP(t,e,4)}function wn(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function Ma(t,e,n=Pg("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let s=e.xor(r).mul(n);return s=s.xor(s.shru(47)),s=s.mul(n),s}function s7(t,e,n,r,s,i){s=s.add(t),i=wn(i.add(s).add(r),21);const o=s;return s=s.add(e),s=s.add(n),i=i.add(wn(s,44)),[s.add(r),i.add(o)]}function jp(t,e,n,r){return s7(kt(t,e),kt(t,e+8),kt(t,e+16),kt(t,e+24),n,r)}function i7(t,e=t.length){if(e>=8){const n=or.add(e*2),r=kt(t,0).add(or),s=kt(t,e-8),i=wn(s,37).mul(n).add(r),o=wn(r,25).add(s).mul(n);return Ma(i,o,n)}if(e>=4){const n=or.add(e*2),r=UC(t,0);return Ma(r.shl(3).add(e),UC(t,e-4),n)}if(e>0){const n=t[0],r=t[e>>1],s=t[e-1],i=n+(r<<8),o=e+(s<<2);return Iv(or.mul(i).xor(vP.mul(o))).mul(or)}return or}function o7(t,e=t.length){const n=or.add(e*2),r=kt(t,0).mul(Lu),s=kt(t,8),i=kt(t,e-8).mul(n),o=kt(t,e-16).mul(or);return Ma(wn(r.add(s),43).add(wn(i,30)).add(o),r.add(wn(s.add(or),18)).add(i),n)}function a7(t,e=t.length){const n=or.add(e*2),r=kt(t,0).mul(or),s=kt(t,8),i=kt(t,e-8).mul(n),o=kt(t,e-16).mul(or),a=wn(r.add(s),43).add(wn(i,30)).add(o),u=Ma(a,r.add(wn(s.add(or),18)).add(i),n),l=kt(t,16).mul(n),c=kt(t,24),d=a.add(kt(t,e-32)).mul(n),f=u.add(kt(t,e-24)).mul(n);return Ma(wn(l.add(c),43).add(wn(d,30)).add(f),l.add(wn(c.add(r),18)).add(d),n)}function u7(t,e=t.length){const n=$u.fromNumber(81,!0);if(e<=32)return e<=16?i7(t,e):o7(t,e);if(e<=64)return a7(t,e);let r=n,s=n.mul(Lu).add(113),i=Iv(s.mul(or).add(113)).mul(or),o=[$u.UZERO,$u.UZERO],a=[$u.UZERO,$u.UZERO];r=r.mul(or).add(kt(t,0));let u=0;const l=(e-1>>6)*64,c=l+(e-1&63)-63;do r=wn(r.add(s).add(o[0]).add(kt(t,u+8)),37).mul(Lu),s=wn(s.add(o[1]).add(kt(t,u+48)),42).mul(Lu),r=r.xor(a[1]),s=s.add(o[0]).add(kt(t,u+40)),i=wn(i.add(a[0]),33).mul(Lu),o=jp(t,u,o[1].mul(Lu),r.add(a[0])),a=jp(t,u+32,i.add(a[1]),s.add(kt(t,u+16))),[i,r]=[r,i],u+=64;while(u!==l);const d=Lu.add(i.and(255).shl(1));return u=c,a[0]=a[0].add(e-1&63),o[0]=o[0].add(a[0]),a[0]=a[0].add(o[0]),r=wn(r.add(s).add(o[0]).add(kt(t,u+8)),37).mul(d),s=wn(s.add(o[1]).add(kt(t,u+48)),42).mul(d),r=r.xor(a[1].mul(9)),s=s.add(o[0].mul(9).add(kt(t,u+40))),i=wn(i.add(a[0]),33).mul(d),o=jp(t,u,o[1].mul(d),r.add(a[0])),a=jp(t,u+32,i.add(a[1]),s.add(kt(t,u+16))),[i,r]=[r,i],Ma(Ma(o[0],a[0],d).add(Iv(s).mul(vP)).add(i),Ma(o[1],a[1],d).add(r),d)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wd(t,e){return e==="string"?Qu(t):Dg([t],e)}function l7(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function Dg(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=dl(t)),X().getBool("DEBUG")&&Rz(t,e),l7(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let r=0;r<n.length;++r)Math.round(t[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${e}`)}function Ai(){return X().platform.now()}function Qu(t,e="utf-8"){return e=e||"utf-8",X().platform.encode(t,e)}function od(t,e="utf-8"){return e=e||"utf-8",X().platform.decode(t,e)}function Js(t){return X().platform.isTypedArray!=null?X().platform.isTypedArray(t):fP(t)}function dl(t,e=[],n=!1){if(e==null&&(e=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||cl(t)||t==null||Js(t)&&n)e.push(t);else if(Array.isArray(t)||Js(t))for(let r=0;r<t.length;++r)dl(t[r],e,n);else{let r=-1;for(const s of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(s)&&(r=Math.max(r,Number(s)));for(let s=0;s<=r;s++)dl(t[s],e,n)}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class c7{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new f7)}profileKernel(e,n,r){let s;const i=()=>{s=r()};let o;const a=Ai();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(i);else{i();for(const l of s)l.dataSync();o=Promise.resolve({kernelMs:Ai()-a})}if(X().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let l=0;l<s.length;l++){const c=s[l];c.data().then(d=>{d7(d,c.dtype,e)})}return{kernelName:e,outputs:s,inputs:n,timeMs:o.then(l=>l.kernelMs),extraInfo:o.then(l=>l.getExtraProfileInfo!=null?l.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:r,timeMs:s,inputs:i,extraInfo:o}=e;r.forEach(a=>{Promise.all([a.data(),s,o]).then(u=>{this.logger.logKernelProfile(n,a,u[0],u[1],i,u[2])})})}}function d7(t,e,n){if(e!=="float32")return!1;for(let r=0;r<t.length;r++){const s=t[r];if(isNaN(s)||!isFinite(s))return console.warn(`Found ${s} in the result of '${n}'`),!0}return!1}class f7{logKernelProfile(e,n,r,s,i,o){const a=typeof s=="number"?Vc(`${s}ms`,9):s.error,u=Vc(e,25),l=n.rank,c=n.size,d=Vc(n.shape.toString(),14);let f="";for(const h in i){const p=i[h];if(p!=null){const y=p.shape||n.shape,b=y.length;f+=`${h}: ${b}D ${b>0?y:""} `}}console.log(`%c${u}	%c${a}	%c${l}D ${d}	%c${c}	%c${f}	%c${o}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h7(t,e,n){const r={},s={};for(let u=0;u<e.length;u++)r[e[u].id]=!0;for(let u=0;u<t.length;u++){const l=t[u],c=l.inputs;for(const d in c){const f=c[d];let h=!1;for(let p=0;p<e.length;p++)if(r[f.id]){l.outputs.forEach(y=>r[y.id]=!0),h=!0,s[l.id]=!0;break}if(h)break}}const i={};i[n.id]=!0;const o={};for(let u=t.length-1;u>=0;u--){const l=t[u],c=l.inputs;for(let d=0;d<l.outputs.length;d++)if(i[l.outputs[d].id]){for(const f in c)i[c[f].id]=!0,o[l.id]=!0;break}}const a=[];for(let u=0;u<t.length;u++){const l=t[u];if(s[l.id]&&o[l.id]){const c={};for(const f in l.inputs){const h=l.inputs[f];r[h.id]&&(c[f]=h)}const d=Object.assign({},l);d.inputs=c,d.outputs=l.outputs,a.push(d)}}return a}function p7(t,e,n,r){for(let s=e.length-1;s>=0;s--){const i=e[s],o=[];if(i.outputs.forEach(u=>{const l=t[u.id];l!=null?o.push(l):o.push(null)}),i.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${i.kernelName}.`);const a=i.gradient(o);for(const u in i.inputs){if(!(u in a))throw new Error(`Cannot backprop through input ${u}. Available gradients found: ${Object.keys(a)}.`);const l=n(()=>a[u]());if(l.dtype!=="float32")throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input ${u} must have 'float32' dtype, but has '${l.dtype}'`);const c=i.inputs[u];if(!Gt(l.shape,c.shape))throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input '${u}' has shape '${l.shape}', which does not match the shape of the input '${c.shape}'`);if(t[c.id]==null)t[c.id]=l;else{const d=t[c.id];t[c.id]=r(d,l),d.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zC=20,df=3,Iy=7;function m7(t,e,n,r){const s=Ln(e),i=g7(t,e,n,s),o=e.length,a=Dm(t,e,n,s,i),u=["Tensor"];return r&&(u.push(`  dtype: ${n}`),u.push(`  rank: ${o}`),u.push(`  shape: [${e}]`),u.push("  values:")),u.push(a.map(l=>"    "+l).join(`
`)),u.join(`
`)}function g7(t,e,n,r){const s=de(e),i=r[r.length-1],o=new Array(i).fill(0),a=e.length,u=n==="complex64"?kf(t):t;if(a>1)for(let l=0;l<s/i;l++){const c=l*i;for(let d=0;d<i;d++)o[d]=Math.max(o[d],If(u[c+d],0,n).length)}return o}function If(t,e,n){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(Iy))} + ${parseFloat(t[1].toFixed(Iy))}j`:Og(t)?r=`'${t}'`:n==="bool"?r=xP(t):r=parseFloat(t.toFixed(Iy)).toString(),Vc(r,e)}function xP(t){return t===0?"false":"true"}function Dm(t,e,n,r,s,i=!0){const o=n==="complex64"?2:1,a=e[0],u=e.length;if(u===0){if(n==="complex64"){const y=kf(t);return[If(y[0],0,n)]}return n==="bool"?[xP(t[0])]:[t[0].toString()]}if(u===1){if(a>zC){const b=df*o;let g=Array.from(t.slice(0,b)),v=Array.from(t.slice((a-df)*o,a*o));return n==="complex64"&&(g=kf(g),v=kf(v)),["["+g.map((w,x)=>If(w,s[x],n)).join(", ")+", ..., "+v.map((w,x)=>If(w,s[a-df+x],n)).join(", ")+"]"]}return["["+(n==="complex64"?kf(t):Array.from(t)).map((b,g)=>If(b,s[g],n)).join(", ")+"]"]}const l=e.slice(1),c=r.slice(1),d=r[0]*o,f=[];if(a>zC){for(let y=0;y<df;y++){const b=y*d,g=b+d;f.push(...Dm(t.slice(b,g),l,n,c,s,!1))}f.push("...");for(let y=a-df;y<a;y++){const b=y*d,g=b+d;f.push(...Dm(t.slice(b,g),l,n,c,s,y===a-1))}}else for(let y=0;y<a;y++){const b=y*d,g=b+d;f.push(...Dm(t.slice(b,g),l,n,c,s,y===a-1))}const h=u===2?",":"";f[0]="["+(a>0?f[0]+h:"");for(let y=1;y<f.length-1;y++)f[y]=" "+f[y]+h;let p=`,
`;for(let y=2;y<u;y++)p+=`
`;return f[f.length-1]=" "+f[f.length-1]+"]"+(i?"":p),f}function kf(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ad{constructor(e,n,r){if(this.dtype=n,this.shape=e.slice(),this.size=de(e),r!=null){const s=r.length;R(s===this.size,()=>`Length of values '${s}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Sn(n,this.size),this.strides=Ln(e)}set(e,...n){n.length===0&&(n=[0]),R(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const s of e){if(s<0||s>=this.shape[n]){const i=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(i)}n++}let r=e[e.length-1];for(let s=0;s<e.length-1;++s)r+=this.strides[s]*e[s];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return Ci().makeTensor(this.values,this.shape,this.dtype)}}let Ci=null,dc=null;function y7(t){Ci=t}function b7(t){dc=t}class ar{constructor(e,n,r,s){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=de(e),this.strides=Ln(e),this.dataId=r,this.id=s,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return dc.buffer(this.shape,this.dtype,e)}bufferSync(){return dc.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return xv(this.shape,e,this.dtype==="complex64")}arraySync(){return xv(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=Ci().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(r=>od(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),Ci().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=Ci().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>od(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await Ci().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),Ci().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return dc.print(this,e)}clone(){return this.throwIfDisposed(),dc.clone(this)}toString(e=!1){const n=this.dataSync();return m7(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),dc.cast(this,e)}variable(e=!0,n,r){return this.throwIfDisposed(),Ci().makeVariable(this,e,n,r)}}Object.defineProperty(ar,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function SP(){return zx("Tensor",()=>ar)}SP();class L0 extends ar{constructor(e,n,r,s){super(e.shape,e.dtype,e.dataId,s),this.trainable=n,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!Gt(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);Ci().disposeTensor(this),this.dataId=e.dataId,Ci().incRef(this,null)}dispose(){Ci().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(L0,Symbol.hasInstance,{value:t=>t instanceof ar&&t.assign!=null&&t.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var jC;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(jC||(jC={}));var kv;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(kv||(kv={}));var Rv;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(Rv||(Rv={}));var Ov;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(Ov||(Ov={}));var Pv;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(Pv||(Pv={}));const v7={float32:Ov,int32:kv,bool:Rv,complex64:Pv};function fo(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return v7[t][e]}function Kx(t){return fo(t,"int32")}function AP(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function EP(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function en(t,e){if(t.dtype===e.dtype)return[t,e];const n=fo(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function w7(t,e){R(t.dtype===e.dtype,()=>`The dtypes of the first(${t.dtype}) and second(${e.dtype}) input must match`)}function CP(t){const e=[];return NP(t,e,new Set),e}function NP(t,e,n){if(t==null)return;if(t instanceof ar){e.push(t);return}if(!x7(t))return;const r=t;for(const s in r){const i=r[s];n.has(i)||(n.add(i),NP(i,e,n))}}function x7(t){return Array.isArray(t)||typeof t=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ky(t){return t.kernelName!=null}class WC{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class ud{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new WC}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,r=1){return e in this.registryFactory?(Ti(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:r}=this.initializeBackend(e);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new c7(this.backendInstance),!0}setupRegisteredKernels(){LC(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){LC(e).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=n.factory();if(r&&!(r instanceof y3)&&typeof r.then=="function"){const s=++this.pendingBackendInitId,i=r.then(o=>s<this.pendingBackendInitId?!1:(this.registry[e]=o,this.pendingBackendInit=null,!0)).catch(o=>(s<this.pendingBackendInitId||(this.pendingBackendInit=null,Ti(`Initialization of backend ${e} failed`),Ti(o.stack||o.message)),!1));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return Ti(`Initialization of backend ${e} failed`),Ti(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n],{success:s,asyncInit:i}=this.initializeBackend(r);if(i||s)return{name:r,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const r=this.state.tensorInfo.get(n),s=r.backend,i=this.readSync(n),o=s.refCount(n);s.disposeData(n,!0),r.backend=e,e.move(n,i,r.shape,r.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let r=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let s;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(s),()=>(s=n(),s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),s))}scopedRun(e,n,r){e();try{const s=r();return n(),s}catch(s){throw n(),s}}nextTensorId(){return ud.nextTensorId++}nextVariableId(){return ud.nextVariableId++}clone(e){const n=j.runKernel(qx,{x:e}),r={x:e},s=o=>({x:()=>{const a="float32",u={x:o},l={dtype:a};return j.runKernel(Wx,u,l)}}),i=[];return this.addTapeNode(this.state.activeScope.name,r,[n],s,i,{}),n}runKernel(e,n,r){if(this.backendName==null&&this.backend,!(_v(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,r){const s=this.backend.numDataIds();let i=0;r.forEach(u=>{i+=u.dtype==="complex64"?3:1});const o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=s-n-i-o;if(a>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${a} data ids) after running '${e}'`)}runKernelFunc(e){let n,r=[];const s=this.isTapeOn(),i=this.state.numBytes,o=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let a;this.backendName==null&&this.backend;let u;const l=ky(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(ky(e)){const{kernelName:p,inputs:y,attrs:b}=e;this.backendName==null&&this.backend;const g=_v(p,this.backendName);R(g!=null,()=>`Cannot find registered kernel '${p}' for backend '${this.backendName}'`),a=()=>{const v=this.backend.numDataIds();u=g.kernelFunc({inputs:y,attrs:b,backend:this.backend});const w=Array.isArray(u)?u:[u];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(p,v,w);const x=w.map(N=>N.rank!=null?N:this.makeTensorFromTensorInfo(N));if(s){const N=this.getTensorsForGradient(p,y,x);r=this.saveTensorsForBackwardMode(N)}return x}}else{const{forwardFunc:p}=e,y=b=>{s&&(r=b.map(g=>this.keep(this.clone(g))))};a=()=>{const b=this.backend.numDataIds();u=this.tidy(()=>p(this.backend,y));const g=Array.isArray(u)?u:[u];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(l,b,g),g}}const{inputs:c,attrs:d}=e,f=ky(e)?null:e.backwardsFunc;let h;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=a():(h=this.profiler.profileKernel(l,c,()=>a()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(h),n=h.outputs)}),s&&this.addTapeNode(l,c,n,f,r,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:l,bytesAdded:this.state.numBytes-i,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-o,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(c).map(p=>c[p]!=null?c[p].shape:null),outputShapes:n.map(p=>p.shape),kernelTimeMs:h.timeMs,extraInfo:h.extraInfo}),Array.isArray(u)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(e,n,r){const s=DC(e);if(s!=null){const i=s.inputsToSave||[],o=s.outputsToSave||[];let a;s.saveAllInputs?(R(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),a=Object.keys(n).map(l=>n[l])):a=i.map(l=>n[l]);const u=r.filter((l,c)=>o[c]);return a.concat(u)}return[]}makeTensor(e,n,r,s){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",s=s||this.backend;let i=e;r==="string"&&Og(e[0])&&(i=e.map(u=>Qu(u)));const o=s.write(i,n,r),a=new ar(n,r,o,this.nextTensorId());if(this.trackTensor(a,s),r==="string"){const u=this.state.tensorInfo.get(o),l=Dz(i);this.state.numBytes+=l-u.bytes,u.bytes=l}return a}makeTensorFromDataId(e,n,r,s){r=r||"float32";const i={dataId:e,shape:n,dtype:r};return this.makeTensorFromTensorInfo(i,s)}makeTensorFromTensorInfo(e,n){const{dataId:r,shape:s,dtype:i}=e,o=new ar(s,i,r,this.nextTensorId());return this.trackTensor(o,n),o}makeVariable(e,n=!0,r,s){r=r||this.nextVariableId().toString(),s!=null&&s!==e.dtype&&(e=e.cast(s));const i=new L0(e,n,r,this.nextTensorId());if(this.state.registeredVariables[i.name]!=null)throw new Error(`Variable with name ${i.name} was already registered`);return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*O0(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof L0||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*O0(e.dtype);this.state.numBytes-=r}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(s=>s.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const s of this.state.activeProfile.kernels)s.kernelTimeMs=await s.kernelTimeMs,s.extraInfo=await s.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,r,s,i,o){const a={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:i},u=DC(e);u!=null&&(s=u.gradFunc),s!=null&&(a.gradient=l=>(l=l.map((c,d)=>{if(c==null){const f=r[d],h=Ga(f.size,f.dtype);return this.makeTensor(h,f.shape,f.dtype)}return c}),s(l.length>1?l:l[0],i,o))),this.state.activeTape.push(a)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=CP(e),r=new Set(n.map(i=>i.id));for(let i=0;i<this.state.activeScope.track.length;i++){const o=this.state.activeScope.track[i];!o.kept&&!r.has(o.id)&&o.dispose()}const s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(i=>{!i.kept&&i.scopeId===s.id&&this.track(i)})}gradients(e,n,r,s=!1){if(R(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const i=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));R(i instanceof ar,()=>"The result y returned by f() must be a tensor.");const o=h7(this.state.activeTape,n,i);if(!s&&o.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const a={};a[i.id]=r??S7(i.shape),p7(a,o,l=>this.tidy(l),A7);const u=n.map(l=>a[l.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(l=>{for(const c of l.saved)c.dispose()}),this.state.activeTape=null),{value:i,grads:u}})}customGrad(e){return R(vv(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{R(n.every(a=>a instanceof ar),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const s={};n.forEach((a,u)=>{s[u]=a});const i=(a,u)=>(r=e(...n,u),R(r.value instanceof ar,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),R(vv(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),o=(a,u)=>{const l=r.gradFunc(a,u),c=Array.isArray(l)?l:[l];R(c.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),R(c.every(f=>f instanceof ar),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const d={};return c.forEach((f,h)=>{d[h]=()=>f}),d};return this.runKernelFunc({forwardFunc:i,backwardsFunc:o,inputs:s})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}async time(e){const n=Ai(),r=await this.backend.time(e);return r.wallMs=Ai()-n,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new WC;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}ud.nextTensorId=0;ud.nextVariableId=0;function S7(t){const e=v3(de(t),"float32");return j.makeTensor(e,t,"float32")}function _P(){const t=x3();if(t._tfengine==null){const e=new $z(t);t._tfengine=new ud(e)}return Uz(t._tfengine.ENV),y7(()=>t._tfengine),t._tfengine}const j=_P();function A7(t,e){const n={a:t,b:e};return j.runKernel(jx,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E7(){return typeof navigator<"u"&&navigator!=null}function TP(t){if(t||E7()){if(t||(t=navigator),t.product==="ReactNative")return!0;const e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){const n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function IP(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ir=X();Ir.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});Ir.registerFlag("IS_BROWSER",()=>IP());Ir.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");Ir.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));Ir.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));Ir.registerFlag("PROD",()=>!1);Ir.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Ir.getBool("DEBUG"));Ir.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);Ir.registerFlag("IS_TEST",()=>!1);Ir.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>Ir.getBool("DEBUG"));Ir.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);Ir.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);Ir.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nu(t,e){let n=t;if(Js(t))return e==="string"?[]:[t.length];if(AP(t)){const s=t.channels||"RGBA";return[t.height,t.width*s.length]}else if(EP(t))return[t.buffer.size/(e==null?4:O0(e))];if(!Array.isArray(t))return[];const r=[];for(;Array.isArray(n)||Js(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&X().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&kP(t,r,[]),r}function kP(t,e,n){if(n=n||[],!Array.isArray(t)&&!Js(t)){R(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}R(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),R(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const r=e.slice(1);for(let s=0;s<t.length;++s)kP(t[s],r,n.concat(s))}function qC(t,e,n,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function T(t,e,n,r="numeric"){if(t instanceof SP())return qC(r,t.dtype,e,n),t;let s=jh(t);if(s!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(s=r),qC(r,s,e,n),t==null||!Js(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const u=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${u}'`)}const i=nu(t,s);!Js(t)&&!Array.isArray(t)&&(t=[t]);const a=s!=="string"?Dg(t,s):dl(t,[],!0);return j.makeTensor(a,i,s)}function F0(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((i,o)=>T(i,`${e}[${o}]`,n,r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RP="__op";function B(t){const e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+RP;const s=(...i)=>{j.startScope(n);try{const o=r(...i);return cl(o)&&console.error("Cannot return a Promise inside of tidy."),j.endScope(o),o}catch(o){throw j.endScope(null),o}};return Object.defineProperty(s,"name",{value:n,configurable:!0}),s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C7(t,e){const n=T(t,"real","complex"),r=T(e,"imag","complex");vs(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const s={real:n,imag:r};return j.runKernel(W3,s)}const Ha=B({complex_:C7});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ru(t,e,n,r){if(r==null)r=jh(t);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(EP(t)||AP(t)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return j.backend.createTensorFromGPUData(t,e||n,r)}if(!Js(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){ws(e);const s=de(e),i=de(n);R(s===i,()=>`Based on the provided shape, [${e}], the tensor should have ${s} values but has ${i}`);for(let o=0;o<n.length;++o){const a=n[o],u=o===n.length-1?a!==de(e.slice(o)):!0;R(n[o]===e[o]||!u,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!Js(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=r!=="string"?Dg(t,r):dl(t,[],!0),j.makeTensor(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uo(t,e,n){const r=nu(t,n);return ru(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fl={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class $i{static join(e){return new $i(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(r=>Js(r)?r.buffer:r),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let n=0;for(let r=0;r<e.length;r++){const s=e[r];r!==e.length-1&&s.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const i=n+s.byteLength;this.shards.push({buffer:s,start:n,end:i}),n=i}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,n=isNaN(Number(n))?0:n,e=Math.max(0,e),n=Math.min(this.byteLength,n),n<=e)return new ArrayBuffer(0);const r=this.findShardForByte(e);if(r===-1)throw new Error(`Could not find start shard for byte ${e}`);const s=n-e,i=new ArrayBuffer(s),o=new Uint8Array(i);let a=0;for(let u=r;u<this.shards.length;u++){const l=this.shards[u],d=e+a-l.start,f=a,p=Math.min(n,l.end)-l.start,y=new Uint8Array(l.buffer,d,p-d);if(o.set(y,f),a+=y.length,n<l.end)break}return i}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function n(s){return e<s.start?-1:e>=s.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const r=N7(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}}function N7(t,e){let n=0,r=t.length;for(;n<=r;){const s=Math.floor((r-n)/2)+n,i=e(t[s]);if(i===0)return s;i<0?r=s:n=s+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xx(){j.disposeVariables()}function aa(){return j}function ld(){return j.memory()}function He(t,e){return j.tidy(t,e)}function rn(t){CP(t).forEach(n=>n.dispose())}function to(t){return j.keep(t)}function _7(){return j.ready()}function T7(){return j.backendName}function I7(t,e,n=1){return j.registerBackend(t,e,n)}function OP(){return j.backend}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ka=4;async function k7(t,e){const n=[],r=[],s=Array.isArray(t)?t.map(o=>o.name):Object.keys(t);for(let o=0;o<s.length;++o){const a=s[o],u=Array.isArray(t)?t[o].tensor:t[a];if(u.dtype!=="float32"&&u.dtype!=="int32"&&u.dtype!=="bool"&&u.dtype!=="string"&&u.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${a}': ${u.dtype}`);const l={name:a,shape:u.shape,dtype:u.dtype};if(u.dtype==="string"){const c=new Promise(async d=>{const f=await u.bytes(),h=f.reduce((b,g)=>b+g.length,0)+Ka*f.length,p=new Uint8Array(h);let y=0;for(let b=0;b<f.length;b++){const g=f[b],v=new Uint8Array(new Uint32Array([g.length]).buffer);p.set(v,y),y+=Ka,p.set(g,y),y+=g.length}d(p)});r.push(c)}else r.push(u.data());e!=null&&(l.group=e),n.push(l)}const i=await Promise.all(r);return{data:P7(i),specs:n}}function PP(t,e){const n=new $i(t),r={};let s=0;for(const i of e){const o=R7(i,(a,u)=>n.slice(s+a,s+u));r[i.name]=DP(i,n.slice(s,s+o)),s+=o}return r}function R7(t,e){const n=de(t.shape);let r;if("quantization"in t){const s=t.quantization;r=fl[s.dtype]}else if(t.dtype==="string"){let s=0;for(let i=0;i<n;i++)s+=Ka+new Uint32Array(e(s,s+Ka))[0];return s}else r=fl[t.dtype];return n*r}async function O7(t,e){const n=de(t.shape);let r;if("quantization"in t){const s=t.quantization;r=fl[s.dtype]}else if(t.dtype==="string"){let s=0;for(let i=0;i<n;i++)s+=Ka+new Uint32Array(await e(s,s+Ka))[0];return s}else r=fl[t.dtype];return n*r}function DP(t,e){const n=t.name,r=t.dtype,s=t.shape,i=de(s);let o,a=0;if("quantization"in t){const u=t.quantization;if(u.dtype==="uint8"||u.dtype==="uint16"){if(!("min"in u&&"scale"in u))throw new Error(`Weight ${t.name} with quantization ${u.dtype} doesn't have corresponding metadata min and scale.`)}else if(u.dtype==="float16"){if(r!=="float32")throw new Error(`Weight ${t.name} is quantized with ${u.dtype} which only supports weights of type float32 not ${r}.`)}else throw new Error(`Weight ${t.name} has unknown quantization dtype ${u.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const l=fl[u.dtype],c=u.dtype==="uint8"?new Uint8Array(e):new Uint16Array(e);if(r==="float32")if(u.dtype==="uint8"||u.dtype==="uint16"){o=new Float32Array(c.length);for(let d=0;d<c.length;d++){const f=c[d];o[d]=f*u.scale+u.min}}else if(u.dtype==="float16")o=V7()(c);else throw new Error(`Unsupported quantization type ${u.dtype} for weight type float32.`);else if(r==="int32"){if(u.dtype!=="uint8"&&u.dtype!=="uint16")throw new Error(`Unsupported quantization type ${u.dtype} for weight type int32.`);o=new Int32Array(c.length);for(let d=0;d<c.length;d++){const f=c[d];o[d]=Math.round(f*u.scale+u.min)}}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);a+=i*l}else if(r==="string"){const u=de(t.shape);o=[];for(let l=0;l<u;l++){const c=new Uint32Array(e.slice(a,a+Ka))[0];a+=Ka;const d=new Uint8Array(e.slice(a,a+c));o.push(d),a+=c}}else{const u=fl[r];if(r==="float32")o=new Float32Array(e);else if(r==="int32")o=new Int32Array(e);else if(r==="bool")o=new Uint8Array(e);else if(r==="complex64"){o=new Float32Array(e);const l=new Float32Array(o.length/2),c=new Float32Array(o.length/2);for(let p=0;p<l.length;p++)l[p]=o[p*2],c[p]=o[p*2+1];const d=uo(l,s,"float32"),f=uo(c,s,"float32"),h=Ha(d,f);return d.dispose(),f.dispose(),h}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);a+=i*u}return uo(o,s,r)}async function GC(t,e,n){let r=new Uint8Array(e);for(;r.byteLength<n;){const{done:s,value:i}=await t.read();if(s&&i==null){const a=n-r.byteLength;throw new Error(`Reader is done but ${a} bytes are still expected`)}const o=new Uint8Array(r.length+i.byteLength);o.set(r,0),o.set(new Uint8Array(i),r.length),r=o}return r.buffer}async function LP(t,e){const n={},r=t.getReader();let s=new ArrayBuffer(0);for(const i of e){const o=await O7(i,async(l,c)=>(s=await GC(r,s,c),s.slice(l,c)));s=await GC(r,s,o);const a=s.slice(0,o);s=s.slice(o);const u=DP(i,a);if(n[i.name]=u,T7()==="webgpu"){const l=OP();"uploadToGPU"in l&&de(u.shape)>=X().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&l.uploadToGPU(u.dataId)}}return n}function P7(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(i=>{if(e+=i.byteLength,n.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${i.constructor.name}`)});const r=new Uint8Array(e);let s=0;return n.forEach(i=>{r.set(new Uint8Array(i.buffer),s),s+=i.byteLength}),r.buffer}const Yx=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function HC(t){return Yx?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function D7(t){if(Yx)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let r=0,s=e.length;r<s;r++)n+=String.fromCharCode(e[r]);return btoa(n)}function L7(t){if(Yx){const r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}function F7(t){return $i.join(t)}function KC(t){const e="/";for(t=t.trim();t.endsWith(e);)t=t.slice(0,t.length-1);const n=t.split(e);return n[n.length-1]}function FP(t,e){const n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:e};return t.signature!=null&&(n.signature=t.signature),t.userDefinedMetadata!=null&&(n.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(n.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(n.initializerSignature=t.initializerSignature),t.trainingConfig!=null&&(n.trainingConfig=t.trainingConfig),n}function $P(t,e,n){const r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(t.trainingConfig!=null&&(r.trainingConfig=t.trainingConfig),t.weightsManifest!=null){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=e,r.weightData=n}return t.signature!=null&&(r.signature=t.signature),t.userDefinedMetadata!=null&&(r.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(r.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(r.initializerSignature=t.initializerSignature),r}async function Qx(t,e){let n,r;return t.weightsManifest!=null&&([n,r]=await e(t.weightsManifest)),$P(t,n,r)}function Wh(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:HC(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:HC(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new $i(t.weightData).byteLength}}function Dv(t){const e=[];for(const n of t)e.push(...n.weights);return e}function $7(){const t=n=>{let r=n<<13,s=0;for(;!(r&8388608);)s-=8388608,r<<=1;return r&=-8388609,s+=947912704,r|s},e=new Uint32Array(2048);e[0]=0;for(let n=1;n<1024;n++)e[n]=t(n);for(let n=1024;n<2048;n++)e[n]=939524096+(n-1024<<13);return e}function B7(){const t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let e=1;e<31;e++)t[e]=e<<23;for(let e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}function M7(){const t=new Uint32Array(64);for(let e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}function V7(){const t=$7(),e=B7(),n=M7();return r=>{const s=new ArrayBuffer(4*r.length),i=new Uint32Array(s);for(let o=0;o<r.length;o++){const a=r[o],u=t[n[a>>10]+(a&1023)]+e[a>>10];i[o]=u}return new Float32Array(s)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Wt{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return Wt.instance==null&&(Wt.instance=new Wt),Wt.instance}static registerSaveRouter(e){Wt.getInstance().saveRouters.push(e)}static registerLoadRouter(e){Wt.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return Wt.getHandlers(e,"save")}static getLoadHandlers(e,n){return Wt.getHandlers(e,"load",n)}static getHandlers(e,n,r){const s=[];return(n==="load"?Wt.getInstance().loadRouters:Wt.getInstance().saveRouters).forEach(o=>{const a=o(e,r);a!==null&&s.push(a)}),s}}const U7=t=>Wt.registerSaveRouter(t),z7=t=>Wt.registerLoadRouter(t),j7=t=>Wt.getSaveHandlers(t),W7=(t,e)=>Wt.getLoadHandlers(t,e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lv="tensorflowjs",Fv=1,Hu="models_store",Ca="model_info_store";function BP(){if(!X().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function $v(t){const e=t.result;e.createObjectStore(Hu,{keyPath:"modelPath"}),e.createObjectStore(Ca,{keyPath:"modelPath"})}class hl{constructor(e){if(this.indexedDB=BP(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((r,s)=>{const i=this.indexedDB.open(Lv,Fv);i.onupgradeneeded=()=>$v(i),i.onsuccess=()=>{const o=i.result;if(n==null){const a=o.transaction(Hu,"readonly"),l=a.objectStore(Hu).get(this.modelPath);l.onsuccess=()=>{if(l.result==null)return o.close(),s(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(l.result.modelArtifacts)},l.onerror=c=>(o.close(),s(l.error)),a.oncomplete=()=>o.close()}else{n.weightData=$i.join(n.weightData);const a=Wh(n),u=o.transaction(Ca,"readwrite");let l=u.objectStore(Ca),c;try{c=l.put({modelPath:this.modelPath,modelArtifactsInfo:a})}catch(f){return s(f)}let d;c.onsuccess=()=>{d=o.transaction(Hu,"readwrite");const f=d.objectStore(Hu);let h;try{h=f.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:a})}catch(p){return s(p)}h.onsuccess=()=>r({modelArtifactsInfo:a}),h.onerror=p=>{l=u.objectStore(Ca);const y=l.delete(this.modelPath);y.onsuccess=()=>(o.close(),s(h.error)),y.onerror=b=>(o.close(),s(h.error))}},c.onerror=f=>(o.close(),s(c.error)),u.oncomplete=()=>{d==null?o.close():d.oncomplete=()=>o.close()}}},i.onerror=o=>s(i.error)})}}hl.URL_SCHEME="indexeddb://";const MP=t=>X().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(hl.URL_SCHEME)?q7(t.slice(hl.URL_SCHEME.length)):null;Wt.registerSaveRouter(MP);Wt.registerLoadRouter(MP);function q7(t){return new hl(t)}function G7(t){return t.startsWith(hl.URL_SCHEME)?t.slice(hl.URL_SCHEME.length):t}class H7{constructor(){this.indexedDB=BP()}async listModels(){return new Promise((e,n)=>{const r=this.indexedDB.open(Lv,Fv);r.onupgradeneeded=()=>$v(r),r.onsuccess=()=>{const s=r.result,i=s.transaction(Ca,"readonly"),a=i.objectStore(Ca).getAll();a.onsuccess=()=>{const u={};for(const l of a.result)u[l.modelPath]=l.modelArtifactsInfo;e(u)},a.onerror=u=>(s.close(),n(a.error)),i.oncomplete=()=>s.close()},r.onerror=s=>n(r.error)})}async removeModel(e){return e=G7(e),new Promise((n,r)=>{const s=this.indexedDB.open(Lv,Fv);s.onupgradeneeded=()=>$v(s),s.onsuccess=()=>{const i=s.result,o=i.transaction(Ca,"readwrite"),a=o.objectStore(Ca),u=a.get(e);let l;u.onsuccess=()=>{if(u.result==null)return i.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const c=a.delete(e),d=()=>{l=i.transaction(Hu,"readwrite");const h=l.objectStore(Hu).delete(e);h.onsuccess=()=>n(u.result.modelArtifactsInfo),h.onerror=p=>r(u.error)};c.onsuccess=d,c.onerror=f=>(d(),i.close(),r(u.error))}},u.onerror=c=>(i.close(),r(u.error)),o.oncomplete=()=>{l==null?i.close():l.oncomplete=()=>i.close()}},s.onerror=i=>r(s.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lo="/",fc="tensorflowjs_models",VP="info",K7="model_topology",X7="weight_specs",Y7="weight_data",Q7="model_metadata";function UP(t){return{info:[fc,t,VP].join(Lo),topology:[fc,t,K7].join(Lo),weightSpecs:[fc,t,X7].join(Lo),weightData:[fc,t,Y7].join(Lo),modelMetadata:[fc,t,Q7].join(Lo)}}function zP(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function Z7(t){const e=t.split(Lo);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(Lo)}function J7(t){return t.startsWith(pl.URL_SCHEME)?t.slice(pl.URL_SCHEME.length):t}class pl{constructor(e){if(!X().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=UP(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),s=Wh(e),i=$i.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(s)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,D7(i));const o={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(o)),{modelArtifactsInfo:s}}catch{throw zP(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${s.modelTopologyBytes}, weightSpecsBytes=${s.weightSpecsBytes}, weightDataBytes=${s.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;const s=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(s==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=s;const i=this.LS.getItem(this.keys.modelMetadata);if(i!=null){const a=JSON.parse(i);n.format=a.format,n.generatedBy=a.generatedBy,n.convertedBy=a.convertedBy,a.signature!=null&&(n.signature=a.signature),a.userDefinedMetadata!=null&&(n.userDefinedMetadata=a.userDefinedMetadata),a.modelInitializer!=null&&(n.modelInitializer=a.modelInitializer),a.initializerSignature!=null&&(n.initializerSignature=a.initializerSignature),a.trainingConfig!=null&&(n.trainingConfig=a.trainingConfig)}const o=this.LS.getItem(this.keys.weightData);if(o==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=L7(o),n}}pl.URL_SCHEME="localstorage://";const jP=t=>X().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(pl.URL_SCHEME)?ej(t.slice(pl.URL_SCHEME.length)):null;Wt.registerSaveRouter(jP);Wt.registerLoadRouter(jP);function ej(t){return new pl(t)}class tj{constructor(){R(X().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),R(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=fc+Lo,r=Lo+VP;for(let s=0;s<this.LS.length;++s){const i=this.LS.key(s);if(i.startsWith(n)&&i.endsWith(r)){const o=Z7(i);e[o]=JSON.parse(this.LS.getItem(i))}}return e}async removeModel(e){e=J7(e);const n=UP(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return zP(n),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uc="://";class nr{constructor(){this.managers={}}static getInstance(){return nr.instance==null&&(nr.instance=new nr),nr.instance}static registerManager(e,n){R(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(Uc)&&(e=e.slice(0,e.indexOf(Uc))),R(e.length>0,()=>"scheme must not be an empty string.");const r=nr.getInstance();R(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=n}static getManager(e){const n=nr.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(nr.getInstance().managers)}}function Lm(t){if(t.indexOf(Uc)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${nr.getSchemes().join(",")}`);return{scheme:t.split(Uc)[0],path:t.split(Uc)[1]}}async function WP(t,e,n=!1){R(t!==e,()=>`Old path and new path are the same: '${t}'`);const r=Wt.getLoadHandlers(t);R(r.length>0,()=>`Copying failed because no load handler is found for source URL ${t}.`),R(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${t}.`);const s=r[0],i=Wt.getSaveHandlers(e);R(i.length>0,()=>`Copying failed because no save handler is found for destination URL ${e}.`),R(i.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${e}.`);const o=i[0],a=Lm(t).scheme,u=Lm(t).path,l=a===Lm(t).scheme,c=await s.load();n&&l&&await nr.getManager(a).removeModel(u);const d=await o.save(c);return n&&!l&&await nr.getManager(a).removeModel(u),d.modelArtifactsInfo}async function nj(){const t=nr.getSchemes(),e={};for(const n of t){const r=await nr.getManager(n).listModels();for(const s in r){const i=n+Uc+s;e[i]=r[s]}}return e}async function rj(t){const e=Lm(t);return nr.getManager(e.scheme).removeModel(e.path)}async function sj(t,e){return WP(t,e,!1)}async function ij(t,e){return WP(t,e,!0)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oj{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(typeof window>"u"||!X().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const s=this.functionRefs[r.data.index];s(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return fP(e)}}if(X().get("IS_BROWSER")){X().setPlatform("browser",new oj);try{nr.registerManager(pl.URL_SCHEME,new tj)}catch{}try{nr.registerManager(hl.URL_SCHEME,new H7)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aj={importFetch:()=>require("node-fetch")};let Ry;class uj{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return X().global.fetch!=null?X().global.fetch(e,n):(Ry==null&&(Ry=aj.importFetch()),Ry(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}X().get("IS_NODE")&&!X().get("IS_BROWSER")&&X().setPlatform("node",new uj);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ht(t,e="float32",n){return e=e||"float32",ws(t),new ad(t,e,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lj(t,e){const n=T(t,"x","cast");if(!Oz(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:n},s={dtype:e};return j.runKernel(Wx,r,s)}const cn=B({cast_:lj});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cj(t){const n={x:T(t,"x","clone","string_or_numeric")};return j.runKernel(qx,n)}const Va=B({clone_:cj});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qP(t,e=!1){console.log(t.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_P();const dj={buffer:Ht,cast:cn,clone:Va,print:qP};b7(dj);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fj(t,e){let n=T(t,"a","add"),r=T(e,"b","add");[n,r]=en(n,r);const s={a:n,b:r};return j.runKernel(jx,s)}const ke=B({add_:fj});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hj(t,e){let n=T(t,"a","floorDiv"),r=T(e,"b","floorDiv");[n,r]=en(n,r);const s={a:n,b:r};return j.runKernel(SR,s)}const GP=B({floorDiv_:hj});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pj(t,e){let n=T(t,"a","div"),r=T(e,"b","div");if([n,r]=en(n,r),n.dtype==="int32"&&r.dtype==="int32")return GP(n,r);const s={a:n,b:r},i={};return j.runKernel(cR,s,i)}const lt=B({div_:pj});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mj(t,e){let n=T(t,"a","mul"),r=T(e,"b","mul");[n,r]=en(n,r);const s={a:n,b:r};return j.runKernel(eO,s)}const fe=B({mul_:mj});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gj(t){const e=T(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return j.runKernel(q3,n)}else{const n={x:e};return j.runKernel(S3,n)}}const ss=B({abs_:gj});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yj(t){const n={x:T(t,"x","acos")};return j.runKernel(A3,n)}const bj=B({acos_:yj});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vj(t){const n={x:T(t,"x","acosh")};return j.runKernel(E3,n)}const wj=B({acosh_:vj});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xj(t){R(Array.isArray(t),()=>"The argument passed to tf.addN() must be a list of tensors"),R(t.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${t.length}`);const e=t.map((s,i)=>T(s,`tensors${i}`,"addN")),n=e[0];e.forEach(s=>{if(s.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(s=>{if(!Gt(s.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const r=e;return j.runKernel(C3,r)}const Sj=B({addN_:xj});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aj(t,e=null,n=!1){const s={x:T(t,"x","all","bool")},i={axis:e,keepDims:n};return j.runKernel(N3,s,i)}const Ej=B({all_:Aj});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cj(t,e=null,n=!1){const s={x:T(t,"x","any","bool")},i={axis:e,keepDims:n};return j.runKernel(_3,s,i)}const HP=B({any_:Cj});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nj(t,e=0){const r={x:T(t,"x","argMax")},s={axis:e};return j.runKernel(T3,r,s)}const KP=B({argMax_:Nj});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _j(t,e=0){const r={x:T(t,"x","argMin")},s={axis:e};return j.runKernel(I3,r,s)}const XP=B({argMin_:_j});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tj(t){const n={x:T(t,"x","asin")};return j.runKernel(k3,n)}const Ij=B({asin_:Tj});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kj(t){const n={x:T(t,"x","asinh")};return j.runKernel(R3,n)}const Rj=B({asinh_:kj});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oj(t){const n={x:T(t,"x","atan")};return j.runKernel(O3,n)}const Pj=B({atan_:Oj});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dj(t,e){let n=T(t,"a","atan2"),r=T(e,"b","atan2");[n,r]=en(n,r);const s={a:n,b:r};return j.runKernel(D3,s)}const Lj=B({atan2_:Dj});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fj(t){const n={x:T(t,"x","atanh")};return j.runKernel(P3,n)}const $j=B({atanh_:Fj});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YP(t,e,n,r,s="NHWC",i){const o=t[3],a=[...e,o],u=xd(s);return xs(t,a,n,i,r,null,null,u)}function Tl(t,e,n,r,s,i,o="channelsLast"){const[a,u]=wh(e);let l;if(o==="channelsLast")l=[a,u,t[3],t[3]];else if(o==="channelsFirst")l=[a,u,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return xs(t,l,n,r,s,i,!1,o)}function qh(t,e,n,r,s,i,o="NDHWC"){const[a,u,l]=Bv(e);let c,d;if(o==="NDHWC")d="channelsLast",c=[a,u,l,t[4],t[4]];else if(o==="NCDHW")d="channelsFirst",c=[a,u,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return Gh(t,c,n,r,s,!1,d,i)}function xs(t,e,n,r,s,i,o=!1,a="channelsLast"){let[u,l,c,d]=[-1,-1,-1,-1];if(a==="channelsLast")[u,l,c,d]=t;else if(a==="channelsFirst")[u,d,l,c]=t;else throw new Error(`Unknown dataFormat ${a}`);const[f,h,,p]=e,[y,b]=wh(n),[g,v]=wh(r),w=zc(f,g),x=zc(h,v),{padInfo:N,outHeight:k,outWidth:O}=Vj(s,l,c,y,b,w,x,i,a),_=o?p*d:p;let $;return a==="channelsFirst"?$=[u,_,k,O]:a==="channelsLast"&&($=[u,k,O,_]),{batchSize:u,dataFormat:a,inHeight:l,inWidth:c,inChannels:d,outHeight:k,outWidth:O,outChannels:_,padInfo:N,strideHeight:y,strideWidth:b,filterHeight:f,filterWidth:h,effectiveFilterHeight:w,effectiveFilterWidth:x,dilationHeight:g,dilationWidth:v,inShape:t,outShape:$,filterShape:e}}function Gh(t,e,n,r,s,i=!1,o="channelsLast",a){let[u,l,c,d,f]=[-1,-1,-1,-1,-1];if(o==="channelsLast")[u,l,c,d,f]=t;else if(o==="channelsFirst")[u,f,l,c,d]=t;else throw new Error(`Unknown dataFormat ${o}`);const[h,p,y,,b]=e,[g,v,w]=Bv(n),[x,N,k]=Bv(r),O=zc(h,x),_=zc(p,N),$=zc(y,k),{padInfo:M,outDepth:K,outHeight:Z,outWidth:ie}=Uj(s,l,c,d,g,v,w,O,_,$,a),ee=i?b*f:b;let W;return o==="channelsFirst"?W=[u,ee,K,Z,ie]:o==="channelsLast"&&(W=[u,K,Z,ie,ee]),{batchSize:u,dataFormat:o,inDepth:l,inHeight:c,inWidth:d,inChannels:f,outDepth:K,outHeight:Z,outWidth:ie,outChannels:ee,padInfo:M,strideDepth:g,strideHeight:v,strideWidth:w,filterDepth:h,filterHeight:p,filterWidth:y,effectiveFilterDepth:O,effectiveFilterHeight:_,effectiveFilterWidth:$,dilationDepth:x,dilationHeight:N,dilationWidth:k,inShape:t,outShape:W,filterShape:e}}function Bj(t,e,n,r,s){r==null&&(r=Zx(t,e,n));const i=t[0],o=t[1],a=xh((i-e+2*r)/n+1,s),u=xh((o-e+2*r)/n+1,s);return[a,u]}function Mj(t,e,n,r,s,i){s==null&&(s=Zx(t,e[0],r[0]));const o=[0,0,0,n];for(let a=0;a<3;a++)t[a]+2*s>=e[a]&&(o[a]=xh((t[a]-e[a]+2*s)/r[a]+1,i));return o}function Zx(t,e,n,r=1){const s=zc(e,r);return Math.floor((t[0]*(n-1)-n+s)/2)}function wh(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function Bv(t){return typeof t=="number"?[t,t,t]:t}function zc(t,e){return e<=1?t:t+(t-1)*(e-1)}function Vj(t,e,n,r,s,i,o,a,u){let l,c,d;if(typeof t=="number"){l={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const h=Bj([e,n],i,r,t,a);c=h[0],d=h[1]}else if(t==="same"){c=Math.ceil(e/r),d=Math.ceil(n/s);const f=Math.max(0,(c-1)*r+i-e),h=Math.max(0,(d-1)*s+o-n),p=Math.floor(f/2),y=f-p,b=Math.floor(h/2),g=h-b;l={top:p,bottom:y,left:b,right:g,type:"SAME"}}else if(t==="valid")l={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((e-i+1)/r),d=Math.ceil((n-o+1)/s);else if(typeof t=="object"){const f=u==="channelsLast"?t[1][0]:t[2][0],h=u==="channelsLast"?t[1][1]:t[2][1],p=u==="channelsLast"?t[2][0]:t[3][0],y=u==="channelsLast"?t[2][1]:t[3][1];l={top:f,bottom:h,left:p,right:y,type:f===0&&h===0&&p===0&&y===0?"VALID":"EXPLICIT"},c=xh((e-i+f+h)/r+1,a),d=xh((n-o+p+y)/s+1,a)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:l,outHeight:c,outWidth:d}}function Uj(t,e,n,r,s,i,o,a,u,l,c){let d,f,h,p;if(t==="valid"&&(t=0),typeof t=="number"){d={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const b=Mj([e,n,r,1],[a,u,l],1,[s,i,o],t,c);f=b[0],h=b[1],p=b[2]}else if(t==="same"){f=Math.ceil(e/s),h=Math.ceil(n/i),p=Math.ceil(r/o);const y=(f-1)*s+a-e,b=(h-1)*i+u-n,g=(p-1)*o+l-r,v=Math.floor(y/2),w=y-v,x=Math.floor(b/2),N=b-x,k=Math.floor(g/2),O=g-k;d={top:x,bottom:N,left:k,right:O,front:v,back:w,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:d,outDepth:f,outHeight:h,outWidth:p}}function xh(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function Sh(t){const[e,n,r]=wh(t);return e===1&&n===1&&r===1}function Xr(t,e){return Sh(t)||Sh(e)}function ml(t){return wh(t).every(e=>e>0)}function xd(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function ti(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")R(sd(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(s=>{R(sd(s),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${s}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zj(t,e){const r={x:T(t,"x","reshape","string_or_numeric")},s={shape:e};return j.runKernel(wO,r,s)}const te=B({reshape_:zj});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jj(t,e,n,r,s){const i=T(t,"x","avgPool","float32"),o=1;R(Xr(n,o),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`);let a=i,u=!1;i.rank===3&&(u=!0,a=te(i,[1,i.shape[0],i.shape[1],i.shape[2]])),R(a.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`),ti("avgPool",r,s);const l={x:a},c={filterSize:e,strides:n,pad:r,dimRoundingMode:s};let d=j.runKernel(L3,l,c);return d=cn(d,i.dtype),u?te(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const QP=B({avgPool_:jj});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wj(t,e,n,r,s,i="NDHWC"){const o=T(t,"x","avgPool3d","float32");let a=o,u=!1;o.rank===4&&(u=!0,a=te(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),R(a.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${a.rank}.`),R(i==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),R(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),ti("avgPool3d",r,s);const l={x:a},c={filterSize:e,strides:n,pad:r,dimRoundingMode:s,dataFormat:i};let d=j.runKernel(F3,l,c);return d=cn(d,a.dtype),u?te(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const qj=B({avgPool3d_:Wj});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gj(t,e=0){R(t.length>=1,()=>"Pass at least one tensor to concat");const n=F0(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(i=>{if(i.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${i.dtype}. `)}),n.length===1)return Va(n[0]);const r=n,s={axis:e};return j.runKernel(G3,r,s)}const dn=B({concat_:Gj});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hj(t,e,n=!1,r=!1){let s=T(t,"a","matMul"),i=T(e,"b","matMul");[s,i]=en(s,i);const o={a:s,b:i},a={transposeA:n,transposeB:r};return j.runKernel($3,o,a)}const bt=B({matMul_:Hj});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kj(t){const n={x:T(t,"x","sigmoid","float32")};return j.runKernel(FO,n)}const jc=B({sigmoid_:Kj});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xj(t,e,n){const r=T(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const s={x:r},i={begin:e,size:n};return j.runKernel(OO,s,i)}const Le=B({slice_:Xj});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yj(t){const n={x:T(t,"x","tanh","float32")};return j.runKernel(nP,n)}const Mv=B({tanh_:Yj});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qj(t,e,n,r,s,i){const o=T(t,"forgetBias","basicLSTMCell"),a=T(e,"lstmKernel","basicLSTMCell"),u=T(n,"lstmBias","basicLSTMCell"),l=T(r,"data","basicLSTMCell"),c=T(s,"c","basicLSTMCell"),d=T(i,"h","basicLSTMCell"),f=dn([l,d],1),h=bt(f,a),p=ke(h,u),y=p.shape[0],b=p.shape[1]/4,g=[y,b],v=Le(p,[0,0],g),w=Le(p,[0,b],g),x=Le(p,[0,b*2],g),N=Le(p,[0,b*3],g),k=ke(fe(jc(v),Mv(w)),fe(c,jc(ke(o,x)))),O=fe(Mv(k),jc(N));return[k,O]}const Zj=B({basicLSTMCell_:Qj});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jj(t,e,n){const r=T(t,"x","batchToSpaceND"),s=e.reduce((a,u)=>a*u);R(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),R(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),R(r.shape[0]%s===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${s}`);const i={x:r},o={blockShape:e,crops:n};return j.runKernel(B3,i,o)}const ZP=B({batchToSpaceND_:Jj});function eW(t){let e;return t.rank===0||t.rank===1?e=te(t,[1,1,1,t.size]):t.rank===2?e=te(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=te(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tW(t,e,n,r,s,i){i==null&&(i=.001);const o=T(t,"x","batchNorm"),a=T(e,"mean","batchNorm"),u=T(n,"variance","batchNorm");let l;s!=null&&(l=T(s,"scale","batchNorm"));let c;r!=null&&(c=T(r,"offset","batchNorm")),R(a.rank===u.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),R(c==null||a.rank===c.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),R(l==null||a.rank===l.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const f={x:eW(o),scale:l,offset:c,mean:a,variance:u},h={varianceEpsilon:i},p=j.runKernel(AR,f,h);return te(p,o.shape)}const Lg=B({batchNorm_:tW});function nW(t,e,n,r,s,i){const o=T(t,"x","batchNorm"),a=T(e,"mean","batchNorm"),u=T(n,"variance","batchNorm");let l;s!=null&&(l=T(s,"scale","batchNorm"));let c;return r!=null&&(c=T(r,"offset","batchNorm")),R(o.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${o.rank}.`),R(a.rank===2||a.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${a.rank}.`),R(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${u.rank}.`),l!=null&&R(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${l.rank}.`),c!=null&&R(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${c.rank}.`),Lg(o,a,u,c,l,i)}const rW=B({batchNorm2d_:nW});function sW(t,e,n,r,s,i){const o=T(t,"x","batchNorm"),a=T(e,"mean","batchNorm"),u=T(n,"variance","batchNorm");let l;s!=null&&(l=T(s,"scale","batchNorm"));let c;return r!=null&&(c=T(r,"offset","batchNorm")),R(o.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${o.rank}.`),R(a.rank===3||a.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${a.rank}.`),R(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${u.rank}.`),l!=null&&R(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${l.rank}.`),c!=null&&R(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${c.rank}.`),Lg(o,a,u,c,l,i)}const iW=B({batchNorm3d_:sW});function oW(t,e,n,r,s,i){const o=T(t,"x","batchNorm"),a=T(e,"mean","batchNorm"),u=T(n,"variance","batchNorm");let l;s!=null&&(l=T(s,"scale","batchNorm"));let c;return r!=null&&(c=T(r,"offset","batchNorm")),R(o.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${o.rank}.`),R(a.rank===4||a.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${a.rank}.`),R(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${u.rank}.`),l!=null&&R(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${l.rank}.`),c!=null&&R(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${c.rank}.`),Lg(o,a,u,c,l,i)}const aW=B({batchNorm4d_:oW});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uW(t,e,n){const r=T(t,"x","bincount"),s=T(e,"weights","bincount");R(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),R(n>=0,()=>`size must be non-negative, but got ${n}.`),R(s.size===r.size||s.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${s.shape}.`);const i={x:r,weights:s},o={size:n};return j.runKernel(M3,i,o)}const JP=B({bincount_:uW});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lW(t,e){const n=T(t,"x","bitwiseAnd"),r=T(e,"y","bitwiseAnd");if(!Gt(n.shape,r.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${n.shape}, y: ${r.shape}`);if(n.dtype!=="int32"||r.dtype!=="int32")throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${n.dtype} and type of y: ${r.dtype}`);const s={a:n,b:r};return j.runKernel(V3,s)}const cW=B({bitwiseAnd_:lW});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dW(t,e){const n=T(t,"s0","broadcastArgs","int32"),r=T(e,"s1","broadcastArgs","int32");if(n.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${n.rank}`);if(r.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);const s={s0:n,s1:r};return j.runKernel(U3,s)}const fW=B({broadcastArgs_:dW});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hW(t,e){let n=T(t,"broadcastTo","x");const r=n.shape;if(ws(e),e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const l=n.shape.slice();for(;l.length<e.length;)l.unshift(1);n=te(n,l)}const s=n.shape,i=Array.from(e);for(let l=e.length-1;l>=0;l--)if(s[l]===e[l])i[l]=1;else if(n.shape[l]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(i.map((l,c)=>l>1?c:-1).filter(l=>l>=0).length===0)return Va(n);const a={x:n},u={reps:i};return j.runKernel(Gx,a,u)}const Kf=B({broadcastTo_:hW});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pW(t){const n={x:T(t,"x","ceil","float32")};return j.runKernel(z3,n)}const mW=B({ceil_:pW});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hh(t,e,n){ws(t),n=n||jh(e);const r={shape:t,value:e,dtype:n};return j.runKernel(vR,{},r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gW(t,e,n){const r=T(t,"x","clipByValue");if(R(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return Hh(r.shape,e,r.dtype);const s={x:r},i={clipValueMin:e,clipValueMax:n};return j.runKernel(j3,s,i)}const yW=B({clipByValue_:gW});function bW(t){return dn(t,0)}const vW=B({concat1d_:bW});function wW(t,e){return dn(t,e)}const xW=B({concat2d_:wW});function SW(t,e){return dn(t,e)}const AW=B({concat3d_:SW});function EW(t,e){return dn(t,e)}const CW=B({concat4d_:EW});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NW(t,e,n,r,s="NHWC",i=[1,1],o){const a=T(t,"x","conv2d","float32"),u=T(e,"filter","conv2d","float32");let l=a,c=!1;a.rank===3&&(c=!0,l=te(a,[1,a.shape[0],a.shape[1],a.shape[2]])),R(l.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${l.rank}.`),R(u.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${u.rank}.`),ti("conv2d",r,o);const d=s==="NHWC"?l.shape[3]:l.shape[1];R(d===u.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${u.shape[2]}.`),R(Xr(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),R(ml(i),()=>"Error in conv2D: Dilated rates should be larger than 0."),R(ml(n),()=>"Error in conv2D: Strides should be larger than 0.");const f={x:l,filter:u},h={strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:o},p=j.runKernel(H3,f,h);return c?te(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const Fg=B({conv2d_:NW});function _W(t,e,n,r,s="NWC",i=1,o){const a=T(t,"x","conv1d"),u=T(e,"filter","conv1d");let l=a,c=!1;a.rank===2&&(c=!0,l=te(a,[1,a.shape[0],a.shape[1]])),R(l.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${l.rank}.`),R(u.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${u.rank}.`),ti("conv1d",r,o),R(l.shape[2]===u.shape[1],()=>`Error in conv1d: depth of input (${l.shape[2]}) must match input depth for filter ${u.shape[1]}.`),R(Xr(n,i),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${i}'`),R(ml(i),()=>"Error in conv1D: Dilated rates should be larger than 0."),R(ml(n),()=>"Error in conv1D: Stride should be larger than 0."),R(s==="NWC",()=>`Error in conv1d: got dataFormat of ${s} but only NWC is currently supported.`);const d=te(u,[1,u.shape[0],u.shape[1],u.shape[2]]),f=te(l,[l.shape[0],1,l.shape[1],l.shape[2]]),b=Fg(f,d,[1,n],r,"NHWC",[1,i],o);return c?te(b,[b.shape[2],b.shape[3]]):te(b,[b.shape[0],b.shape[2],b.shape[3]])}const TW=B({conv1d_:_W});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IW(t,e,n,r,s,i="NHWC",o){R(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let a=t,u=e,l=!1;e.rank===3&&(l=!0,u=te(e,[1,e.shape[0],e.shape[1],e.shape[2]]),a=[1,t[0],t[1],t[2]]),R(a.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${a.length}.`),R(u.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${u.rank}`),R(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const c=i==="NHWC"?a[3]:a[1],d=i==="NHWC"?u.shape[3]:u.shape[1];R(c===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${c}) must match input depth for filter ${n.shape[2]}.`),R(d===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${n.shape[3]}.`),ti("conv2dDerInput",s,o);const f={dy:u,filter:n},h={strides:r,pad:s,dataFormat:i,dimRoundingMode:o,inputShape:a},p=j.runKernel(X3,f,h);return l?te(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const e4=B({conv2DBackpropInput_:IW});function kW(t,e,n,r,s,i){const o=T(t,"x","conv2dTranspose"),a=T(e,"filter","conv2dTranspose");return e4(n,o,a,r,s,"NHWC",i)}const RW=B({conv2dTranspose_:kW});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OW(t,e,n,r,s="NDHWC",i=[1,1,1]){const o=T(t,"x","conv3d"),a=T(e,"filter","conv3d");let u=o,l=!1;o.rank===4&&(l=!0,u=te(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),R(u.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${u.rank}.`),R(a.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${a.rank}.`),R(u.shape[4]===a.shape[3],()=>`Error in conv3d: depth of input (${u.shape[4]}) must match input depth for filter ${a.shape[3]}.`),R(Xr(n,i),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),R(s==="NDHWC",()=>`Error in conv3d: got dataFormat of ${s} but only NDHWC is currently supported.`),R(ml(i),()=>"Error in conv3D: Dilated rates should be larger than 0."),R(ml(n),()=>"Error in conv3D: Strides should be larger than 0.");const c={x:u,filter:a},d={strides:n,pad:r,dataFormat:s,dilations:i},f=j.runKernel(Y3,c,d);return l?te(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const PW=B({conv3d_:OW});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DW(t,e,n,r,s){R(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let i=t,o=e,a=!1;e.rank===4&&(a=!0,o=te(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),i=[1,t[0],t[1],t[2],t[3]]);const u=i[4],l=o.shape[4];R(i.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${i.length}.`),R(o.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${o.rank}`),R(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),R(u===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${u}) must match input depth for filter ${n.shape[3]}.`),R(l===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${l}) must match output depth for filter ${n.shape[4]}.`);const c={dy:o,filter:n},d={pad:s,strides:r,inputShape:i},f=j.runKernel(Q3,c,d);return a?te(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const LW=B({conv3DBackpropInput_:DW});function FW(t,e,n,r,s){const i=T(t,"x","conv3dTranspose"),o=T(e,"filter","conv3dTranspose");return LW(n,i,o,r,s)}const $W=B({conv3dTranspose_:FW});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BW(t){const n={x:T(t,"x","cos","float32")};return j.runKernel(Z3,n)}const MW=B({cos_:BW});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VW(t){const n={x:T(t,"x","cosh","float32")};return j.runKernel(J3,n)}const UW=B({cosh_:VW});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zW(t,e=0,n=!1,r=!1){const i={x:T(t,"x","cumprod")},o={axis:e,exclusive:n,reverse:r};return j.runKernel(eR,i,o)}const jW=B({cumprod_:zW});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WW(t,e=0,n=!1,r=!1){const i={x:T(t,"x","cumsum")},o={axis:e,exclusive:n,reverse:r};return j.runKernel(tR,i,o)}const qW=B({cumsum_:WW});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GW(t,e,n,r=!1){const s=T(t,"x","denseBincount"),i=T(e,"weights","denseBincount");R(s.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${s.dtype}`),R(s.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${s.rank}.`),R(n>=0,()=>`size must be non-negative, but got ${n}.`),R(i.size===s.size||i.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${s.shape}, weights shape: ${i.shape}.`);const o={x:s,weights:i},a={size:n,binaryOutput:r};return j.runKernel(rR,o,a)}const HW=B({denseBincount_:GW});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KW(t,e,n="NHWC"){const r=T(t,"x","depthToSpace","float32"),s=n==="NHWC"?r.shape[1]:r.shape[2],i=n==="NHWC"?r.shape[2]:r.shape[3],o=n==="NHWC"?r.shape[3]:r.shape[1];R(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),R(s*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${s} and ${e}  for depthToSpace with input shape
    ${r.shape}`),R(i*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${e} for depthToSpace with input shape
        ${r.shape}`),R(o%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${o} for depthToSpace with input shape ${r.shape}`);const a={x:r},u={blockSize:e,dataFormat:n};return j.runKernel(sR,a,u)}const XW=B({depthToSpace_:KW});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YW(t,e,n,r,s="NHWC",i=[1,1],o){const a=T(t,"x","depthwiseConv2d","float32"),u=T(e,"filter","depthwiseConv2d","float32");let l=a,c=!1;a.rank===3&&(c=!0,l=te(a,[1,a.shape[0],a.shape[1],a.shape[2]])),R(l.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${l.rank}.`),R(u.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${u.rank}.`);const d=s==="NHWC"?l.shape[3]:l.shape[1];R(d===u.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${d}) must match the inChannels dimension in filter ${u.shape[2]}.`),ti("depthwiseConv2d",r,o);const f={x:l,filter:u},h={strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:o},p=j.runKernel(iR,f,h);return c?te(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const Jx=B({depthwiseConv2d_:YW});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QW(t){const n={x:T(t,"x","diag")};return j.runKernel(uR,n)}const ZW=B({diag_:QW});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JW(t,e,n,r,s=[1,1],i="NHWC"){const o=T(t,"x","dilation2d"),a=T(e,"filter","dilation2d");R(o.rank===3||o.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${o.rank}.`),R(a.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${a.rank}.`),R(i==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${i}`);let u=o,l=!1;o.rank===3&&(u=te(o,[1,o.shape[0],o.shape[1],o.shape[2]]),l=!0),R(u.shape[3]===a.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${u.shape[3]} vs ${a.shape[2]}`);const c={x:u,filter:a},d={strides:n,pad:r,dilations:s},f=j.runKernel(lR,c,d);return l?te(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const e9=B({dilation2d_:JW});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $0(t,e){const n=t.length,r=[];for(let s=0;s<n;s++){const i=n-1-s,o=t[i]||1;(e[e.length-1-s]||1)>1&&o===1&&r.unshift(i)}return r}function t4(t,e){const n=[];for(let r=0;r<e.length;r++){const s=t[t.length-r-1],i=e.length-r-1,o=e[i];(s==null||s===1&&o>1)&&n.unshift(i)}return n}function it(t,e){const n=Math.max(t.length,e.length),r=new Array(n);for(let s=0;s<n;s++){let i=t[t.length-s-1];i==null&&(i=1);let o=e[e.length-s-1];if(o==null&&(o=1),i===1)r[n-s-1]=o;else if(o===1)r[n-s-1]=i;else if(i!==o){const a=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(a)}else r[n-s-1]=i}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t9(t,e){let n=T(t,"a","equal","string_or_numeric"),r=T(e,"b","equal","string_or_numeric");[n,r]=en(n,r),it(n.shape,r.shape);const s={a:n,b:r};return j.runKernel(pR,s)}const n4=B({equal_:t9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n9(t,e,n){const r=T(e,"a","where"),s=T(n,"b","where"),i=T(t,"condition","where","bool"),o=it(it(i.shape,r.shape),s.shape),a=Kf(i,o),u=Kf(r,o),l=Kf(s,o),c={condition:a,t:u,e:l};return j.runKernel(kO,c)}const Vo=B({where_:n9});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r9(t){const n={x:T(t,"x","zerosLike")};return j.runKernel(uP,n)}const ds=B({zerosLike_:r9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s9(t,e){let n=T(t,"a","div"),r=T(e,"b","div");[n,r]=en(n,r);const s=lt(n,r),i=ds(s),o=n4(r,i);return Vo(o,i,s)}const i9=B({divNoNan_:s9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o9(t,e){const n=T(t,"t1","dot"),r=T(e,"t2","dot");R((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const s=n.rank===1?n.size:n.shape[1],i=r.rank===1?r.size:r.shape[0];if(R(s===i,()=>`Error in dot: inner dimensions of inputs must match, but got ${s} and ${i}.`),n.rank===1&&r.rank===1){const o=te(n,[1,-1]),a=te(r,[-1,1]),u=bt(o,a);return te(u,[])}else if(n.rank===1&&r.rank===2){const o=te(n,[1,-1]),a=te(r,[r.shape[0],r.shape[1]]),u=bt(o,a);return te(u,[u.size])}else if(n.rank===2&&r.rank===1){const o=te(r,[-1,1]),a=bt(n,o);return te(a,[a.size])}else{const o=te(r,[r.shape[0],r.shape[1]]);return bt(n,o)}}const a9=B({dot_:o9});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u9(t,...e){const n=e.map((s,i)=>T(s,`tensors${i}`,"einsum")),r={equation:t};return j.runKernel(dR,n,r)}const hc=B({einsum_:u9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l9(t){const n={x:T(t,"x","elu","float32")};return j.runKernel(fR,n)}const r4=B({elu_:l9});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c9(t,e){const n=T(t,"x","ensureShape","string_or_numeric");if(!Iz(n.shape,e))throw new Error(`EnsureShape: Shape of tensor ${n.shape} is not compatible with expected shape ${e}`);return t}const d9=B({ensureShape_:c9});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f9(t){let e=T(t,"x","erf");R(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=cn(e,"float32"));const n={x:e};return j.runKernel(hR,n)}const h9=B({erf_:f9});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e2(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function s4(t,e,n){const r=t.length+e.length,s=[];let i=0,o=0;for(let a=0;a<r;a++)n.indexOf(a)===-1?s.push(t[i++]):s.push(e[o++]);return s}function po(t,e){const n=[],r=t.length;for(let i=0;i<r;i++)e.indexOf(i)===-1&&n.push(t[i]);const s=e.map(i=>t[i]);return[n,s]}function Ss(t,e){const n=e.map(r=>1);return s4(t,n,e)}function Bi(t,e,n){R(e2(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function ni(t,e){if(e2(t,e))return null;const n=[];for(let r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(r=>n.push(r)),n}function t2(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function ri(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p9(t,e=null,n=!1){const s={x:T(t,"x","max")},i={reductionIndices:e,keepDims:n};return j.runKernel(jR,s,i)}const Zu=B({max_:p9});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m9(t,e=null,n=!1){const s={x:T(t,"x","min")},i={axis:e,keepDims:n};return j.runKernel(XR,s,i)}const Vv=B({min_:m9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g9(t,e){let n=T(t,"base","pow"),r=T(e,"exp","pow");[n,r]=en(n,r);const s={a:n,b:r};return j.runKernel(cO,s)}const Ah=B({pow_:g9});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qe(t,e){if((Js(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&Js(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return ru(t,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y9(t){const n={x:T(t,"x","sqrt","float32")};return j.runKernel(BO,n)}const Ko=B({sqrt_:y9});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b9(t){const e=T(t,"x","square"),n={};return j.runKernel("Square",{x:e},n)}const Xs=B({square_:b9});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v9(t,e=null,n=!1){let r=T(t,"x","sum");r.dtype==="bool"&&(r=cn(r,"int32"));const s={x:r},i={axis:e,keepDims:n};return j.runKernel(MO,s,i)}const Rt=B({sum_:v9});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w9(t,e="euclidean",n=null,r=!1){t=T(t,"x","norm");const s=i4(t,e,n);let i=s.shape;if(r){const o=An(n,t.shape);i=Ss(s.shape,o)}return te(s,i)}function i4(t,e,n=null){if(t.rank===0)return ss(t);if(t.rank!==1&&n===null)return i4(te(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return Rt(ss(t),n);if(e===1/0)return Zu(ss(t),n);if(e===-1/0)return Vv(ss(t),n);if(e==="euclidean"||e===2)return Ko(Rt(Ah(ss(t),Qe(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return Zu(Rt(ss(t),n[0]),n[1]-1);if(e===1/0)return Zu(Rt(ss(t),n[1]),n[0]);if(e===-1/0)return Vv(Rt(ss(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return Ko(Rt(Xs(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const $g=B({norm_:w9});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x9(t,e=null,n=!1){return $g(t,"euclidean",e,n)}const S9=B({euclideanNorm_:x9});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A9(t){const n={x:T(t,"x","exp")};return j.runKernel(mR,n)}const gl=B({exp_:A9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E9(t,e=0){const n=T(t,"x","expandDims","string_or_numeric");R(e<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},s={dim:e};return j.runKernel(gR,r,s)}const os=B({expandDims_:E9});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C9(t){const n={x:T(t,"x","expm1")};return j.runKernel(yR,n)}const N9=B({expm1_:C9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _9(t,e){const n=T(t,"x","tile","string_or_numeric");R(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);const r={x:n},s={reps:e};return j.runKernel(Gx,r,s)}const Xf=B({tile_:_9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T9(t,e,n,r="float32"){e==null&&(e=t);const s=Ht([t,e],r),i=t<=e?t:e;for(let a=0;a<i;++a)s.set(1,a,a);const o=te(s.toTensor(),[t,e]);if(n==null)return o;if(n.length===1)return Xf(os(o,0),[n[0],1,1]);if(n.length===2)return Xf(os(os(o,0),0),[n[0],n[1],1,1]);if(n.length===3)return Xf(os(os(os(o,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const o4=B({eye_:T9});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I9(t){const n={x:T(t,"x","floor","float32")};return j.runKernel(xR,n)}const a4=B({floor_:I9});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k9(t,e,n=0,r=0){const s=T(t,"x","gather"),i=T(e,"indices","gather","int32"),o={x:s,indices:i},a={axis:n,batchDims:r};return j.runKernel(ER,o,a)}const B0=B({gather_:k9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R9(t,e){let n=T(t,"a","greater","string_or_numeric"),r=T(e,"b","greater","string_or_numeric");[n,r]=en(n,r),it(n.shape,r.shape);const s={a:n,b:r};return j.runKernel(NR,s)}const Bg=B({greater_:R9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O9(t,e){let n=T(t,"a","greaterEqual","string_or_numeric"),r=T(e,"b","greaterEqual","string_or_numeric");[n,r]=en(n,r),it(n.shape,r.shape);const s={a:n,b:r};return j.runKernel(_R,s)}const u4=B({greaterEqual_:O9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P9(t){const n={input:T(t,"input","imag")};return j.runKernel(IR,n)}const Mg=B({imag_:P9});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D9(t){const n={x:T(t,"x","isFinite")};return j.runKernel(kR,n)}const L9=B({isFinite_:D9});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F9(t){const n={x:T(t,"x","isInf")};return j.runKernel(RR,n)}const $9=B({isInf_:F9});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B9(t){const n={x:T(t,"x","isNaN")};return j.runKernel(OR,n)}const M9=B({isNaN_:B9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V9(t,e=.2){const r={x:T(t,"x","leakyRelu")},s={alpha:e};return j.runKernel(PR,r,s)}const l4=B({leakyRelu_:V9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U9(t,e){let n=T(t,"a","less","string_or_numeric"),r=T(e,"b","less","string_or_numeric");[n,r]=en(n,r),it(n.shape,r.shape);const s={a:n,b:r};return j.runKernel(DR,s)}const M0=B({less_:U9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z9(t,e){let n=T(t,"a","lessEqual","string_or_numeric"),r=T(e,"b","lessEqual","string_or_numeric");[n,r]=en(n,r),it(n.shape,r.shape);const s={a:n,b:r};return j.runKernel(LR,s)}const n2=B({lessEqual_:z9});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j9(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");const r={start:t,stop:e,num:n};return j.runKernel(FR,{},r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W9(t,e=5,n=1,r=1,s=.5){const i=T(t,"x","localResponseNormalization");R(i.rank===4||i.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${i.rank}.`),R(sd(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let o=i,a=!1;i.rank===3&&(a=!0,o=te(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const u={x:o},l={depthRadius:e,bias:n,alpha:r,beta:s},c=j.runKernel(zR,u,l);return a?te(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const q9=B({localResponseNormalization_:W9});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G9(t){const n={x:T(t,"x","log","float32")};return j.runKernel($R,n)}const Eh=B({log_:G9});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H9(t){const n={x:T(t,"x","log1p")};return j.runKernel(BR,n)}const c4=B({log1p_:H9});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K9(t,e){R(vv(t),()=>"The f passed in variableGrads(f) must be a function"),R(e==null||Array.isArray(e)&&e.every(l=>l instanceof L0),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const l in j.registeredVariables)e.push(j.registeredVariables[l])}const r=n?e.filter(l=>!l.trainable):null,s=e.length;e=e.filter(l=>l.trainable),R(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${s} variables is trainable.`);const i=!0,{value:o,grads:a}=j.gradients(t,e,null,i);R(a.some(l=>l!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),R(o.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${o.rank} tensor`);const u={};return e.forEach((l,c)=>{a[c]!=null&&(u[l.name]=a[c])}),r!=null&&r.forEach(l=>u[l.name]=null),{value:o,grads:u}}function Xo(t){return j.customGrad(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X9(t){const n={x:T(t,"x","neg")};return j.runKernel(tO,n)}const lo=B({neg_:X9});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y9(t){const n={x:T(t,"x","softplus")};return j.runKernel($O,n)}const d4=B({softplus_:Y9});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q9(t){const e=T(t,"x","logSigmoid");return Xo(r=>({value:lo(d4(lo(r))),gradFunc:o=>fe(o,jc(lo(r)))}))(e)}const Z9=B({logSigmoid_:Q9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J9(t,e){let n=T(t,"a","sub"),r=T(e,"b","sub");[n,r]=en(n,r);const s={a:n,b:r};return j.runKernel(eP,s)}const Pe=B({sub_:J9});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eq(t,e=-1){const n=T(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return Xo((s,i)=>{const a=Zu(s,e,!0),u=Pe(s,a),l=Pe(cn(u,"float32"),Eh(Rt(gl(u),e,!0)));return i([l]),{value:l,gradFunc:(d,f)=>{const[h]=f,p=!0,y=gl(h);return Pe(d,fe(Rt(d,e,p),y))}}})(n)}const tq=B({logSoftmax_:eq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nq(t,e=null,n=!1){const r=T(t,"x","logSumExp"),s=An(e,r.shape),i=Zu(r,s,!0),o=Pe(r,i),a=gl(o),u=Rt(a,s),l=Eh(u),c=ke(te(i,l.shape),l);if(n){const d=Ss(c.shape,s);return te(c,d)}return c}const f4=B({logSumExp_:nq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rq(t,e){const n=T(t,"a","logicalAnd","bool"),r=T(e,"b","logicalAnd","bool");it(n.shape,r.shape);const s={a:n,b:r};return j.runKernel(MR,s)}const V0=B({logicalAnd_:rq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sq(t){const n={x:T(t,"x","logicalNot","bool")};return j.runKernel(VR,n)}const h4=B({logicalNot_:sq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iq(t,e){const n=T(t,"a","logicalOr","bool"),r=T(e,"b","logicalOr","bool");it(n.shape,r.shape);const s={a:n,b:r};return j.runKernel(UR,s)}const p4=B({logicalOr_:iq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oq(t,e){const n=T(t,"a","logicalXor","bool"),r=T(e,"b","logicalXor","bool");return it(n.shape,r.shape),V0(p4(t,e),h4(V0(t,e)))}const aq=B({logicalXor_:oq});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wp=2147483648;function uq(t,e,n="left"){const r=T(t,"sortedSequence","searchSorted"),s=T(e,"values","searchSorted"),i=r.shape[r.shape.length-1],o=s.shape[s.shape.length-1],a=te(r,[-1,i]),u=te(s,[-1,o]);if(a.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(a.shape[0]!==u.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(de(u.shape)>=Wp)throw new Error(`values tensor size must less than ${Wp}`);if(a.shape[1]>=Wp)throw new Error(`trailing dim_size must less than ${Wp} for int32 output type, was ${a.shape[1]}`);const l={sortedSequence:a,values:u},c={side:n};return j.runKernel(IO,l,c)}const r2=B({searchSorted_:uq});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lq(t,e){return r2(t,e,"left")}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cq(t,e,n,r,s){const i=T(t,"x","maxPool"),o=1;let a=i,u=!1;i.rank===3&&(u=!0,a=te(i,[1,i.shape[0],i.shape[1],i.shape[2]])),R(a.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`),R(Xr(n,o),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`),ti("maxPool",r,s);const l={x:a},c={filterSize:e,strides:n,pad:r,dimRoundingMode:s},d=j.runKernel(qR,l,c);return u?te(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const m4=B({maxPool_:cq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dq(t,e=[1,1,1],n,r,s,i="NDHWC"){const o=T(t,"x","maxPool3d");let a=o,u=!1;o.rank===4&&(u=!0,a=te(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),R(a.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${a.rank}.`),R(i==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),ti("maxPool3d",r,s);const l={x:a},c={filterSize:e,strides:n,pad:r,dimRoundingMode:s,dataFormat:i},d=j.runKernel(GR,l,c);return u?te(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const fq=B({maxPool3d_:dq});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hq(t,e,n,r,s=!1){const o={x:T(t,"x","maxPoolWithArgmax")},a={filterSize:e,strides:n,pad:r,includeBatchInIndex:s},u=j.runKernel(HR,o,a);return{result:u[0],indexes:u[1]}}const pq=B({maxPoolWithArgmax_:hq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mq(t,e){let n=T(t,"a","maximum"),r=T(e,"b","maximum");[n,r]=en(n,r),n.dtype==="bool"&&(n=cn(n,"int32"),r=cn(r,"int32")),it(n.shape,r.shape);const s={a:n,b:r};return j.runKernel(WR,s)}const g4=B({maximum_:mq});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gq(t,e=null,n=!1){const s={x:T(t,"x","mean")},i={axis:e,keepDims:n};return j.runKernel(KR,s,i)}const U0=B({mean_:gq});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xa(t,e="float32"){if(ws(t),e==="complex64"){const r=Xa(t,"float32"),s=Xa(t,"float32");return Ha(r,s)}const n=Ga(de(t),e);return j.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ku(t,e="float32"){if(ws(t),e==="complex64"){const r=Ku(t,"float32"),s=Xa(t,"float32");return Ha(r,s)}const n=v3(de(t),e);return j.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yq(t,e,{indexing:n="xy"}={}){if(n!=="xy"&&n!=="ij")throw new TypeError(`${n} is not a valid third argument to meshgrid`);if(t===void 0)return[];let r=T(t,"x","meshgrid",t instanceof ar?t.dtype:"float32");if(e===void 0)return[r];let s=T(e,"y","meshgrid",e instanceof ar?e.dtype:"float32");const i=de(r.shape),o=de(s.shape);return n==="xy"?(r=te(r,[1,-1]),s=te(s,[-1,1]),[bt(Ku([o,1],r.dtype),r),bt(s,Ku([1,i],s.dtype))]):(r=te(r,[-1,1]),s=te(s,[1,-1]),[bt(r,Ku([1,o],r.dtype)),bt(Ku([i,1],s.dtype),s)])}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bq(t,e){let n=T(t,"a","minimum"),r=T(e,"b","minimum");[n,r]=en(n,r),n.dtype==="bool"&&(n=cn(n,"int32"),r=cn(r,"int32")),it(n.shape,r.shape);const s={a:n,b:r};return j.runKernel(YR,s)}const z0=B({minimum_:bq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vq(t,e,n){R(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=T(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");R(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const s=n==="reflect"?1:0;for(let a=0;a<r.rank;a++)R(e[a].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),R(e[a][0]>=0&&e[a][0]<=r.shape[a]-s&&e[a][1]>=0&&e[a][1]<=r.shape[a]-s,()=>`Padding in dimension ${a} cannot be greater than or equal to ${r.shape[a]-s} or less than 0 for input of shape ${r.shape}`);const i={paddings:e,mode:n},o={x:r};return j.runKernel(QR,o,i)}const wq=B({mirrorPad_:vq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xq(t,e){let n=T(t,"a","mod"),r=T(e,"b","mod");[n,r]=en(n,r);const s={a:n,b:r};return j.runKernel(ZR,s)}const Sq=B({mod_:xq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aq(t,e=null,n=!1){t=T(t,"x","moments");const r=An(e,t.shape),s=U0(t,r,n);let i=s.shape;n||(i=Ss(s.shape,r));const o=Xs(Pe(cn(t,"float32"),te(s,i))),a=U0(o,r,n);return{mean:s,variance:a}}const Eq=B({moments_:Aq});function Cq(t,e,n,r){const s=T(e,"data","multiRNNCell"),i=F0(n,"c","multiRNNCell"),o=F0(r,"h","multiRNNCell");let a=s;const u=[];for(let d=0;d<t.length;d++){const f=t[d](a,i[d],o[d]);u.push(f[0]),u.push(f[1]),a=f[1]}const l=[],c=[];for(let d=0;d<u.length;d+=2)l.push(u[d]),c.push(u[d+1]);return[l,c]}const Nq=B({multiRNNCell_:Cq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _q(t,e,n,r=!1){const s=T(t,"logits","multinomial"),i=s.size,o=s.rank;if(i<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${i}.`);if(o>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${o}`);n=n||Math.random();const u={logits:o===1?te(s,[1,-1]):s},l={numSamples:e,seed:n,normalized:r},c=j.runKernel(JR,u,l);return o===1?te(c,[c.size]):c}const Tq=B({multinomial_:_q});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iq(t,e){let n=T(t,"a","notEqual","string_or_numeric"),r=T(e,"b","notEqual","string_or_numeric");[n,r]=en(n,r),it(n.shape,r.shape);const s={a:n,b:r};return j.runKernel(nO,s)}const y4=B({notEqual_:Iq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kq(t,e,n=1,r=0,s="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const o={indices:T(t,"indices","oneHot","int32")},a={dtype:s,depth:e,onValue:n,offValue:r};return j.runKernel(aO,o,a)}const Rq=B({oneHot_:kq});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oq(t){const n={x:T(t,"x","onesLike")};return j.runKernel(oO,n)}const Pq=B({onesLike_:Oq});function Dq(t,e){const n=T(t,"v1","outerProduct"),r=T(e,"v2","outerProduct");R(n.rank===1&&r.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`);const s=te(n,[-1,1]),i=te(r,[1,-1]);return bt(s,i)}const Lq=B({outerProduct_:Dq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fq(t,e,n=0){const r=T(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const s={paddings:e,constantValue:n},i={x:r};return j.runKernel(lO,i,s)}const Sd=B({pad_:Fq});function $q(t,e,n=0){return R(e.length===2,()=>"Invalid number of paddings. Must be length of 2."),Sd(t,[e],n)}const Bq=B({pad1d_:$q});function Mq(t,e,n=0){return R(e.length===2&&e[0].length===2&&e[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Sd(t,e,n)}const Vq=B({pad2d_:Mq});function Uq(t,e,n=0){return R(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Sd(t,e,n)}const zq=B({pad3d_:Uq});function jq(t,e,n=0){return R(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Sd(t,e,n)}const Wq=B({pad4d_:jq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qq(t,e,n){const r=T(t,"x","spaceToBatchND");R(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),R(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),R(r.shape.reduce((o,a,u)=>u>0&&u<=e.length?o&&(a+n[u-1][0]+n[u-1][1])%e[u-1]===0:o,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const s={x:r},i={blockShape:e,paddings:n};return j.runKernel(VO,s,i)}const b4=B({spaceToBatchND_:qq});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gq(t,e,n,r,s,i,o){s==null&&(s=[1,1]),i==null&&(i=1),r===0&&(r="valid");const a=T(t,"x","maxPool");let u=a,l=!1;a.rank===3&&(l=!0,u=te(a,[1,a.shape[0],a.shape[1],a.shape[2]])),R(Xr(i,s),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${i} and dilations '${s}'`);const c=Tl(u.shape,e,i,s,r),d=[c.dilationHeight,c.dilationWidth];let f;r==="same"?f=Kq([c.filterHeight,c.filterWidth],d):f=[[0,0],[0,0]];const h=d[0]===1&&d[1]===1,[p,y]=Hq([c.inHeight,c.inWidth],d,f),b=h?r:"valid",g=h?u:b4(u,d,p),w=(n==="avg"?()=>QP(g,e,i,b,o):()=>m4(g,e,i,b,o))(),x=h?w:ZP(w,d,y);return l?te(x,[x.shape[1],x.shape[2],x.shape[3]]):x}function Hq(t,e,n){const r=n.map(c=>c[0]),s=n.map(c=>c[1]),i=t.concat(r,s),o=e.map((c,d)=>(c-i[d]%c)%c),a=s.map((c,d)=>c+o[d]),u=e.map((c,d)=>[r[d],a[d]]),l=e.map((c,d)=>[0,o[d]]);return[u,l]}function Kq(t,e){const r=t.map((o,a)=>o+(o-1)*(e[a]-1)).map(o=>o-1),s=r.map(o=>Math.floor(o/2)),i=r.map((o,a)=>o-s[a]);return r.map((o,a)=>[s[a],i[a]])}const Xq=B({pool_:Gq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yq(t,e){const n=T(t,"x","prelu"),r=T(e,"alpha","prelu"),s={x:n,alpha:r};return j.runKernel(dO,s)}const v4=B({prelu_:Yq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qq(t,e=null,n=!1){let r=T(t,"x","prod");r.dtype==="bool"&&(r=cn(r,"int32"));const s={x:r},i={axis:e,keepDims:n};return j.runKernel(fO,s,i)}const Zq=B({prod_:Qq});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jq(t,e,n,r){const s=t.map((c,d)=>T(c,`tensors${d}`,"raggedGather","int32")),i=T(e,"paramsDenseValues","raggedGather"),o=T(n,"indices","raggedGather","int32"),a={paramsNestedSplits:s,paramsDenseValues:i,indices:o},u={outputRaggedRank:r},l=j.runKernel(hO,a,u);return{outputNestedSplits:l.slice(0,l.length-1),outputDenseValues:l[l.length-1]}}const eG=B({raggedGather_:Jq});/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tG(t,e,n){const r=T(t,"starts","raggedRange"),s=T(e,"limits","raggedRange",r.dtype),i=T(n,"deltas","raggedRange",r.dtype),o={starts:r,limits:s,deltas:i},a=j.runKernel(pO,o);return{rtNestedSplits:a[0],rtDenseValues:a[1]}}const nG=B({raggedRange_:tG});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rG(t,e,n,r,s){const i=T(t,"shape","raggedTensorToTensor","int32"),o=T(e,"values","raggedTensorToTensor"),a=T(n,"defaultValue","raggedTensorToTensor",o.dtype),u=r.map((d,f)=>T(d,`tensors${f}`,"raggedTensorToTensor","int32")),l={shape:i,values:o,defaultValue:a,rowPartitionTensors:u},c={rowPartitionTypes:s};return j.runKernel(mO,l,c)}const sG=B({raggedTensorToTensor_:rG});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iG(t,e,n){ws(t);const r=de(t);let s=null;if(n==null||n==="float32")s=new Float32Array(r);else if(n==="int32")s=new Int32Array(r);else if(n==="bool")s=new Uint8Array(r);else throw new Error(`Unknown data type ${n}`);for(let i=0;i<r;i++)s[i]=e();return j.makeTensor(s,t,n)}const oG=B({rand_:iG});var s2={exports:{}};s2.exports;(function(t){(function(e,n,r){function s(u){var l=this,c=a();l.next=function(){var d=2091639*l.s0+l.c*23283064365386963e-26;return l.s0=l.s1,l.s1=l.s2,l.s2=d-(l.c=d|0)},l.c=1,l.s0=c(" "),l.s1=c(" "),l.s2=c(" "),l.s0-=c(u),l.s0<0&&(l.s0+=1),l.s1-=c(u),l.s1<0&&(l.s1+=1),l.s2-=c(u),l.s2<0&&(l.s2+=1),c=null}function i(u,l){return l.c=u.c,l.s0=u.s0,l.s1=u.s1,l.s2=u.s2,l}function o(u,l){var c=new s(u),d=l&&l.state,f=c.next;return f.int32=function(){return c.next()*4294967296|0},f.double=function(){return f()+(f()*2097152|0)*11102230246251565e-32},f.quick=f,d&&(typeof d=="object"&&i(d,c),f.state=function(){return i(c,{})}),f}function a(){var u=4022871197,l=function(c){c=String(c);for(var d=0;d<c.length;d++){u+=c.charCodeAt(d);var f=.02519603282416938*u;u=f>>>0,f-=u,f*=u,u=f>>>0,f-=u,u+=f*4294967296}return(u>>>0)*23283064365386963e-26};return l}n&&n.exports?n.exports=o:this.alea=o})(Pt,t)})(s2);var aG=s2.exports,i2={exports:{}};i2.exports;(function(t){(function(e,n,r){function s(a){var u=this,l="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var d=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^d^d>>>8},a===(a|0)?u.x=a:l+=a;for(var c=0;c<l.length+64;c++)u.x^=l.charCodeAt(c)|0,u.next()}function i(a,u){return u.x=a.x,u.y=a.y,u.z=a.z,u.w=a.w,u}function o(a,u){var l=new s(a),c=u&&u.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var f=l.next()>>>11,h=(l.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=l.next,d.quick=d,c&&(typeof c=="object"&&i(c,l),d.state=function(){return i(l,{})}),d}n&&n.exports?n.exports=o:this.xor128=o})(Pt,t)})(i2);var uG=i2.exports,o2={exports:{}};o2.exports;(function(t){(function(e,n,r){function s(a){var u=this,l="";u.next=function(){var d=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^(d^d<<1))|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,a===(a|0)?u.x=a:l+=a;for(var c=0;c<l.length+64;c++)u.x^=l.charCodeAt(c)|0,c==l.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function i(a,u){return u.x=a.x,u.y=a.y,u.z=a.z,u.w=a.w,u.v=a.v,u.d=a.d,u}function o(a,u){var l=new s(a),c=u&&u.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var f=l.next()>>>11,h=(l.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=l.next,d.quick=d,c&&(typeof c=="object"&&i(c,l),d.state=function(){return i(l,{})}),d}n&&n.exports?n.exports=o:this.xorwow=o})(Pt,t)})(o2);var lG=o2.exports,a2={exports:{}};a2.exports;(function(t){(function(e,n,r){function s(a){var u=this;u.next=function(){var c=u.x,d=u.i,f,h;return f=c[d],f^=f>>>7,h=f^f<<24,f=c[d+1&7],h^=f^f>>>10,f=c[d+3&7],h^=f^f>>>3,f=c[d+4&7],h^=f^f<<7,f=c[d+7&7],f=f^f<<13,h^=f^f<<9,c[d]=h,u.i=d+1&7,h};function l(c,d){var f,h=[];if(d===(d|0))h[0]=d;else for(d=""+d,f=0;f<d.length;++f)h[f&7]=h[f&7]<<15^d.charCodeAt(f)+h[f+1&7]<<13;for(;h.length<8;)h.push(0);for(f=0;f<8&&h[f]===0;++f);for(f==8?h[7]=-1:h[f],c.x=h,c.i=0,f=256;f>0;--f)c.next()}l(u,a)}function i(a,u){return u.x=a.x.slice(),u.i=a.i,u}function o(a,u){a==null&&(a=+new Date);var l=new s(a),c=u&&u.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var f=l.next()>>>11,h=(l.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=l.next,d.quick=d,c&&(c.x&&i(c,l),d.state=function(){return i(l,{})}),d}n&&n.exports?n.exports=o:this.xorshift7=o})(Pt,t)})(a2);var cG=a2.exports,u2={exports:{}};u2.exports;(function(t){(function(e,n,r){function s(a){var u=this;u.next=function(){var c=u.w,d=u.X,f=u.i,h,p;return u.w=c=c+1640531527|0,p=d[f+34&127],h=d[f=f+1&127],p^=p<<13,h^=h<<17,p^=p>>>15,h^=h>>>12,p=d[f]=p^h,u.i=f,p+(c^c>>>16)|0};function l(c,d){var f,h,p,y,b,g=[],v=128;for(d===(d|0)?(h=d,d=null):(d=d+"\0",h=0,v=Math.max(v,d.length)),p=0,y=-32;y<v;++y)d&&(h^=d.charCodeAt((y+32)%d.length)),y===0&&(b=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,y>=0&&(b=b+1640531527|0,f=g[y&127]^=h+b,p=f==0?p+1:0);for(p>=128&&(g[(d&&d.length||0)&127]=-1),p=127,y=4*128;y>0;--y)h=g[p+34&127],f=g[p=p+1&127],h^=h<<13,f^=f<<17,h^=h>>>15,f^=f>>>12,g[p]=h^f;c.w=b,c.X=g,c.i=p}l(u,a)}function i(a,u){return u.i=a.i,u.w=a.w,u.X=a.X.slice(),u}function o(a,u){a==null&&(a=+new Date);var l=new s(a),c=u&&u.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var f=l.next()>>>11,h=(l.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=l.next,d.quick=d,c&&(c.X&&i(c,l),d.state=function(){return i(l,{})}),d}n&&n.exports?n.exports=o:this.xor4096=o})(Pt,t)})(u2);var dG=u2.exports,l2={exports:{}};l2.exports;(function(t){(function(e,n,r){function s(a){var u=this,l="";u.next=function(){var d=u.b,f=u.c,h=u.d,p=u.a;return d=d<<25^d>>>7^f,f=f-h|0,h=h<<24^h>>>8^p,p=p-d|0,u.b=d=d<<20^d>>>12^f,u.c=f=f-h|0,u.d=h<<16^f>>>16^p,u.a=p-d|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,a===Math.floor(a)?(u.a=a/4294967296|0,u.b=a|0):l+=a;for(var c=0;c<l.length+20;c++)u.b^=l.charCodeAt(c)|0,u.next()}function i(a,u){return u.a=a.a,u.b=a.b,u.c=a.c,u.d=a.d,u}function o(a,u){var l=new s(a),c=u&&u.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var f=l.next()>>>11,h=(l.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=l.next,d.quick=d,c&&(typeof c=="object"&&i(c,l),d.state=function(){return i(l,{})}),d}n&&n.exports?n.exports=o:this.tychei=o})(Pt,t)})(l2);var fG=l2.exports,w4={exports:{}};const hG={},pG=Object.freeze(Object.defineProperty({__proto__:null,default:hG},Symbol.toStringTag,{value:"Module"})),mG=gT(pG);(function(t){(function(e,n,r){var s=256,i=6,o=52,a="random",u=r.pow(s,i),l=r.pow(2,o),c=l*2,d=s-1,f;function h(x,N,k){var O=[];N=N==!0?{entropy:!0}:N||{};var _=g(b(N.entropy?[x,w(n)]:x??v(),3),O),$=new p(O),M=function(){for(var K=$.g(i),Z=u,ie=0;K<l;)K=(K+ie)*s,Z*=s,ie=$.g(1);for(;K>=c;)K/=2,Z/=2,ie>>>=1;return(K+ie)/Z};return M.int32=function(){return $.g(4)|0},M.quick=function(){return $.g(4)/4294967296},M.double=M,g(w($.S),n),(N.pass||k||function(K,Z,ie,ee){return ee&&(ee.S&&y(ee,$),K.state=function(){return y($,{})}),ie?(r[a]=K,Z):K})(M,_,"global"in N?N.global:this==r,N.state)}function p(x){var N,k=x.length,O=this,_=0,$=O.i=O.j=0,M=O.S=[];for(k||(x=[k++]);_<s;)M[_]=_++;for(_=0;_<s;_++)M[_]=M[$=d&$+x[_%k]+(N=M[_])],M[$]=N;(O.g=function(K){for(var Z,ie=0,ee=O.i,W=O.j,V=O.S;K--;)Z=V[ee=d&ee+1],ie=ie*s+V[d&(V[ee]=V[W=d&W+Z])+(V[W]=Z)];return O.i=ee,O.j=W,ie})(s)}function y(x,N){return N.i=x.i,N.j=x.j,N.S=x.S.slice(),N}function b(x,N){var k=[],O=typeof x,_;if(N&&O=="object")for(_ in x)try{k.push(b(x[_],N-1))}catch{}return k.length?k:O=="string"?x:x+"\0"}function g(x,N){for(var k=x+"",O,_=0;_<k.length;)N[d&_]=d&(O^=N[d&_]*19)+k.charCodeAt(_++);return w(N)}function v(){try{var x;return f&&(x=f.randomBytes)?x=x(s):(x=new Uint8Array(s),(e.crypto||e.msCrypto).getRandomValues(x)),w(x)}catch{var N=e.navigator,k=N&&N.plugins;return[+new Date,e,k,e.screen,w(n)]}}function w(x){return String.fromCharCode.apply(0,x)}if(g(r.random(),n),t.exports){t.exports=h;try{f=mG}catch{}}else r["seed"+a]=h})(typeof self<"u"?self:Pt,[],Math)})(w4);var gG=w4.exports,yG=aG,bG=uG,vG=lG,wG=cG,xG=dG,SG=fG,Il=gG;Il.alea=yG;Il.xor128=bG;Il.xorwow=vG;Il.xorshift7=wG;Il.xor4096=xG;Il.tychei=SG;var c2=Il;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class d2{constructor(e,n,r,s,i){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=s,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const o=i||Math.random();this.random=c2.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){const s=this.nextVal;return this.nextVal=NaN,s}let e,n,r=!1;for(;!r;){let s,i,o;do s=2*this.random()-1,i=2*this.random()-1,o=s*s+i*i;while(o>=1||o===0);const a=Math.sqrt(-2*Math.log(o)/o);e=this.mean+this.stdDev*s*a,n=this.mean+this.stdDev*i*a,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class AG{constructor(e,n,r,s){this.alpha=e,this.beta=1/n,this.dtype=r;const i=s||Math.random();this.randu=c2.alea(i.toString()),this.randn=new d2(0,1,r,!1,this.randu()),e<1?this.d=e+2/3:this.d=e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,n,r,s,i,o;for(;;){do s=this.randn.nextValue(),o=1+this.c*s;while(o<=0);if(o*=o*o,e=s*s,n=1-.331*e*e,r=.5*e+this.d*(1-o+Math.log(o)),i=this.randu(),i<n||Math.log(i)<r)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)}convertValue(e){return this.dtype==="float32"?e:Math.round(e)}}class EG{constructor(e=0,n=1,r,s){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=r,s==null&&(s=Math.random()),typeof s=="number"&&(s=s.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=c2.alea(s)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CG(t,e,n=1,r="float32",s){if(ws(t),n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error(`Unsupported data type ${r}`);const i=new AG(e,n,r,s),o=Ht(t,r);for(let a=0;a<o.values.length;a++)o.values[a]=i.nextValue();return o.toTensor()}const NG=B({randomGamma_:CG});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _G(t,e=0,n=1,r,s){if(ws(t),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const i=new d2(e,n,r,!1,s),o=Ht(t,r);for(let a=0;a<o.values.length;a++)o.values[a]=i.nextValue();return o.toTensor()}const x4=B({randomNormal_:_G});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TG(t,e,n){if(e!=null&&e==="bool")throw new Error(`Unsupported data type ${e}`);return x4(t,0,1,e,n)}const IG=B({randomStandardNormal_:TG});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kG(t,e=0,n=1,r="float32",s){ws(t);const i=Ht(t,r),o=new EG(e,n,null,s);for(let a=0;a<i.values.length;a++)i.values[a]=o.nextValue();return i.toTensor()}const f2=B({randomUniform_:kG});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RG(t,e,n,r){return f2(t,e,n,"int32",r)}const OG=B({randomUniformInt_:RG});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ch(t,e,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");const s={start:t,stop:e,step:n,dtype:r};return j.runKernel(gO,{},s)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PG(t){const n={input:T(t,"input","real")};return j.runKernel(yO,n)}const Nh=B({real_:PG});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DG(t){const n={x:T(t,"x","reciprocal")};return j.runKernel(bO,n)}const LG=B({reciprocal_:DG});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FG(t){const n={x:T(t,"x","relu")};return j.runKernel(vO,n)}const Vg=B({relu_:FG});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $G(t){const n={x:T(t,"x","relu6")};return j.runKernel(AO,n)}const S4=B({relu6_:$G});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BG(t,e){const r={x:T(t,"x","reverse")},s={dims:e};return j.runKernel(EO,r,s)}const yl=B({reverse_:BG});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MG(t){const e=T(t,"x","reverse");return R(e.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${e.rank}.`),yl(e,0)}const VG=B({reverse1d_:MG});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UG(t,e){const n=T(t,"x","reverse");return R(n.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),yl(n,e)}const zG=B({reverse2d_:UG});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jG(t,e){const n=T(t,"x","reverse");return R(n.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),yl(n,e)}const WG=B({reverse3d_:jG});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qG(t,e){const n=T(t,"x","reverse");return R(n.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),yl(n,e)}const GG=B({reverse4d_:qG});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HG(t){const n={x:T(t,"x","round")};return j.runKernel(CO,n)}const A4=B({round_:HG});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KG(t){const n={x:T(t,"x","rsqrt","float32")};return j.runKernel(NO,n)}const XG=B({rsqrt_:KG});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YG(t){const n={x:T(t,"x","selu")};return j.runKernel(RO,n)}const QG=B({selu_:YG});function ZG(t,e,n,r,s,i=[1,1],o="NHWC"){const a=T(t,"x","separableConv2d"),u=T(e,"depthwiseFilter","separableConv2d"),l=T(n,"pointwiseFilter","separableConv2d");let c=a,d=!1;if(a.rank===3&&(d=!0,c=te(a,[1,a.shape[0],a.shape[1],a.shape[2]])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");R(c.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${c.rank}.`),R(u.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${u.rank}.`),R(l.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${u.rank}.`),R(l.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${l.shape[0]}.`),R(l.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${l.shape[1]}.`);const f=u.shape[2],h=u.shape[3];R(l.shape[2]===f*h,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${f*h}, but got ${l.shape[2]}.`);const p=Jx(c,u,r,s,o,i),b=Fg(p,l,1,"valid",o);return d?te(b,[b.shape[1],b.shape[2],b.shape[3]]):b}const JG=B({separableConv2d_:ZG});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function eH(t,e){const n=T(t,"x","setdiff1d"),r=T(e,"y","setdiff1d");R(n.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`),R(n.rank===1,()=>`x should be 1D tensor, but got x (${n.shape}).`),R(r.rank===1,()=>`y should be 1D tensor, but got y (${r.shape}).`);const s=await n.data(),i=await r.data(),o=new Set(i);let a=0;for(let c=0;c<s.length;c++)o.has(s[c])||a++;const u=new ad([a],n.dtype),l=new ad([a],"int32");for(let c=0,d=0;c<s.length;c++)o.has(s[c])||(u.values[d]=s[c],l.values[d]=c,d++);return[u.toTensor(),l.toTensor()]}const tH=eH;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nH(t){const n={x:T(t,"x","sign")};return j.runKernel(LO,n)}const rH=B({sign_:nH});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sH(t){const n={x:T(t,"x","sin","float32")};return j.runKernel(PO,n)}const iH=B({sin_:sH});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oH(t){const n={x:T(t,"x","sinh")};return j.runKernel(DO,n)}const aH=B({sinh_:oH});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uH(t,e,n){const r=T(t,"x","slice1d");return R(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),Le(r,[e],[n])}const lH=B({slice1d_:uH});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cH(t,e,n){const r=T(t,"x","slice2d");return R(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),Le(r,e,n)}const dH=B({slice2d_:cH});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fH(t,e,n){const r=T(t,"x","slice3d");return R(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),Le(r,e,n)}const hH=B({slice3d_:fH});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pH(t,e,n){const r=T(t,"x","slice4d");return R(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),Le(r,e,n)}const mH=B({slice4d_:pH});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gH(t,e=-1){const n=T(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const r={logits:n},s={dim:e};return j.runKernel(zO,r,s)}const yH=B({softmax_:gH});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bH(t){R(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return j.runKernel(bR,e)}const h2=B({fft_:bH});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vH(t){R(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return j.runKernel(TR,e)}const j0=B({ifft_:vH});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wH(t){const e=t.shape[t.shape.length-1],n=t.size/e;let r;if(e<=2){const s=te(t,[n,e]);r=j0(s)}else{const s=[n,2*(e-1)],i=te(Nh(t),[n,e]),o=te(Mg(t),[n,e]),a=yl(Le(i,[0,1],[n,e-2]),1),u=fe(yl(Le(o,[0,1],[n,e-2]),1),Qe(-1)),l=dn([i,a],1),c=dn([o,u],1),d=te(Ha(l,c),[s[0],s[1]]);r=j0(d)}if(r=Nh(r),t.rank===3&&t.shape[0]!==0){const s=r,i=t.shape[0];r=te(r,[i,r.shape[0]/i,r.shape[1]]),s.dispose()}return r}const E4=B({irfft_:wH});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xH(t,e,n=0){const s={x:T(t,"x","split")},i={numOrSizeSplits:e,axis:n};return j.runKernel(UO,s,i)}const _h=B({split_:xH});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SH(t,e){R(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const r=t.size/n;let s;if(e!=null&&e<n){const p=t.shape.map(b=>0),y=t.shape.map(b=>b);y[t.shape.length-1]=e,s=Le(t,p,y),n=e}else if(e!=null&&e>n){const p=t.shape.map(y=>y);p[t.shape.length-1]=e-n,s=dn([t,Xa(p)],t.shape.length-1),n=e}else s=t;const i=ds(s),o=te(Ha(s,i),[r,n]),a=h2(o),u=Math.floor(n/2)+1,l=Nh(a),c=Mg(a),d=_h(l,[u,n-u],l.shape.length-1),f=_h(c,[u,n-u],c.shape.length-1),h=s.shape.slice();return h[s.shape.length-1]=u,te(Ha(d[0],f[0]),h)}const p2=B({rfft_:SH});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AH(t,e){let n=T(t,"a","squaredDifference"),r=T(e,"b","squaredDifference");[n,r]=en(n,r),it(n.shape,r.shape);const s={a:n,b:r},i={};return j.runKernel(KO,s,i)}const C4=B({squaredDifference_:AH});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EH(t,e){const n=T(t,"x","squeeze","string_or_numeric");return te(n,tu(n.shape,e).newShape)}const Bo=B({squeeze_:EH});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CH(t,e=0){const n=F0(t,"tensors","stack","string_or_numeric");R(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&R(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,s={axis:e};return j.runKernel(uO,r,s)}const Yo=B({stack_:CH});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NH(t,e=0){const r={x:T(t,"x","step")},s={alpha:e};return j.runKernel(lP,r,s)}const N4=B({step_:NH});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _H(t,e,n,r,s=0,i=0,o=0,a=0,u=0){const c={x:T(t,"x","stridedSlice","string_or_numeric")},d={begin:e,end:n,strides:r,beginMask:s,endMask:i,ellipsisMask:o,newAxisMask:a,shrinkAxisMask:u};return j.runKernel(YO,c,d)}const TH=B({stridedSlice_:_H});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IH(t){const n={x:T(t,"x","tan","float32")};return j.runKernel(tP,n)}const kH=B({tan_:IH});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qs(t,e){vd(t);const n=nu(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return ru(t,null,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ju(t,e,n){if(vd(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=nu(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return ru(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _4(t,e,n){if(vd(t),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");const r=nu(t,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return ru(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RH(t,e,n){if(vd(t),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");const r=nu(t,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return ru(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OH(t,e,n){if(vd(t),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");const r=nu(t,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return ru(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PH(t,e,n){if(vd(t),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");const r=nu(t,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return e=e||r,ru(t,e,r,n)}function T4(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,s=e.rank>1?e.rank-1:1,i=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${s}.`;if(n.rank<s)throw new Error(i+` update.rank < ${s}. `);if(t.length<r+(n.rank-s))throw new Error(i+` Output shape length < ${r+(n.rank-s)}`);if(n.rank!==s+t.length-r)throw new Error(i+` update.rank != ${s+t.length-r}`);for(let o=0;o<s;++o)if(n.shape[o]!==e.shape[o])throw new Error(i+` updates.shape[${o}] (${n.shape[o]}) != indices.shape[${o}] (${e.shape[o]}).`);for(let o=0;o<n.rank-s;++o)if(n.shape[o+s]!==t[o+r])throw new Error(i+` updates.shape[${o+s}] (${n.shape[o+s]}) != shape[${o+s}] (${t[o+s]})`)}function m2(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}T4(n,e,t)}function Ug(t,e,n){const r=e.shape.length,s=r>1?e.shape[r-1]:1,i=n.length;let o=1;for(let d=s;d<i;++d)o*=n[d];const a=s<1?1:s,u=de(e.shape)/a,l=[...Ln(n.slice(0,s)),1],c=de(n);return{sliceRank:s,numUpdates:u,sliceSize:o,strides:l,outputSize:c}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DH(t,e,n){const r=T(t,"tensor","tensorScatterupdate"),s=T(e,"indices","tensorScatterupdate","int32"),i=T(n,"updates","tensorScatterupdate");if(m2(i,s,r.shape),r.dtype!==i.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${r.dtype} and ${i.dtype}.`);const o={tensor:r,indices:s,updates:i},a={};return j.runKernel(TO,o,a)}const LH=B({tensorScatterUpdate_:DH});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FH(t,e=1,n=!0){const r=T(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const s=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>s)throw new Error(`'k' passed to topk() must be <= the last dimension (${s}) but got ${e}`);const i={x:r},o={k:e,sorted:n},[a,u]=j.runKernel(rP,i,o);return{values:a,indices:u}}const $H=B({topk_:FH});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BH(t,e=0,n=1,r,s){if(ws(t),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const i=new d2(e,n,r,!0,s),o=Ht(t,r);for(let a=0;a<o.values.length;a++)o.values[a]=i.nextValue();return o.toTensor()}const MH=B({truncatedNormal_:BH});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VH(t,e=0){const n=T(t,"x","unique","string_or_numeric");R(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},s={axis:e},[i,o]=j.runKernel(iP,r,s);return{values:i,indices:o}}const UH=B({unique_:VH});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zH(t,e,n){const r=T(t,"x","unsortedSegmentSum"),s=T(e,"segmentIds","unsortedSegmentSum","int32");R(sd(n),()=>"numSegments must be of dtype int");const i={x:r,segmentIds:s},o={numSegments:n};return j.runKernel(aP,i,o)}const jH=B({unsortedSegmentSum_:zH});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WH(t,e=0){const n=T(t,"x","unstack","string_or_numeric");R(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);const r={value:n},s={axis:e};return j.runKernel(oP,r,s)}const kl=B({unstack_:WH});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qH(t,e){return r2(t,e,"right")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GH(t,e=!0,n,r){return j.makeVariable(t,e,n,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I4(t,e){const n=[];for(let i=0;i<e.length;i++)e[i]&&n.push(i);const r=Ht(t,"int32"),s=Ht([n.length,t.length],"int32");for(let i=0;i<n.length;i++){const o=r.indexToLoc(n[i]),a=i*t.length;s.values.set(o,a)}return s.toTensor()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function HH(t){const e=T(t,"condition","whereAsync","bool"),n=await e.data(),r=I4(e.shape,n);return t!==e&&e.dispose(),r}const k4=HH;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function KH(t,e,n){const r=T(t,"tensor","boolMask"),s=T(e,"mask","boolMask","bool"),i=n??0,o=s.rank,a=r.shape;R(o>0,()=>"mask cannot be scalar"),vs(a.slice(i,i+o),s.shape,"mask's shape must match the first K dimensions of tensor's shape,");let u=1;for(let y=i;y<i+o;y++)u*=a[y];const l=a.slice(0,i).concat([u],a.slice(i+o)),c=te(r,l),d=te(s,[-1]),f=await k4(d),h=Bo(f,[1]),p=B0(c,h,i);return t!==r&&r.dispose(),e!==s&&s.dispose(),h.dispose(),c.dispose(),d.dispose(),f.dispose(),p}const XH=KH;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YH(t,e,n){const r=T(t,"x","transpose");if(e==null&&(e=r.shape.map((o,a)=>a).reverse()),R(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(o=>{R(o>=0&&o<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const s={x:r},i={perm:e};return r.dtype==="complex64"?He(()=>{let o=Nh(r),a=Mg(r);return o=j.runKernel(Pm,{x:o},i),a=j.runKernel(Pm,{x:a},i),n&&(a=lo(a)),Ha(o,a)}):j.runKernel(Pm,s,i)}const W0=B({transpose_:YH});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QH(t,e,n,r,s=!0){const i=T(t,"v","movingAverage"),o=T(e,"x","movingAverage"),a=T(n,"decay","movingAverage");w7(i,o),R(Gt(i.shape,o.shape),()=>"Shape mismatch in v and x");const u=Qe(1),l=Pe(u,a);let c=fe(Pe(o,i),l);if(s){R(r!=null,()=>"When using zeroDebias: true, step is required.");const d=T(r,"step","movingAverage");c=lt(c,Pe(u,Ah(a,d)))}return ke(i,c)}const ZH=B({movingAverage_:QH});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JH(t,e,n){ws(n);const r=T(t,"indices","scatterND","int32"),s=T(e,"updates","scatterND");m2(s,r,n);const i={indices:r,updates:s},o={shape:n};return j.runKernel(_O,i,o)}const eK=B({scatterND_:JH});function tK(t,e,n,r){if(t.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${t.shape}.`);const s=t.rank>0?t.shape[0]:1,i=t.rank>1?t.shape[1]:1;if(n.length!==i)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${i}.`);const o=e.size;if(!(e.rank===0||e.rank===1&&o===s))throw new Error(`sparseValues has incorrect shape ${e.shape}, should be [] or [${s}]`);if(e.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nK(t,e,n,r=0){ws(n);const s=T(t,"sparseIndices","sparseToDense","int32"),i=T(e,"sparseValues","sparseToDense","string_or_numeric"),o=T(r,"defaultValue","sparseToDense",i.dtype);tK(s,i,n,o);const a={sparseIndices:s,sparseValues:i,defaultValue:o},u={outputShape:n};return j.runKernel(HO,a,u)}const rK=B({sparseToDense_:nK});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sK(t,e){const n=T(e,"indices","gatherND","int32"),s={params:T(t,"x","gatherND","string_or_numeric"),indices:n};return j.runKernel(CR,s)}const iK=B({gatherND_:sK});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oK(t,e){if(e==null)return t.shape.slice();if(Gt(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)e[r]==null&&t.shape[r]!=null?n.push(t.shape[r]):n.push(e[r]);return n}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aK(t,e,n,r){const s=T(t,"x","dropout");if(R(s.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${s.dtype} tensor instead.`),R(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof ar?s.clone():s;const i=oK(s,n),o=1-e,a=lt(a4(ke(f2(i,0,1,"float32",r),o)),o);return fe(s,a)}const uK=B({dropout_:aK});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R4(t){return Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2))))}function g2(t,e,n){const r=1-t%2,s=new Float32Array(t);for(let i=0;i<t;++i){const o=2*Math.PI*i/(t+r-1);s[i]=e-n*Math.cos(o)}return qs(s,"float32")}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function lK(t,e,n=1){const r=T(t,"predictions","inTopK"),s=T(e,"targets","inTopK");R(r.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`),R(r.rank-1===s.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${s.rank}`),vs(r.shape.slice(0,r.shape.length-1),s.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const i=r.shape[r.shape.length-1];R(n>0&&n<=i,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${i}), but got ${n}`);const o=await r.data(),a=await s.data(),[u,l]=[o.length/i,i],c=qa("bool",u);for(let d=0;d<u;d++){const f=d*l,h=o.subarray(f,f+l),p=[];for(let y=0;y<h.length;y++)p.push({value:h[y],index:y});p.sort((y,b)=>b.value-y.value),c[d]=0;for(let y=0;y<n;y++)if(p[y].index===a[d]){c[d]=1;break}}return t!==r&&r.dispose(),e!==s&&s.dispose(),uo(c,s.shape,"bool")}const cK=lK;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dK(t,e,n,r,s,i="NHWC",o){let a=t;t.rank===3&&(a=te(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let u=e;u.rank===3&&(u=te(e,[1,e.shape[0],e.shape[1],e.shape[2]])),R(a.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${a.shape}.`),R(u.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${u.shape}.`),R(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const l=i==="NHWC"?a.shape[3]:a.shape[1],c=i==="NHWC"?u.shape[3]:u.shape[1];R(l===n[2],()=>`Error in conv2dDerFilter: depth of input ${l}) must match input depth in filter (${n[2]}.`),R(c===n[3],()=>`Error in conv2dDerFilter: depth of dy (${c}) must match output depth for filter (${n[3]}).`),ti("conv2dDerFilter",s,o);const d={x:a,dy:u},f={strides:r,pad:s,dataFormat:i,dimRoundingMode:o,filterShape:n};return j.runKernel(K3,d,f)}const fK=B({conv2DBackpropFilter_:dK});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zg(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return fe(t,N4(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function jg(t,e){let n=e;const r=t4(t.shape,e.shape);return r.length>0&&(n=Rt(n,r)),te(n,t.shape)}function Wg(t,e,n,r){if(e==="linear")return t;if(e==="relu")return Vg(t);if(e==="elu")return r4(t);if(e==="relu6")return S4(t);if(e==="prelu")return v4(t,n);if(e==="leakyrelu")return l4(t,r);if(e==="sigmoid")return jc(t);throw new Error(`Unknown fused activation ${e}.`)}const qg=(t,e)=>!(t>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hK({x:t,filter:e,strides:n,pad:r,dataFormat:s="NHWC",dilations:i=[1,1],dimRoundingMode:o,bias:a,activation:u="linear",preluActivationWeights:l,leakyreluAlpha:c}){if(u=u||"linear",qg(j.state.gradientDepth,u)===!1){R(s==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${s} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let k=Fg(t,e,n,r,s,i,o);return a!=null&&(k=ke(k,a)),Wg(k,u,l,c)}const d=T(t,"x","conv2d","float32"),f=T(e,"filter","conv2d","float32");let h=d,p=!1;d.rank===3&&(p=!0,h=te(d,[1,d.shape[0],d.shape[1],d.shape[2]])),R(h.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${h.rank}.`),R(f.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${f.rank}.`),ti("fused conv2d",r,o);const y=s==="NHWC"?h.shape[3]:h.shape[1];R(f.shape[2]===y,()=>`Error in conv2d: depth of input (${y}) must match input depth for filter ${f.shape[2]}.`),R(Xr(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);const b=xs(h.shape,f.shape,n,i,r,o);let g;a!=null&&(g=T(a,"bias","fused conv2d"),[g]=en(g,d),s==="NHWC"?it(b.outShape,g.shape):(R(g.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${g.shape.length}.`),R(g.shape.length===0||g.shape[0]===b.outChannels||g.shape[0]===1,()=>`Error in fused conv2d: bias shape (${g.shape}) is not compatible with the number of output channels (${b.outChannels})`)));let v;if(l!=null){const k=l.shape;if(R(k.length<=1||k.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${k.length}.`),k.length===1)R(k[0]===1||k[0]===b.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${k}) is not compatible with the number of output channels (${b.outChannels}).`);else if(k.length===3)try{it(k,b.outShape)}catch{const _=`Error in fused conv2d: PReLU activation weights (${k}) is not compatible with the output shape of the conv2d (${b.outShape}).`;throw Error(_)}v=T(l,"prelu weights","fused conv2d")}const w=(k,O)=>{R(s==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${s} but only NHWC is currently supported.`);const[_,$,M,K]=O,Z=zg(k,M,u);R(Sh(i),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`);const ie=e4($.shape,Z,_,n,r),ee=fK($,Z,_.shape,n,r),W=[ie,ee];if(K!=null){const V=jg(K,Z);W.push(V)}return W},x={x:h,filter:f,bias:g,preluActivationWeights:v},N={strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:o,activation:u,leakyreluAlpha:c};return a==null?Xo((O,_,$)=>{let M=j.runKernel(Cv,x,N);return $([_,O,M]),p&&(M=te(M,[M.shape[1],M.shape[2],M.shape[3]])),{value:M,gradFunc:w}})(h,f):Xo((O,_,$,M)=>{let K=j.runKernel(Cv,x,N);return M([_,O,K,$]),p&&(K=te(K,[K.shape[1],K.shape[2],K.shape[3]])),{value:K,gradFunc:w}})(h,f,g)}const pK=B({fusedConv2d_:hK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mK(t,e,n,r,s,i=[1,1],o){let a=t;t.rank===3&&(a=te(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let u=e;u.rank===3&&(u=te(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const l={x:a,dy:u},c={strides:r,pad:s,dimRoundingMode:o,dilations:i,filterShape:n};return j.runKernel(oR,l,c)}const gK=B({depthwiseConv2dNativeBackpropFilter_:mK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yK(t,e,n,r,s,i=[1,1],o){let a=e,u=!1;e.rank===3&&(u=!0,a=te(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const l={dy:a,filter:n},c={strides:r,pad:s,dimRoundingMode:o,dilations:i,inputShape:t},d=j.runKernel(aR,l,c);return u?te(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const bK=B({depthwiseConv2dNativeBackpropInput_:yK});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vK({x:t,filter:e,strides:n,pad:r,dataFormat:s="NHWC",dilations:i=[1,1],dimRoundingMode:o,bias:a,activation:u="linear",preluActivationWeights:l,leakyreluAlpha:c}){if(qg(j.state.gradientDepth,u)===!1){let N=Jx(t,e,n,r,s,i,o);return a!=null&&(N=ke(N,a)),Wg(N,u,l,c)}const d=T(t,"x","depthwiseConv2d","float32"),f=T(e,"filter","depthwiseConv2d","float32");let h=d,p=!1;d.rank===3&&(p=!0,h=te(d,[1,d.shape[0],d.shape[1],d.shape[2]])),R(h.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${h.rank}.`),R(f.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${f.rank}.`),R(h.shape[3]===f.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${h.shape[3]}) must match the inChannels dimension in filter ${f.shape[2]}.`),i==null&&(i=[1,1]),R(Xr(n,i),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),ti("fused depthwiseConv2d",r,o);const y=xs(h.shape,f.shape,n,i,r,o,!0);let b;a!=null&&(b=T(a,"bias","fused conv2d"),[b]=en(b,d),it(y.outShape,b.shape));let g;l!=null&&(g=T(l,"prelu weights","fused depthwiseConv2d"));const v=(N,k)=>{R(Sh(i),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${i}'`);const[O,_,$,M]=k,K=zg(N,$,u),Z=bK(_.shape,K,O,n,r,i,o),ie=gK(_,K,O.shape,n,r,i,o);if(M!=null){const ee=jg(b,K);return[Z,ie,ee]}return[Z,ie]},w={x:h,filter:f,bias:b,preluActivationWeights:g},x={strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:o,activation:u,leakyreluAlpha:c};return a==null?Xo((k,O,_)=>{let $=j.runKernel(Nv,w,x);return _([O,k,$]),p&&($=te($,[$.shape[1],$.shape[2],$.shape[3]])),{value:$,gradFunc:v}})(h,f):Xo((k,O,_,$)=>{let M=j.runKernel(Nv,w,x);return $([O,k,M,_]),p&&(M=te(M,[M.shape[1],M.shape[2],M.shape[3]])),{value:M,gradFunc:v}})(h,f,b)}const wK=B({fusedDepthwiseConv2d_:vK});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xK({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:s,activation:i="linear",preluActivationWeights:o,leakyreluAlpha:a=.2}){if(qg(j.state.gradientDepth,i)===!1){let K=bt(t,e,n,r);return s!=null&&(K=ke(K,s)),Wg(K,i,o,a)}let u=T(t,"a","fused matMul"),l=T(e,"b","fused matMul");[u,l]=en(u,l);const c=n?u.shape[u.rank-2]:u.shape[u.rank-1],d=r?l.shape[l.rank-1]:l.shape[l.rank-2],f=n?u.shape[u.rank-1]:u.shape[u.rank-2],h=r?l.shape[l.rank-2]:l.shape[l.rank-1],p=u.shape.slice(0,-2),y=l.shape.slice(0,-2),b=de(p),g=de(y);R(c===d,()=>`Error in fused matMul: inner shapes (${c}) and (${d}) of Tensors with shapes ${u.shape} and ${l.shape} and transposeA=${n} and transposeB=${r} must match.`);const w=it(u.shape.slice(0,-2),l.shape.slice(0,-2)).concat([f,h]),x=n?te(u,[b,c,f]):te(u,[b,f,c]),N=r?te(l,[g,h,d]):te(l,[g,d,h]);let k;s!=null&&(k=T(s,"bias","fused matMul"),[k]=en(k,u),it(w,k.shape));let O;o!=null&&(O=T(o,"prelu weights","fused matMul"));const _=(K,Z)=>{const[ie,ee,W,V]=Z,D=zg(te(K,W.shape),W,i);let L,U;if(!n&&!r?(L=bt(D,ee,!1,!0),U=bt(ie,D,!0,!1)):!n&&r?(L=bt(D,ee,!1,!1),U=bt(D,ie,!0,!1)):n&&!r?(L=bt(ee,D,!1,!0),U=bt(ie,D,!1,!1)):(L=bt(ee,D,!0,!0),U=bt(D,ie,!0,!0)),s!=null){const F=jg(V,D);return[L,U,F]}else return[L,U]},$={a:x,b:N,bias:k,preluActivationWeights:O},M={transposeA:n,transposeB:r,activation:i,leakyreluAlpha:a};return s==null?Xo((Z,ie,ee)=>{const W=j.runKernel(Ev,$,M);return ee([Z,ie,W]),{value:te(W,w),gradFunc:_}})(x,N):Xo((Z,ie,ee,W)=>{const V=j.runKernel(Ev,$,M);return W([Z,ie,V,ee]),{value:te(V,w),gradFunc:_}})(x,N,k)}const SK=B({fusedMatMul_:xK});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AK=Object.freeze(Object.defineProperty({__proto__:null,conv2d:pK,depthwiseConv2d:wK,matMul:SK},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EK(t){return g2(t,.54,.46)}const CK=B({hammingWindow_:EK});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NK(t){return g2(t,.5,.5)}const O4=B({hannWindow_:NK});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _K(t,e,n,r=!1,s=0){let i=0;const o=[];for(;i+e<=t.size;)o.push(Le(t,i,e)),i+=n;if(r)for(;i<t.size;){const a=i+e-t.size,u=dn([Le(t,i,e-a),Hh([a],s)]);o.push(u),i+=n}return o.length===0?Ju([],[0,e]):te(dn(o),[o.length,e])}const P4=B({frame_:_K});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TK(t,e,n,r,s=O4){r==null&&(r=R4(e));const i=P4(t,e,n),o=fe(i,s(e));return p2(o,r)}const IK=B({stft_:TK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kK(t,e,n,r,s="bilinear",i=0){const o=T(t,"image","cropAndResize"),a=T(e,"boxes","cropAndResize","float32"),u=T(n,"boxInd","cropAndResize","int32"),l=a.shape[0];R(o.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${o.rank}.`),R(a.rank===2&&a.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${l},4] but had shape ${a.shape}.`),R(u.rank===1&&u.shape[0]===l,()=>`Error in cropAndResize: boxInd must be have size [${l}] but had shape ${a.shape}.`),R(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),R(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),R(s==="bilinear"||s==="nearest",()=>`method must be bilinear or nearest, but was ${s}`);const c={image:o,boxes:a,boxInd:u},d={method:s,extrapolationValue:i,cropSize:r};return j.runKernel(nR,c,d)}const RK=B({cropAndResize_:kK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OK(t){const e=T(t,"image","flipLeftRight","float32");R(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e};return j.runKernel(wR,n,{})}const PK=B({flipLeftRight_:OK});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DK(t){const e=T(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];R(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),R(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const s=new Array(e.rank);return s.fill(1,0,n),s[n]=3,Xf(e,s)}const LK=B({grayscaleToRGB_:DK});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FK(t){const e=T(t,"image","RGBToGrayscale"),n=e.rank-1,r=e.shape[n];R(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),R(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);const s=e.dtype,i=cn(e,"float32"),o=qs([.2989,.587,.114]);let a;switch(e.rank){case 2:a=hc("ij,j->i",i,o);break;case 3:a=hc("ijk,k->ij",i,o);break;case 4:a=hc("ijkl,l->ijk",i,o);break;case 5:a=hc("ijklm,m->ijkl",i,o);break;case 6:a=hc("ijklmn,n->ijklm",i,o);break;default:throw new Error("Not a valid tensor rank.")}return a=os(a,-1),cn(a,s)}const $K=B({rgbToGrayscale_:FK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BK(t,e,n=0,r=.5){const s=T(t,"image","rotateWithOffset","float32");R(s.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${s.rank}.`);const i={image:s},o={radians:e,fillValue:n,center:r};return j.runKernel(cP,i,o)}const MK=B({rotateWithOffset_:BK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ad(t,e,n,r,s,i){r==null&&(r=.5),s==null&&(s=Number.NEGATIVE_INFINITY),i==null&&(i=0);const o=t.shape[0];return n=Math.min(n,o),R(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),R(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),R(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),R(e.rank===1,()=>"scores must be a 1D tensor"),R(e.shape[0]===o,()=>`scores has incompatible shape with boxes. Expected ${o}, but was ${e.shape[0]}`),R(0<=i&&i<=1,()=>`softNmsSigma must be in [0, 1], but was '${i}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:s,softNmsSigma:i}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VK(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY){const i=T(t,"boxes","nonMaxSuppression","float32"),o=T(e,"scores","nonMaxSuppression","float32"),a=Ad(i,o,n,r,s);n=a.maxOutputSize,r=a.iouThreshold,s=a.scoreThreshold;const u={maxOutputSize:n,iouThreshold:r,scoreThreshold:s};return j.runKernel(rO,{boxes:i,scores:o},u)}const UK=B({nonMaxSuppression_:VK});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zK(t,e,n){const r=jK(t,e,n),s=r<0?-(r+1):r;t.splice(s,0,e)}function jK(t,e,n){return qK(t,e,n||WK)}function WK(t,e){return t>e?1:t<e?-1:0}function qK(t,e,n){let r=0,s=t.length,i=0,o=!1;for(;r<s;){i=r+(s-r>>>1);const a=n(e,t[i]);a>0?r=i+1:(s=i,o=!a)}return o?r:-r-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D4(t,e,n,r,s){return y2(t,e,n,r,s,0)}function L4(t,e,n,r,s,i){return y2(t,e,n,r,s,0,!1,i,!0)}function F4(t,e,n,r,s,i){return y2(t,e,n,r,s,i,!0)}function y2(t,e,n,r,s,i,o=!1,a=!1,u=!1){const l=[];for(let b=0;b<e.length;b++)e[b]>s&&l.push({score:e[b],boxIndex:b,suppressBeginIndex:0});l.sort(XC);const c=i>0?-.5/i:0,d=[],f=[];for(;d.length<n&&l.length>0;){const b=l.pop(),{score:g,boxIndex:v,suppressBeginIndex:w}=b;if(g<s)break;let x=!1;for(let N=d.length-1;N>=w;--N){const k=GK(t,v,d[N]);if(k>=r){x=!0;break}if(b.score=b.score*HK(r,c,k),b.score<=s)break}b.suppressBeginIndex=d.length,x||(b.score===g?(d.push(v),f.push(b.score)):b.score>s&&zK(l,b,XC))}const h=d.length,p=n-h;a&&p>0&&(d.push(...new Array(p).fill(0)),f.push(...new Array(p).fill(0)));const y={selectedIndices:d};return o&&(y.selectedScores=f),u&&(y.validOutputs=h),y}function GK(t,e,n){const r=t.subarray(e*4,e*4+4),s=t.subarray(n*4,n*4+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),a=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),l=Math.min(s[0],s[2]),c=Math.min(s[1],s[3]),d=Math.max(s[0],s[2]),f=Math.max(s[1],s[3]),h=(a-i)*(u-o),p=(d-l)*(f-c);if(h<=0||p<=0)return 0;const y=Math.max(i,l),b=Math.max(o,c),g=Math.min(a,d),v=Math.min(u,f),w=Math.max(g-y,0)*Math.max(v-b,0);return w/(h+p-w)}function HK(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function XC(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function KK(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY){const i=T(t,"boxes","nonMaxSuppressionAsync"),o=T(e,"scores","nonMaxSuppressionAsync"),a=Ad(i,o,n,r,s);n=a.maxOutputSize,r=a.iouThreshold,s=a.scoreThreshold;const u=await Promise.all([i.data(),o.data()]),l=u[0],c=u[1],{selectedIndices:d}=D4(l,c,n,r,s);return i!==t&&i.dispose(),o!==e&&o.dispose(),qs(d,"int32")}const XK=KK;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YK(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=0){const o=T(t,"boxes","nonMaxSuppression"),a=T(e,"scores","nonMaxSuppression"),u=Ad(o,a,n,r,s,i);n=u.maxOutputSize,r=u.iouThreshold,s=u.scoreThreshold,i=u.softNmsSigma;const l={boxes:o,scores:a},c={maxOutputSize:n,iouThreshold:r,scoreThreshold:s,softNmsSigma:i},d=j.runKernel(iO,l,c);return{selectedIndices:d[0],selectedScores:d[1]}}const QK=B({nonMaxSuppressionWithScore_:YK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function ZK(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=0){const o=T(t,"boxes","nonMaxSuppressionAsync"),a=T(e,"scores","nonMaxSuppressionAsync"),u=Ad(o,a,n,r,s,i);n=u.maxOutputSize,r=u.iouThreshold,s=u.scoreThreshold,i=u.softNmsSigma;const l=await Promise.all([o.data(),a.data()]),c=l[0],d=l[1],{selectedIndices:f,selectedScores:h}=F4(c,d,n,r,s,i);return o!==t&&o.dispose(),a!==e&&a.dispose(),{selectedIndices:qs(f,"int32"),selectedScores:qs(h)}}const JK=ZK;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eX(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=!1){const o=T(t,"boxes","nonMaxSuppression"),a=T(e,"scores","nonMaxSuppression"),u=Ad(o,a,n,r,s,null),l=u.maxOutputSize,c=u.iouThreshold,d=u.scoreThreshold,f={boxes:o,scores:a},h={maxOutputSize:l,iouThreshold:c,scoreThreshold:d,padToMaxOutputSize:i},p=j.runKernel(sO,f,h);return{selectedIndices:p[0],validOutputs:p[1]}}const tX=B({nonMaxSuppressionPadded_:eX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function nX(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=!1){const o=T(t,"boxes","nonMaxSuppressionAsync"),a=T(e,"scores","nonMaxSuppressionAsync"),u=Ad(o,a,n,r,s,null),l=u.maxOutputSize,c=u.iouThreshold,d=u.scoreThreshold,[f,h]=await Promise.all([o.data(),a.data()]),{selectedIndices:p,validOutputs:y}=L4(f,h,l,c,d,i);return o!==t&&o.dispose(),a!==e&&a.dispose(),{selectedIndices:qs(p,"int32"),validOutputs:Qe(y,"int32")}}const rX=nX;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sX(t,e,n=!1,r=!1){const s=T(t,"images","resizeBilinear");R(s.rank===3||s.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${s.rank}.`),R(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),R(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let i=s,o=!1;s.rank===3&&(o=!0,i=te(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const a={images:i},u={alignCorners:n,halfPixelCenters:r,size:e},l=j.runKernel(SO,a,u);return o?te(l,[l.shape[1],l.shape[2],l.shape[3]]):l}const iX=B({resizeBilinear_:sX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oX(t,e,n=!1,r=!1){const s=T(t,"images","resizeNearestNeighbor");R(s.rank===3||s.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${s.rank}.`),R(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),R(s.dtype==="float32"||s.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),R(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let i=s,o=!1;s.rank===3&&(o=!0,i=te(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const a={images:i},u={alignCorners:n,halfPixelCenters:r,size:e},l=j.runKernel(xO,a,u);return o?te(l,[l.shape[1],l.shape[2],l.shape[3]]):l}const aX=B({resizeNearestNeighbor_:oX});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uX(t,e="binary",n=!1,r=.5){const s=T(t,"image","threshold"),i=.2989,o=.587,a=.114,u=s.shape[0]*s.shape[1];let l=fe(qs([r]),255),c,d,f,h;if(R(s.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${s.rank}.`),R(s.shape[2]===3||s.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${s.shape[2]}.`),R(s.dtype==="int32"||s.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${s.dtype}.`),R(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),s.shape[2]===3){[c,d,f]=_h(s,[1,1,1],-1);const b=fe(c,i),g=fe(d,o),v=fe(f,a);h=ke(ke(b,g),v)}else h=t;if(e==="otsu"){const b=JP(cn(A4(h),"int32"),uo([]),256);l=lX(b,u)}const p=n?n2(h,l):Bg(h,l);return cn(fe(p,255),"int32")}function lX(t,e){let n=qs([-1]),r=qs([0]),s=qs([0]),i,o,a,u,l,c;for(let d=0;d<t.size-1;d++){i=Le(t,0,d+1),o=Le(t,d+1),l=lt(Rt(i),e),c=lt(Rt(o),e);const f=Rt(fe(i,Ch(0,i.size)));a=lt(f,Rt(i));const h=Hh(o.shape,i.size),p=ke(Ch(0,o.size),h),y=fe(o,p);u=lt(Rt(y),Rt(o));const b=Pe(a,u),g=Pe(a,u),v=fe(l,c);s=fe(fe(v,b),g);const w=Bg(s,r);r=Vo(w,s,r),n=Vo(w,qs([d]),n)}return n}const cX=B({threshold_:uX});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dX(t,e,n="nearest",r="constant",s=0,i){const o=T(t,"image","transform","float32"),a=T(e,"transforms","transform","float32");R(o.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${o.rank}.`),R(a.rank===2&&(a.shape[0]===o.shape[0]||a.shape[0]===1)&&a.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),R(i==null||i.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${i}.`);const u={image:o,transforms:a},l={interpolation:n,fillMode:r,fillValue:s,outputShape:i};return j.runKernel(sP,u,l)}const fX=B({transform_:dX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hX(t,e,n){const r=T(t,"a","bandPart");R(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const s=r.shape,[i,o]=r.shape.slice(-2);let a,u;typeof e=="number"?(R(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),R(e<=i,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${i}).`),a=T(e<0?i:e,"numLower","bandPart")):(R(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),a=Vo(M0(e,0),i,z0(e,i))),typeof n=="number"?(R(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),R(n<=o,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${o}).`),u=T(n<0?o:n,"numUpper","bandPart")):(R(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),u=Vo(M0(n,0),o,z0(n,o)));const l=te(Ch(0,i,1,"int32"),[-1,1]),c=Ch(0,o,1,"int32"),d=Pe(l,c),f=V0(n2(d,a),u4(d,lo(u))),h=Xa([i,o],r.dtype);return te(Yo(kl(te(r,[-1,i,o])).map(p=>Vo(f,p,h))),s)}const pX=B({bandPart_:hX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mX(t){let e;if(Array.isArray(t)){e=!1,R(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const s=t[0].shape[0];for(let i=1;i<t.length;++i)R(t[i].shape[0]===s,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[i].shape[0]} vs. ${s})`)}else e=!0,t=_h(t,t.shape[0],0).map(s=>Bo(s,[0]));R(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let s=0;s<t.length;++s)n.push(j.tidy(()=>{let i=r[s];if(s>0)for(let o=0;o<s;++o){const a=fe(Rt(fe(n[o],i)),n[o]);i=Pe(i,a)}return lt(i,$g(i,"euclidean"))}));return e?Yo(n,0):n}const gX=B({gramSchmidt_:mX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yX(t,e=!1){if(R(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return YC(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((u,l)=>u*l),r=kl(te(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),s=[],i=[];r.forEach(u=>{const[l,c]=YC(u,e);s.push(l),i.push(c)});const o=te(Yo(s,0),t.shape),a=te(Yo(i,0),t.shape);return[o,a]}}function YC(t,e=!1){return j.tidy(()=>{R(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let s=o4(n),i=Va(t);const o=Ju([[1]],[1,1]);let a=Va(o);const u=n>=r?r:n;for(let l=0;l<u;++l){const c=i,d=a,f=s;[a,i,s]=j.tidy(()=>{const h=Le(i,[l,l],[n-l,1]),p=$g(h),y=Le(i,[l,l],[1,1]),b=Vo(Bg(y,0),Ju([[-1]]),Ju([[1]])),g=Pe(y,fe(b,p)),v=lt(h,g);v.shape[0]===1?a=Va(o):a=dn([o,Le(v,[1,0],[v.shape[0]-1,v.shape[1]])],0);const w=lo(lt(bt(b,g),p)),x=Le(i,[l,0],[n-l,r]),N=fe(w,a),k=W0(a);if(l===0)i=Pe(x,bt(N,bt(k,x)));else{const $=Pe(x,bt(N,bt(k,x)));i=dn([Le(i,[0,0],[l,r]),$],0)}const O=W0(N),_=Le(s,[0,l],[n,s.shape[1]-l]);if(l===0)s=Pe(_,bt(bt(_,a),O));else{const $=Pe(_,bt(bt(_,a),O));s=dn([Le(s,[0,0],[n,l]),$],1)}return[a,i,s]}),rn([c,d,f])}return!e&&n>r&&(s=Le(s,[0,0],[n,r]),i=Le(i,[0,0],[r,r])),[s,i]})}const bX=B({qr_:yX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Nr;(function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Nr||(Nr={}));function vX(t,e,n=Nr.SUM_BY_NONZERO_WEIGHTS){const r=T(t,"losses","computeWeightedLoss");let s=null;e!=null&&(s=T(e,"weights","computeWeightedLoss"));const i=s==null?r:fe(r,s);if(n===Nr.NONE)return i;if(n===Nr.SUM)return Rt(i);if(n===Nr.MEAN){if(s==null)return U0(i);{const o=r.size/s.size,a=lt(Rt(i),Rt(s));return o>1?lt(a,Qe(o)):a}}if(n===Nr.SUM_BY_NONZERO_WEIGHTS){if(s==null)return lt(Rt(i),Qe(r.size));{const o=fe(s,Ku(r.shape)),a=cn(Rt(y4(o,Qe(0))),"float32");return lt(Rt(i),a)}}throw Error(`Unknown reduction: ${n}`)}const Jo=B({computeWeightedLoss_:vX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wX(t,e,n,r=Nr.SUM_BY_NONZERO_WEIGHTS){const s=T(t,"labels","absoluteDifference"),i=T(e,"predictions","absoluteDifference");let o=null;n!=null&&(o=T(n,"weights","absoluteDifference")),vs(s.shape,i.shape,"Error in absoluteDifference: ");const a=ss(Pe(s,i));return Jo(a,o,r)}const xX=B({absoluteDifference_:wX});function SX(t,e,n,r,s=Nr.SUM_BY_NONZERO_WEIGHTS){const i=T(t,"labels","cosineDistance"),o=T(e,"predictions","cosineDistance");let a=null;r!=null&&(a=T(r,"weights","cosineDistance")),vs(i.shape,o.shape,"Error in cosineDistance: ");const u=Qe(1),l=Pe(u,Rt(fe(i,o),n,!0));return Jo(l,a,s)}const AX=B({cosineDistance_:SX});function EX(t,e,n,r=Nr.SUM_BY_NONZERO_WEIGHTS){let s=T(t,"labels","hingeLoss");const i=T(e,"predictions","hingeLoss");let o=null;n!=null&&(o=T(n,"weights","hingeLoss")),vs(s.shape,i.shape,"Error in hingeLoss: ");const a=Qe(1);s=Pe(fe(Qe(2),s),a);const u=Vg(Pe(a,fe(s,i)));return Jo(u,o,r)}const CX=B({hingeLoss_:EX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NX(t,e,n,r=1,s=Nr.SUM_BY_NONZERO_WEIGHTS){const i=T(t,"labels","huberLoss"),o=T(e,"predictions","huberLoss");let a=null;n!=null&&(a=T(n,"weights","huberLoss")),vs(i.shape,o.shape,"Error in huberLoss: ");const u=Qe(r),l=ss(Pe(o,i)),c=z0(l,u),d=Pe(l,c),f=ke(fe(Qe(.5),Xs(c)),fe(u,d));return Jo(f,a,s)}const _X=B({huberLoss_:NX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TX(t,e,n,r=1e-7,s=Nr.SUM_BY_NONZERO_WEIGHTS){const i=T(t,"labels","logLoss"),o=T(e,"predictions","logLoss");let a=null;n!=null&&(a=T(n,"weights","logLoss")),vs(i.shape,o.shape,"Error in logLoss: ");const u=Qe(1),l=Qe(r),c=lo(fe(i,Eh(ke(o,l)))),d=fe(Pe(u,i),Eh(ke(Pe(u,o),l))),f=Pe(c,d);return Jo(f,a,s)}const IX=B({logLoss_:TX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kX(t,e,n,r=Nr.SUM_BY_NONZERO_WEIGHTS){const s=T(t,"labels","meanSquaredError"),i=T(e,"predictions","meanSquaredError");let o=null;n!=null&&(o=T(n,"weights","meanSquaredError")),vs(s.shape,i.shape,"Error in meanSquaredError: ");const a=C4(s,i);return Jo(a,o,r)}const RX=B({meanSquaredError_:kX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OX(t,e){const n=T(t,"labels","sigmoidCrossEntropyWithLogits"),r=T(e,"logits","sigmoidCrossEntropyWithLogits");vs(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const s=Vg(r),i=fe(r,n),o=c4(gl(lo(ss(r))));return ke(Pe(s,i),o)}function PX(t,e,n,r=0,s=Nr.SUM_BY_NONZERO_WEIGHTS){let i=T(t,"multiClassLabels","sigmoidCrossEntropy");const o=T(e,"logits","sigmoidCrossEntropy");let a=null;if(n!=null&&(a=T(n,"weights","sigmoidCrossEntropy")),vs(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){const l=Qe(r),c=Qe(1),d=Qe(.5);i=ke(fe(i,Pe(c,l)),fe(d,l))}const u=OX(i,o);return Jo(u,a,s)}const DX=B({sigmoidCrossEntropy_:PX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LX(t,e,n=-1){if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${e.rank} and dim was ${n}`);return Xo((s,i,o)=>{const u=f4(i,[n],!0),l=Pe(cn(i,"float32"),u);o([s,l]);const c=lo(fe(l,s));return{value:Rt(c,[n]),gradFunc:(h,p)=>{const[y,b]=p,g=Ss(h.shape,[n]);return[fe(te(h,g),Pe(cn(y,"float32"),gl(b))),fe(te(h,g),Pe(gl(b),cn(y,"float32")))]}}})(t,e)}function FX(t,e,n,r=0,s=Nr.SUM_BY_NONZERO_WEIGHTS){let i=T(t,"onehotLabels","softmaxCrossEntropy");const o=T(e,"logits","softmaxCrossEntropy");let a=null;if(n!=null&&(a=T(n,"weights","softmaxCrossEntropy")),vs(i.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){const l=Qe(r),c=Qe(1),d=Qe(i.shape[1]);i=ke(fe(i,Pe(c,l)),lt(l,d))}const u=LX(i,o);return Jo(u,a,s)}const $X=B({softmaxCrossEntropy_:FX});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BX(t,e,n,r){const s=T(t,"indices","sparseFillEmptyRows","int32"),i=T(e,"values","sparseFillEmptyRows"),o=T(n,"denseShape","sparseFillEmptyRows","int32"),a=T(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(s.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${s.shape}`);if(i.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${i.shape}`);if(o.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${o.shape}`);if(a.rank!==0)throw new Error(`Default value should be a scalar but received shape ${a.shape}`);const u={indices:s,values:i,denseShape:o,defaultValue:a},l=j.runKernel(jO,u);return{outputIndices:l[0],outputValues:l[1],emptyRowIndicator:l[2],reverseIndexMap:l[3]}}const MX=B({sparseFillEmptyRows_:BX});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VX(t,e,n){const r=T(t,"inputIndices","sparseReshape","int32"),s=T(e,"inputShape","sparseReshape","int32"),i=T(n,"newShape","sparseReshape","int32");if(r.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${r.shape}`);if(s.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${s.shape}`);if(i.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${i.shape}`);const o={inputIndices:r,inputShape:s,newShape:i},a=j.runKernel(WO,o);return{outputIndices:a[0],outputShape:a[1]}}const UX=B({sparseReshape_:VX});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zX(t,e,n){const r=T(t,"data","sparseSegmentMean"),s=T(e,"indices","sparseSegmentMean","int32"),i=T(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${s.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${i.shape}`);const o={data:r,indices:s,segmentIds:i};return j.runKernel(qO,o)}const jX=B({sparseSegmentMean_:zX});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WX(t,e,n){const r=T(t,"data","sparseSegmentSum"),s=T(e,"indices","sparseSegmentSum","int32"),i=T(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${s.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${i.shape}`);const o={data:r,indices:s,segmentIds:i};return j.runKernel(GO,o)}const qX=B({sparseSegmentSum_:WX});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GX(t,e,n,r,s,i,o,a){const u=T(t,"data","stringNGrams","string");if(u.dtype!=="string")throw new Error("Data must be of datatype string");if(u.shape.length!==1)throw new Error(`Data must be a vector, saw: ${u.shape}`);const l=T(e,"dataSplits","stringNGrams");if(l.dtype!=="int32")throw new Error("Data splits must be of datatype int32");const c={separator:n,nGramWidths:r,leftPad:s,rightPad:i,padWidth:o,preserveShortSequences:a},d={data:u,dataSplits:l},f=j.runKernel(QO,d,c);return{nGrams:f[0],nGramsSplits:f[1]}}const HX=B({stringNGrams_:GX});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KX(t,e,n=!0){const r=T(t,"input","stringSplit","string"),s=T(e,"delimiter","stringSplit","string");if(r.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(s.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${s.shape}`);const i={skipEmpty:n},o={input:r,delimiter:s},a=j.runKernel(ZO,o,i);return{indices:a[0],values:a[1],shape:a[2]}}const XX=B({stringSplit_:KX});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YX(t,e){const n=T(t,"input","stringToHashBucketFast","string"),r={numBuckets:e};if(e<=0)throw new Error("Number of buckets must be at least 1");const s={input:n};return j.runKernel(JO,s,r)}const QX=B({stringToHashBucketFast_:YX});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZX(t,e,n,r=!0){const s=T(t,"input","staticRegexReplace","string"),i={pattern:e,rewrite:n,replaceGlobal:r};return j.runKernel(XO,{x:s},i)}const JX=B({staticRegexReplace_:ZX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eY={fft:h2,ifft:j0,rfft:p2,irfft:E4},tY={hammingWindow:CK,hannWindow:O4,frame:P4,stft:IK},b2={flipLeftRight:PK,grayscaleToRGB:LK,resizeNearestNeighbor:aX,resizeBilinear:iX,rgbToGrayscale:$K,rotateWithOffset:MK,cropAndResize:RK,nonMaxSuppression:UK,nonMaxSuppressionAsync:XK,nonMaxSuppressionWithScore:QK,nonMaxSuppressionWithScoreAsync:JK,nonMaxSuppressionPadded:tX,nonMaxSuppressionPaddedAsync:rX,threshold:cX,transform:fX},nY={bandPart:pX,gramSchmidt:gX,qr:bX},rY={absoluteDifference:xX,computeWeightedLoss:Jo,cosineDistance:AX,hingeLoss:CX,huberLoss:_X,logLoss:IX,meanSquaredError:RX,sigmoidCrossEntropy:DX,softmaxCrossEntropy:$X},sY={sparseFillEmptyRows:MX,sparseReshape:UX,sparseSegmentMean:jX,sparseSegmentSum:qX},iY={stringNGrams:HX,stringSplit:XX,stringToHashBucketFast:QX,staticRegexReplace:JX};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oY=new Map,aY=new Map;class uY{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}}class Bu{constructor(){this.classNameMap={}}static getMap(){return Bu.instance==null&&(Bu.instance=new Bu),Bu.instance}static register(e){Bu.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function lY(t,e,n){R(t.className!=null,()=>"Class being registered does not have the static className property defined."),R(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),R(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof n>"u"&&(n=t.className);const r=n,s=e+">"+r;return Bu.register(t),oY.set(s,t),aY.set(t,s),t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Rl extends uY{minimize(e,n=!1,r){const{value:s,grads:i}=this.computeGradients(e,r);if(r!=null){const o=r.map(a=>({name:a.name,tensor:i[a.name]}));this.applyGradients(o)}else this.applyGradients(i);return rn(i),n?s:(s.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return K9(e,n)}dispose(){this.iterations_!=null&&rn(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:Qe(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(Rl,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cY extends Rl{static get className(){return"Adadelta"}constructor(e,n,r=null){super(),this.learningRate=e,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=j.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=j.registeredVariables[r],o=!1;this.accumulatedGrads[s]==null&&(this.accumulatedGrads[s]={originalName:`${r}/accum_grad`,variable:He(()=>ds(i).variable(o))}),this.accumulatedUpdates[s]==null&&(this.accumulatedUpdates[s]={originalName:`${r}/accum_var`,variable:He(()=>ds(i).variable(o))});const a=Array.isArray(e)?e[s].tensor:e[r];if(a==null)return;const u=this.accumulatedGrads[s].variable,l=this.accumulatedUpdates[s].variable;He(()=>{const c=ke(fe(u,this.rho),fe(Xs(a),1-this.rho)),d=fe(lt(Ko(ke(l,this.epsilon)),Ko(ke(u,this.epsilon))),a),f=ke(fe(l,this.rho),fe(Xs(d),1-this.rho));u.assign(c),l.assign(f);const h=ke(fe(d,-this.learningRate),i);i.assign(h)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(rn(this.accumulatedGrads.map(e=>e.variable)),rn(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedUpdates=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dY extends Rl{static get className(){return"Adagrad"}constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=j.registeredVariables[r];this.accumulatedGrads[s]==null&&(this.accumulatedGrads[s]={originalName:`${r}/accumulator`,variable:He(()=>Hh(i.shape,this.initialAccumulatorValue).variable(!1))});const o=Array.isArray(e)?e[s].tensor:e[r];if(o==null)return;const a=this.accumulatedGrads[s].variable;He(()=>{const u=ke(a,Xs(o));a.assign(u);const l=ke(fe(lt(o,Ko(ke(u,j.backend.epsilon()))),-this.learningRate),i);i.assign(l)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&rn(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fY extends Rl{static get className(){return"Adam"}constructor(e,n,r,s=null){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=s,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],He(()=>{this.accBeta1=Qe(n).variable(),this.accBeta2=Qe(r).variable()}),s==null&&(this.epsilon=j.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);He(()=>{const r=Pe(1,this.accBeta1),s=Pe(1,this.accBeta2);n.forEach((i,o)=>{const a=j.registeredVariables[i],u=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${i}/m`,variable:He(()=>ds(a).variable(u))}),this.accumulatedSecondMoment[o]==null&&(this.accumulatedSecondMoment[o]={originalName:`${i}/v`,variable:He(()=>ds(a).variable(u))});const l=Array.isArray(e)?e[o].tensor:e[i];if(l==null)return;const c=this.accumulatedFirstMoment[o].variable,d=this.accumulatedSecondMoment[o].variable,f=ke(fe(c,this.beta1),fe(l,1-this.beta1)),h=ke(fe(d,this.beta2),fe(Xs(l),1-this.beta2)),p=lt(f,r),y=lt(h,s);c.assign(f),d.assign(h);const b=ke(fe(lt(p,ke(Ko(y),this.epsilon)),-this.learningRate),a);a.assign(b)}),this.accBeta1.assign(fe(this.accBeta1,this.beta1)),this.accBeta2.assign(fe(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&rn(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&rn(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),He(()=>{this.accBeta1.assign(Ah(this.beta1,this.iterations_+1)),this.accBeta2.assign(Ah(this.beta2,this.iterations_+1))});const n=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hY extends Rl{static get className(){return"Adamax"}constructor(e,n,r,s=null,i=0){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=s,this.decay=i,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],He(()=>{this.iteration=Qe(0).variable(),this.accBeta1=Qe(n).variable()}),s==null&&(this.epsilon=j.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);He(()=>{const r=Pe(1,this.accBeta1),s=lt(-this.learningRate,ke(fe(this.iteration,this.decay),1));n.forEach((i,o)=>{const a=j.registeredVariables[i],u=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${i}/m`,variable:ds(a).variable(u)}),this.accumulatedWeightedInfNorm[o]==null&&(this.accumulatedWeightedInfNorm[o]={originalName:`${i}/v`,variable:ds(a).variable(u)});const l=Array.isArray(e)?e[o].tensor:e[i];if(l==null)return;const c=this.accumulatedFirstMoment[o].variable,d=this.accumulatedWeightedInfNorm[o].variable,f=ke(fe(c,this.beta1),fe(l,1-this.beta1)),h=fe(d,this.beta2),p=ss(l),y=g4(h,p);c.assign(f),d.assign(y);const b=ke(fe(lt(s,r),lt(f,ke(y,this.epsilon))),a);a.assign(b)}),this.iteration.assign(ke(this.iteration,1)),this.accBeta1.assign(fe(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&rn(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&rn(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $4 extends Rl{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=Array.isArray(e)?e[s].tensor:e[r];if(i==null)return;const o=j.registeredVariables[r];He(()=>{const a=ke(fe(this.c,i),o);o.assign(a)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=to(Qe(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pY extends $4{static get className(){return"Momentum"}constructor(e,n,r=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=Qe(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=j.registeredVariables[r];this.accumulations[s]==null&&(this.accumulations[s]={originalName:`${r}/momentum`,variable:He(()=>ds(i).variable(!1))});const o=this.accumulations[s].variable,a=Array.isArray(e)?e[s].tensor:e[r];a!=null&&He(()=>{let u;const l=ke(fe(this.m,o),a);this.useNesterov?u=ke(fe(this.c,ke(a,fe(l,this.m))),i):u=ke(fe(this.c,l),i),o.assign(l),i.assign(u)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&rn(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mY extends Rl{static get className(){return"RMSProp"}constructor(e,n=.9,r=0,s=null,i=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=r,this.epsilon=s,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=i,s==null&&(this.epsilon=j.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=j.registeredVariables[r],o=!1;this.accumulatedMeanSquares[s]==null&&(this.accumulatedMeanSquares[s]={originalName:`${r}/rms`,variable:He(()=>ds(i).variable(o))}),this.accumulatedMoments[s]==null&&(this.accumulatedMoments[s]={originalName:`${r}/momentum`,variable:He(()=>ds(i).variable(o))}),this.accumulatedMeanGrads[s]==null&&this.centered&&(this.accumulatedMeanGrads[s]={originalName:`${r}/mg`,variable:He(()=>ds(i).variable(o))});const a=Array.isArray(e)?e[s].tensor:e[r];if(a==null)return;const u=this.accumulatedMeanSquares[s].variable,l=this.accumulatedMoments[s].variable;He(()=>{const c=ke(fe(u,this.decay),fe(Xs(a),1-this.decay));if(this.centered){const d=this.accumulatedMeanGrads[s].variable,f=ke(fe(d,this.decay),fe(a,1-this.decay)),h=lt(fe(a,this.learningRate),Ko(Pe(c,ke(Xs(f),this.epsilon)))),p=ke(fe(l,this.momentum),h);u.assign(c),d.assign(f),l.assign(p);const y=Pe(i,p);i.assign(y)}else{const d=ke(fe(u,this.decay),fe(Xs(a),1-this.decay)),f=ke(fe(l,this.momentum),lt(fe(a,this.learningRate),Ko(ke(d,this.epsilon))));u.assign(d),l.assign(f);const h=Pe(i,f);i.assign(h)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&rn(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&rn(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&rn(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedMoments=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gY=[cY,dY,fY,hY,pY,mY,$4];function yY(){for(const t of gY)lY(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bY="model",vY=".json",wY=".weights.bin";function QC(t){return new Promise(e=>setTimeout(e)).then(t)}class bl{constructor(e){if(!X().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(bl.URL_SCHEME)&&(e=e.slice(bl.URL_SCHEME.length)),(e==null||e.length===0)&&(e=bY),this.modelJsonFileName=e+vY,this.weightDataFileName=e+wY}async save(e){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const n=$i.join(e.weightData),r=window.URL.createObjectURL(new Blob([n],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const s=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],i=FP(e,s),o=window.URL.createObjectURL(new Blob([JSON.stringify(i)],{type:"application/json"})),a=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(a.download=this.modelJsonFileName,a.href=o,await QC(()=>a.dispatchEvent(new MouseEvent("click"))),e.weightData!=null){const u=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;u.download=this.weightDataFileName,u.href=r,await QC(()=>u.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:Wh(e)}}}}bl.URL_SCHEME="downloads://";class xY{constructor(e){if(e==null||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise((e,n)=>{const r=new FileReader;r.onload=s=>{const i=JSON.parse(s.target.result),o=i.modelTopology;if(o==null){n(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(i.weightsManifest==null){n(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){e({modelTopology:o});return}const u=Qx(i,l=>this.loadWeights(l));e(u)},r.onerror=s=>n(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),r.readAsText(this.jsonFile)})}loadWeights(e){const n=[],r=[];for(const o of e)n.push(...o.weights),r.push(...o.paths);const s=this.checkManifestAndWeightFiles(e),i=r.map(o=>this.loadWeightsFile(o,s[o]));return Promise.all(i).then(o=>[n,o])}loadWeightsFile(e,n){return new Promise((r,s)=>{const i=new FileReader;i.onload=o=>{const a=o.target.result;r(a)},i.onerror=o=>s(`Failed to weights data from file of path '${e}'.`),i.readAsArrayBuffer(n)})}checkManifestAndWeightFiles(e){const n=[],r=this.weightsFiles.map(i=>KC(i.name)),s={};for(const i of e)i.paths.forEach(o=>{const a=KC(o);if(n.indexOf(a)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${a}'`);if(n.push(a),r.indexOf(a)===-1)throw new Error(`Weight file with basename '${a}' is not provided.`);s[o]=this.weightsFiles[r.indexOf(a)]});if(n.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${n.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return s}}const SY=t=>X().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(bl.URL_SCHEME)?AY(t.slice(bl.URL_SCHEME.length)):null;Wt.registerSaveRouter(SY);function AY(t="model"){return new bl(t)}function EY(t){return new xY(t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZC(t,e,n,r){o(t),n=n??0,r=r??1,a(n,r);let s=0;const i=u=>(u.then(l=>{const c=n+ ++s/t.length*(r-n);return e(c),l}),u);function o(u){R(u!=null&&Array.isArray(u)&&u.length>0,()=>"promises must be a none empty array")}function a(u,l){R(u>=0&&u<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${u}`),R(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${l}`),R(l>=u,()=>`startFraction must be no more than endFraction, but got startFraction ${u} and endFraction ${l}`)}return Promise.all(t.map(i))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function B4(t,e){e==null&&(e={});const n=e.fetchFunc==null?X().platform.fetch:e.fetchFunc,r=t.map(d=>n(d,e.requestInit,{isBinary:!0})),a=(e.onProgress==null?await Promise.all(r):await ZC(r,e.onProgress,0,.5)).map(d=>d.arrayBuffer());return e.onProgress==null?await Promise.all(a):await ZC(a,e.onProgress,.5,1)}function CY(t,e){var n;const r=e.fetchFunc==null?X().platform.fetch:e.fetchFunc;let s=0,i;return(n=e.onProgress)===null||n===void 0||n.call(e,0),new ReadableStream({pull:async o=>{for(var a;s<t.length;){i||(i=(await r(t[s],e.requestInit,{isBinary:!0})).body.getReader());const{done:u,value:l}=await i.read();if(u){s++,i=void 0,(a=e.onProgress)===null||a===void 0||a.call(e,s/t.length);continue}o.enqueue(l);return}o.close()}})}async function NY(t,e="",n,r){return M4(o=>B4(o,{requestInit:r}))(t,e,n)}function M4(t){return async(e,n="",r)=>{const s=e.map(()=>!1),i={},o=r!=null?r.map(()=>!1):[],a=[];if(e.forEach((h,p)=>{let y=0;h.weights.forEach(b=>{const g="quantization"in b?b.quantization.dtype:b.dtype,v=fl[g]*de(b.shape),w=()=>{s[p]=!0,i[p]==null&&(i[p]=[]),i[p].push({manifestEntry:b,groupOffset:y,sizeBytes:v})};r!=null?r.forEach((x,N)=>{x===b.name&&(w(),o[N]=!0)}):w(),a.push(b.name),y+=v})}),!o.every(h=>h)){const h=r.filter((p,y)=>!o[y]);throw new Error(`Could not find weights in manifest with names: ${h.join(", ")}. 
Manifest JSON has weights with names: ${a.join(", ")}.`)}const u=s.reduce((h,p,y)=>(p&&h.push(y),h),[]),l=[];u.forEach(h=>{e[h].paths.forEach(p=>{const y=n+(n.endsWith("/")?"":"/")+p;l.push(y)})});const c=await t(l),d={};let f=0;return u.forEach(h=>{const p=e[h].paths.length,y=new $i(c.slice(f,f+p));i[h].forEach(g=>{const v=y.slice(g.groupOffset,g.groupOffset+g.sizeBytes),w=PP(v,[g.manifestEntry]);for(const x in w)d[x]=w[x]}),f+=p}),d}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Y="application/octet-stream",TY="application/json";class v2{constructor(e,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.weightUrlConverter=n.weightUrlConverter,n.fetchFunc!=null?(R(typeof n.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=n.fetchFunc):this.fetch=X().platform.fetch,R(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&R(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{},this.loadOptions=n}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);n.body=new FormData;const r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],s=FP(e,r);if(n.body.append("model.json",new Blob([JSON.stringify(s)],{type:TY}),"model.json"),e.weightData!=null){const o=$i.join(e.weightData);n.body.append("model.weights.bin",new Blob([o],{type:_Y}),"model.weights.bin")}const i=await this.fetch(this.path,n);if(i.ok)return{modelArtifactsInfo:Wh(e),responses:[i]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${i.status}.`)}async loadModelJSON(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let n;try{n=await e.json()}catch{let o=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?o+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":o+=" Please make sure the server is serving valid JSON for this request.",new Error(o)}const r=n.modelTopology,s=n.weightsManifest;if(r==null&&s==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return n}async load(){if(this.loadOptions.streamWeights)return this.loadStream();const e=await this.loadModelJSON();return Qx(e,n=>this.loadWeights(n))}async loadStream(){const e=await this.loadModelJSON(),n=await this.getWeightUrls(e.weightsManifest),r=Dv(e.weightsManifest),s=()=>CY(n,this.loadOptions);return Object.assign(Object.assign({},e),{weightSpecs:r,getWeightStream:s})}async getWeightUrls(e){const n=Array.isArray(this.path)?this.path[1]:this.path,[r,s]=IY(n),i=this.weightPathPrefix||r,o=[],a=[];for(const u of e)for(const l of u.paths)this.weightUrlConverter!=null?a.push(this.weightUrlConverter(l)):o.push(i+l+s);return this.weightUrlConverter&&o.push(...await Promise.all(a)),o}async loadWeights(e){const n=await this.getWeightUrls(e),r=Dv(e),s=await B4(n,this.loadOptions);return[r,s]}}v2.URL_SCHEME_REGEX=/^https?:\/\//;function IY(t){const e=t.lastIndexOf("/"),n=t.lastIndexOf("?"),r=t.substring(0,e),s=n>e?t.substring(n):"";return[r+"/",s]}function Uv(t){return t.match(v2.URL_SCHEME_REGEX)!=null}const V4=(t,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let n=!0;if(Array.isArray(t)?n=t.every(r=>Uv(r)):n=Uv(t),n)return w2(t,e)}return null};Wt.registerSaveRouter(V4);Wt.registerLoadRouter(V4);function w2(t,e){return new v2(t,e)}function kY(t,e){return w2(t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Oy{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class U4{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class RY{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=n=>Promise.resolve(e.save(n)))}}function OY(t,e,n,r){const s=arguments;return new RY(z4(...s))}function z4(t,e,n,r){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new Oy(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Oy({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Oy({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r}))}function PY(t){return new U4(t)}function DY(t){return new U4(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j4=Object.freeze(Object.defineProperty({__proto__:null,CompositeArrayBuffer:$i,browserFiles:EY,browserHTTPRequest:kY,concatenateArrayBuffers:F7,copyModel:sj,decodeWeights:PP,decodeWeightsStream:LP,encodeWeights:k7,fromMemory:OY,fromMemorySync:z4,getLoadHandlers:W7,getModelArtifactsForJSON:Qx,getModelArtifactsForJSONSync:$P,getModelArtifactsInfoForJSON:Wh,getSaveHandlers:j7,getWeightSpecs:Dv,http:w2,isHTTPScheme:Uv,listModels:nj,loadWeights:NY,moveModel:ij,registerLoadRouter:z7,registerSaveRouter:U7,removeModel:rj,weightsLoaderFactory:M4,withSaveHandler:PY,withSaveHandlerSync:DY},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let Au;function LY(t,e=3){if(e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(t==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,s=!1,i=!1,o=!1,a=!1;if(t.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&t instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)s=!0;else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)i=!0;else if(t.getContext!=null)o=!0;else if(typeof ImageBitmap<"u"&&t instanceof ImageBitmap)a=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${t.constructor.name}`);if(_v(Av,j.backendName)!=null){const p={pixels:t},y={numChannels:e};return j.runKernel(Av,p,y)}const[l,c]=s?[t.videoWidth,t.videoHeight]:[t.width,t.height];let d;if(o)d=t.getContext("2d").getImageData(0,0,l,c).data;else if(r||n)d=t.data;else if(i||s||a){if(Au==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")Au=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else Au=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});Au.canvas.width=l,Au.canvas.height=c,Au.drawImage(t,0,0,l,c),d=Au.getImageData(0,0,l,c).data}let f;if(e===4)f=new Int32Array(d);else{const p=l*c;f=new Int32Array(p*e);for(let y=0;y<p;y++)for(let b=0;b<e;++b)f[y*e+b]=d[y*4+b]}return _4(f,[c,l,e],"int32")}const FY=B({fromPixels_:LY});function W4(t,e){const n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(de(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const s=e.shape,i=s[s.length-1];let o=1;for(let d=0;d<s.length-1;++d)o*=s[d];const a=t.shape,u=s.slice();u.pop();let l=1;for(let d=i;d<n;++d)l*=a[d],u.push(a[d]);const c=[...Ln(t.shape).map(d=>d/l),1].slice(0,i);return[u,o,l,c]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zv=-2,$Y=-1;function q4(t,e,n){const r=t.shape.length;R(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),R(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let s=0;s<r;++s)R(e[s]+n[s]<=t.shape[s],()=>`Error in slice${r}D: begin[${s}] + size[${s}] (${e[s]+n[s]}) would overflow input.shape[${s}] (${t.shape[s]})`)}function BY(t){const e=[];let n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function G4(t,e,n){const r=[];for(let s=0;s<t.length;s++)r[s]=Math.ceil((e[s]-t[s])/n[s]);return r}function H4(t,e,n,r){const s=[...t];for(let i=s.length;i<r.length;i++)s.push(1);for(let i=0;i<n;i++)i===0?s[e]=1:(s.splice(e,0,1),s.pop());return s}function K4(t,e,n){return n<=t?n:n-(e-1)}function X4(t,e){const n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function MY(t,e,n,r,s,i,o,a,u){const l=t.length;let c=new Array(l),d=new Array(l),f=new Array(l);if(e.length&&n>0){const h=e[0],p=n+1;c=Y4(o,h,p,r,t),d=Q4(a,h,p,s,t),f=H4(i,h,p,t)}else for(let h=0;h<l;h++)c[h]=J4(o,r,i,t,h,u),d[h]=eD(a,s,i,t,h,u),f[h]=Z4(i,h,u);return{begin:c,end:d,strides:f}}function Y4(t,e,n,r,s){const i=[...s],o=X4(n,e);for(let a=0;a<i.length;a++)if(o.indexOf(a)>-1)i[a]=0;else{const u=K4(e,n,a);let l=r[u];t&1<<u&&(l=0),i[a]=l}return i}function Q4(t,e,n,r,s){const i=[...s],o=X4(n,e);for(let a=0;a<i.length;a++)if(o.indexOf(a)>-1)i[a]=Number.MAX_SAFE_INTEGER;else{const u=K4(e,n,a);let l=r[u];t&1<<u&&(l=Number.MAX_SAFE_INTEGER),i[a]=l}for(let a=0;a<i.length;a++){const u=s[a];i[a]<0&&(i[a]+=u),i[a]=R0(0,i[a],s[a])}return i}function Z4(t,e,n){let r=t[e];return(n&1<<e||r==null)&&(r=1),r}function J4(t,e,n,r,s,i){let o=e[s];const a=n[s]||1;(t&1<<s||i&1<<s||o==null)&&(a>0?o=Number.MIN_SAFE_INTEGER:o=Number.MAX_SAFE_INTEGER);const u=r[s];return o<0&&(o+=u),o=R0(0,o,u-1),o}function eD(t,e,n,r,s,i){let o=e[s];const a=n[s]||1;(t&1<<s||i&1<<s||o==null)&&(a>0?o=Number.MAX_SAFE_INTEGER:o=Number.MIN_SAFE_INTEGER);const u=r[s];return o<0&&(o+=u),a>0?o=R0(0,o,u):o=R0(-1,o,u-1),o}function x2(t,e,n){let r=n.length;for(let s=0;s<n.length;s++)if(n[s]>1){r=s;break}for(let s=r+1;s<n.length;s++)if(e[s]>0||n[s]!==t[s])return!1;return!0}function S2(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function tD(t,e,n){let r;const s=t.shape.length;typeof e=="number"?r=[e,...new Array(s-1).fill(0)]:e.length<s?r=e.concat(new Array(s-e.length).fill(0)):r=e.slice(),r.forEach(o=>{R(o!==-1,()=>"slice() does not support negative begin indexing.")});let i;return n==null?i=new Array(s).fill(-1):typeof n=="number"?i=[n,...new Array(s-1).fill(-1)]:n.length<s?i=n.concat(new Array(s-n.length).fill(-1)):i=n,i=i.map((o,a)=>o>=0?o:(R(o===-1,()=>`Negative size values should be exactly -1 but got ${o} for the slice() size at index ${a}.`),t.shape[a]-r[a])),[r,i]}function nD(t,e,n,r,s,i,o,a,u){let l;if(r==null?(l=new Array(e.length),l.fill(1)):l=r,o!=null&&o&o-1)throw new Error("Multiple ellipses in slice is not allowed.");let c=!1;const d={dims:l.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:l.slice(),beginMask:s,endMask:i,ellipsisMask:o,newAxisMask:a,shrinkAxisMask:u};for(let w=0;w<d.dims;w++)c&&1<<w&a&&d.numAddAxisAfterEllipsis++,1<<w&o&&(c=!0);c||(d.ellipsisMask|=1<<d.dims,d.dims++);const f={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};VY(d,f);let h=!0,p=!0,y=!0;const b=[],g=[];for(let w=0;w<t.length;++w){if(f.strides[w]===0)throw Error(`strides[${w}] must be non-zero`);const x=!!(f.shrinkAxisMask&1<<w),N=t[w];if(N===-1){b.push(x?1:-1);continue}const k=[f.beginMask&1<<w,f.endMask&1<<w],O=[f.strides[w]>0?0:-1,f.strides[w]>0?N:N-1];if(x&&f.strides[w]<=0)throw Error("only stride 1 allowed on non-range indexing.");y=y&&f.strides[w]===1;const _=!!(f.beginMask&1<<w&&f.endMask&1<<w);if(f.beginValid&&f.endValid){if(x){const Z=f.begin[w]<0?N+f.begin[w]:f.begin[w];if(f.begin[w]=Z,f.end[w]=f.begin[w]+1,Z<0||Z>=N)throw Error(`slice index ${f.begin[w]} of dimension ${w} out of bounds.`)}else f.begin[w]=JC(f.begin[w],0,f.strides[w],N,k,O),f.end[w]=JC(f.end[w],1,f.strides[w],N,k,O);const K=f.strides[w]===1&&f.begin[w]===0&&f.end[w]===N;h=h&&K,p=p&&(w===0&&f.strides[w]===1||K)}else h=h&&f.strides[w]===1&&_,p=p&&(w===0&&f.strides[w]===1||_);let $,M=!1;if(f.beginValid&&f.endValid?($=f.end[w]-f.begin[w],M=!0):x?($=1,M=!0):_&&N>=0&&(f.strides[w]<0?$=-N:$=N,M=!0),M){let K;$===0||$<0!=f.strides[w]<0?K=0:K=Math.trunc($/f.strides[w])+($%f.strides[w]!==0?1:0),b.push(K)}else b.push(-1)}for(let w=0;w<f.finalShapeGatherIndices.length;++w){const x=f.finalShapeGatherIndices[w];x>=0?g.push(b[x]):x===zv&&g.push(1)}return{finalShapeSparse:g.filter((w,x)=>f.finalShapeGatherIndices[x]!==zv),finalShape:g,isIdentity:h,sliceDim0:p,isSimpleSlice:y,begin:f.begin,end:f.end,strides:f.strides}}function VY(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){const s=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<s;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(zv),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[r]),t.end!=null&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push($Y),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}function JC(t,e,n,r,s,i){if(s[e])return n>0?i[e]:i[e+1&1];{const o=t<0?r+t:t;return o<i[0]?i[0]:o>i[1]?i[1]:o}}const UY=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:q4,computeFlatOffset:S2,computeOutShape:G4,getNormalizedAxes:MY,isSliceContinous:x2,maskToAxes:BY,parseSliceParams:tD,sliceInfo:nD,startForAxis:J4,startIndicesWithElidedDims:Y4,stopForAxis:eD,stopIndicesWithElidedDims:Q4,stridesForAxis:Z4,stridesWithElidedDims:H4},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zY=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function jY(){return new Promise(t=>zY(()=>t()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rD(t,e){const n=t[0].length;t.forEach((s,i)=>{R(s.length===n,()=>`Error in concat${n}D: rank of tensors[${i}] must be the same as the rank of the rest (${n})`)}),R(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=t[0];t.forEach((s,i)=>{for(let o=0;o<n;o++)R(o===e||s[o]===r[o],()=>`Error in concat${n}D: Shape of tensors[${i}] (${s}) does not match the shape of the rest (${r}) along the non-concatenated axis ${i}.`)})}function vl(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Ni;(function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"})(Ni||(Ni={}));function sD(t,e,n){let r=new Array;if(n==null&&e==null)return r;if(e==null)for(;r.length<t+n.length;)r.push(-1);else r=e.slice();if(n==null)return r;if(t+n.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${r.length}`);for(let s=1;s<n.length;++s){const i=n[s],o=r[r.length-n.length+s],a=r[o];if(i>=0)if(a>=0){if(a!==i)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${s+t}] = ${i} but shape[${s+t}] = ${a}`)}else r[o]=i}return r}function iD(t){const e={FIRST_DIM_SIZE:Ni.FIRST_DIM_SIZE,VALUE_ROWIDS:Ni.VALUE_ROWIDS,ROW_LENGTHS:Ni.ROW_LENGTHS,ROW_SPLITS:Ni.ROW_SPLITS,ROW_LIMITS:Ni.ROW_LIMITS,ROW_STARTS:Ni.ROW_STARTS},n=[];for(const r of t)if(r in e)n.push(e[r]);else break;return n}function oD(t){return t.length===0?0:t[0]===Ni.FIRST_DIM_SIZE?t.length-1:t.length}function aD(t,e){if(t==null||e==null)return;const n=t.length,r=e.length;if(n>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let s=0;s<Math.min(n,r-1);++s){const i=t[s],o=e[s+1];if(i>=0&&o>=0&&i!==1&&i!==o)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${s-t.length}] = ${i} but ragged tensor input.flatValues.shape[${s-t.length}] = ${o}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A2=30;function Gg(t){return t<=A2?t:wv(t,Math.floor(Math.sqrt(t)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uD(t,e,n){const r=n*(typeof t=="number"?t:t[0]),s=e*(typeof t=="number"?t:t[1]);return[r,s]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E2(t,e,n,r=!0){let s=[];if(r)s=s.concat(e.slice(0)),s.push(t[0]/n),s=s.concat(t.slice(1));else{s=s.concat(t[0]);const i=e.length;for(let o=0;o<i;++o)s=s.concat([t[o+1]/e[o],e[o]]);s=s.concat(t.slice(i+1))}return s}function C2(t,e,n=!0){const r=[];if(n){r.push(e);for(let s=e+1;s<t;++s)s<=2*e?(r.push(s),r.push(s-(e+1))):r.push(s)}else{const s=[],i=[];for(let o=1;o<t;++o)o>=e*2+1||o%2===1?i.push(o):s.push(o);r.push(...s),r.push(0),r.push(...i)}return r}function N2(t,e,n,r=!0){const s=[];r?s.push(t[0]/n):s.push(t[0]*n);for(let i=1;i<t.length;++i)i<=e.length?r?s.push(e[i-1]*t[i]):s.push(t[i]/e[i-1]):s.push(t[i]);return s}function lD(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function cD(t,e,n){const r=t.slice(0,1);for(let s=0;s<n;++s)r.push(t[s+1]-e[s][0]-e[s][1]);return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dD=1.7580993408473768,fD=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hD=.3275911,pD=.254829592,mD=-.284496736,gD=1.421413741,yD=-1.453152027,bD=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jv(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(t.length*2);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function WY(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function qY(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let s=0;s<t.length;s+=4)n[Math.floor(s/4)]=t[s],r[Math.floor(s/4)]=t[s+1];return{real:n,imag:r}}function GY(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let s=2;s<t.length;s+=4)n[Math.floor(s/4)]=t[s],r[Math.floor(s/4)]=t[s+1];return{real:n,imag:r}}function HY(t,e){const n=t[e*2],r=t[e*2+1];return{real:n,imag:r}}function KY(t,e,n,r){t[r*2]=e,t[r*2+1]=n}function XY(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let s=0;s<Math.ceil(t/2);s++){const i=(e?2:-2)*Math.PI*(s/t);n[s]=Math.cos(i),r[s]=Math.sin(i)}return{real:n,imag:r}}function YY(t,e,n){const r=(n?2:-2)*Math.PI*(t/e),s=Math.cos(r),i=Math.sin(r);return{real:s,imag:i}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Py="->",QY=/->/g,eN=",",tN="...";function vD(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(QY,"").length)/Py.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${Py}").`);const[r,s]=t.split(Py);R(r.indexOf(tN)===-1,()=>`The ellipsis notation ("${tN}") is not supported yet.`);const i=r.split(eN),o=i.length;if(e!==o)throw new Error(`Expected ${o} input tensors, received ${e}`);if(o>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const a=[];for(let f=0;f<s.length;++f){const h=s[f];if(!i.some(p=>p.indexOf(h)!==-1))throw new Error(`Output subscripts contain the label ${h} not present in the input subscripts.`);a.indexOf(h)===-1&&a.push(h)}for(let f=0;f<r.length;++f){const h=r[f];a.indexOf(h)===-1&&h!==eN&&a.push(h)}const u=new Array(i.length);for(let f=0;f<o;++f){if(new Set(i[f].split("")).size!==i[f].length)throw new Error(`Found duplicate axes in input component ${i[f]}. Support for duplicate axes in input is not implemented yet.`);u[f]=[];for(let h=0;h<i[f].length;++h)u[f].push(a.indexOf(i[f][h]))}const l=a.length,c=s.length,d=[];for(let f=c;f<l;++f)d.push(f);return{allDims:a,summedDims:d,idDims:u}}function wD(t,e){let n=new Array(t);n.fill(-1);for(let s=0;s<e.length;++s)n[e[s]]=s;const r=[];for(let s=0;s<t;++s)n[s]===-1&&r.push(s);return n=n.filter(s=>s!==-1),{permutationIndices:n,expandDims:r}}function xD(t,e,n){const r=new Array(t);for(let s=0;s<n.length;++s){const i=n[s].shape;for(let o=0;o<e[s].length;++o)r[e[s][o]]===void 0?r[e[s][o]]=i[o]:R(r[e[s][o]]===i[o],()=>`Expected dimension ${r[e[s][o]]} at axis ${o} of input shaped ${JSON.stringify(i)}, but got dimension ${i[o]}`)}}function SD(t,e){const n=t,r=[];let s=0;t.length===0&&n.push(-1),s=t.length+1;for(let o=0;o<s;++o)r.push([]);const i=[];for(let o=0;o<n.length;++o){const a=n[o],u=ZY(e,a);for(const l of u)i.indexOf(l)===-1&&(r[o].push(l),i.push(l))}return{path:n,steps:r}}function AD(t){return t.every((e,n)=>e===n)}function ZY(t,e){const n=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(e)!==-1||e===-1)&&n.push(r);return n}function ED(t,e,n=0){let r=[];if(typeof e=="number")R(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{const s=e.reduce((o,a)=>(a===-1&&(o+=1),o),0);R(s<=1,()=>"There should be only one negative value in split array.");const i=e.indexOf(-1);if(i!==-1){const o=e.reduce((a,u)=>u>0?a+u:a);e[i]=t.shape[n]-o}R(t.shape[n]===e.reduce((o,a)=>o+a),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CD(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function ND(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function _D(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TD(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function ID(t,e){return`size ${t} must be non-negative, not ${e}`}function kD(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function RD(t,e){const n=de(t),r=de(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${e}`}function OD(t,e){const n=de(t),r=de(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wv(){return"segment ids must be >= 0"}function PD(){return"segment ids are not increasing"}function DD(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function LD(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FD(t,e){let n=!1,r;for(t<=A2?(r=t,n=!0):r=wv(t,Math.floor(Math.sqrt(t)));!n;)r>e||r===t?n=!0:r=wv(t,r+1);return r}function $D(t,e,n){const r=[],s=t.length;for(let i=0;i<s;i++)i!==e?r.push(t[i]):r.push(n);return r}function BD(t,e,n,r){const s=e.shape.length,i=t.shape.length;if(r!==0&&(r<-s||r>s))throw new Error(`Expect batchDims in the range of [-${s}, ${s}], but got ${r}`);if(r<0&&(r+=s),r>i)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${i}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let d=0;d<r;++d)if(t.shape[d]!==e.shape[d])throw new Error(`x.shape[${d}]: ${t.shape[d]} should be equal to indices.shape[${d}]: ${e.shape[d]}.`);const o=t.shape[n],a=[];let u=1,l=1,c=1;for(let d=0;d<r;++d)a.push(t.shape[d]),u*=t.shape[d];for(let d=r;d<n;d++)a.push(t.shape[d]),l*=t.shape[d];for(let d=r;d<s;d++)a.push(e.shape[d]);for(let d=n+1;d<i;d++)a.push(t.shape[d]),c*=t.shape[d];return{batchSize:u,sliceSize:c,outerSize:l,dimSize:o,outputShape:a}}const JY=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:BD,computeOutShape:$D,segOpComputeOptimalWindowSize:FD},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cd(t){try{return t.map(e=>od(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function MD(t){return t.map(e=>Qu(e))}const eQ=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:pD,ERF_A2:mD,ERF_A3:gD,ERF_A4:yD,ERF_A5:bD,ERF_P:hD,PARALLELIZE_THRESHOLD:A2,get RowPartitionType(){return Ni},SELU_SCALE:fD,SELU_SCALEALPHA:dD,applyActivation:Wg,assertAndGetBroadcastShape:it,assertAxesAreInnerMostDims:Bi,assertParamsConsistent:rD,assignToTypedArray:KY,axesAreInnerMostDims:e2,calculateShapes:Ug,checkEinsumDimSizes:xD,checkPadOnDimRoundingMode:ti,combineLocations:s4,combineRaggedTensorToTensorShapes:sD,complexWithEvenIndex:qY,complexWithOddIndex:GY,computeConv2DInfo:xs,computeConv3DInfo:Gh,computeDefaultPad:Zx,computeDilation2DInfo:YP,computeOptimalWindowSize:Gg,computeOutAndReduceShapes:po,computeOutShape:vl,computePool2DInfo:Tl,computePool3DInfo:qh,convertConv2DDataFormat:xd,decodeEinsumEquation:vD,eitherStridesOrDilationsAreOne:Xr,expandShapeToKeepDim:Ss,exponent:YY,exponents:XY,fromStringArrayToUint8:MD,fromUint8ToStringArray:cd,getAxesPermutation:ni,getBroadcastDims:$0,getComplexWithIndex:HY,getEinsumComputePath:SD,getEinsumPermutation:wD,getFusedBiasGradient:jg,getFusedDyActivation:zg,getImageCenter:uD,getInnerMostAxes:ri,getPermuted:C2,getRaggedRank:oD,getReductionAxes:t4,getReshaped:E2,getReshapedPermuted:N2,getRowPartitionTypesHelper:iD,getSliceBeginCoords:lD,getSliceSize:cD,getSparseFillEmptyRowsIndicesDenseShapeMismatch:CD,getSparseFillEmptyRowsNegativeIndexErrorMessage:ND,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:_D,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:kD,getSparseReshapeInputOutputMismatchErrorMessage:OD,getSparseReshapeInputOutputMultipleErrorMessage:RD,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:TD,getSparseReshapeNegativeOutputDimErrorMessage:ID,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:LD,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:Wv,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:PD,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:DD,getUndoAxesPermutation:t2,isIdentityPermutation:AD,log:Jz,mergeRealAndImagArrays:jv,prepareAndValidate:W4,prepareSplitSize:ED,segment_util:JY,shouldFuse:qg,slice_util:UY,splitRealAndImagArrays:WY,stridesOrDilationsArePositive:ml,tupleValuesAreOne:Sh,upcastType:fo,validateDefaultValueShape:aD,validateInput:m2,validateUpdateShape:T4,warn:Ti},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */yY();const qv="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",rr=480,sr=288,Fm=25,Na=2*Fm,VD=["b","k","n","p","q","r","B","K","N","P","Q","R"],nN=["b","k","n","p","q","r"],q0=["a1","b1","c1","d1","e1","f1","g1","h1","a2","b2","c2","d2","e2","f2","g2","h2","a3","b3","c3","d3","e3","f3","g3","h3","a4","b4","c4","d4","e4","f4","g4","h4","a5","b5","c5","d5","e5","f5","g5","h5","a6","b6","c6","d6","e6","f6","g6","h6","a7","b7","c7","d7","e7","f7","g7","h7","a8","b8","c8","d8","e8","f8","g8","h8"],vi=128,qp=8*vi,_2=["h1","a1","a8","h8"],tQ=()=>{const t={};return VD.forEach((e,n)=>{t[e]=n}),t},Rf=tQ(),nQ=()=>{const t={};return q0.forEach((e,n)=>{t[e]=n}),t},wi=nQ(),rN=["#FF3838","#FF9D97","#FF701F","#FFB21D","#CFD231","#48F90A","#92CC17","#3DDB86","#1A9334","#00D4BB","#2C99A8","#00C2FF"],Gv=16/9,UD={audio:!1,video:{facingMode:{ideal:"environment"},width:{ideal:640},aspectRatio:Gv,resizeMode:"none"}},zD=t=>{t.clearRect(0,0,t.canvas.width,t.canvas.height)},jD=t=>{const e=t.getContext("2d");e.globalAlpha=.8;const n=e.canvas.width,r=e.canvas.height;zD(e);const i=`${Math.max(Math.round(Math.max(n,r)/40),14)}px Arial`,o=parseInt(i,10),a=Math.max(Math.min(n,r)/200,2.5);e.textBaseline="top",e.lineWidth=a,e.font=i;const u=n/rr,l=r/sr;return[e,o,a,u,l]},WD=(t,e,n,r,s)=>{t.strokeStyle=n,e.forEach((i,o)=>{t.strokeRect(i[0]*r,i[1]*s,1,1)})},rQ=(t,e,n,r,s)=>{t.strokeStyle=n,t.beginPath();const i=e.length;for(let o=0;o<i;o++)t.moveTo(e[o][0]*r,e[o][1]*s),t.lineTo(e[(o+1)%i][0]*r,e[(o+1)%i][1]*s);t.stroke()},sQ=(t,e,n,r,s,i,o)=>{t.fillStyle=e;const a=t.measureText(s).width,u=r-o-i/2,l=n-a/2;t.fillRect(l,u,a+o,i+o),t.fillStyle="#ffffff",t.fillText(s,l,u)},iQ=(t,e)=>{const[n,r,s,i,o]=jD(t);WD(n,e,"blue",i,o)},Uo=11102230246251565e-32,Jn=134217729,oQ=(3+8*Uo)*Uo;function Dy(t,e,n,r,s){let i,o,a,u,l=e[0],c=r[0],d=0,f=0;c>l==c>-l?(i=l,l=e[++d]):(i=c,c=r[++f]);let h=0;if(d<t&&f<n)for(c>l==c>-l?(o=l+i,a=i-(o-l),l=e[++d]):(o=c+i,a=i-(o-c),c=r[++f]),i=o,a!==0&&(s[h++]=a);d<t&&f<n;)c>l==c>-l?(o=i+l,u=o-i,a=i-(o-u)+(l-u),l=e[++d]):(o=i+c,u=o-i,a=i-(o-u)+(c-u),c=r[++f]),i=o,a!==0&&(s[h++]=a);for(;d<t;)o=i+l,u=o-i,a=i-(o-u)+(l-u),l=e[++d],i=o,a!==0&&(s[h++]=a);for(;f<n;)o=i+c,u=o-i,a=i-(o-u)+(c-u),c=r[++f],i=o,a!==0&&(s[h++]=a);return(i!==0||h===0)&&(s[h++]=i),h}function aQ(t,e){let n=e[0];for(let r=1;r<t;r++)n+=e[r];return n}function Kh(t){return new Float64Array(t)}const uQ=(3+16*Uo)*Uo,lQ=(2+12*Uo)*Uo,cQ=(9+64*Uo)*Uo*Uo,sc=Kh(4),sN=Kh(8),iN=Kh(12),oN=Kh(16),br=Kh(4);function dQ(t,e,n,r,s,i,o){let a,u,l,c,d,f,h,p,y,b,g,v,w,x,N,k,O,_;const $=t-s,M=n-s,K=e-i,Z=r-i;x=$*Z,f=Jn*$,h=f-(f-$),p=$-h,f=Jn*Z,y=f-(f-Z),b=Z-y,N=p*b-(x-h*y-p*y-h*b),k=K*M,f=Jn*K,h=f-(f-K),p=K-h,f=Jn*M,y=f-(f-M),b=M-y,O=p*b-(k-h*y-p*y-h*b),g=N-O,d=N-g,sc[0]=N-(g+d)+(d-O),v=x+g,d=v-x,w=x-(v-d)+(g-d),g=w-k,d=w-g,sc[1]=w-(g+d)+(d-k),_=v+g,d=_-v,sc[2]=v-(_-d)+(g-d),sc[3]=_;let ie=aQ(4,sc),ee=lQ*o;if(ie>=ee||-ie>=ee||(d=t-$,a=t-($+d)+(d-s),d=n-M,l=n-(M+d)+(d-s),d=e-K,u=e-(K+d)+(d-i),d=r-Z,c=r-(Z+d)+(d-i),a===0&&u===0&&l===0&&c===0)||(ee=cQ*o+oQ*Math.abs(ie),ie+=$*c+Z*a-(K*l+M*u),ie>=ee||-ie>=ee))return ie;x=a*Z,f=Jn*a,h=f-(f-a),p=a-h,f=Jn*Z,y=f-(f-Z),b=Z-y,N=p*b-(x-h*y-p*y-h*b),k=u*M,f=Jn*u,h=f-(f-u),p=u-h,f=Jn*M,y=f-(f-M),b=M-y,O=p*b-(k-h*y-p*y-h*b),g=N-O,d=N-g,br[0]=N-(g+d)+(d-O),v=x+g,d=v-x,w=x-(v-d)+(g-d),g=w-k,d=w-g,br[1]=w-(g+d)+(d-k),_=v+g,d=_-v,br[2]=v-(_-d)+(g-d),br[3]=_;const W=Dy(4,sc,4,br,sN);x=$*c,f=Jn*$,h=f-(f-$),p=$-h,f=Jn*c,y=f-(f-c),b=c-y,N=p*b-(x-h*y-p*y-h*b),k=K*l,f=Jn*K,h=f-(f-K),p=K-h,f=Jn*l,y=f-(f-l),b=l-y,O=p*b-(k-h*y-p*y-h*b),g=N-O,d=N-g,br[0]=N-(g+d)+(d-O),v=x+g,d=v-x,w=x-(v-d)+(g-d),g=w-k,d=w-g,br[1]=w-(g+d)+(d-k),_=v+g,d=_-v,br[2]=v-(_-d)+(g-d),br[3]=_;const V=Dy(W,sN,4,br,iN);x=a*c,f=Jn*a,h=f-(f-a),p=a-h,f=Jn*c,y=f-(f-c),b=c-y,N=p*b-(x-h*y-p*y-h*b),k=u*l,f=Jn*u,h=f-(f-u),p=u-h,f=Jn*l,y=f-(f-l),b=l-y,O=p*b-(k-h*y-p*y-h*b),g=N-O,d=N-g,br[0]=N-(g+d)+(d-O),v=x+g,d=v-x,w=x-(v-d)+(g-d),g=w-k,d=w-g,br[1]=w-(g+d)+(d-k),_=v+g,d=_-v,br[2]=v-(_-d)+(g-d),br[3]=_;const D=Dy(V,iN,4,br,oN);return oN[D-1]}function Gp(t,e,n,r,s,i){const o=(e-i)*(n-s),a=(t-s)*(r-i),u=o-a,l=Math.abs(o+a);return Math.abs(u)>=uQ*l?u:-dQ(t,e,n,r,s,i,l)}const aN=Math.pow(2,-52),Hp=new Uint32Array(512);class T2{static from(e,n=gQ,r=yQ){const s=e.length,i=new Float64Array(s*2);for(let o=0;o<s;o++){const a=e[o];i[2*o]=n(a),i[2*o+1]=r(a)}return new T2(i)}constructor(e){const n=e.length>>1;if(n>0&&typeof e[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=e;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:e,_hullPrev:n,_hullNext:r,_hullTri:s,_hullHash:i}=this,o=e.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let $=0;$<o;$++){const M=e[2*$],K=e[2*$+1];M<a&&(a=M),K<u&&(u=K),M>l&&(l=M),K>c&&(c=K),this._ids[$]=$}const d=(a+l)/2,f=(u+c)/2;let h,p,y;for(let $=0,M=1/0;$<o;$++){const K=Ly(d,f,e[2*$],e[2*$+1]);K<M&&(h=$,M=K)}const b=e[2*h],g=e[2*h+1];for(let $=0,M=1/0;$<o;$++){if($===h)continue;const K=Ly(b,g,e[2*$],e[2*$+1]);K<M&&K>0&&(p=$,M=K)}let v=e[2*p],w=e[2*p+1],x=1/0;for(let $=0;$<o;$++){if($===h||$===p)continue;const M=pQ(b,g,v,w,e[2*$],e[2*$+1]);M<x&&(y=$,x=M)}let N=e[2*y],k=e[2*y+1];if(x===1/0){for(let K=0;K<o;K++)this._dists[K]=e[2*K]-e[0]||e[2*K+1]-e[1];Ic(this._ids,this._dists,0,o-1);const $=new Uint32Array(o);let M=0;for(let K=0,Z=-1/0;K<o;K++){const ie=this._ids[K],ee=this._dists[ie];ee>Z&&($[M++]=ie,Z=ee)}this.hull=$.subarray(0,M),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(Gp(b,g,v,w,N,k)<0){const $=p,M=v,K=w;p=y,v=N,w=k,y=$,N=M,k=K}const O=mQ(b,g,v,w,N,k);this._cx=O.x,this._cy=O.y;for(let $=0;$<o;$++)this._dists[$]=Ly(e[2*$],e[2*$+1],O.x,O.y);Ic(this._ids,this._dists,0,o-1),this._hullStart=h;let _=3;r[h]=n[y]=p,r[p]=n[h]=y,r[y]=n[p]=h,s[h]=0,s[p]=1,s[y]=2,i.fill(-1),i[this._hashKey(b,g)]=h,i[this._hashKey(v,w)]=p,i[this._hashKey(N,k)]=y,this.trianglesLen=0,this._addTriangle(h,p,y,-1,-1,-1);for(let $=0,M,K;$<this._ids.length;$++){const Z=this._ids[$],ie=e[2*Z],ee=e[2*Z+1];if($>0&&Math.abs(ie-M)<=aN&&Math.abs(ee-K)<=aN||(M=ie,K=ee,Z===h||Z===p||Z===y))continue;let W=0;for(let F=0,ue=this._hashKey(ie,ee);F<this._hashSize&&(W=i[(ue+F)%this._hashSize],!(W!==-1&&W!==r[W]));F++);W=n[W];let V=W,D;for(;D=r[V],Gp(ie,ee,e[2*V],e[2*V+1],e[2*D],e[2*D+1])>=0;)if(V=D,V===W){V=-1;break}if(V===-1)continue;let L=this._addTriangle(V,Z,r[V],-1,-1,s[V]);s[Z]=this._legalize(L+2),s[V]=L,_++;let U=r[V];for(;D=r[U],Gp(ie,ee,e[2*U],e[2*U+1],e[2*D],e[2*D+1])<0;)L=this._addTriangle(U,Z,D,s[Z],-1,s[U]),s[Z]=this._legalize(L+2),r[U]=U,_--,U=D;if(V===W)for(;D=n[V],Gp(ie,ee,e[2*D],e[2*D+1],e[2*V],e[2*V+1])<0;)L=this._addTriangle(D,Z,V,-1,s[V],s[D]),this._legalize(L+2),s[D]=L,r[V]=V,_--,V=D;this._hullStart=n[Z]=V,r[V]=n[U]=Z,r[Z]=U,i[this._hashKey(ie,ee)]=Z,i[this._hashKey(e[2*V],e[2*V+1])]=V}this.hull=new Uint32Array(_);for(let $=0,M=this._hullStart;$<_;$++)this.hull[$]=M,M=r[M];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,n){return Math.floor(fQ(e-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const{_triangles:n,_halfedges:r,coords:s}=this;let i=0,o=0;for(;;){const a=r[e],u=e-e%3;if(o=u+(e+2)%3,a===-1){if(i===0)break;e=Hp[--i];continue}const l=a-a%3,c=u+(e+1)%3,d=l+(a+2)%3,f=n[o],h=n[e],p=n[c],y=n[d];if(hQ(s[2*f],s[2*f+1],s[2*h],s[2*h+1],s[2*p],s[2*p+1],s[2*y],s[2*y+1])){n[e]=y,n[a]=f;const g=r[d];if(g===-1){let w=this._hullStart;do{if(this._hullTri[w]===d){this._hullTri[w]=e;break}w=this._hullPrev[w]}while(w!==this._hullStart)}this._link(e,g),this._link(a,r[o]),this._link(o,d);const v=l+(a+1)%3;i<Hp.length&&(Hp[i++]=v)}else{if(i===0)break;e=Hp[--i]}}return o}_link(e,n){this._halfedges[e]=n,n!==-1&&(this._halfedges[n]=e)}_addTriangle(e,n,r,s,i,o){const a=this.trianglesLen;return this._triangles[a]=e,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,s),this._link(a+1,i),this._link(a+2,o),this.trianglesLen+=3,a}}function fQ(t,e){const n=t/(Math.abs(t)+Math.abs(e));return(e>0?3-n:1+n)/4}function Ly(t,e,n,r){const s=t-n,i=e-r;return s*s+i*i}function hQ(t,e,n,r,s,i,o,a){const u=t-o,l=e-a,c=n-o,d=r-a,f=s-o,h=i-a,p=u*u+l*l,y=c*c+d*d,b=f*f+h*h;return u*(d*b-y*h)-l*(c*b-y*f)+p*(c*h-d*f)<0}function pQ(t,e,n,r,s,i){const o=n-t,a=r-e,u=s-t,l=i-e,c=o*o+a*a,d=u*u+l*l,f=.5/(o*l-a*u),h=(l*c-a*d)*f,p=(o*d-u*c)*f;return h*h+p*p}function mQ(t,e,n,r,s,i){const o=n-t,a=r-e,u=s-t,l=i-e,c=o*o+a*a,d=u*u+l*l,f=.5/(o*l-a*u),h=t+(l*c-a*d)*f,p=e+(o*d-u*c)*f;return{x:h,y:p}}function Ic(t,e,n,r){if(r-n<=20)for(let s=n+1;s<=r;s++){const i=t[s],o=e[i];let a=s-1;for(;a>=n&&e[t[a]]>o;)t[a+1]=t[a--];t[a+1]=i}else{const s=n+r>>1;let i=n+1,o=r;ff(t,s,i),e[t[n]]>e[t[r]]&&ff(t,n,r),e[t[i]]>e[t[r]]&&ff(t,i,r),e[t[n]]>e[t[i]]&&ff(t,n,i);const a=t[i],u=e[a];for(;;){do i++;while(e[t[i]]<u);do o--;while(e[t[o]]>u);if(o<i)break;ff(t,i,o)}t[n+1]=t[o],t[o]=a,r-i+1>=o-n?(Ic(t,e,i,r),Ic(t,e,n,o-1)):(Ic(t,e,n,o-1),Ic(t,e,i,r))}}function ff(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function gQ(t){return t[0]}function yQ(t){return t[1]}var bQ={},vQ=Object.create,qD=Object.defineProperty,wQ=Object.getOwnPropertyDescriptor,xQ=Object.getOwnPropertyNames,SQ=Object.getPrototypeOf,AQ=Object.prototype.hasOwnProperty,I2=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,n)=>(typeof require<"u"?require:e)[n]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')}),k2=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),EQ=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of xQ(e))!AQ.call(t,s)&&s!==n&&qD(t,s,{get:()=>e[s],enumerable:!(r=wQ(e,s))||r.enumerable});return t},CQ=(t,e,n)=>(n=t!=null?vQ(SQ(t)):{},EQ(!t||!t.__esModule?qD(n,"default",{value:t,enumerable:!0}):n,t)),NQ=k2((t,e)=>{e.exports=function(n){return n&&typeof n=="object"&&typeof n.copy=="function"&&typeof n.fill=="function"&&typeof n.readUInt8=="function"}}),_Q=k2((t,e)=>{typeof Object.create=="function"?e.exports=function(n,r){n.super_=r,n.prototype=Object.create(r.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(n,r){n.super_=r;var s=function(){};s.prototype=r.prototype,n.prototype=new s,n.prototype.constructor=n}}),TQ=k2(t=>{var e=/%[sdj%]/g;t.format=function(D){if(!w(D)){for(var L=[],U=0;U<arguments.length;U++)L.push(s(arguments[U]));return L.join(" ")}for(var U=1,F=arguments,ue=F.length,se=String(D).replace(e,function(be){if(be==="%%")return"%";if(U>=ue)return be;switch(be){case"%s":return String(F[U++]);case"%d":return Number(F[U++]);case"%j":try{return JSON.stringify(F[U++])}catch{return"[Circular]"}default:return be}}),he=F[U];U<ue;he=F[++U])b(he)||!O(he)?se+=" "+he:se+=" "+s(he);return se},t.deprecate=function(D,L){if(N(global.process))return function(){return t.deprecate(D,L).apply(this,arguments)};if(process.noDeprecation===!0)return D;var U=!1;function F(){if(!U){if(process.throwDeprecation)throw new Error(L);process.traceDeprecation?console.trace(L):console.error(L),U=!0}return D.apply(this,arguments)}return F};var n={},r;t.debuglog=function(D){if(N(r)&&(r=bQ.NODE_DEBUG||""),D=D.toUpperCase(),!n[D])if(new RegExp("\\b"+D+"\\b","i").test(r)){var L=process.pid;n[D]=function(){var U=t.format.apply(t,arguments);console.error("%s %d: %s",D,L,U)}}else n[D]=function(){};return n[D]};function s(D,L){var U={seen:[],stylize:o};return arguments.length>=3&&(U.depth=arguments[2]),arguments.length>=4&&(U.colors=arguments[3]),y(L)?U.showHidden=L:L&&t._extend(U,L),N(U.showHidden)&&(U.showHidden=!1),N(U.depth)&&(U.depth=2),N(U.colors)&&(U.colors=!1),N(U.customInspect)&&(U.customInspect=!0),U.colors&&(U.stylize=i),u(U,D,U.depth)}t.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function i(D,L){var U=s.styles[L];return U?"\x1B["+s.colors[U][0]+"m"+D+"\x1B["+s.colors[U][1]+"m":D}function o(D,L){return D}function a(D){var L={};return D.forEach(function(U,F){L[U]=!0}),L}function u(D,L,U){if(D.customInspect&&L&&M(L.inspect)&&L.inspect!==t.inspect&&!(L.constructor&&L.constructor.prototype===L)){var F=L.inspect(U,D);return w(F)||(F=u(D,F,U)),F}var ue=l(D,L);if(ue)return ue;var se=Object.keys(L),he=a(se);if(D.showHidden&&(se=Object.getOwnPropertyNames(L)),$(L)&&(se.indexOf("message")>=0||se.indexOf("description")>=0))return c(L);if(se.length===0){if(M(L)){var ae=L.name?": "+L.name:"";return D.stylize("[Function"+ae+"]","special")}if(k(L))return D.stylize(RegExp.prototype.toString.call(L),"regexp");if(_(L))return D.stylize(Date.prototype.toString.call(L),"date");if($(L))return c(L)}var be="",Te=!1,ct=["{","}"];if(p(L)&&(Te=!0,ct=["[","]"]),M(L)){var we=L.name?": "+L.name:"";be=" [Function"+we+"]"}if(k(L)&&(be=" "+RegExp.prototype.toString.call(L)),_(L)&&(be=" "+Date.prototype.toUTCString.call(L)),$(L)&&(be=" "+c(L)),se.length===0&&(!Te||L.length==0))return ct[0]+be+ct[1];if(U<0)return k(L)?D.stylize(RegExp.prototype.toString.call(L),"regexp"):D.stylize("[Object]","special");D.seen.push(L);var Kn;return Te?Kn=d(D,L,U,he,se):Kn=se.map(function(pr){return f(D,L,U,he,pr,Te)}),D.seen.pop(),h(Kn,be,ct)}function l(D,L){if(N(L))return D.stylize("undefined","undefined");if(w(L)){var U="'"+JSON.stringify(L).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return D.stylize(U,"string")}if(v(L))return D.stylize(""+L,"number");if(y(L))return D.stylize(""+L,"boolean");if(b(L))return D.stylize("null","null")}function c(D){return"["+Error.prototype.toString.call(D)+"]"}function d(D,L,U,F,ue){for(var se=[],he=0,ae=L.length;he<ae;++he)V(L,String(he))?se.push(f(D,L,U,F,String(he),!0)):se.push("");return ue.forEach(function(be){be.match(/^\d+$/)||se.push(f(D,L,U,F,be,!0))}),se}function f(D,L,U,F,ue,se){var he,ae,be;if(be=Object.getOwnPropertyDescriptor(L,ue)||{value:L[ue]},be.get?be.set?ae=D.stylize("[Getter/Setter]","special"):ae=D.stylize("[Getter]","special"):be.set&&(ae=D.stylize("[Setter]","special")),V(F,ue)||(he="["+ue+"]"),ae||(D.seen.indexOf(be.value)<0?(b(U)?ae=u(D,be.value,null):ae=u(D,be.value,U-1),ae.indexOf(`
`)>-1&&(se?ae=ae.split(`
`).map(function(Te){return"  "+Te}).join(`
`).substr(2):ae=`
`+ae.split(`
`).map(function(Te){return"   "+Te}).join(`
`))):ae=D.stylize("[Circular]","special")),N(he)){if(se&&ue.match(/^\d+$/))return ae;he=JSON.stringify(""+ue),he.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(he=he.substr(1,he.length-2),he=D.stylize(he,"name")):(he=he.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),he=D.stylize(he,"string"))}return he+": "+ae}function h(D,L,U){var F=0,ue=D.reduce(function(se,he){return F++,he.indexOf(`
`)>=0&&F++,se+he.replace(/\u001b\[\d\d?m/g,"").length+1},0);return ue>60?U[0]+(L===""?"":L+`
 `)+" "+D.join(`,
  `)+" "+U[1]:U[0]+L+" "+D.join(", ")+" "+U[1]}function p(D){return Array.isArray(D)}t.isArray=p;function y(D){return typeof D=="boolean"}t.isBoolean=y;function b(D){return D===null}t.isNull=b;function g(D){return D==null}t.isNullOrUndefined=g;function v(D){return typeof D=="number"}t.isNumber=v;function w(D){return typeof D=="string"}t.isString=w;function x(D){return typeof D=="symbol"}t.isSymbol=x;function N(D){return D===void 0}t.isUndefined=N;function k(D){return O(D)&&Z(D)==="[object RegExp]"}t.isRegExp=k;function O(D){return typeof D=="object"&&D!==null}t.isObject=O;function _(D){return O(D)&&Z(D)==="[object Date]"}t.isDate=_;function $(D){return O(D)&&(Z(D)==="[object Error]"||D instanceof Error)}t.isError=$;function M(D){return typeof D=="function"}t.isFunction=M;function K(D){return D===null||typeof D=="boolean"||typeof D=="number"||typeof D=="string"||typeof D=="symbol"||typeof D>"u"}t.isPrimitive=K,t.isBuffer=NQ();function Z(D){return Object.prototype.toString.call(D)}function ie(D){return D<10?"0"+D.toString(10):D.toString(10)}var ee=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function W(){var D=new Date,L=[ie(D.getHours()),ie(D.getMinutes()),ie(D.getSeconds())].join(":");return[D.getDate(),ee[D.getMonth()],L].join(" ")}t.log=function(){console.log("%s - %s",W(),t.format.apply(t,arguments))},t.inherits=_Q(),t._extend=function(D,L){if(!L||!O(L))return D;for(var U=Object.keys(L),F=U.length;F--;)D[U[F]]=L[U[F]];return D};function V(D,L){return Object.prototype.hasOwnProperty.call(D,L)}}),ic=32,GD=t=>t.reduce((e,n)=>e.concat(Array.isArray(n)?GD(n):n),[]),HD=t=>ArrayBuffer.isView(t)&&!(t instanceof DataView),KD=t=>t.reduce((e,n)=>e*n,1),XD=t=>Array.isArray(t)||HD(t)?[t.length].concat(XD(t[0])):[],R2=t=>[...t.slice(1).map((e,n)=>t.slice(n+1).reduce((r,s)=>r*s,1)),1],IQ=t=>{let{constructor:{name:e="Float32Array"}={}}=t||{};switch(e){case"Int8Array":return"int8";case"Uint8Array":return"uint8";case"Int16Array":return"int16";case"Uint16Array":return"uint16";case"Int32Array":return"int32";case"Uint32Array":return"uint32";case"Uint8ClampedArray":return"uint8c";case"Float32Array":return"float32";case"Float64Array":return"float64";default:return"float64"}},dd=t=>{switch(t){case"int8":return Int8Array;case"uint8":return Uint8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"uint8c":return Uint8ClampedArray;case"float32":return Float32Array;case"float64":return Float64Array;default:return Float64Array}},Di=(...t)=>new Ol(...t),Me=class{constructor(e){J(this,"x");J(this,"shape");J(this,"shapem1");J(this,"strides");J(this,"backstrides");J(this,"length");J(this,"lengthm1");J(this,"nd");J(this,"ndm1");J(this,"index");J(this,"coords");J(this,"pos");J(this,"factors");this.x=Di(e);let{shape:n,strides:r,length:s}=this.x;this.length=s,this.lengthm1=s-1,this.nd=n.length,this.ndm1=this.nd-1,this.shape=Array(ic).fill(0),this.strides=Array(ic).fill(0),this.shapem1=Array(ic).fill(0),this.coords=Array(ic).fill(0),this.backstrides=Array(ic).fill(0),this.factors=Array(ic).fill(0),this.nd!==0&&(this.factors[this.nd-1]=1);let i;for(i=0;i<this.nd;i+=1)this.shape[i]=n[i],this.shapem1[i]=n[i]-1,this.strides[i]=r[i],this.backstrides[i]=r[i]*this.shapem1[i],this.coords[i]=0,i>0&&(this.factors[this.ndm1-i]=this.factors[this.nd-i]*n[this.nd-i]);this.index=0,this.pos=0}done(){return this.index>this.lengthm1}current(){let e=this.done();return{value:e?void 0:this.pos,done:e}}next(){let e=this.current();if(e.done)return e;let{ndm1:n,shapem1:r,strides:s,backstrides:i}=this,o;for(o=n;o>=0;o-=1){if(this.coords[o]<r[o]){this.coords[o]+=1,this.pos+=s[o];break}this.coords[o]=0,this.pos-=i[o]}return this.index+=1,e}[Symbol.iterator](){return this}},Ed=class{constructor(...t){J(this,"iters");J(this,"shape");J(this,"nd");J(this,"length");J(this,"lengthm1");J(this,"numiter");J(this,"index");J(this,"pos");this.iters=t.map(a=>new Me(a)),this.numiter=t.length;let e,n;for(e=0,n=0;e<this.numiter;e+=1)n=Math.max(n,this.iters[e].x.shape.length);this.nd=n,this.shape=Array(n).fill(0);let r,s,i,o;for(e=0;e<n;e+=1)for(this.shape[e]=1,s=0;s<this.numiter;s+=1)if(r=this.iters[s],i=e+r.x.shape.length-n,i>=0){if(o=r.x.shape[i],o==1)continue;if(this.shape[e]==1)this.shape[e]=o;else if(this.shape[e]!==o)throw new Error("shape mismatch")}for(o=this.shape.reduce((a,u)=>a*u,1),this.length=o,this.lengthm1=o-1,e=0;e<this.numiter;e+=1)for(r=this.iters[e],r.nd=this.nd,r.ndm1=this.nd-1,r.length=o,r.lengthm1=o-1,n=r.x.shape.length,n!==0&&(r.factors[this.nd-1]=1),s=0;s<this.nd;s+=1)r.shape[s]=this.shape[s],r.shapem1[s]=this.shape[s]-1,i=s+n-this.nd,i<0||r.x.shape[i]!==this.shape[s]?r.strides[s]=0:r.strides[s]=r.x.strides[i],r.backstrides[s]=r.strides[s]*r.shapem1[s],s>0&&(r.factors[this.nd-s-1]=r.factors[this.nd-s]*this.shape[this.nd-s]);this.index=0,this.pos=Array(this.numiter).fill(0)}done(){return this.index>this.lengthm1}current(){let t=this.done();return{value:t?void 0:this.pos,done:t}}next(){let t=this.current();if(t.done)return t;this.index+=1;let{numiter:e}=this,n,r;for(r=0;r<e;r+=1)n=this.iters[r],this.pos[r]=n.pos,n.next();return t}[Symbol.iterator](){return this}},{abs:kQ}=Math;function RQ(){let{data:t}=this,e=new Me(this);for(let n of e)t[n]=kQ(t[n]);return this}var{acos:OQ}=Math;function PQ(){let{data:t}=this,e=new Me(this);for(let n of e)t[n]=OQ(t[n]);return this}var{acosh:DQ}=Math;function LQ(){let{data:t}=this,e=new Me(this);for(let n of e)t[n]=DQ(t[n]);return this}var ln;try{ln=I2("nblas")}catch{}var uN=ln&&ln.NoTrans;ln&&ln.Trans;function FQ(t,e,n,r,s,i,o){if(r.length/s!==e||i.length/o!==e)throw new Error("lengths do not match");switch(t){case"float64":return ln.daxpy(e,n,r,s,i,o);case"float32":return ln.saxpy(e,n,r,s,i,o);default:throw new Error("wrong dtype")}}function $Q(t,e,n,r,s,i){if(n.length/r!==e||s.length/i!==e)throw new Error("lengths do not match");switch(t){case"float64":return ln.ddot(e,n,r,s,i);case"float32":return ln.sdot(e,n,r,s,i);default:throw new Error("wrong dtype")}}function BQ(t,e,n,r){if(n.length/r!==e)throw new Error("lengths do not match");switch(t){case"float64":return ln.idamax(e,n,r);case"float32":return ln.isamax(e,n,r);default:throw new Error("wrong dtype")}}function MQ(t,e,n,r,s,i,o,a,u,l,c,d,f,h){let{length:p}=a,{length:y}=l,{length:b}=f;if(e===ln.NoTrans&&p!==u*r||e===ln.Trans&&p!==u*i)throw new Error("lengths do not match");if(n===ln.NoTrans&&y!==c*i||n===ln.Trans&&y!==c*s)throw new Error("lengths do not match");if(b!==h*r)throw new Error("lengths do not match");switch(t){case"float64":return ln.dgemm(e,n,r,s,i,o,a,u,l,c,d,f,h);case"float32":return ln.sgemm(e,n,r,s,i,o,a,u,l,c,d,f,h);default:throw new Error("wrong dtype")}}function VQ(t,e,n,r){if(n.length/r!==e)throw new Error("lengths do not match");switch(t){case"float64":return ln.dnrm2(e,n,r);case"float32":return ln.snrm2(e,n,r);default:throw new Error("wrong dtype")}}function UQ(t,e,n,r,s){if(r.length/s!==e)throw new Error("lengths do not match");switch(t){case"float64":return ln.dscal(e,n,r,s);case"float32":return ln.sscal(e,n,r,s);default:throw new Error("wrong dtype")}}function zQ(t,e=1){let{data:n,length:r,strides:s,dtype:i}=this,{data:o,strides:a}=Di(t);try{let u=a[a.length-1],l=s[s.length-1];if(u!==l)throw new Error("inc_x and inc_y must be equal");FQ(i,r,e,o,u,n,l)}catch{let u=new Ed(this,t);for(let[l,c]of u)n[l]+=e*o[c]}return this}var{acos:jQ}=Math;function WQ(t){return jQ(this.dot(Di(t))/this.norm()/Di(t).norm())}var{asin:qQ}=Math;function GQ(){let{data:t}=this,e=new Me(this);for(let n of e)t[n]=qQ(t[n]);return this}var{asinh:HQ}=Math;function KQ(){let{data:t}=this,e=new Me(this);for(let n of e)t[n]=HQ(t[n]);return this}var{atan:XQ}=Math;function YQ(){let{data:t}=this,e=new Me(this);for(let n of e)t[n]=XQ(t[n]);return this}var{atanh:QQ}=Math;function ZQ(){let{data:t}=this,e=new Me(this);for(let n of e)t[n]=QQ(t[n]);return this}var no=(...t)=>new Ol(new Float64Array(t.reduce((e,n)=>e*n,1)),{shape:t}).fill(0),JQ=(t,e)=>Di(t).augment(Di(e));function eZ(t){let[e,n]=this.shape,[r,s]=Di(t).shape,{data:i}=this,{data:o}=Di(t);if(r===0||s===0)return this;if(e!==r)throw new Error("rows do not match");let a=no(e,n+s),{data:u}=a,l,c;for(l=0;l<e;l+=1)for(c=0;c<n;c+=1)u[l*(n+s)+c]=i[l*n+c];for(l=0;l<r;l+=1)for(c=0;c<s;c+=1)u[l*(n+s)+(c+n)]=o[l*s+c];return a}function tZ(t,e){let{data:n}=this,{data:r}=Di(t),s=new Ed(this,t);for(let[i,o]of s)n[i]=e(n[i],r[o],i);return this}var{cbrt:nZ}=Math;function rZ(){let{data:t}=this,e=new Me(this);for(let n of e)t[n]=nZ(t[n]);return this}var{ceil:sZ}=Math;function iZ(){let{data:t}=this,e=new Me(this);for(let n of e)t[n]=sZ(t[n]);return this}function oZ(...t){let{shape:e,length:n}=this;if(t.length===1){let[r]=t;if(r<0||r>n-1||!Number.isFinite(r))throw new Error("index out of bounds")}else if(!e.every((r,s)=>r>t[s]&&Number.isFinite(t[s])&&t[s]>=0))throw new Error("index out of bounds")}function aZ(t){if(this.shape.length!==1&&t.shape.length!==1)throw new Error("combine operation not permitted for multidimensional arrays");let{length:e,data:n}=this,{length:r,data:s}=t;if(r===0)return this;if(e===0)return this.data=new(dd(t.dtype))(s),this.length=r,this.dtype=t.dtype,this;let i=e+r,o=new(dd(this.dtype))(i);return o.set(n),o.set(s,e),this.data=o,this.length=i,this.shape=[i],this}function uZ(){let t=no(...this.shape),{data:e}=this,{data:n}=t,r=new Ed(this,t);for(let[s,i]of r)n[i]=e[s];return t}var{cos:lZ}=Math;function cZ(){let{data:t}=this,e=new Me(this);for(let n of e)t[n]=lZ(t[n]);return this}var{cosh:dZ}=Math;function fZ(){let{data:t}=this,e=new Me(this);for(let n of e)t[n]=dZ(t[n]);return this}function hZ(t){let{length:e}=this,{length:n}=t;if(e!==3||n!==3)throw new Error("vectors must have three components");let r=this.y*t.z-this.z*t.y,s=this.z*t.x-this.x*t.z,i=this.x*t.y-this.y*t.x;return this.x=r,this.y=s,this.z=i,this}function pZ(){this.square();let[t]=this.shape,[e,n]=this.copy().lu_factor(),{data:r}=e,s=1,i=1,o;for(o=0;o<t;o+=1)s*=r[o*t+o],o!==n[o]-1&&(i*=-1);return i*s}function mZ(){this.square();let{length:t}=this,[e,n]=this.shape,r=Math.min(e,n);return this.reshape(t).slice(0,t,r+1)}function gZ(t){let{data:e,length:n,strides:r,dtype:s}=this,{data:i,strides:o}=t,a=0;try{let u=o[o.length-1],l=r[r.length-1];if(u!==l)throw new Error("inc_x and inc_y must be equal");a=$Q(s,n,i,u,e,l)}catch{let u=new Ed(this,t);for(let[l,c]of u)a+=e[l]*i[c]}return a}var YD=t=>{let e=new Ol(new Float64Array(t*t),{shape:[t,t]}),{data:n}=e,r;for(r=0;r<t;r+=1)n[r*t+r]=1;return e},Of;try{Of=I2("nlapack")}catch{}var Kp=(t,e,n,r,s,i,o)=>{let[a]=t.shape,{data:u}=t,l=u[r*a+s],c=1/(e+n);u[r*a+s]=l-n*(u[i*a+o]+c*l),u[i*a+o]+=n*(l-c*u[i*a+o])};function yZ(){this.square();let[t]=this.shape;try{["float32","float64"].includes(this.dtype)||(this.dtype="float32",this.data=dd(this.dtype).from(this.data));let e=Of.NoEigenvector,n=Of.Eigenvector,r=no(t),s=no(t),i=no(t,t),o=no(t,t),{data:a}=this,{data:u}=r,{data:l}=s,{data:c}=i,{data:d}=o;return this.dtype==="float64"&&Of.dgeev(e,n,t,a,t,u,l,c,t,d,t),this.dtype==="float32"&&Of.sgeev(e,n,t,a,t,u,l,c,t,d,t),[r,o]}catch{let{data:e}=this,n=YD(t),r=0,s=0,i=0,o=0,a=0;do{for(s=0;s<t;s+=1)for(i=s+1;i<t;i+=1)Math.abs(e[s*t+i])>=r&&(r=Math.abs(e[s*t+i]),o=s,a=i);let u;if(Math.abs(e[o*t+a])<Math.abs(e[a*t+a])*1e-36)u=e[o*t+a]/e[a*t+a];else{let f=e[a*t+a]/2*e[o*t+a];u=1/(Math.abs(f)+Math.sqrt(f*f+1))}let l=1/Math.sqrt(u*u+1),c=u*l,d=e[o*t+a];for(e[o*t+a]=0,e[o*t+o]-=u*d,e[a*t+a]+=u*d,s=0;s<o;s+=1)Kp(this,l,c,s,o,s,a);for(s=o+1;s<a;s+=1)Kp(this,l,c,o,s,s,a);for(s=a+1;s<t;s+=1)Kp(this,l,c,o,s,a,s);for(s=0;s<t;s+=1)Kp(n,l,c,s,o,s,a)}while(r>=1e-9);return[this.diagonal(),n]}}function bZ(t,e=1e-6){let{data:n}=this,{data:r}=t,s=new Ed(this,t);for(let[i,o]of s)if(Math.abs(n[i]-r[o])>e)return!1;return!0}function vZ(t){let{shape:e}=this,{shape:n}=t;if(!e.every((r,s)=>r===n[s]))throw new Error(`shapes ${e} and ${n} do not match`)}function wZ(t){let{length:e}=this,{length:n}=t;if(e!==n)throw new Error(`lengths ${e} and ${n} do not match`)}var{exp:xZ}=Math;function SZ(){let{data:t}=this,e=new Me(this);for(let n of e)t[n]=xZ(t[n]);return this}var{expm1:AZ}=Math;function EZ(){let{data:t}=this,e=new Me(this);for(let n of e)t[n]=AZ(t[n]);return this}function CZ(t=0){let{data:e}=this,n=new Me(this);for(let r of n)e[r]=t instanceof Function?t(r):t;return this}var{floor:NZ}=Math;function _Z(){let{data:t}=this,e=new Me(this);for(let n of e)t[n]=NZ(t[n]);return this}function TZ(t){let{data:e}=this,n=new Me(this);for(let r of n)t.call(this,e[r],r,e)}var{fround:IZ}=Math;function kZ(){let{data:t}=this,e=new Me(this);for(let n of e)t[n]=IZ(t[n]);return this}function RZ(){let{shape:[t,e],data:n}=this,r=0,s,i,o,a,u;for(o=0;o<t;o+=1){if(e<=r)return this;for(a=o;n[a*e+r]===0;)if(a+=1,t===a&&(a=o,r+=1,e===r))return this;if(o!==a&&this.swap(o,a),i=n[o*e+r],i!==0)for(u=0;u<e;u+=1)n[o*e+u]/=i;for(a=0;a<t;a+=1)if(s=n[a*e+r],a!==o)for(u=0;u<e;u+=1)n[a*e+u]-=n[o*e+u]*s;r+=1}for(o=0;o<t;o+=1){for(i=0,a=0;a<e;a+=1)i===0&&(i=n[o*e+a]);if(i!==0)for(u=0;u<e;u+=1)n[o*e+u]/=i}return this}function OZ(...t){this.check(...t);let{data:e,shape:n}=this,{length:r}=n,s=0,i;for(i=0;i<r;i+=1)s*=n[i],s+=t[i];return e[s]}var wl;try{wl=I2("nlapack")}catch{}function QD(t,e,n,r,s,i){if(r.length!==e*n)throw new Error("lengths do not match");switch(t){case"float64":return wl.dgetrf(e,n,r,s,i);case"float32":return wl.sgetrf(e,n,r,s,i);default:throw new Error("wrong dtype")}}function PZ(t,e,n,r,s){if(n.length!==e*e)throw new Error("lengths do not match");switch(t){case"float64":return wl.dgetri(e,n,r,s);case"float32":return wl.sgetri(e,n,r,s);default:throw new Error("wrong dtype")}}function DZ(t,e,n,r,s,i,o,a){if(r.length!==s*e||o.length!==a*n)throw new Error("lengths do not match");switch(t){case"float64":return wl.dgesv(e,n,r,s,i,o,a);case"float32":return wl.sgesv(e,n,r,s,i,o,a);default:throw new Error("wrong dtype")}}function LZ(){this.square();let{shape:[t],dtype:e}=this;try{let{data:n}=this,r=new Int32Array(t);return QD(e,t,t,n,t,r),PZ(e,t,n,t,r),this}catch{let n=YD(t),r=JQ(this,n).gauss(),s=no(t,t),i=no(t,t),{data:o}=r,{data:a}=s,{data:u}=i,l=new Me(r),[c,d]=l.coords;for(let f of l)d<t?a[c*t+d]=o[f]:u[c*t+(d-t)]=o[f],[c,d]=l.coords;if(!s.equals(n))throw new Error("matrix is not invertible");return i}}var{log:FZ}=Math;function $Z(){let{data:t}=this,e=new Me(this);for(let n of e)t[n]=FZ(t[n]);return this}var{log10:BZ}=Math;function MZ(){let{data:t}=this,e=new Me(this);for(let n of e)t[n]=BZ(t[n]);return this}var{log1p:VZ}=Math;function UZ(){let{data:t}=this,e=new Me(this);for(let n of e)t[n]=VZ(t[n]);return this}var{log2:zZ}=Math;function jZ(){let{data:t}=this,e=new Me(this);for(let n of e)t[n]=zZ(t[n]);return this}function WZ(){let[t,e]=this.copy().lu_factor(),n=t.copy(),r=t.copy(),{data:s}=n,{data:i}=r,o=new Me(t),[a,u]=o.coords;for(let l of o)u<a?i[l]=0:s[l]=a===u?1:0,[a,u]=o.coords;return[n,r,e]}function qZ(){let{data:t,shape:[e],dtype:n}=this,r=new Int32Array(e);try{QD(n,e,e,t,e,r)}catch{let s,i,o,a,u,l,c;for(c=0;c<e;c+=1){for(a=c,s=Math.abs(t[c*e+c]),l=c+1;l<e;l+=1)i=Math.abs(t[l*e+c]),s<i&&(s=i,a=l);for(r[c]=a+1,a!==c&&this.swap(c,a),o=t[c*e+c],u=c+1;u<e;u+=1)t[u*e+c]/=o;for(u=c+1;u<e;u+=1){for(l=c+1;l<e-1;l+=2)t[u*e+l]-=t[u*e+c]*t[c*e+l],t[u*e+l+1]-=t[u*e+c]*t[c*e+l+1];l===e-1&&(t[u*e+l]-=t[u*e+c]*t[c*e+l])}}}return[this,r]}function GZ(t){let{data:e}=this,n=new Me(this),r=t.bind(this),s=this.copy(),{data:i}=s;for(let o of n)i[o]=r(e[o],o,e);return s}function HZ(){let{data:t,length:e,strides:n,dtype:r}=this,s=Number.NEGATIVE_INFINITY;try{let i=n[n.length-1];s=t[BQ(r,e,t,i)]}catch{let i=new Me(this);for(let o of i){let a=t[o];s<a&&(s=a)}}return s}function KZ(){let{data:t,length:e}=this,n=new Me(this),r=0;for(let s of n)r+=t[s];return r/e}function XZ(){let{data:t}=this,e=new Me(this),n=Number.POSITIVE_INFINITY;for(let r of e){let s=t[r];n>s&&(n=s)}return n}var YZ=(t,e)=>new Ol(new Float64Array(t*e),{shape:[t,e]});function QZ(t){let{shape:[e,n],data:r,dtype:s}=this.copy(),{shape:[i,o],data:a}=t.copy();if(n!==i)throw new Error("sizes do not match");let u=YZ(e,o),{data:l}=u;try{MQ(s,uN,uN,e,o,n,1,r,n,a,o,0,l,o)}catch{let c=new Me(u),d,[f,h]=c.coords;for(let p of c){let y=0;for(d=0;d<n;d+=1)y+=r[f*n+d]*a[d*o+h];l[p]=y,[f,h]=c.coords}}return u}var{sqrt:ZZ}=Math;function JZ(){let{data:t,length:e,strides:n,dtype:r}=this,s=0;try{let i=n[n.length-1];s=VQ(r,e,t,i)}catch{s=ZZ(this.dot(this))}return s}function eJ(){return this.scale(1/this.norm())}var{pow:tJ}=Math;function nJ(t){let{data:e}=this,n=new Me(this);for(let r of n)e[r]=tJ(e[r],t);return this}function rJ(){let{data:t}=this,e=new Me(this),n=1;for(let r of e)n*=t[r];return n}function sJ(t){let{data:e}=this,{data:n}=t,r=new Ed(this,t);for(let[s,i]of r)e[s]*=n[i];return this}function iJ(t){return t.scale(this.dot(t)/t.dot(t))}function oJ(t){if(this.shape.length!==1)throw new Error("push operation not permitted for multidimensional arrays");let{data:e,length:n}=this,r=n+1,s=new(dd(this.dtype))(r);return s.set(e),s[n]=t,this.data=s,this.length=r,this.shape=[r],this}function aJ(t=1e-6){let{data:e}=this.copy().gauss(),n=new Me(this),r=0,[s,i]=n.coords;for(let o of n)r<=s&&i>=s&&Math.abs(e[o])>t&&(r+=1),[s,i]=n.coords;return r}function uJ(){let{data:t}=this,e=new Me(this);for(let n of e)t[n]=1/t[n];return this}function lJ(t,e){let{data:n,length:r}=this;if(r===0&&typeof e>"u")throw new Error("Reduce of empty array with no initial value.");let s=new Me(this),i=t.bind(this),o;typeof e>"u"?(o=n[0],s.next()):o=e;for(let a of s)o=i(o,n[a],a,n);return o}function cJ(...t){let{length:e}=this;if(t.reduce((n,r)=>n*r,1)!==e)throw new Error(`shape ${t} does not match length ${e}`);return this.shape=t,this.strides=R2(t),this}var{round:dJ}=Math;function fJ(){let{data:t}=this,e=new Me(this);for(let n of e)t[n]=dJ(t[n]);return this}function hJ(t,e,n=1){this.check(t,0),this.check(e,0);let[,r]=this.shape,{data:s}=this,i;for(i=0;i<r;i+=1)s[t*r+i]+=s[e*r+i]*n;return this}function pJ(t){let{data:e,length:n,strides:r,dtype:s}=this;try{let i=r[r.length-1];UQ(s,n,t,e,i)}catch{let i=new Me(this);for(let o of i)e[o]*=t}return this}function mJ(...t){let e=t.slice(0,-1),n=t[t.length-1];this.check(...e);let{shape:r}=this,s=0,i;for(i=0;i<e.length;i+=1)s*=r[i],s+=e[i];this.data[s]=n}var{sign:gJ}=Math;function yJ(){let{data:t}=this,e=new Me(this);for(let n of e)t[n]=gJ(t[n]);return this}var{sin:bJ}=Math;function vJ(){let{data:t}=this,e=new Me(this);for(let n of e)t[n]=bJ(t[n]);return this}var{sinh:wJ}=Math;function xJ(){let{data:t}=this,e=new Me(this);for(let n of e)t[n]=wJ(t[n]);return this}function SJ(t=0,e=this.shape[0],n=1){let{data:r,shape:s}=this,i=s.length;if(t<0||e<0)return this.slice(t<0?s[s.length-1]+t:t,e<0?s[s.length-1]+e:e);if(t>e)return this.slice(e,t,n);if(n<=0)throw new Error("step argument has to be a positive integer");let o=[Math.ceil((e-t)/Math.abs(n)),...s.slice(1)],a=KD(o),u=R2(o),l=i>1?r.subarray(t*o[o.length-1],e*o[o.length-1]):r.subarray(t,e);return u[0]*=n,new Ol(l,{shape:o,length:a,strides:u})}function AJ(t){let{data:e,dtype:n}=this,{data:r,shape:[s,i]}=t;try{let o=new Int32Array(s);DZ(n,s,i,e,s,o,r,i)}catch{let[o,a]=this.lu_factor(),{data:u}=o,{data:l}=t,c,d,f;for(c=0;c<a.length;c+=1)c!==a[c]-1&&t.swap(c,a[c]-1);for(f=0;f<i;f+=1){for(c=0;c<s;c+=1)for(d=0;d<c;d+=1)l[c*i+f]-=u[c*s+d]*l[d*i+f];for(c=s-1;c>=0;c-=1){for(d=c+1;d<s;d+=1)l[c*i+f]-=u[c*s+d]*l[d*i+f];l[c*i+f]/=u[c*s+c]}}}return t}var{sqrt:EJ}=Math;function CJ(){let{data:t}=this,e=new Me(this);for(let n of e)t[n]=EJ(t[n]);return this}function NJ(){let{length:t}=this.shape,[e,n]=this.shape;if(t!==2||e!==n)throw new Error("matrix is not square")}function _J(t){return this.add(t,-1)}function TJ(){let{data:t}=this,e=new Me(this),n=0;for(let r of e)n+=t[r];return n}function IJ(t,e){this.check(t,0),this.check(e,0);let{data:n}=this,[,r]=this.shape,s=n.slice(t*r,(t+1)*r);return n.copyWithin(t*r,e*r,(e+1)*r),n.set(s,e*r),this}var{tan:kJ}=Math;function RJ(){let{data:t}=this,e=new Me(this);for(let n of e)t[n]=kJ(t[n]);return this}var{tanh:OJ}=Math;function PJ(){let{data:t}=this,e=new Me(this);for(let n of e)t[n]=OJ(t[n]);return this}function DJ(t=0,e=0){let{data:n,shape:r,strides:s}=this,{length:i}=r;if(e>=i)return n[t];let o=r[e],a=s[e],u=[];for(let l=0;l<o;l++){let c=this.toArray(t,e+1);if(c===null)return null;u[l]=c,t+=a}return u}var LJ=CQ(TQ());function lN(){return`array(${(0,LJ.inspect)(this.toArray(),{depth:10,breakLength:40})}, dtype=${this.dtype})`}function FJ(){let[t,e]=this.shape,{data:n}=this,r=Math.min(t,e),s=0,i;for(i=0;i<r;i+=1)s+=n[i*e+i];return s}function $J(){if(this.shape.length<2)return this;let t=this.shape[0];return this.shape[0]=this.shape[1],this.shape[1]=t,t=this.strides[0],this.strides[0]=this.strides[1],this.strides[1]=t,this}var{trunc:BJ}=Math;function MJ(){let{data:t}=this,e=new Me(this);for(let n of e)t[n]=BJ(t[n]);return this}var VJ=Symbol.for("nodejs.util.inspect.custom"),mT,Ol=(mT=VJ,class{constructor(t,e){J(this,"data",new Float64Array(0));J(this,"dtype","float64");J(this,"length",0);J(this,"shape",[0]);J(this,"strides",[0]);J(this,mT,lN);J(this,"abs",RQ);J(this,"acos",PQ);J(this,"acosh",LQ);J(this,"add",zQ);J(this,"angle",WQ);J(this,"asin",GQ);J(this,"asinh",KQ);J(this,"atan",YQ);J(this,"atanh",ZQ);J(this,"augment",eZ);J(this,"binOp",tZ);J(this,"cbrt",rZ);J(this,"ceil",iZ);J(this,"check",oZ);J(this,"combine",aZ);J(this,"copy",uZ);J(this,"cos",cZ);J(this,"cosh",fZ);J(this,"cross",hZ);J(this,"det",pZ);J(this,"diagonal",mZ);J(this,"dot",gZ);J(this,"eig",yZ);J(this,"equals",bZ);J(this,"equidimensional",vZ);J(this,"equilateral",wZ);J(this,"exp",SZ);J(this,"expm1",EZ);J(this,"fill",CZ);J(this,"floor",_Z);J(this,"forEach",TZ);J(this,"fround",kZ);J(this,"gauss",RZ);J(this,"get",OZ);J(this,"inv",LZ);J(this,"log",$Z);J(this,"log10",MZ);J(this,"log1p",UZ);J(this,"log2",jZ);J(this,"lu",WZ);J(this,"lu_factor",qZ);J(this,"map",GZ);J(this,"max",HZ);J(this,"mean",KZ);J(this,"min",XZ);J(this,"multiply",QZ);J(this,"norm",JZ);J(this,"normalize",eJ);J(this,"pow",nJ);J(this,"prod",rJ);J(this,"product",sJ);J(this,"project",iJ);J(this,"push",oJ);J(this,"rank",aJ);J(this,"reciprocal",uJ);J(this,"reduce",lJ);J(this,"reshape",cJ);J(this,"round",fJ);J(this,"row_add",hJ);J(this,"scale",pJ);J(this,"set",mJ);J(this,"sign",yJ);J(this,"sin",vJ);J(this,"sinh",xJ);J(this,"slice",SJ);J(this,"solve",AJ);J(this,"sqrt",CJ);J(this,"square",NJ);J(this,"subtract",_J);J(this,"sum",TJ);J(this,"swap",IJ);J(this,"tan",RJ);J(this,"tanh",PJ);J(this,"toArray",DJ);J(this,"toString",lN);J(this,"trace",FJ);J(this,"transpose",$J);J(this,"trunc",MJ);if(!t)return;if(t instanceof Ol)return t;if(t instanceof Me){if(!e||!e.dtype)throw new Error("dtype is missing");t.shape&&(e.shape=t.shape);let o=t.length;t=new(dd(e.dtype))(o)}let{shape:n=XD(t),length:r=KD(n),strides:s=R2(n),dtype:i=IQ(t)}=e||{};this.data=HD(t)?t:new(dd(i))(GD(t)),this.shape=n,this.length=r,this.dtype=i,this.strides=s}get x(){return this.get(0)}set x(t){this.set(0,t)}get y(){return this.get(1)}set y(t){this.set(1,t)}get z(){return this.get(2)}set z(t){this.set(2,t)}get w(){return this.get(3)}set w(t){this.set(3,t)}get T(){return this.copy().transpose()}});try{window.v=Ol}catch{}const Hg=(t,e)=>{t[0].length==2&&(t=t.map(s=>[s[0],s[1],1]));const n=Di(t).multiply(e.T);for(let s=0;s<n.shape[0];s++){const i=n.get(s,0),o=n.get(s,1),a=n.get(s,2);n.set(s,0,i/a),n.set(s,1,o/a)}let r=n.toArray();return r=r.map(s=>s.slice(0,2)),r},ZD=(t,e)=>{const n=no(8,8),r=no(8,1);for(let o=0;o<4;o++){const[a,u]=e[o],[l,c]=t[o];n.set(o*2,0,a),n.set(o*2,1,u),n.set(o*2,2,1),n.set(o*2,6,-l*a),n.set(o*2,7,-l*u),n.set(o*2+1,3,a),n.set(o*2+1,4,u),n.set(o*2+1,5,1),n.set(o*2+1,6,-c*a),n.set(o*2+1,7,-c*u),r.set(o*2,0,l),r.set(o*2+1,0,c)}const s=n.solve(r).toArray();return Di([...s,1],{shape:[3,3]})},JD=t=>ZD([[qp,qp],[0,qp],[0,0],[qp,0]],t).inv(),eL=t=>{const e=Array.from({length:8},(o,a)=>.5+a),r=Array.from({length:8},(o,a)=>7.5-a).map(o=>e.map(a=>[a*vi,o*vi,1])).flat(),s=Hg(r,t),i=He(()=>os(Ju(s),0));return[s,i]},tL=t=>{const e=[[-.5*vi,-.5*vi,1],[-.5*vi,8.5*vi,1],[8.5*vi,8.5*vi,1],[8.5*vi,-.5*vi,1]],n=Hg(e,t),r=He(()=>os(Ju(n),0));return[n,r]},O2=t=>{var e,n;if(t.current===null)return!0;if(t.current.autoplay){if(((e=t.current)==null?void 0:e.srcObject)===null)return!0}else{const r=(n=t.current)==null?void 0:n.src;if(r===null||!r.startsWith("blob"))return!0}return!1},UJ=t=>{const e=t.map(c=>c[0]),n=t.map(c=>c[1]),r=Math.min(...e),s=Math.max(...e),i=Math.min(...n),o=Math.max(...n),a=s-r,u=o-i;return{xmin:r,xmax:s,ymin:i,ymax:o,width:a,height:u}},P2=(t,e=null,n=12)=>{let r;const s=t.current.videoWidth,i=t.current.videoHeight;if(e!==null){const c=UJ(e);let d=Math.floor(c.width/n),f=Math.floor(c.width/n),h=Math.floor(c.height/n);const p=Math.floor(c.height/n),y=c.width+d+f,b=c.height+h+p,g=b/y,v=sr/rr;if(g>v){const x=b/v-y;d+=Math.floor(x/2),f+=x-Math.floor(x/2)}else{const w=y*v;h+=w-b}r=[Math.round(Math.max(s*(c.xmin-d)/rr,0)),Math.round(Math.max(i*(c.ymin-h)/sr,0)),Math.round(Math.min(s*(c.xmax+f)/rr,s)),Math.round(Math.min(i*(c.ymax+p)/sr,i))]}else r=[0,0,s,i];const[o,a,u,l]=He(()=>{let c=FY(t.current);c=Le(c,[r[1],r[0],0],[r[3]-r[1],r[2]-r[0],3]);const d=c.shape[0],f=c.shape[1],h=d/f,p=sr/rr;let y=sr,b=rr;h>p?b=Math.round(sr/h):y=Math.round(rr*h),c=b2.resizeBilinear(c,[y,b]);const g=rr-c.shape[1],v=sr-c.shape[0],w=Math.floor(g/2),x=g-w,N=Math.floor(v/2),k=v-N,O=[x,w,k,N];return c=Sd(c,[[k,N],[x,w],[0,0]],114),[os(lt(c,255),0),f,d,O]});return{image4D:o,width:a,height:u,padding:l,roi:r}},D2=(t,e,n,r,s,i,o)=>{const{boxes:a,scores:u}=He(()=>{const l=W0(t,[0,2,1]),c=Le(l,[0,0,2],[-1,-1,1]),d=Le(l,[0,0,3],[-1,-1,1]);let f=Pe(Le(l,[0,0,0],[-1,-1,1]),lt(c,2)),h=Pe(Le(l,[0,0,1],[-1,-1,1]),lt(d,2)),p=ke(f,c),y=ke(h,d);f=Pe(f,i[0]),p=Pe(p,i[0]),h=Pe(h,i[2]),y=Pe(y,i[2]),f=fe(f,e/(rr-i[0]-i[1])),p=fe(p,e/(rr-i[0]-i[1])),h=fe(h,n/(sr-i[2]-i[3])),y=fe(y,n/(sr-i[2]-i[3])),f=ke(f,o[0]),p=ke(p,o[0]),h=ke(h,o[1]),y=ke(y,o[1]),f=fe(f,rr/r),p=fe(p,rr/r),h=fe(h,sr/s),y=fe(y,sr/s);const b=Bo(dn([f,h,p,y],2)),g=Bo(Le(l,[0,0,4],[-1,-1,l.shape[2]-4]),[0]);return{boxes:b,scores:g}});return{boxes:a,scores:u}},zJ=t=>He(()=>{const n=Le(t,[0,0],[-1,1]),r=Le(t,[0,1],[-1,1]),s=Le(t,[0,2],[-1,1]),i=Le(t,[0,3],[-1,1]),o=lt(ke(n,s),2),a=lt(ke(r,i),2);return dn([o,a],1)}),nL=(t,e,n)=>{const r=n/rr,s=e/sr;return[r*t[0],s*t[1]-e-Na]},rL=(t,e,n)=>{const r=rr/n,s=sr/e;return[r*t[0],s*(t[1]+e+Na)]},cN={h1:[50,-100],a1:[0,-100],a8:[0,-150],h8:[50,-150]},sL=Dx({name:"corners",initialState:cN,reducers:{cornersSet(t,e){t[e.payload.key]=e.payload.xy},cornersReset(){return cN}}}),iL=()=>Fx(t=>t.corners),{cornersSet:L2,cornersReset:jJ}=sL.actions,WJ=sL.reducer,dN=(t,e,n)=>Math.max(e,Math.min(t,n)),oL=(t,e)=>Array.from(Array(t),n=>Array(e).fill(0)),qJ=Array.from({length:7},(t,e)=>e),GJ=Array.from({length:7},(t,e)=>e),HJ=GJ.map(t=>qJ.map(e=>[e,t])).flat(),KJ=[[0,1],[1,1],[1,0],[0,0]],aL=async(t,e)=>{const n=Zu(e,1),r=KP(e,1),s=await b2.nonMaxSuppressionAsync(t,n,100,.3,.1),i=He(()=>{const a=zJ(B0(t,s,0)),u=os(B0(r,s,0),1);return dn([a,u],1)}),o=i.arraySync();return rn([s,i,t,e,r,n]),o},XJ=async(t,e)=>{const n=t.current.videoWidth,r=t.current.videoHeight,{image4D:s,width:i,height:o,padding:a,roi:u}=P2(t),l=e.current.predict(s),c=D2(l,i,o,n,r,a,u),d=await aL(c.boxes,c.scores);return rn([l,s,c]),d},YJ=async(t,e,n)=>{const r=n.map(p=>[p[0],p[1]]),s=t.current.videoWidth,i=t.current.videoHeight,{image4D:o,width:a,height:u,padding:l,roi:c}=P2(t,r),d=e.current.predict(o),f=D2(d,a,u,s,i,l,c);rn([d,o]);let h=await aL(f.boxes,f.scores);return h=h.map(p=>[p[0],p[1]]),h},QJ=t=>{const e=t.flat().map(i=>Math.round(i)),r=new T2(e).triangles,s=[];for(let i=0;i<r.length;i+=3){const o=r[i],a=r[i+1],u=r[i+2],l=[o,a,u,-1];for(let c=0;c<r.length;c+=3){if(i===c)continue;const d=o===r[c]&&a===r[c+1]||o===r[c+1]&&a===r[c],f=a===r[c]&&u===r[c+1]||a===r[c+1]&&u===r[c],h=u===r[c]&&o===r[c+1]||u===r[c+1]&&o===r[c];if(d||f||h){l[3]=r[c+2];break}}l[3]!==-1&&s.push(l.map(c=>t[c]))}return s},ZJ=(t,e)=>{const n=Array.from({length:t.length},()=>Array(e.length).fill(0));for(let r=0;r<t.length;r++)for(let s=0;s<e.length;s++){const i=t[r][0]-e[s][0],o=t[r][1]-e[s][1];n[r][s]=Math.sqrt(i*i+o*o)}return n},uL=(t,e)=>{const n=HJ.map(o=>[o[0]+e[0],o[1]+e[1]]),r=ZJ(n,t);let s=0;for(let o=0;o<r.length;o++)s+=Math.min(...r[o]);return 1/(1+s)},JJ=t=>{const e=[0,0];for(let n=0;n<2;n++){let r=-7,s=1;const i={};for(;s-r>1;){const o=s+r>>1;[o,o+1].forEach(a=>{if(!(a in i)){const u=[0,0];u[n]=a,i[a]=uL(t,u)}}),i[o]>i[o+1]?s=o:r=o}e[n]=r+1}return e},fN=(t,e)=>{const n=ZD(KJ,t),r=Hg(e,n),s=JJ(r);return[uL(r,s),n,s]},eee=t=>{const e=QJ(t);if(e.length==0)return;let n,r,s;[n,r,s]=fN(e[0],t);for(let u=1;u<e.length;u++){const[l,c,d]=fN(e[u],t);l>n&&(n=l,r=c,s=d)}const i=r.inv(),o=[[s[0]-1,s[1]-1],[s[0]-1,s[1]+7],[s[0]+7,s[1]+7],[s[0]+7,s[1]-1]],a=Hg(o,i);for(let u=0;u<4;u++)a[u][0]=dN(a[u][0],0,rr),a[u][1]=dN(a[u][1],0,sr);return a},hN=t=>{let e=t.reduce((n,r)=>[n[0]+r[0],n[1]+r[1]],[0,0]);return e=e.map(n=>n/t.length),e},pN=(t,e)=>{const n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)},tee=(t,e,n)=>{const r=hN(t),s=hN(e);let i=0,o=0;for(let u=0;u<4;u++){const l=[(n[u%4][0]+n[(u+1)%4][0])/2,(n[u%4][1]+n[(u+1)%4][1])/2],c=[(n[(u+2)%4][0]+n[(u+3)%4][0])/2,(n[(u+2)%4][1]+n[(u+3)%4][1])/2],d=1/(1+pN(s,l)+pN(r,c));d>o&&(o=d,i=u)}return{a1:n[i%4],h1:n[(i+1)%4],h8:n[(i+2)%4],a8:n[(i+3)%4]}},nee=async(t,e,n,r,s,i)=>{if(O2(n))return;const o=await XJ(n,t),a=o.filter(f=>f[2]<=5),u=o.filter(f=>f[2]>5);if(a.length==0||u.length==0){i(["No pieces to label corners"]);return}const l=await YJ(n,e,o);if(l.length<5){i(["Need 5 xCorners",`Detected ${l.length}`]);return}const c=eee(l);if(c===void 0){i(["Failed to find corners"]);return}const d=tee(a,u,c);_2.forEach(f=>{const h=d[f],p={xy:nL(h,r.current.height,r.current.width),key:f};s(L2(p))}),iQ(r.current,l),i(["Found corners","Ready to record"])},ree=async(t,e,n,r,s,i)=>{const o=ld().numTensors;await nee(t,e,n,r,s,i);const a=ld().numTensors;return o<a&&console.error(`Memory Leak! (${a} > ${o})`),()=>{Xx()}},Kg=({piecesModelRef:t,xcornersModelRef:e,videoRef:n,canvasRef:r,setText:s})=>{const i=ei(),o=a=>{a.preventDefault(),ree(t,e,n,r,i,s)};return E.jsx(ho,{onClick:o,children:"Find Corners"})},Pl=({iconName:t})=>E.jsx("i",{className:`h4 bi ${t}`}),F2=({playing:t,setPlaying:e})=>{const n=r=>{r.preventDefault(),e(!t)};return E.jsx(ho,{onClick:n,children:E.jsx(Pl,{iconName:t?"bi-pause":"bi-play"})})};/**
 * @license
 * Copyright (c) 2023, Jeff Hlywa (jhlywa@gmail.com)
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice,
 *    this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */const tr="w",Fs="b",Nn="p",Hv="n",$m="b",Pf="r",ya="q",bn="k",Fy="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",Dr=-1,see={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},Be={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},je={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},$y={b:[16,32,17,15],w:[-16,-32,-17,-15]},mN={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},iee=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],oee=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],aee={p:1,n:2,b:4,r:8,q:16,k:32},uee="pnbrqkPNBRQK",gN=[Hv,$m,Pf,ya],lee=7,cee=6,dee=1,fee=0,Xp={[bn]:Be.KSIDE_CASTLE,[ya]:Be.QSIDE_CASTLE},ua={w:[{square:je.a1,flag:Be.QSIDE_CASTLE},{square:je.h1,flag:Be.KSIDE_CASTLE}],b:[{square:je.a8,flag:Be.QSIDE_CASTLE},{square:je.h8,flag:Be.KSIDE_CASTLE}]},hee={b:dee,w:cee},pee=["1-0","0-1","1/2-1/2","*"];function el(t){return t>>4}function Th(t){return t&15}function lL(t){return"0123456789".indexOf(t)!==-1}function ns(t){const e=Th(t),n=el(t);return"abcdefgh".substring(e,e+1)+"87654321".substring(n,n+1)}function hf(t){return t===tr?Fs:tr}function mee(t){const e=t.split(/\s+/);if(e.length!==6)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const n=parseInt(e[5],10);if(isNaN(n)||n<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const r=parseInt(e[4],10);if(isNaN(r)||r<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(e[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(e[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(e[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const s=e[0].split("/");if(s.length!==8)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let o=0;o<s.length;o++){let a=0,u=!1;for(let l=0;l<s[o].length;l++)if(lL(s[o][l])){if(u)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};a+=parseInt(s[o][l],10),u=!0}else{if(!/^[prnbqkPRNBQK]$/.test(s[o][l]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};a+=1,u=!1}if(a!==8)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if(e[3][1]=="3"&&e[1]=="w"||e[3][1]=="6"&&e[1]=="b")return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const i=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:o,regex:a}of i){if(!a.test(e[0]))return{ok:!1,error:`Invalid FEN: missing ${o} king`};if((e[0].match(a)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${o} kings`}}return Array.from(s[0]+s[7]).some(o=>o.toUpperCase()==="P")?{ok:!1,error:"Invalid FEN: some pawns are on the edge rows"}:{ok:!0}}function gee(t,e){const n=t.from,r=t.to,s=t.piece;let i=0,o=0,a=0;for(let u=0,l=e.length;u<l;u++){const c=e[u].from,d=e[u].to,f=e[u].piece;s===f&&n!==c&&r===d&&(i++,el(n)===el(c)&&o++,Th(n)===Th(c)&&a++)}return i>0?o>0&&a>0?ns(n):a>0?ns(n).charAt(1):ns(n).charAt(0):""}function la(t,e,n,r,s,i=void 0,o=Be.NORMAL){const a=el(r);if(s===Nn&&(a===lee||a===fee))for(let u=0;u<gN.length;u++){const l=gN[u];t.push({color:e,from:n,to:r,piece:s,captured:i,promotion:l,flags:o|Be.PROMOTION})}else t.push({color:e,from:n,to:r,piece:s,captured:i,flags:o})}function yN(t){let e=t.charAt(0);return e>="a"&&e<="h"?t.match(/[a-h]\d.*[a-h]\d/)?void 0:Nn:(e=e.toLowerCase(),e==="o"?bn:e)}function By(t){return t.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}function My(t){return t.split(" ").slice(0,4).join(" ")}class $2{constructor(e=Fy){J(this,"_board",new Array(128));J(this,"_turn",tr);J(this,"_header",{});J(this,"_kings",{w:Dr,b:Dr});J(this,"_epSquare",-1);J(this,"_halfMoves",0);J(this,"_moveNumber",0);J(this,"_history",[]);J(this,"_comments",{});J(this,"_castling",{w:0,b:0});J(this,"_positionCount",{});this.load(e)}clear({preserveHeaders:e=!1}={}){this._board=new Array(128),this._kings={w:Dr,b:Dr},this._turn=tr,this._castling={w:0,b:0},this._epSquare=Dr,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=e?this._header:{},this._positionCount={},delete this._header.SetUp,delete this._header.FEN}removeHeader(e){e in this._header&&delete this._header[e]}load(e,{skipValidation:n=!1,preserveHeaders:r=!1}={}){let s=e.split(/\s+/);if(s.length>=2&&s.length<6){const a=["-","-","0","1"];e=s.concat(a.slice(-(6-s.length))).join(" ")}if(s=e.split(/\s+/),!n){const{ok:a,error:u}=mee(e);if(!a)throw new Error(u)}const i=s[0];let o=0;this.clear({preserveHeaders:r});for(let a=0;a<i.length;a++){const u=i.charAt(a);if(u==="/")o+=8;else if(lL(u))o+=parseInt(u,10);else{const l=u<"a"?tr:Fs;this._put({type:u.toLowerCase(),color:l},ns(o)),o++}}this._turn=s[1],s[2].indexOf("K")>-1&&(this._castling.w|=Be.KSIDE_CASTLE),s[2].indexOf("Q")>-1&&(this._castling.w|=Be.QSIDE_CASTLE),s[2].indexOf("k")>-1&&(this._castling.b|=Be.KSIDE_CASTLE),s[2].indexOf("q")>-1&&(this._castling.b|=Be.QSIDE_CASTLE),this._epSquare=s[3]==="-"?Dr:je[s[3]],this._halfMoves=parseInt(s[4],10),this._moveNumber=parseInt(s[5],10),this._updateSetup(e),this._incPositionCount(e)}fen(){var i,o;let e=0,n="";for(let a=je.a8;a<=je.h1;a++){if(this._board[a]){e>0&&(n+=e,e=0);const{color:u,type:l}=this._board[a];n+=u===tr?l.toUpperCase():l.toLowerCase()}else e++;a+1&136&&(e>0&&(n+=e),a!==je.h1&&(n+="/"),e=0,a+=8)}let r="";this._castling[tr]&Be.KSIDE_CASTLE&&(r+="K"),this._castling[tr]&Be.QSIDE_CASTLE&&(r+="Q"),this._castling[Fs]&Be.KSIDE_CASTLE&&(r+="k"),this._castling[Fs]&Be.QSIDE_CASTLE&&(r+="q"),r=r||"-";let s="-";if(this._epSquare!==Dr){const a=this._epSquare+(this._turn===tr?16:-16),u=[a+1,a-1];for(const l of u){if(l&136)continue;const c=this._turn;if(((i=this._board[l])==null?void 0:i.color)===c&&((o=this._board[l])==null?void 0:o.type)===Nn){this._makeMove({color:c,from:l,to:this._epSquare,piece:Nn,captured:Nn,flags:Be.EP_CAPTURE});const d=!this._isKingAttacked(c);if(this._undoMove(),d){s=ns(this._epSquare);break}}}}return[n,this._turn,r,s,this._halfMoves,this._moveNumber].join(" ")}_updateSetup(e){this._history.length>0||(e!==Fy?(this._header.SetUp="1",this._header.FEN=e):(delete this._header.SetUp,delete this._header.FEN))}reset(){this.load(Fy)}get(e){return this._board[je[e]]||!1}put({type:e,color:n},r){return this._put({type:e,color:n},r)?(this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0):!1}_put({type:e,color:n},r){if(uee.indexOf(e.toLowerCase())===-1||!(r in je))return!1;const s=je[r];if(e==bn&&!(this._kings[n]==Dr||this._kings[n]==s))return!1;const i=this._board[s];return i&&i.type===bn&&(this._kings[i.color]=Dr),this._board[s]={type:e,color:n},e===bn&&(this._kings[n]=s),!0}remove(e){const n=this.get(e);return delete this._board[je[e]],n&&n.type===bn&&(this._kings[n.color]=Dr),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),n}_updateCastlingRights(){var r,s,i,o,a,u,l,c,d,f,h,p;const e=((r=this._board[je.e1])==null?void 0:r.type)===bn&&((s=this._board[je.e1])==null?void 0:s.color)===tr,n=((i=this._board[je.e8])==null?void 0:i.type)===bn&&((o=this._board[je.e8])==null?void 0:o.color)===Fs;(!e||((a=this._board[je.a1])==null?void 0:a.type)!==Pf||((u=this._board[je.a1])==null?void 0:u.color)!==tr)&&(this._castling.w&=~Be.QSIDE_CASTLE),(!e||((l=this._board[je.h1])==null?void 0:l.type)!==Pf||((c=this._board[je.h1])==null?void 0:c.color)!==tr)&&(this._castling.w&=~Be.KSIDE_CASTLE),(!n||((d=this._board[je.a8])==null?void 0:d.type)!==Pf||((f=this._board[je.a8])==null?void 0:f.color)!==Fs)&&(this._castling.b&=~Be.QSIDE_CASTLE),(!n||((h=this._board[je.h8])==null?void 0:h.type)!==Pf||((p=this._board[je.h8])==null?void 0:p.color)!==Fs)&&(this._castling.b&=~Be.KSIDE_CASTLE)}_updateEnPassantSquare(){var i,o;if(this._epSquare===Dr)return;const e=this._epSquare+(this._turn===tr?-16:16),n=this._epSquare+(this._turn===tr?16:-16),r=[n+1,n-1];if(this._board[e]!==null||this._board[this._epSquare]!==null||((i=this._board[n])==null?void 0:i.color)!==hf(this._turn)||((o=this._board[n])==null?void 0:o.type)!==Nn){this._epSquare=Dr;return}const s=a=>{var u,l;return!(a&136)&&((u=this._board[a])==null?void 0:u.color)===this._turn&&((l=this._board[a])==null?void 0:l.type)===Nn};r.some(s)||(this._epSquare=Dr)}_attacked(e,n){for(let r=je.a8;r<=je.h1;r++){if(r&136){r+=7;continue}if(this._board[r]===void 0||this._board[r].color!==e)continue;const s=this._board[r],i=r-n;if(i===0)continue;const o=i+119;if(iee[o]&aee[s.type]){if(s.type===Nn){if(i>0){if(s.color===tr)return!0}else if(s.color===Fs)return!0;continue}if(s.type==="n"||s.type==="k")return!0;const a=oee[o];let u=r+a,l=!1;for(;u!==n;){if(this._board[u]!=null){l=!0;break}u+=a}if(!l)return!0}}return!1}_isKingAttacked(e){const n=this._kings[e];return n===-1?!1:this._attacked(hf(e),n)}isAttacked(e,n){return this._attacked(n,je[e])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const e={b:0,n:0,r:0,q:0,k:0,p:0},n=[];let r=0,s=0;for(let i=je.a8;i<=je.h1;i++){if(s=(s+1)%2,i&136){i+=7;continue}const o=this._board[i];o&&(e[o.type]=o.type in e?e[o.type]+1:1,o.type===$m&&n.push(s),r++)}if(r===2)return!0;if(r===3&&(e[$m]===1||e[Hv]===1))return!0;if(r===e[$m]+2){let i=0;const o=n.length;for(let a=0;a<o;a++)i+=n[a];if(i===0||i===o)return!0}return!1}isThreefoldRepetition(){return this._getPositionCount(this.fen())>=3}isDraw(){return this._halfMoves>=100||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isStalemate()||this.isDraw()}moves({verbose:e=!1,square:n=void 0,piece:r=void 0}={}){const s=this._moves({square:n,piece:r});return e?s.map(i=>this._makePretty(i)):s.map(i=>this._moveToSan(i,s))}_moves({legal:e=!0,piece:n=void 0,square:r=void 0}={}){var h;const s=r?r.toLowerCase():void 0,i=n==null?void 0:n.toLowerCase(),o=[],a=this._turn,u=hf(a);let l=je.a8,c=je.h1,d=!1;if(s)if(s in je)l=c=je[s],d=!0;else return[];for(let p=l;p<=c;p++){if(p&136){p+=7;continue}if(!this._board[p]||this._board[p].color===u)continue;const{type:y}=this._board[p];let b;if(y===Nn){if(i&&i!==y)continue;b=p+$y[a][0],this._board[b]||(la(o,a,p,b,Nn),b=p+$y[a][1],hee[a]===el(p)&&!this._board[b]&&la(o,a,p,b,Nn,void 0,Be.BIG_PAWN));for(let g=2;g<4;g++)b=p+$y[a][g],!(b&136)&&(((h=this._board[b])==null?void 0:h.color)===u?la(o,a,p,b,Nn,this._board[b].type,Be.CAPTURE):b===this._epSquare&&la(o,a,p,b,Nn,Nn,Be.EP_CAPTURE))}else{if(i&&i!==y)continue;for(let g=0,v=mN[y].length;g<v;g++){const w=mN[y][g];for(b=p;b+=w,!(b&136);){if(!this._board[b])la(o,a,p,b,y);else{if(this._board[b].color===a)break;la(o,a,p,b,y,this._board[b].type,Be.CAPTURE);break}if(y===Hv||y===bn)break}}}}if((i===void 0||i===bn)&&(!d||c===this._kings[a])){if(this._castling[a]&Be.KSIDE_CASTLE){const p=this._kings[a],y=p+2;!this._board[p+1]&&!this._board[y]&&!this._attacked(u,this._kings[a])&&!this._attacked(u,p+1)&&!this._attacked(u,y)&&la(o,a,this._kings[a],y,bn,void 0,Be.KSIDE_CASTLE)}if(this._castling[a]&Be.QSIDE_CASTLE){const p=this._kings[a],y=p-2;!this._board[p-1]&&!this._board[p-2]&&!this._board[p-3]&&!this._attacked(u,this._kings[a])&&!this._attacked(u,p-1)&&!this._attacked(u,y)&&la(o,a,this._kings[a],y,bn,void 0,Be.QSIDE_CASTLE)}}if(!e||this._kings[a]===-1)return o;const f=[];for(let p=0,y=o.length;p<y;p++)this._makeMove(o[p]),this._isKingAttacked(a)||f.push(o[p]),this._undoMove();return f}move(e,{strict:n=!1}={}){let r=null;if(typeof e=="string")r=this._moveFromSan(e,n);else if(typeof e=="object"){const i=this._moves();for(let o=0,a=i.length;o<a;o++)if(e.from===ns(i[o].from)&&e.to===ns(i[o].to)&&(!("promotion"in i[o])||e.promotion===i[o].promotion)){r=i[o];break}}if(!r)throw typeof e=="string"?new Error(`Invalid move: ${e}`):new Error(`Invalid move: ${JSON.stringify(e)}`);const s=this._makePretty(r);return this._makeMove(r),this._incPositionCount(s.after),s}_push(e){this._history.push({move:e,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_makeMove(e){const n=this._turn,r=hf(n);if(this._push(e),this._board[e.to]=this._board[e.from],delete this._board[e.from],e.flags&Be.EP_CAPTURE&&(this._turn===Fs?delete this._board[e.to-16]:delete this._board[e.to+16]),e.promotion&&(this._board[e.to]={type:e.promotion,color:n}),this._board[e.to].type===bn){if(this._kings[n]=e.to,e.flags&Be.KSIDE_CASTLE){const s=e.to-1,i=e.to+1;this._board[s]=this._board[i],delete this._board[i]}else if(e.flags&Be.QSIDE_CASTLE){const s=e.to+1,i=e.to-2;this._board[s]=this._board[i],delete this._board[i]}this._castling[n]=0}if(this._castling[n]){for(let s=0,i=ua[n].length;s<i;s++)if(e.from===ua[n][s].square&&this._castling[n]&ua[n][s].flag){this._castling[n]^=ua[n][s].flag;break}}if(this._castling[r]){for(let s=0,i=ua[r].length;s<i;s++)if(e.to===ua[r][s].square&&this._castling[r]&ua[r][s].flag){this._castling[r]^=ua[r][s].flag;break}}e.flags&Be.BIG_PAWN?n===Fs?this._epSquare=e.to-16:this._epSquare=e.to+16:this._epSquare=Dr,e.piece===Nn?this._halfMoves=0:e.flags&(Be.CAPTURE|Be.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,n===Fs&&this._moveNumber++,this._turn=r}undo(){const e=this._undoMove();if(e){const n=this._makePretty(e);return this._decPositionCount(n.after),n}return null}_undoMove(){const e=this._history.pop();if(e===void 0)return null;const n=e.move;this._kings=e.kings,this._turn=e.turn,this._castling=e.castling,this._epSquare=e.epSquare,this._halfMoves=e.halfMoves,this._moveNumber=e.moveNumber;const r=this._turn,s=hf(r);if(this._board[n.from]=this._board[n.to],this._board[n.from].type=n.piece,delete this._board[n.to],n.captured)if(n.flags&Be.EP_CAPTURE){let i;r===Fs?i=n.to-16:i=n.to+16,this._board[i]={type:Nn,color:s}}else this._board[n.to]={type:n.captured,color:s};if(n.flags&(Be.KSIDE_CASTLE|Be.QSIDE_CASTLE)){let i,o;n.flags&Be.KSIDE_CASTLE?(i=n.to+1,o=n.to-1):(i=n.to-2,o=n.to+1),this._board[i]=this._board[o],delete this._board[o]}return n}pgn({newline:e=`
`,maxWidth:n=0}={}){const r=[];let s=!1;for(const f in this._header)r.push("["+f+' "'+this._header[f]+'"]'+e),s=!0;s&&this._history.length&&r.push(e);const i=f=>{const h=this._comments[this.fen()];if(typeof h<"u"){const p=f.length>0?" ":"";f=`${f}${p}{${h}}`}return f},o=[];for(;this._history.length>0;)o.push(this._undoMove());const a=[];let u="";for(o.length===0&&a.push(i(""));o.length>0;){u=i(u);const f=o.pop();if(!f)break;if(!this._history.length&&f.color==="b"){const h=`${this._moveNumber}. ...`;u=u?`${u} ${h}`:h}else f.color==="w"&&(u.length&&a.push(u),u=this._moveNumber+".");u=u+" "+this._moveToSan(f,this._moves({legal:!0})),this._makeMove(f)}if(u.length&&a.push(i(u)),typeof this._header.Result<"u"&&a.push(this._header.Result),n===0)return r.join("")+a.join(" ");const l=function(){return r.length>0&&r[r.length-1]===" "?(r.pop(),!0):!1},c=function(f,h){for(const p of h.split(" "))if(p){if(f+p.length>n){for(;l();)f--;r.push(e),f=0}r.push(p),f+=p.length,r.push(" "),f++}return l()&&f--,f};let d=0;for(let f=0;f<a.length;f++){if(d+a[f].length>n&&a[f].includes("{")){d=c(d,a[f]);continue}d+a[f].length>n&&f!==0?(r[r.length-1]===" "&&r.pop(),r.push(e),d=0):f!==0&&(r.push(" "),d++),r.push(a[f]),d+=a[f].length}return r.join("")}header(...e){for(let n=0;n<e.length;n+=2)typeof e[n]=="string"&&typeof e[n+1]=="string"&&(this._header[e[n]]=e[n+1]);return this._header}loadPgn(e,{strict:n=!1,newlineChar:r=`\r?
`}={}){function s(w){return w.replace(/\\/g,"\\")}function i(w){const x={},N=w.split(new RegExp(s(r)));let k="",O="";for(let _=0;_<N.length;_++){const $=/^\s*\[\s*([A-Za-z]+)\s*"(.*)"\s*\]\s*$/;k=N[_].replace($,"$1"),O=N[_].replace($,"$2"),k.trim().length>0&&(x[k]=O)}return x}e=e.trim();const a=new RegExp("^(\\[((?:"+s(r)+")|.)*\\])((?:\\s*"+s(r)+"){2}|(?:\\s*"+s(r)+")*$)").exec(e),u=a&&a.length>=2?a[1]:"";this.reset();const l=i(u);let c="";for(const w in l)w.toLowerCase()==="fen"&&(c=l[w]),this.header(w,l[w]);if(!n)c&&this.load(c,{preserveHeaders:!0});else if(l.SetUp==="1"){if(!("FEN"in l))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(l.FEN,{preserveHeaders:!0})}function d(w){return Array.from(w).map(function(x){return x.charCodeAt(0)<128?x.charCodeAt(0).toString(16):encodeURIComponent(x).replace(/%/g,"").toLowerCase()}).join("")}function f(w){return w.length==0?"":decodeURIComponent("%"+(w.match(/.{1,2}/g)||[]).join("%"))}const h=function(w){return w=w.replace(new RegExp(s(r),"g")," "),`{${d(w.slice(1,w.length-1))}}`},p=function(w){if(w.startsWith("{")&&w.endsWith("}"))return f(w.slice(1,w.length-1))};let y=e.replace(u,"").replace(new RegExp(`({[^}]*})+?|;([^${s(r)}]*)`,"g"),function(w,x,N){return x!==void 0?h(x):" "+h(`{${N.slice(1)}}`)}).replace(new RegExp(s(r),"g")," ");const b=/(\([^()]+\))+?/g;for(;b.test(y);)y=y.replace(b,"");y=y.replace(/\d+\.(\.\.)?/g,""),y=y.replace(/\.\.\./g,""),y=y.replace(/\$\d+/g,"");let g=y.trim().split(new RegExp(/\s+/));g=g.filter(w=>w!=="");let v="";for(let w=0;w<g.length;w++){const x=p(g[w]);if(x!==void 0){this._comments[this.fen()]=x;continue}const N=this._moveFromSan(g[w],n);if(N==null)if(pee.indexOf(g[w])>-1)v=g[w];else throw new Error(`Invalid move in PGN: ${g[w]}`);else v="",this._makeMove(N),this._incPositionCount(this.fen())}v&&Object.keys(this._header).length&&!this._header.Result&&this.header("Result",v)}_moveToSan(e,n){let r="";if(e.flags&Be.KSIDE_CASTLE)r="O-O";else if(e.flags&Be.QSIDE_CASTLE)r="O-O-O";else{if(e.piece!==Nn){const s=gee(e,n);r+=e.piece.toUpperCase()+s}e.flags&(Be.CAPTURE|Be.EP_CAPTURE)&&(e.piece===Nn&&(r+=ns(e.from)[0]),r+="x"),r+=ns(e.to),e.promotion&&(r+="="+e.promotion.toUpperCase())}return this._makeMove(e),this.isCheck()&&(this.isCheckmate()?r+="#":r+="+"),this._undoMove(),r}_moveFromSan(e,n=!1){const r=By(e);let s=yN(r),i=this._moves({legal:!0,piece:s});for(let f=0,h=i.length;f<h;f++)if(r===By(this._moveToSan(i[f],i)))return i[f];if(n)return null;let o,a,u,l,c,d=!1;if(a=r.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),a?(o=a[1],u=a[2],l=a[3],c=a[4],u.length==1&&(d=!0)):(a=r.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),a&&(o=a[1],u=a[2],l=a[3],c=a[4],u.length==1&&(d=!0))),s=yN(r),i=this._moves({legal:!0,piece:o||s}),!l)return null;for(let f=0,h=i.length;f<h;f++)if(u){if((!o||o.toLowerCase()==i[f].piece)&&je[u]==i[f].from&&je[l]==i[f].to&&(!c||c.toLowerCase()==i[f].promotion))return i[f];if(d){const p=ns(i[f].from);if((!o||o.toLowerCase()==i[f].piece)&&je[l]==i[f].to&&(u==p[0]||u==p[1])&&(!c||c.toLowerCase()==i[f].promotion))return i[f]}}else if(r===By(this._moveToSan(i[f],i)).replace("x",""))return i[f];return null}ascii(){let e=`   +------------------------+
`;for(let n=je.a8;n<=je.h1;n++){if(Th(n)===0&&(e+=" "+"87654321"[el(n)]+" |"),this._board[n]){const r=this._board[n].type,i=this._board[n].color===tr?r.toUpperCase():r.toLowerCase();e+=" "+i+" "}else e+=" . ";n+1&136&&(e+=`|
`,n+=8)}return e+=`   +------------------------+
`,e+="     a  b  c  d  e  f  g  h",e}perft(e){const n=this._moves({legal:!1});let r=0;const s=this._turn;for(let i=0,o=n.length;i<o;i++)this._makeMove(n[i]),this._isKingAttacked(s)||(e-1>0?r+=this.perft(e-1):r++),this._undoMove();return r}_makePretty(e){const{color:n,piece:r,from:s,to:i,flags:o,captured:a,promotion:u}=e;let l="";for(const h in Be)Be[h]&o&&(l+=see[h]);const c=ns(s),d=ns(i),f={color:n,piece:r,from:c,to:d,san:this._moveToSan(e,this._moves({legal:!0})),flags:l,lan:c+d,before:this.fen(),after:""};return this._makeMove(e),f.after=this.fen(),this._undoMove(),a&&(f.captured=a),u&&(f.promotion=u,f.lan+=u),f}turn(){return this._turn}board(){const e=[];let n=[];for(let r=je.a8;r<=je.h1;r++)this._board[r]==null?n.push(null):n.push({square:ns(r),type:this._board[r].type,color:this._board[r].color}),r+1&136&&(e.push(n),n=[],r+=8);return e}squareColor(e){if(e in je){const n=je[e];return(el(n)+Th(n))%2===0?"light":"dark"}return null}history({verbose:e=!1}={}){const n=[],r=[];for(;this._history.length>0;)n.push(this._undoMove());for(;;){const s=n.pop();if(!s)break;e?r.push(this._makePretty(s)):r.push(this._moveToSan(s,this._moves())),this._makeMove(s)}return r}_getPositionCount(e){const n=My(e);return this._positionCount[n]||0}_incPositionCount(e){const n=My(e);this._positionCount[n]===void 0&&(this._positionCount[n]=0),this._positionCount[n]+=1}_decPositionCount(e){const n=My(e);this._positionCount[n]===1?delete this._positionCount[n]:this._positionCount[n]-=1}_pruneComments(){const e=[],n={},r=s=>{s in this._comments&&(n[s]=this._comments[s])};for(;this._history.length>0;)e.push(this._undoMove());for(r(this.fen());;){const s=e.pop();if(!s)break;this._makeMove(s),r(this.fen())}this._comments=n}getComment(){return this._comments[this.fen()]}setComment(e){this._comments[this.fen()]=e.replace("{","[").replace("}","]")}deleteComment(){const e=this._comments[this.fen()];return delete this._comments[this.fen()],e}getComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>({fen:e,comment:this._comments[e]}))}deleteComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>{const n=this._comments[e];return delete this._comments[e],{fen:e,comment:n}})}setCastlingRights(e,n){for(const s of[bn,ya])n[s]!==void 0&&(n[s]?this._castling[e]|=Xp[s]:this._castling[e]&=~Xp[s]);this._updateCastlingRights();const r=this.getCastlingRights(e);return(n[bn]===void 0||n[bn]===r[bn])&&(n[ya]===void 0||n[ya]===r[ya])}getCastlingRights(e){return{[bn]:(this._castling[e]&Xp[bn])!==0,[ya]:(this._castling[e]&Xp[ya])!==0}}moveNumber(){return this._moveNumber}}const pf={moves:"",fen:qv,start:qv,lastMove:"",greedy:!1},cL=Dx({name:"game",initialState:pf,reducers:{gameSetMoves(t,e){t.moves=e.payload},gameSetFen(t,e){t.fen=e.payload},gameSetStart(t,e){t.start=e.payload},gameSetLastMove(t,e){t.lastMove=e.payload},gameResetMoves(t){t.moves=pf.moves},gameResetFen(t){t.fen=pf.fen},gameResetStart(t){t.start=pf.start},gameResetLastMove(t){t.lastMove=pf.lastMove},gameUpdate(t,e){return{start:t.start,moves:e.payload.moves,fen:e.payload.fen,lastMove:e.payload.lastMove,greedy:e.payload.greedy}}}}),yee=t=>t.pgn().replace(/\[.*?\]/g,"").replace(/\r?\n|\r/g,""),Cd=()=>Fx(t=>t.game),B2=t=>`[FEN "${t.start}"]
 
`+t.moves,M2=(t,e=!1)=>{const n=t.history({verbose:!0}),r=yee(t),s=t.fen(),i=n.length===0?"":n[n.length-1].lan;return{moves:r,fen:s,lastMove:i,greedy:e}},Kv=t=>{const e=new $2(t.start);return e.loadPgn(B2(t)),e},{gameSetMoves:gxe,gameResetMoves:Nd,gameSetFen:bee,gameResetFen:Xh,gameSetStart:dL,gameResetStart:fL,gameSetLastMove:yxe,gameResetLastMove:bxe,gameUpdate:V2}=cL.actions,vee=cL.reducer,hL=({setPlaying:t,setText:e})=>{const n=ei(),r=s=>{s.preventDefault(),t(!1),n(Nd()),n(Xh()),e(["Reset to start position"])};return E.jsx(ho,{onClick:r,children:E.jsx(Pl,{iconName:"bi-stop"})})},wee=({setText:t,playing:e})=>{const n=B2(Cd()),r=s=>{s.preventDefault(),navigator.clipboard.writeText(n),e||t(["Copied PGN"])};return E.jsx(ho,{onClick:r,children:"Copy PGN"})};var Xg={exports:{}},pL={},mL={exports:{}},xee="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",See=xee,Aee=See;function gL(){}function yL(){}yL.resetWarningCache=gL;var Eee=function(){function t(r,s,i,o,a,u){if(u!==Aee){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:yL,resetWarningCache:gL};return n.PropTypes=n,n};mL.exports=Eee();var U2=mL.exports;const Ge=md(U2);function bL(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=bL(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function bN(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=bL(t))&&(r&&(r+=" "),r+=e);return r}const Cee=Object.freeze(Object.defineProperty({__proto__:null,clsx:bN,default:bN},Symbol.toStringTag,{value:"Module"})),Nee=gT(Cee);var sn={},mo={};Object.defineProperty(mo,"__esModule",{value:!0});mo.dontSetMe=Ree;mo.findInArray=_ee;mo.int=kee;mo.isFunction=Tee;mo.isNum=Iee;function _ee(t,e){for(let n=0,r=t.length;n<r;n++)if(e.apply(e,[t[n],n,t]))return t[n]}function Tee(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function Iee(t){return typeof t=="number"&&!isNaN(t)}function kee(t){return parseInt(t,10)}function Ree(t,e,n){if(t[e])return new Error("Invalid prop ".concat(e," passed to ").concat(n," - do not set this, set it on the child."))}var Dl={};Object.defineProperty(Dl,"__esModule",{value:!0});Dl.browserPrefixToKey=wL;Dl.browserPrefixToStyle=Oee;Dl.default=void 0;Dl.getPrefix=vL;const Vy=["Moz","Webkit","O","ms"];function vL(){var t;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const n=(t=window.document)===null||t===void 0||(t=t.documentElement)===null||t===void 0?void 0:t.style;if(!n||e in n)return"";for(let r=0;r<Vy.length;r++)if(wL(e,Vy[r])in n)return Vy[r];return""}function wL(t,e){return e?"".concat(e).concat(Pee(t)):t}function Oee(t,e){return e?"-".concat(e.toLowerCase(),"-").concat(t):t}function Pee(t){let e="",n=!0;for(let r=0;r<t.length;r++)n?(e+=t[r].toUpperCase(),n=!1):t[r]==="-"?n=!0:e+=t[r];return e}Dl.default=vL();Object.defineProperty(sn,"__esModule",{value:!0});sn.addClassName=AL;sn.addEvent=Fee;sn.addUserSelectStyles=Hee;sn.createCSSTransform=jee;sn.createSVGTransform=Wee;sn.getTouch=qee;sn.getTouchIdentifier=Gee;sn.getTranslation=z2;sn.innerHeight=Vee;sn.innerWidth=Uee;sn.matchesSelector=SL;sn.matchesSelectorAndParentsTo=Lee;sn.offsetXYFromParent=zee;sn.outerHeight=Bee;sn.outerWidth=Mee;sn.removeClassName=EL;sn.removeEvent=$ee;sn.removeUserSelectStyles=Kee;var fs=mo,vN=Dee(Dl);function xL(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(xL=function(r){return r?n:e})(t)}function Dee(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=xL(e);if(n&&n.has(t))return n.get(t);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)){var o=s?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}let Yp="";function SL(t,e){return Yp||(Yp=(0,fs.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,fs.isFunction)(t[n])})),(0,fs.isFunction)(t[Yp])?t[Yp](e):!1}function Lee(t,e,n){let r=t;do{if(SL(r,e))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function Fee(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.addEventListener?t.addEventListener(e,n,s):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}function $ee(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.removeEventListener?t.removeEventListener(e,n,s):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}function Bee(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,fs.int)(n.borderTopWidth),e+=(0,fs.int)(n.borderBottomWidth),e}function Mee(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,fs.int)(n.borderLeftWidth),e+=(0,fs.int)(n.borderRightWidth),e}function Vee(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,fs.int)(n.paddingTop),e-=(0,fs.int)(n.paddingBottom),e}function Uee(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,fs.int)(n.paddingLeft),e-=(0,fs.int)(n.paddingRight),e}function zee(t,e,n){const s=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),i=(t.clientX+e.scrollLeft-s.left)/n,o=(t.clientY+e.scrollTop-s.top)/n;return{x:i,y:o}}function jee(t,e){const n=z2(t,e,"px");return{[(0,vN.browserPrefixToKey)("transform",vN.default)]:n}}function Wee(t,e){return z2(t,e,"")}function z2(t,e,n){let{x:r,y:s}=t,i="translate(".concat(r).concat(n,",").concat(s).concat(n,")");if(e){const o="".concat(typeof e.x=="string"?e.x:e.x+n),a="".concat(typeof e.y=="string"?e.y:e.y+n);i="translate(".concat(o,", ").concat(a,")")+i}return i}function qee(t,e){return t.targetTouches&&(0,fs.findInArray)(t.targetTouches,n=>e===n.identifier)||t.changedTouches&&(0,fs.findInArray)(t.changedTouches,n=>e===n.identifier)}function Gee(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier}function Hee(t){if(!t)return;let e=t.getElementById("react-draggable-style-el");e||(e=t.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(e)),t.body&&AL(t.body,"react-draggable-transparent-selection")}function Kee(t){if(t)try{if(t.body&&EL(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{const e=(t.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function AL(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)")))||(t.className+=" ".concat(e))}function EL(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)"),"g"),"")}var go={};Object.defineProperty(go,"__esModule",{value:!0});go.canDragX=Qee;go.canDragY=Zee;go.createCoreData=ete;go.createDraggableData=tte;go.getBoundPosition=Xee;go.getControlPosition=Jee;go.snapToGrid=Yee;var ts=mo,kc=sn;function Xee(t,e,n){if(!t.props.bounds)return[e,n];let{bounds:r}=t.props;r=typeof r=="string"?r:nte(r);const s=j2(t);if(typeof r=="string"){const{ownerDocument:i}=s,o=i.defaultView;let a;if(r==="parent"?a=s.parentNode:a=i.querySelector(r),!(a instanceof o.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const u=a,l=o.getComputedStyle(s),c=o.getComputedStyle(u);r={left:-s.offsetLeft+(0,ts.int)(c.paddingLeft)+(0,ts.int)(l.marginLeft),top:-s.offsetTop+(0,ts.int)(c.paddingTop)+(0,ts.int)(l.marginTop),right:(0,kc.innerWidth)(u)-(0,kc.outerWidth)(s)-s.offsetLeft+(0,ts.int)(c.paddingRight)-(0,ts.int)(l.marginRight),bottom:(0,kc.innerHeight)(u)-(0,kc.outerHeight)(s)-s.offsetTop+(0,ts.int)(c.paddingBottom)-(0,ts.int)(l.marginBottom)}}return(0,ts.isNum)(r.right)&&(e=Math.min(e,r.right)),(0,ts.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,ts.isNum)(r.left)&&(e=Math.max(e,r.left)),(0,ts.isNum)(r.top)&&(n=Math.max(n,r.top)),[e,n]}function Yee(t,e,n){const r=Math.round(e/t[0])*t[0],s=Math.round(n/t[1])*t[1];return[r,s]}function Qee(t){return t.props.axis==="both"||t.props.axis==="x"}function Zee(t){return t.props.axis==="both"||t.props.axis==="y"}function Jee(t,e,n){const r=typeof e=="number"?(0,kc.getTouch)(t,e):null;if(typeof e=="number"&&!r)return null;const s=j2(n),i=n.props.offsetParent||s.offsetParent||s.ownerDocument.body;return(0,kc.offsetXYFromParent)(r||t,i,n.props.scale)}function ete(t,e,n){const r=!(0,ts.isNum)(t.lastX),s=j2(t);return r?{node:s,deltaX:0,deltaY:0,lastX:e,lastY:n,x:e,y:n}:{node:s,deltaX:e-t.lastX,deltaY:n-t.lastY,lastX:t.lastX,lastY:t.lastY,x:e,y:n}}function tte(t,e){const n=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/n,y:t.state.y+e.deltaY/n,deltaX:e.deltaX/n,deltaY:e.deltaY/n,lastX:t.state.x,lastY:t.state.y}}function nte(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}function j2(t){const e=t.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var Yg={},Qg={};Object.defineProperty(Qg,"__esModule",{value:!0});Qg.default=rte;function rte(){}Object.defineProperty(Yg,"__esModule",{value:!0});Yg.default=void 0;var Uy=ite(P),Lr=W2(U2),ste=W2(Mh),er=sn,ca=go,zy=mo,mf=W2(Qg);function W2(t){return t&&t.__esModule?t:{default:t}}function CL(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(CL=function(r){return r?n:e})(t)}function ite(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=CL(e);if(n&&n.has(t))return n.get(t);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)){var o=s?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}function wr(t,e,n){return e=ote(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ote(t){var e=ate(t,"string");return typeof e=="symbol"?e:String(e)}function ate(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const mi={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let da=mi.mouse,Zg=class extends Uy.Component{constructor(){super(...arguments),wr(this,"dragging",!1),wr(this,"lastX",NaN),wr(this,"lastY",NaN),wr(this,"touchIdentifier",null),wr(this,"mounted",!1),wr(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=n;if(this.props.disabled||!(e.target instanceof r.defaultView.Node)||this.props.handle&&!(0,er.matchesSelectorAndParentsTo)(e.target,this.props.handle,n)||this.props.cancel&&(0,er.matchesSelectorAndParentsTo)(e.target,this.props.cancel,n))return;e.type==="touchstart"&&e.preventDefault();const s=(0,er.getTouchIdentifier)(e);this.touchIdentifier=s;const i=(0,ca.getControlPosition)(e,s,this);if(i==null)return;const{x:o,y:a}=i,u=(0,ca.createCoreData)(this,o,a);(0,mf.default)("DraggableCore: handleDragStart: %j",u),(0,mf.default)("calling",this.props.onStart),!(this.props.onStart(e,u)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,er.addUserSelectStyles)(r),this.dragging=!0,this.lastX=o,this.lastY=a,(0,er.addEvent)(r,da.move,this.handleDrag),(0,er.addEvent)(r,da.stop,this.handleDragStop))}),wr(this,"handleDrag",e=>{const n=(0,ca.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let a=r-this.lastX,u=s-this.lastY;if([a,u]=(0,ca.snapToGrid)(this.props.grid,a,u),!a&&!u)return;r=this.lastX+a,s=this.lastY+u}const i=(0,ca.createCoreData)(this,r,s);if((0,mf.default)("DraggableCore: handleDrag: %j",i),this.props.onDrag(e,i)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const u=document.createEvent("MouseEvents");u.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(u)}return}this.lastX=r,this.lastY=s}),wr(this,"handleDragStop",e=>{if(!this.dragging)return;const n=(0,ca.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let u=r-this.lastX||0,l=s-this.lastY||0;[u,l]=(0,ca.snapToGrid)(this.props.grid,u,l),r=this.lastX+u,s=this.lastY+l}const i=(0,ca.createCoreData)(this,r,s);if(this.props.onStop(e,i)===!1||this.mounted===!1)return!1;const a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,er.removeUserSelectStyles)(a.ownerDocument),(0,mf.default)("DraggableCore: handleDragStop: %j",i),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,mf.default)("DraggableCore: Removing handlers"),(0,er.removeEvent)(a.ownerDocument,da.move,this.handleDrag),(0,er.removeEvent)(a.ownerDocument,da.stop,this.handleDragStop))}),wr(this,"onMouseDown",e=>(da=mi.mouse,this.handleDragStart(e))),wr(this,"onMouseUp",e=>(da=mi.mouse,this.handleDragStop(e))),wr(this,"onTouchStart",e=>(da=mi.touch,this.handleDragStart(e))),wr(this,"onTouchEnd",e=>(da=mi.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,er.addEvent)(e,mi.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:n}=e;(0,er.removeEvent)(n,mi.mouse.move,this.handleDrag),(0,er.removeEvent)(n,mi.touch.move,this.handleDrag),(0,er.removeEvent)(n,mi.mouse.stop,this.handleDragStop),(0,er.removeEvent)(n,mi.touch.stop,this.handleDragStop),(0,er.removeEvent)(e,mi.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,er.removeUserSelectStyles)(n)}}findDOMNode(){var e,n;return(e=this.props)!==null&&e!==void 0&&e.nodeRef?(n=this.props)===null||n===void 0||(n=n.nodeRef)===null||n===void 0?void 0:n.current:ste.default.findDOMNode(this)}render(){return Uy.cloneElement(Uy.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};Yg.default=Zg;wr(Zg,"displayName","DraggableCore");wr(Zg,"propTypes",{allowAnyClick:Lr.default.bool,children:Lr.default.node.isRequired,disabled:Lr.default.bool,enableUserSelectHack:Lr.default.bool,offsetParent:function(t,e){if(t[e]&&t[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:Lr.default.arrayOf(Lr.default.number),handle:Lr.default.string,cancel:Lr.default.string,nodeRef:Lr.default.object,onStart:Lr.default.func,onDrag:Lr.default.func,onStop:Lr.default.func,onMouseDown:Lr.default.func,scale:Lr.default.number,className:zy.dontSetMe,style:zy.dontSetMe,transform:zy.dontSetMe});wr(Zg,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return u.default}}),t.default=void 0;var e=f(P),n=c(U2),r=c(Mh),s=c(Nee),i=sn,o=go,a=mo,u=c(Yg),l=c(Qg);function c(v){return v&&v.__esModule?v:{default:v}}function d(v){if(typeof WeakMap!="function")return null;var w=new WeakMap,x=new WeakMap;return(d=function(N){return N?x:w})(v)}function f(v,w){if(v&&v.__esModule)return v;if(v===null||typeof v!="object"&&typeof v!="function")return{default:v};var x=d(w);if(x&&x.has(v))return x.get(v);var N={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var O in v)if(O!=="default"&&Object.prototype.hasOwnProperty.call(v,O)){var _=k?Object.getOwnPropertyDescriptor(v,O):null;_&&(_.get||_.set)?Object.defineProperty(N,O,_):N[O]=v[O]}return N.default=v,x&&x.set(v,N),N}function h(){return h=Object.assign?Object.assign.bind():function(v){for(var w=1;w<arguments.length;w++){var x=arguments[w];for(var N in x)Object.prototype.hasOwnProperty.call(x,N)&&(v[N]=x[N])}return v},h.apply(this,arguments)}function p(v,w,x){return w=y(w),w in v?Object.defineProperty(v,w,{value:x,enumerable:!0,configurable:!0,writable:!0}):v[w]=x,v}function y(v){var w=b(v,"string");return typeof w=="symbol"?w:String(w)}function b(v,w){if(typeof v!="object"||v===null)return v;var x=v[Symbol.toPrimitive];if(x!==void 0){var N=x.call(v,w||"default");if(typeof N!="object")return N;throw new TypeError("@@toPrimitive must return a primitive value.")}return(w==="string"?String:Number)(v)}class g extends e.Component{static getDerivedStateFromProps(w,x){let{position:N}=w,{prevPropsPosition:k}=x;return N&&(!k||N.x!==k.x||N.y!==k.y)?((0,l.default)("Draggable: getDerivedStateFromProps %j",{position:N,prevPropsPosition:k}),{x:N.x,y:N.y,prevPropsPosition:{...N}}):null}constructor(w){super(w),p(this,"onDragStart",(x,N)=>{if((0,l.default)("Draggable: onDragStart: %j",N),this.props.onStart(x,(0,o.createDraggableData)(this,N))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),p(this,"onDrag",(x,N)=>{if(!this.state.dragging)return!1;(0,l.default)("Draggable: onDrag: %j",N);const k=(0,o.createDraggableData)(this,N),O={x:k.x,y:k.y,slackX:0,slackY:0};if(this.props.bounds){const{x:$,y:M}=O;O.x+=this.state.slackX,O.y+=this.state.slackY;const[K,Z]=(0,o.getBoundPosition)(this,O.x,O.y);O.x=K,O.y=Z,O.slackX=this.state.slackX+($-O.x),O.slackY=this.state.slackY+(M-O.y),k.x=O.x,k.y=O.y,k.deltaX=O.x-this.state.x,k.deltaY=O.y-this.state.y}if(this.props.onDrag(x,k)===!1)return!1;this.setState(O)}),p(this,"onDragStop",(x,N)=>{if(!this.state.dragging||this.props.onStop(x,(0,o.createDraggableData)(this,N))===!1)return!1;(0,l.default)("Draggable: onDragStop: %j",N);const O={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:$,y:M}=this.props.position;O.x=$,O.y=M}this.setState(O)}),this.state={dragging:!1,dragged:!1,x:w.position?w.position.x:w.defaultPosition.x,y:w.position?w.position.y:w.defaultPosition.y,prevPropsPosition:{...w.position},slackX:0,slackY:0,isElementSVG:!1},w.position&&!(w.onDrag||w.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var w,x;return(w=(x=this.props)===null||x===void 0||(x=x.nodeRef)===null||x===void 0?void 0:x.current)!==null&&w!==void 0?w:r.default.findDOMNode(this)}render(){const{axis:w,bounds:x,children:N,defaultPosition:k,defaultClassName:O,defaultClassNameDragging:_,defaultClassNameDragged:$,position:M,positionOffset:K,scale:Z,...ie}=this.props;let ee={},W=null;const D=!!!M||this.state.dragging,L=M||k,U={x:(0,o.canDragX)(this)&&D?this.state.x:L.x,y:(0,o.canDragY)(this)&&D?this.state.y:L.y};this.state.isElementSVG?W=(0,i.createSVGTransform)(U,K):ee=(0,i.createCSSTransform)(U,K);const F=(0,s.default)(N.props.className||"",O,{[_]:this.state.dragging,[$]:this.state.dragged});return e.createElement(u.default,h({},ie,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(N),{className:F,style:{...N.props.style,...ee},transform:W}))}}t.default=g,p(g,"displayName","Draggable"),p(g,"propTypes",{...u.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),p(g,"defaultProps",{...u.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(pL);const{default:NL,DraggableCore:ute}=pL;Xg.exports=NL;Xg.exports.default=NL;Xg.exports.DraggableCore=ute;var lte=Xg.exports;const cte=md(lte),Qp=({name:t,xy:e})=>{const n={height:Na,width:Na,backgroundColor:"red",borderRadius:"50%",textAlign:"center",position:"absolute",userSelect:"none",opacity:.5},r={display:"flex",height:"100%",width:"100%",textAlign:"center",justifyContent:"center",alignItems:"center"},s=Tn.useRef(null),i=ei();return E.jsx(cte,{handle:"strong",bounds:"parent",position:{x:e[0],y:e[1]},defaultPosition:{x:e[0],y:e[1]},nodeRef:s,onStop:(o,a)=>{const u={xy:[a.x,a.y],key:t};console.log(u),i(L2(u))},children:E.jsx("div",{className:"box no-cursor",style:n,ref:s,children:E.jsx("strong",{className:"cursor",style:r,children:t})})})},dte=()=>{const t=iL();return E.jsxs(E.Fragment,{children:[E.jsx(Qp,{name:"a8",xy:t.a8}),E.jsx(Qp,{name:"h8",xy:t.h8}),E.jsx(Qp,{name:"h1",xy:t.h1}),E.jsx(Qp,{name:"a1",xy:t.a1})]})},_L=()=>{const t=_g(),e=()=>{t("/")};return E.jsx(ho,{onClick:e,children:E.jsx(Pl,{iconName:"bi-house"})})};/*!
 * -------------------------------------------------------------------------- *
 *                                                                            *
 *    Kokopu-React - A React-based library of chess-related components.       *
 *    <https://www.npmjs.com/package/kokopu-react>                            *
 *    Copyright (C) 2021-2024  Yoann Le Montagner <yo35 -at- melix.net>       *
 *                                                                            *
 *    Kokopu-React is free software: you can redistribute it and/or           *
 *    modify it under the terms of the GNU Lesser General Public License      *
 *    as published by the Free Software Foundation, either version 3 of       *
 *    the License, or (at your option) any later version.                     *
 *                                                                            *
 *    Kokopu-React is distributed in the hope that it will be useful,         *
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of          *
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the            *
 *    GNU Lesser General Public License for more details.                     *
 *                                                                            *
 *    You should have received a copy of the GNU Lesser General               *
 *    Public License along with this program. If not, see                     *
 *    <http://www.gnu.org/licenses/>.                                         *
 *                                                                            *
 * -------------------------------------------------------------------------- */var Cr;(function(t){t.LINE="line {0}",t.INVALID_FEN_ERROR_TITLE="Invalid FEN string.",t.INVALID_NOTATION_ERROR_TITLE="Invalid move notation.",t.TOOLTIP_GO_FIRST="Go to the beginning of the game",t.TOOLTIP_GO_PREVIOUS="Go to the previous move",t.TOOLTIP_GO_NEXT="Go to the next move",t.TOOLTIP_GO_LAST="Go to the end of the game",t.TOOLTIP_PLAY_STOP="Play/stop the game",t.TOOLTIP_FLIP="Flip the board",t.PIECE_SYMBOLS={K:"K",Q:"Q",R:"R",B:"B",N:"N",P:"P"},t.ANNOTATED_BY="Annotated by {0}",t.INVALID_PGN_ERROR_TITLE="Invalid PGN string."})(Cr||(Cr={}));/*!
 * -------------------------------------------------------------------------- *
 *                                                                            *
 *    Kokopu-React - A React-based library of chess-related components.       *
 *    <https://www.npmjs.com/package/kokopu-react>                            *
 *    Copyright (C) 2021-2024  Yoann Le Montagner <yo35 -at- melix.net>       *
 *                                                                            *
 *    Kokopu-React is free software: you can redistribute it and/or           *
 *    modify it under the terms of the GNU Lesser General Public License      *
 *    as published by the Free Software Foundation, either version 3 of       *
 *    the License, or (at your option) any later version.                     *
 *                                                                            *
 *    Kokopu-React is distributed in the hope that it will be useful,         *
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of          *
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the            *
 *    GNU Lesser General Public License for more details.                     *
 *                                                                            *
 *    You should have received a copy of the GNU Lesser General               *
 *    Public License along with this program. If not, see                     *
 *    <http://www.gnu.org/licenses/>.                                         *
 *                                                                            *
 * -------------------------------------------------------------------------- */let pt=class{constructor(e,n){this.functionOrComponentName=e,this.argumentName=n}toString(){return`Illegal argument '${this.argumentName}' in function or component ${this.functionOrComponentName}`}};var tt={},As={};/*!
 * -------------------------------------------------------------------------- *
 *                                                                            *
 *    Kokopu - A JavaScript/TypeScript chess library.                         *
 *    <https://www.npmjs.com/package/kokopu>                                  *
 *    Copyright (C) 2018-2024  Yoann Le Montagner <yo35 -at- melix.net>       *
 *                                                                            *
 *    Kokopu is free software: you can redistribute it and/or                 *
 *    modify it under the terms of the GNU Lesser General Public License      *
 *    as published by the Free Software Foundation, either version 3 of       *
 *    the License, or (at your option) any later version.                     *
 *                                                                            *
 *    Kokopu is distributed in the hope that it will be useful,               *
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of          *
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the            *
 *    GNU Lesser General Public License for more details.                     *
 *                                                                            *
 *    You should have received a copy of the GNU Lesser General               *
 *    Public License along with this program. If not, see                     *
 *    <http://www.gnu.org/licenses/>.                                         *
 *                                                                            *
 * -------------------------------------------------------------------------- */Object.defineProperty(As,"__esModule",{value:!0});As.i18n=void 0;var wN;(function(t){t.WRONG_NUMBER_OF_FEN_FIELDS="A FEN string must contain exactly 6 space-separated fields.",t.WRONG_NUMBER_OF_SUBFIELDS_IN_BOARD_FIELD="The 1st field of a FEN string must contain exactly 8 `/`-separated subfields.",t.UNEXPECTED_CHARACTER_IN_BOARD_FIELD="Unexpected character in the 1st field of the FEN string: `{0}`.",t.UNEXPECTED_END_OF_SUBFIELD_IN_BOARD_FIELD="Subfield {0} of the FEN string 1st field is unexpectedly short.",t.INVALID_TURN_FIELD="The 2nd field of a FEN string must be either `w` or `b`.",t.INVALID_CASTLING_FIELD="The 3rd field of a FEN string must be either `-` or a list of characters among `K`, `Q`, `k` and `q` (in this order).",t.INVALID_EN_PASSANT_FIELD="The 4th field of a FEN string must be either `-` or a square from the 3rd or 6th rank where en-passant is allowed.",t.WRONG_RANK_IN_EN_PASSANT_FIELD="The rank number indicated in the FEN string 4th field is inconsistent with respect to the 2nd field.",t.INEFFECTIVE_EN_PASSANT_FIELD="No en-passant capture can happen on file {0} in the position defined in the FEN string.",t.INVALID_HALF_MOVE_COUNT_FIELD="The 5th field of a FEN string must be a number, indicating the number of half-move since the last pawn move or capture.",t.INVALID_MOVE_NUMBER_FIELD="The 6th field of a FEN string must be a number, indicating the move number of the game.",t.INVALID_VARIANT_PREFIX="Invalid variant prefix: `{0}`.",t.INVALID_UCI_NOTATION_SYNTAX="The syntax of the UCI notation is invalid.",t.ILLEGAL_UCI_MOVE="The UCI move is not legal.",t.INVALID_MOVE_NOTATION_SYNTAX="The syntax of the move notation is invalid.",t.ILLEGAL_POSITION="The position is not legal.",t.ILLEGAL_NO_KING_CASTLING="Castling is not legal in the considered position as it has no king.",t.ILLEGAL_QUEEN_SIDE_CASTLING="Queen-side castling is not legal in the considered position.",t.ILLEGAL_KING_SIDE_CASTLING="King-side castling is not legal in the considered position.",t.NO_PIECE_CAN_MOVE_TO="No {0} can move to {1}.",t.NO_PIECE_CAN_MOVE_TO_DISAMBIGUATION="No {0} on the specified rank/file can move to {1}.",t.REQUIRE_DISAMBIGUATION="Cannot determine uniquely which {0} is supposed to move to {1}.",t.WRONG_DISAMBIGUATION_SYMBOL="Wrong disambiguation symbol (expected: `{0}`, observed: `{1}`).",t.CASTLING_MOVE_ENCODED_WITH_ZERO="Capital O must be used for castling moves (instead of digit 0).",t.TRYING_TO_CAPTURE_YOUR_OWN_PIECES="Capturing its own pieces is not legal.",t.CAPTURE_IS_MANDATORY="Capture is mandatory.",t.INVALID_PIECE_SYMBOL="Character `{0}` is not a valid piece symbol.",t.INVALID_PIECE_SYMBOL_COLOR="Invalid color for piece symbol `{0}`.",t.INVALID_CAPTURING_PAWN_MOVE="Invalid capturing pawn move.",t.INVALID_NON_CAPTURING_PAWN_MOVE="Invalid non-capturing pawn move.",t.NOT_SAFE_FOR_WHITE_KING="This move would let the white king in check.",t.NOT_SAFE_FOR_BLACK_KING="This move would let the black king in check.",t.MISSING_PROMOTION="A promoted piece must be specified for this move.",t.MISSING_PROMOTION_SYMBOL="Character `=` is required to specify a promoted piece.",t.INVALID_PROMOTED_PIECE="{0} cannot be specified as a promoted piece.",t.ILLEGAL_PROMOTION="Specifying a promoted piece is illegal for this move.",t.ILLEGAL_NULL_MOVE="Cannot play a null-move in this position.",t.MISSING_CAPTURE_SYMBOL="Capture symbol `x` is missing.",t.INVALID_CAPTURE_SYMBOL="This move is not a capture move.",t.WRONG_CHECK_CHECKMATE_SYMBOL="Wrong check/checkmate symbol (expected: `{0}`, observed: `{1}`).",t.INVALID_PGN_TOKEN="Unrecognized character or group of characters.",t.INVALID_MOVE_IN_PGN_TEXT="Invalid move ({0}). {1}",t.INVALID_FEN_IN_PGN_TEXT="Invalid FEN string in the initial position header. {0}",t.UNEXPECTED_PGN_HEADER="Unexpected PGN game header.",t.MISSING_PGN_HEADER_ID="Missing or invalid PGN game header ID.",t.MISSING_PGN_HEADER_VALUE="Missing or invalid PGN game header value.",t.MISSING_END_OF_PGN_HEADER="Missing or invalid end of PGN game header.",t.UNEXPECTED_BEGIN_OF_VARIATION="Unexpected begin of variation.",t.UNEXPECTED_END_OF_VARIATION="Unexpected end of variation.",t.UNEXPECTED_END_OF_GAME="Unexpected end of game: there are pending variations.",t.INVALID_GAME_INDEX="Game index {0} is invalid (only {1} game(s) found in the PGN data).",t.UNKNOWN_VARIANT="Unknown chess game variant ({0}).",t.VARIANT_WITHOUT_FEN="For game variant {0}, the FEN header is mandatory.",t.POJO_MUST_BE_AN_OBJECT="Unexpected non-object value passed as POJO.",t.INVALID_POJO_STRING_FIELD="Invalid value (must be a string).",t.INVALID_POJO_NUMBER_FIELD="Invalid value (must be a number).",t.INVALID_POJO_BOOLEAN_FIELD="Invalid value (must be a boolean).",t.INVALID_POJO_OBJECT_FIELD="Invalid value (must be an object).",t.INVALID_POJO_ARRAY_FIELD="Invalid value (must be an array).",t.INVALID_ELO_IN_POJO="Ill-formed elo.",t.INVALID_ROUND_IN_POJO="Ill-formed round, sub-round or sub-sub-round.",t.INVALID_DATE_IN_POJO="Ill-formed date.",t.INVALID_ECO_CODE_IN_POJO="Ill-formed ECO code.",t.INVALID_RESULT_IN_POJO="Ill-formed result.",t.INVALID_VARIANT_IN_POJO="Ill-formed variant.",t.INVALID_NAG_IN_POJO="Invalid NAG ({0}).",t.INVALID_TAG_IN_POJO="Invalid tag ({0}).",t.INVALID_MOVE_IN_POJO="Invalid move ({0}). {1}",t.INVALID_FEN_IN_POJO="Invalid initial position FEN. {0}",t.MISSING_INITIAL_POSITION_IN_POJO="For game variant {0}, the initial position field is mandatory.",t.INVALID_OR_MISSING_NODE_ARRAY="Invalid or missing node POJO array.",t.INVALID_OR_MISSING_NOTATION_FIELD="Invalid or missing node POJO.",t.NOT_A_NODE_POJO="A node POJO must be either a string or an object.",t.NOT_A_VARIATION_POJO="A variation POJO must be either an array or an object."})(wN||(As.i18n=wN={}));var Lt={};/*!
 * -------------------------------------------------------------------------- *
 *                                                                            *
 *    Kokopu - A JavaScript/TypeScript chess library.                         *
 *    <https://www.npmjs.com/package/kokopu>                                  *
 *    Copyright (C) 2018-2024  Yoann Le Montagner <yo35 -at- melix.net>       *
 *                                                                            *
 *    Kokopu is free software: you can redistribute it and/or                 *
 *    modify it under the terms of the GNU Lesser General Public License      *
 *    as published by the Free Software Foundation, either version 3 of       *
 *    the License, or (at your option) any later version.                     *
 *                                                                            *
 *    Kokopu is distributed in the hope that it will be useful,               *
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of          *
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the            *
 *    GNU Lesser General Public License for more details.                     *
 *                                                                            *
 *    You should have received a copy of the GNU Lesser General               *
 *    Public License along with this program. If not, see                     *
 *    <http://www.gnu.org/licenses/>.                                         *
 *                                                                            *
 * -------------------------------------------------------------------------- */Object.defineProperty(Lt,"__esModule",{value:!0});Lt.InvalidPOJO=Lt.InvalidPGN=Lt.InvalidNotation=Lt.InvalidFEN=Lt.IllegalArgument=void 0;class fte{constructor(e){this.functionName=e}toString(){return`Illegal argument in function ${this.functionName}`}}Lt.IllegalArgument=fte;class hte{constructor(e,n,...r){this.fen=e,this.message=Jg(n,r)}toString(){return e1("InvalidFEN",this.message)}}Lt.InvalidFEN=hte;class pte{constructor(e,n,r,...s){this.fen=e,this.notation=n,this.message=Jg(r,s)}toString(){return e1("InvalidNotation",this.message)}}Lt.InvalidNotation=pte;class mte{constructor(e,n,r,s,...i){this.pgn=e,this.index=n,this.lineNumber=r,this.message=Jg(s,i)}toString(){return e1("InvalidPGN",`[character=${this.index} line=${this.lineNumber}] ${this.message}`)}}Lt.InvalidPGN=mte;class gte{constructor(e,n,r,...s){this.pojo=e,this.fieldName=n,this.message=Jg(r,s)}toString(){return e1("InvalidPOJO",this.message)}}Lt.InvalidPOJO=gte;function Jg(t,e){return t.replace(/{(\d+)}/g,(n,r)=>{const s=Number(r);return s<e.length?String(e[s]):n})}function e1(t,e){return t+" -> "+e}var Bt={},xt={};/*!
 * -------------------------------------------------------------------------- *
 *                                                                            *
 *    Kokopu - A JavaScript/TypeScript chess library.                         *
 *    <https://www.npmjs.com/package/kokopu>                                  *
 *    Copyright (C) 2018-2024  Yoann Le Montagner <yo35 -at- melix.net>       *
 *                                                                            *
 *    Kokopu is free software: you can redistribute it and/or                 *
 *    modify it under the terms of the GNU Lesser General Public License      *
 *    as published by the Free Software Foundation, either version 3 of       *
 *    the License, or (at your option) any later version.                     *
 *                                                                            *
 *    Kokopu is distributed in the hope that it will be useful,               *
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of          *
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the            *
 *    GNU Lesser General Public License for more details.                     *
 *                                                                            *
 *    You should have received a copy of the GNU Lesser General               *
 *    Public License along with this program. If not, see                     *
 *    <http://www.gnu.org/licenses/>.                                         *
 *                                                                            *
 * -------------------------------------------------------------------------- */Object.defineProperty(xt,"__esModule",{value:!0});xt.colorToString=yte;xt.pieceToString=bte;xt.fileToString=vte;xt.rankToString=wte;xt.resultToString=xte;xt.variantToString=Ste;xt.colorFromString=Ate;xt.pieceFromString=Ete;xt.fileFromString=Cte;xt.rankFromString=Nte;xt.resultFromString=_te;xt.variantFromString=Tte;xt.squareToString=Ite;xt.squareFromString=kte;xt.coloredPieceToString=Rte;xt.coloredPieceFromString=Ote;xt.figurineToString=Pte;xt.figurineFromString=Dte;xt.squareColorImpl=Lte;const t1=[..."wb"],n1=[..."kqrbnp"],r1=[..."abcdefgh"],s1=[..."12345678"],TL=["1-0","0-1","1/2-1/2","*"],IL=["regular","chess960","no-king","white-king-only","black-king-only","antichess","horde"],kL=[...""];function yte(t){return t1[t]}function bte(t){return n1[t]}function vte(t){return r1[t]}function wte(t){return s1[t]}function xte(t){return TL[t]}function Ste(t){return IL[t]}function Ate(t){return typeof t=="string"?t1.indexOf(t):-1}function Ete(t){return typeof t=="string"?n1.indexOf(t):-1}function Cte(t){return typeof t=="string"?r1.indexOf(t):-1}function Nte(t){return typeof t=="string"?s1.indexOf(t):-1}function _te(t){return typeof t=="string"?TL.indexOf(t):-1}function Tte(t){return typeof t=="string"?IL.indexOf(t):-1}function Ite(t){return r1[t%16]+s1[Math.trunc(t/16)]}function kte(t){if(typeof t!="string"||!/^[a-h][1-8]$/.test(t))return-1;const e=r1.indexOf(t[0]);return s1.indexOf(t[1])*16+e}function Rte(t){return t1[t%2]+n1[Math.trunc(t/2)]}function Ote(t){if(typeof t!="string"||!/^[wb][kqrbnp]$/.test(t))return-1;const e=t1.indexOf(t[0]);return n1.indexOf(t[1])*2+e}function Pte(t){return kL[t]}function Dte(t){return kL.indexOf(String(t))}function Lte(t){return(~t^t>>4)&1}var yo={};/*!
 * -------------------------------------------------------------------------- *
 *                                                                            *
 *    Kokopu - A JavaScript/TypeScript chess library.                         *
 *    <https://www.npmjs.com/package/kokopu>                                  *
 *    Copyright (C) 2018-2024  Yoann Le Montagner <yo35 -at- melix.net>       *
 *                                                                            *
 *    Kokopu is free software: you can redistribute it and/or                 *
 *    modify it under the terms of the GNU Lesser General Public License      *
 *    as published by the Free Software Foundation, either version 3 of       *
 *    the License, or (at your option) any later version.                     *
 *                                                                            *
 *    Kokopu is distributed in the hope that it will be useful,               *
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of          *
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the            *
 *    GNU Lesser General Public License for more details.                     *
 *                                                                            *
 *    You should have received a copy of the GNU Lesser General               *
 *    Public License along with this program. If not, see                     *
 *    <http://www.gnu.org/licenses/>.                                         *
 *                                                                            *
 * -------------------------------------------------------------------------- */Object.defineProperty(yo,"__esModule",{value:!0});yo.hasCanonicalStartPosition=Bte;yo.makeEmpty=Mte;yo.makeInitial=Vte;yo.make960FromScharnagl=Ute;yo.makeCopy=jte;const Fte=[-1,-1,-1,-1,-1,-1,-1,-1,-2,-2,-2,-2,-2,-2,-2,-2,-1,-1,-1,-1,-1,-1,-1,-1,-2,-2,-2,-2,-2,-2,-2,-2,-1,-1,-1,-1,-1,-1,-1,-1,-2,-2,-2,-2,-2,-2,-2,-2,-1,-1,-1,-1,-1,-1,-1,-1,-2,-2,-2,-2,-2,-2,-2,-2,-1,-1,-1,-1,-1,-1,-1,-1,-2,-2,-2,-2,-2,-2,-2,-2,-1,-1,-1,-1,-1,-1,-1,-1,-2,-2,-2,-2,-2,-2,-2,-2,-1,-1,-1,-1,-1,-1,-1,-1,-2,-2,-2,-2,-2,-2,-2,-2,-1,-1,-1,-1,-1,-1,-1,-1],xN=[4,8,6,2,0,6,8,4,-2,-2,-2,-2,-2,-2,-2,-2,10,10,10,10,10,10,10,10,-2,-2,-2,-2,-2,-2,-2,-2,-1,-1,-1,-1,-1,-1,-1,-1,-2,-2,-2,-2,-2,-2,-2,-2,-1,-1,-1,-1,-1,-1,-1,-1,-2,-2,-2,-2,-2,-2,-2,-2,-1,-1,-1,-1,-1,-1,-1,-1,-2,-2,-2,-2,-2,-2,-2,-2,-1,-1,-1,-1,-1,-1,-1,-1,-2,-2,-2,-2,-2,-2,-2,-2,11,11,11,11,11,11,11,11,-2,-2,-2,-2,-2,-2,-2,-2,5,9,7,3,1,7,9,5],$te=[10,10,10,10,10,10,10,10,-2,-2,-2,-2,-2,-2,-2,-2,10,10,10,10,10,10,10,10,-2,-2,-2,-2,-2,-2,-2,-2,10,10,10,10,10,10,10,10,-2,-2,-2,-2,-2,-2,-2,-2,10,10,10,10,10,10,10,10,-2,-2,-2,-2,-2,-2,-2,-2,-1,10,10,-1,-1,10,10,-1,-2,-2,-2,-2,-2,-2,-2,-2,-1,-1,-1,-1,-1,-1,-1,-1,-2,-2,-2,-2,-2,-2,-2,-2,11,11,11,11,11,11,11,11,-2,-2,-2,-2,-2,-2,-2,-2,5,9,7,3,1,7,9,5],RL=[{board:xN,castling:[129,129],king:[4,116]},null,null,null,null,{board:xN,castling:[0,0],king:[-1,-1]},{board:$te,castling:[0,129],king:[-1,116]}];function Bte(t){return RL[t]!==null}function Mte(t){return{board:Fte.slice(),turn:0,castling:[0,0],enPassant:-1,variant:t,legal:t===2,king:[-1,-1],effectiveCastling:[0,0],effectiveEnPassant:-1}}function Vte(t){const e=RL[t];return{board:e.board.slice(),turn:0,castling:e.castling.slice(),enPassant:-1,variant:t,legal:!0,king:e.king.slice(),effectiveCastling:e.castling.slice(),effectiveEnPassant:-1}}function Ute(t){const e=zte(t),n=e.pieceScheme.map(s=>s*2+0),r=e.pieceScheme.map(s=>s*2+1);return{board:[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],-2,-2,-2,-2,-2,-2,-2,-2,10,10,10,10,10,10,10,10,-2,-2,-2,-2,-2,-2,-2,-2,-1,-1,-1,-1,-1,-1,-1,-1,-2,-2,-2,-2,-2,-2,-2,-2,-1,-1,-1,-1,-1,-1,-1,-1,-2,-2,-2,-2,-2,-2,-2,-2,-1,-1,-1,-1,-1,-1,-1,-1,-2,-2,-2,-2,-2,-2,-2,-2,-1,-1,-1,-1,-1,-1,-1,-1,-2,-2,-2,-2,-2,-2,-2,-2,11,11,11,11,11,11,11,11,-2,-2,-2,-2,-2,-2,-2,-2,r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7]],turn:0,castling:[e.castling,e.castling],enPassant:-1,variant:1,legal:!0,king:[0+e.kingFile,112+e.kingFile],effectiveCastling:[e.castling,e.castling],effectiveEnPassant:-1}}function zte(t){const e=[-1,-1,-1,-1,-1,-1,-1,-1];let n=0,r=-1;function s(o){let a=0;for(let u=0;u<8;++u)e[u]>=0||(o(u,a),++a)}function i(o,a,u){s((l,c)=>{(c===a||c===u)&&(e[l]=o)})}switch(e[t%4*2+1]=3,t=Math.trunc(t/4),e[t%4*2]=3,t=Math.trunc(t/4),i(1,t%6,-1),t=Math.trunc(t/6),t){case 0:i(4,0,1);break;case 1:i(4,0,2);break;case 2:i(4,0,3);break;case 3:i(4,0,4);break;case 4:i(4,1,2);break;case 5:i(4,1,3);break;case 6:i(4,1,4);break;case 7:i(4,2,3);break;case 8:i(4,2,4);break;case 9:i(4,3,4);break}return s((o,a)=>{a===1?(e[o]=0,r=o):(e[o]=2,n|=1<<o)}),{pieceScheme:e,castling:n,kingFile:r}}function jte(t){return{board:t.board.slice(),turn:t.turn,castling:t.castling.slice(),enPassant:t.enPassant,variant:t.variant,legal:t.legal,king:t.king.slice(),effectiveCastling:t.effectiveCastling===null?null:t.effectiveCastling.slice(),effectiveEnPassant:t.effectiveEnPassant}}var bo={};/*!
 * -------------------------------------------------------------------------- *
 *                                                                            *
 *    Kokopu - A JavaScript/TypeScript chess library.                         *
 *    <https://www.npmjs.com/package/kokopu>                                  *
 *    Copyright (C) 2018-2024  Yoann Le Montagner <yo35 -at- melix.net>       *
 *                                                                            *
 *    Kokopu is free software: you can redistribute it and/or                 *
 *    modify it under the terms of the GNU Lesser General Public License      *
 *    as published by the Free Software Foundation, either version 3 of       *
 *    the License, or (at your option) any later version.                     *
 *                                                                            *
 *    Kokopu is distributed in the hope that it will be useful,               *
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of          *
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the            *
 *    GNU Lesser General Public License for more details.                     *
 *                                                                            *
 *    You should have received a copy of the GNU Lesser General               *
 *    Public License along with this program. If not, see                     *
 *    <http://www.gnu.org/licenses/>.                                         *
 *                                                                            *
 * -------------------------------------------------------------------------- */Object.defineProperty(bo,"__esModule",{value:!0});bo.trimAndCollapseSpaces=Wte;bo.isValidNag=qte;bo.isValidElo=Gte;bo.isValidRound=Hte;function Wte(t){return t.replace(/^\s+|\s+$/g,"").replace(/\s+/g," ")}function qte(t){return Number.isInteger(t)&&t>=0}function Gte(t){return Number.isInteger(t)&&t>=0}function Hte(t){return Number.isInteger(t)&&t>=0}/*!
 * -------------------------------------------------------------------------- *
 *                                                                            *
 *    Kokopu - A JavaScript/TypeScript chess library.                         *
 *    <https://www.npmjs.com/package/kokopu>                                  *
 *    Copyright (C) 2018-2024  Yoann Le Montagner <yo35 -at- melix.net>       *
 *                                                                            *
 *    Kokopu is free software: you can redistribute it and/or                 *
 *    modify it under the terms of the GNU Lesser General Public License      *
 *    as published by the Free Software Foundation, either version 3 of       *
 *    the License, or (at your option) any later version.                     *
 *                                                                            *
 *    Kokopu is distributed in the hope that it will be useful,               *
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of          *
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the            *
 *    GNU Lesser General Public License for more details.                     *
 *                                                                            *
 *    You should have received a copy of the GNU Lesser General               *
 *    Public License along with this program. If not, see                     *
 *    <http://www.gnu.org/licenses/>.                                         *
 *                                                                            *
 * -------------------------------------------------------------------------- */Object.defineProperty(Bt,"__esModule",{value:!0});Bt.isColor=Yte;Bt.isPiece=Qte;Bt.isColoredPiece=Zte;Bt.isFile=Jte;Bt.isRank=ene;Bt.isSquare=tne;Bt.isSquareCouple=nne;Bt.isCastle=rne;Bt.isCastle960=sne;Bt.isGameResult=ine;Bt.isGameVariant=one;Bt.forEachSquare=ane;Bt.squareColor=une;Bt.squareToCoordinates=lne;Bt.coordinatesToSquare=cne;Bt.oppositeColor=dne;Bt.variantWithCanonicalStartPosition=fne;Bt.nagSymbol=hne;Bt.isValidECO=pne;const _d=Lt,Fn=xt,Kte=yo,Xte=bo;function Yte(t){return(0,Fn.colorFromString)(t)>=0}function Qte(t){return(0,Fn.pieceFromString)(t)>=0}function Zte(t){return(0,Fn.coloredPieceFromString)(t)>=0}function Jte(t){return(0,Fn.fileFromString)(t)>=0}function ene(t){return(0,Fn.rankFromString)(t)>=0}function tne(t){return(0,Fn.squareFromString)(t)>=0}function nne(t){return typeof t=="string"&&/^[a-h][1-8][a-h][1-8]$/.test(t)}function rne(t){return typeof t=="string"&&/^[wb][kq]$/.test(t)}function sne(t){return typeof t=="string"&&/^[wb][a-h]$/.test(t)}function ine(t){return(0,Fn.resultFromString)(t)>=0}function one(t){return(0,Fn.variantFromString)(t)>=0}function ane(t){for(let e=0;e<8;++e)for(let n=0;n<8;++n)t((0,Fn.squareToString)(e*16+n))}function une(t){const e=(0,Fn.squareFromString)(t);if(e<0)throw new _d.IllegalArgument("squareColor()");return(0,Fn.colorToString)((0,Fn.squareColorImpl)(e))}function lne(t){const e=(0,Fn.squareFromString)(t);if(e<0)throw new _d.IllegalArgument("squareToCoordinates()");return{rank:Math.trunc(e/16),file:e%16}}function cne(t,e){const n=typeof t=="number"?t:t.file,r=typeof t=="number"?e:t.rank;if(!Number.isInteger(n)||!Number.isInteger(r)||n<0||n>=8||r<0||r>=8)throw new _d.IllegalArgument("coordinatesToSquare()");return(0,Fn.fileToString)(n)+(0,Fn.rankToString)(r)}function dne(t){const e=(0,Fn.colorFromString)(t);if(e<0)throw new _d.IllegalArgument("oppositeColor()");return(0,Fn.colorToString)(1-e)}function fne(t){const e=(0,Fn.variantFromString)(t);if(e<0)throw new _d.IllegalArgument("variantWithCanonicalStartPosition()");return(0,Kte.hasCanonicalStartPosition)(e)}const ot=new Map;ot.set(1,"!");ot.set(2,"?");ot.set(3,"!!");ot.set(4,"??");ot.set(5,"!?");ot.set(6,"?!");ot.set(7,"");ot.set(8,"");ot.set(9,"");ot.set(10,"=");ot.set(11,"=");ot.set(13,"");ot.set(14,"");ot.set(15,"");ot.set(16,"");ot.set(17,"");ot.set(18,"+");ot.set(19,"+");ot.set(20,"+");ot.set(21,"+");ot.set(22,"");ot.set(32,"");ot.set(36,"");ot.set(40,"");ot.set(44,"");ot.set(132,"");ot.set(138,"");ot.set(140,"");ot.set(141,"");ot.set(142,"");ot.set(143,"");ot.set(145,"RR");ot.set(146,"N");function hne(t){if(!(0,Xte.isValidNag)(t))throw new _d.IllegalArgument("nagSymbol()");return ot.get(t)??"$"+t}function pne(t){return typeof t=="string"&&/^[A-E][0-9][0-9]$/.test(t)}var Td={};/*!
 * -------------------------------------------------------------------------- *
 *                                                                            *
 *    Kokopu - A JavaScript/TypeScript chess library.                         *
 *    <https://www.npmjs.com/package/kokopu>                                  *
 *    Copyright (C) 2018-2024  Yoann Le Montagner <yo35 -at- melix.net>       *
 *                                                                            *
 *    Kokopu is free software: you can redistribute it and/or                 *
 *    modify it under the terms of the GNU Lesser General Public License      *
 *    as published by the Free Software Foundation, either version 3 of       *
 *    the License, or (at your option) any later version.                     *
 *                                                                            *
 *    Kokopu is distributed in the hope that it will be useful,               *
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of          *
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the            *
 *    GNU Lesser General Public License for more details.                     *
 *                                                                            *
 *    You should have received a copy of the GNU Lesser General               *
 *    Public License along with this program. If not, see                     *
 *    <http://www.gnu.org/licenses/>.                                         *
 *                                                                            *
 * -------------------------------------------------------------------------- */var fa=Pt&&Pt.__classPrivateFieldSet||function(t,e,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(t,n):s?s.value=n:e.set(t,n),n},jt=Pt&&Pt.__classPrivateFieldGet||function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},pc,gi,$s,yi;Object.defineProperty(Td,"__esModule",{value:!0});Td.DateValue=void 0;const gf=Lt;class Xi{constructor(e,n,r){if(pc.set(this,void 0),gi.set(this,void 0),$s.set(this,void 0),yi.set(this,void 0),e instanceof Date)fa(this,pc,"ymd","f"),fa(this,gi,e.getFullYear(),"f"),fa(this,$s,e.getMonth()+1,"f"),fa(this,yi,e.getDate(),"f");else{const s=EN(e,n,r);if(!s)throw new gf.IllegalArgument("DateValue()");fa(this,pc,s,"f"),fa(this,gi,e,"f"),fa(this,$s,n??void 0,"f"),fa(this,yi,r??void 0,"f")}}type(){return jt(this,pc,"f")}year(){return jt(this,gi,"f")}month(){if(jt(this,$s,"f")===void 0)throw new gf.IllegalArgument("DateValue.month()");return jt(this,$s,"f")}day(){if(jt(this,yi,"f")===void 0)throw new gf.IllegalArgument("DateValue.day()");return jt(this,yi,"f")}toDate(){const e=jt(this,$s,"f")===void 0?0:jt(this,$s,"f")-1,n=jt(this,yi,"f")===void 0?1:jt(this,yi,"f");return new Date(jt(this,gi,"f"),e,n)}toString(){return SN(jt(this,gi,"f"),jt(this,$s,"f"),jt(this,yi,"f"),"-","**")}static fromString(e){if(typeof e!="string")throw new gf.IllegalArgument("DateValue.fromString()");return AN(e,/^([0-9]{4})-([0-9]{2})-([0-9]{2})$/,/^([0-9]{4})-([0-9]{2})-\*\*$/,/^([0-9]{4})-\*\*-\*\*$/,!1)}toPGNString(){return SN(jt(this,gi,"f"),jt(this,$s,"f"),jt(this,yi,"f"),".","??")}static fromPGNString(e){if(typeof e!="string")throw new gf.IllegalArgument("DateValue.fromPGNString()");return AN(e,/^([0-9]{4})\.([0-9]{2})\.([0-9]{2})$/,/^([0-9]{4})\.([0-9]{2})\.\?\?$/,/^([0-9]{4})(?:\.\?\?\.\?\?)?$/,!0)}toHumanReadableString(e){switch(jt(this,pc,"f")){case"ymd":{const n=new Date(jt(this,gi,"f"),jt(this,$s,"f")-1,jt(this,yi,"f"));return new Intl.DateTimeFormat(e,{dateStyle:"long"}).format(n)}case"ym":{const n=new Date(jt(this,gi,"f"),jt(this,$s,"f")-1,1);return new Intl.DateTimeFormat(e,{month:"long",year:"numeric"}).format(n)}default:return String(jt(this,gi,"f"))}}static isValid(e,n,r){return!!EN(e,n,r)}}Td.DateValue=Xi;pc=new WeakMap,gi=new WeakMap,$s=new WeakMap,yi=new WeakMap;function SN(t,e,n,r,s){const i=String(t).padStart(4,"0"),o=e===void 0?s:String(e).padStart(2,"0"),a=n===void 0?s:String(n).padStart(2,"0");return i+r+o+r+a}function AN(t,e,n,r,s){if(e.test(t)){const i=RegExp.$1,o=RegExp.$2,a=RegExp.$3,u=parseInt(i,10),l=parseInt(o,10),c=parseInt(a,10);return Xi.isValid(u,l,c)?new Xi(u,l,c):s?Xi.isValid(u,l)?new Xi(u,l):new Xi(u):void 0}else if(n.test(t)){const i=RegExp.$1,o=RegExp.$2,a=parseInt(i,10),u=parseInt(o,10);return Xi.isValid(a,u)?new Xi(a,u):s?new Xi(a):void 0}else if(r.test(t)){const i=parseInt(RegExp.$1,10);return new Xi(i)}else return}function EN(t,e,n){return n!=null?jy(t)&&CN(e)&&Number.isInteger(n)&&n>=1&&n<=mne(t,e)?"ymd":!1:e!=null?jy(t)&&CN(e)?"ym":!1:jy(t)?"y":!1}function jy(t){return Number.isInteger(t)&&t>=0}function CN(t){return Number.isInteger(t)&&t>=1&&t<=12}function mne(t,e){return new Date(t,e,0).getDate()}var Id={};/*!
 * -------------------------------------------------------------------------- *
 *                                                                            *
 *    Kokopu - A JavaScript/TypeScript chess library.                         *
 *    <https://www.npmjs.com/package/kokopu>                                  *
 *    Copyright (C) 2018-2024  Yoann Le Montagner <yo35 -at- melix.net>       *
 *                                                                            *
 *    Kokopu is free software: you can redistribute it and/or                 *
 *    modify it under the terms of the GNU Lesser General Public License      *
 *    as published by the Free Software Foundation, either version 3 of       *
 *    the License, or (at your option) any later version.                     *
 *                                                                            *
 *    Kokopu is distributed in the hope that it will be useful,               *
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of          *
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the            *
 *    GNU Lesser General Public License for more details.                     *
 *                                                                            *
 *    You should have received a copy of the GNU Lesser General               *
 *    Public License along with this program. If not, see                     *
 *    <http://www.gnu.org/licenses/>.                                         *
 *                                                                            *
 * -------------------------------------------------------------------------- */Object.defineProperty(Id,"__esModule",{value:!0});Id.MoveDescriptor=void 0;Id.isMoveDescriptor=gne;class OL{constructor(){}toString(){let e=this.from()+this.to();return this.isPromotion()?e+=this.promotion().toUpperCase():this.isCastling()&&(e+="O"),e}}Id.MoveDescriptor=OL;function gne(t){return t instanceof OL}var su={},Yh={};(function(t){/*!
 * -------------------------------------------------------------------------- *
 *                                                                            *
 *    Kokopu - A JavaScript/TypeScript chess library.                         *
 *    <https://www.npmjs.com/package/kokopu>                                  *
 *    Copyright (C) 2018-2024  Yoann Le Montagner <yo35 -at- melix.net>       *
 *                                                                            *
 *    Kokopu is free software: you can redistribute it and/or                 *
 *    modify it under the terms of the GNU Lesser General Public License      *
 *    as published by the Free Software Foundation, either version 3 of       *
 *    the License, or (at your option) any later version.                     *
 *                                                                            *
 *    Kokopu is distributed in the hope that it will be useful,               *
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of          *
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the            *
 *    GNU Lesser General Public License for more details.                     *
 *                                                                            *
 *    You should have received a copy of the GNU Lesser General               *
 *    Public License along with this program. If not, see                     *
 *    <http://www.gnu.org/licenses/>.                                         *
 *                                                                            *
 * -------------------------------------------------------------------------- */Object.defineProperty(t,"__esModule",{value:!0}),t.ATTACK_DIRECTIONS=void 0,t.isAttacked=e,t.getAttacks=s,t.ATTACK_DIRECTIONS=[[-17,-16,-15,-1,1,15,16,17],[-17,-16,-15,-1,1,15,16,17],[-17,-16,-15,-1,1,15,16,17],[-17,-16,-15,-1,1,15,16,17],[-16,-1,1,16],[-16,-1,1,16],[-17,-15,15,17],[-17,-15,15,17],[-33,-31,-18,-14,14,18,31,33],[-33,-31,-18,-14,14,18,31,33],[15,17],[-17,-15]];function e(a,u,l){return n(a,u,0*2+l)||n(a,u,4*2+l)||n(a,u,5*2+l)||r(a,u,2*2+l,1*2+l)||r(a,u,3*2+l,1*2+l)}function n(a,u,l){const c=t.ATTACK_DIRECTIONS[l];for(let d=0;d<c.length;++d){const f=u-c[d];if(!(f&136)&&a.board[f]===l)return!0}return!1}function r(a,u,l,c){const d=t.ATTACK_DIRECTIONS[l];for(let f=0;f<d.length;++f){let h=u;for(;;){if(h-=d[f],!(h&136)){const p=a.board[h];if(p===-1)continue;if(p===l||p===c)return!0}break}}return!1}function s(a,u,l){const c=[];return i(a,u,c,0*2+l),i(a,u,c,4*2+l),i(a,u,c,5*2+l),o(a,u,c,2*2+l,1*2+l),o(a,u,c,3*2+l,1*2+l),c}function i(a,u,l,c){const d=t.ATTACK_DIRECTIONS[c];for(let f=0;f<d.length;++f){const h=u-d[f];!(h&136)&&a.board[h]===c&&l.push(h)}}function o(a,u,l,c,d){const f=t.ATTACK_DIRECTIONS[c];for(let h=0;h<f.length;++h){let p=u;for(;;){if(p-=f[h],!(p&136)){const y=a.board[p];if(y===-1)continue;(y===c||y===d)&&l.push(p)}break}}}})(Yh);var Ll={},si={};/*!
 * -------------------------------------------------------------------------- *
 *                                                                            *
 *    Kokopu - A JavaScript/TypeScript chess library.                         *
 *    <https://www.npmjs.com/package/kokopu>                                  *
 *    Copyright (C) 2018-2024  Yoann Le Montagner <yo35 -at- melix.net>       *
 *                                                                            *
 *    Kokopu is free software: you can redistribute it and/or                 *
 *    modify it under the terms of the GNU Lesser General Public License      *
 *    as published by the Free Software Foundation, either version 3 of       *
 *    the License, or (at your option) any later version.                     *
 *                                                                            *
 *    Kokopu is distributed in the hope that it will be useful,               *
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of          *
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the            *
 *    GNU Lesser General Public License for more details.                     *
 *                                                                            *
 *    You should have received a copy of the GNU Lesser General               *
 *    Public License along with this program. If not, see                     *
 *    <http://www.gnu.org/licenses/>.                                         *
 *                                                                            *
 * -------------------------------------------------------------------------- */Object.defineProperty(si,"__esModule",{value:!0});si.isLegal=yne;si.refreshLegalFlagAndKingSquares=i1;si.isKingSafeAfterMove=Xv;si.refreshEffectiveCastling=Yv;si.refreshEffectiveEnPassant=Qv;si.isEqual=bne;const PL=Yh;function yne(t){return i1(t),t.legal}function i1(t){if(t.legal!==null)return;t.legal=!1;const e=NN(t,0),n=NN(t,1);if(!e||!n)return;if(t.variant===5){if(!_N(t,1-t.turn))return}else if(t.variant===6&&t.turn===1&&!_N(t,0))return;if(t.king[1-t.turn]>=0&&(0,PL.isAttacked)(t,t.king[1-t.turn],t.turn))return;const r=t.variant===6?-2:10;for(let s=0;s<8;++s){const i=t.board[0+s],o=t.board[112+s];if(i===r||o===10||i===11||o===11)return}t.legal=!0}function NN(t,e){const n=0+e;if(t.king[e]=-1,t.variant===5)return!0;if(t.variant===2||t.variant===4-e||t.variant===6&&e===0){for(let r=0;r<120;r+=(r&7)===7?9:1)if(t.board[r]===n)return!1;return!0}else{for(let r=0;r<120;r+=(r&7)===7?9:1)if(t.board[r]===n)if(t.king[e]<0)t.king[e]=r;else return t.king[e]=-1,!1;return t.king[e]>=0}}function _N(t,e){for(let n=0;n<120;n+=(n&7)===7?9:1)if(t.board[n]!==-1&&t.board[n]%2===e)return!0;return!1}function Xv(t,e,n,r=-1){if(t.king[t.turn]<0)return!0;const s=t.board[e],i=t.board[n],o=Math.trunc(s/2);t.board[n]=s,t.board[e]=-1,r>=0&&(t.board[r]=-1);try{return!(0,PL.isAttacked)(t,o===0?n:t.king[t.turn],1-t.turn)}finally{t.board[e]=s,t.board[n]=i,r>=0&&(t.board[r]=5*2+1-t.turn)}}function Yv(t){t.effectiveCastling===null&&(i1(t),t.effectiveCastling=t.variant===1?[IN(t,0),IN(t,1)]:[TN(t,0),TN(t,1)])}function TN(t,e){const n=112*e;if(t.king[e]!==n+4||t.castling[e]===0)return 0;const r=2*2+e;let s=0;return t.castling[e]&1&&t.board[n]===r&&(s|=1),t.castling[e]&128&&t.board[n+7]===r&&(s|=128),s}function IN(t,e){const n=112*e;if(t.king[e]<=n||t.king[e]>=n+7||t.castling[e]===0)return 0;const r=2*2+e;let s=0,i=-1;for(let a=t.king[e]%16-1;a>=0;--a)if(!(!(t.castling[e]&1<<a)||t.board[n+a]!==r))if(i<0)i=a;else{i=-1;break}i>=0&&(s|=1<<i);let o=-1;for(let a=t.king[e]%16+1;a<8;++a)if(!(!(t.castling[e]&1<<a)||t.board[n+a]!==r))if(o<0)o=a;else{o=-1;break}return o>=0&&(s|=1<<o),s}function Qv(t){if(t.effectiveEnPassant!==null||(t.effectiveEnPassant=-1,t.enPassant<0))return;const e=(6-t.turn*5)*16+t.enPassant,n=(5-t.turn*3)*16+t.enPassant,r=(4-t.turn)*16+t.enPassant,s=5*2+t.turn,i=5*2+1-t.turn;if(t.board[e]!==-1||t.board[n]!==-1||t.board[r]!==i)return;const o=(r-1&136)===0&&t.board[r-1]===s,a=(r+1&136)===0&&t.board[r+1]===s;!o&&!a||(i1(t),!(!(o&&Xv(t,r-1,n,r))&&!(a&&Xv(t,r+1,n,r)))&&(t.effectiveEnPassant=t.enPassant))}function bne(t,e){if(t.turn!==e.turn||t.variant!==e.variant)return!1;for(let n=0;n<120;n+=(n&7)===7?9:1)if(t.board[n]!==e.board[n])return!1;return Yv(t),Yv(e),t.effectiveCastling[0]!==e.effectiveCastling[0]||t.effectiveCastling[1]!==e.effectiveCastling[1]?!1:(Qv(t),Qv(e),t.effectiveEnPassant===e.effectiveEnPassant)}/*!
 * -------------------------------------------------------------------------- *
 *                                                                            *
 *    Kokopu - A JavaScript/TypeScript chess library.                         *
 *    <https://www.npmjs.com/package/kokopu>                                  *
 *    Copyright (C) 2018-2024  Yoann Le Montagner <yo35 -at- melix.net>       *
 *                                                                            *
 *    Kokopu is free software: you can redistribute it and/or                 *
 *    modify it under the terms of the GNU Lesser General Public License      *
 *    as published by the Free Software Foundation, either version 3 of       *
 *    the License, or (at your option) any later version.                     *
 *                                                                            *
 *    Kokopu is distributed in the hope that it will be useful,               *
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of          *
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the            *
 *    GNU Lesser General Public License for more details.                     *
 *                                                                            *
 *    You should have received a copy of the GNU Lesser General               *
 *    Public License along with this program. If not, see                     *
 *    <http://www.gnu.org/licenses/>.                                         *
 *                                                                            *
 * -------------------------------------------------------------------------- */Object.defineProperty(Ll,"__esModule",{value:!0});Ll.ascii=wne;Ll.getFEN=xne;Ll.parseFEN=Sne;const co=xt,vne=yo,q2=si,fi=Lt,hi=As,G2=[..."KkQqRrBbNnPp"],DL=["6","3"];function wne(t){let e=`+---+---+---+---+---+---+---+---+
`;for(let n=7;n>=0;--n){for(let r=0;r<8;++r){const s=t.board[n*16+r];e+="| "+(s===-1?" ":G2[s])+" "}e+=`|
`,e+=`+---+---+---+---+---+---+---+---+
`}return e+=(0,co.colorToString)(t.turn)+" "+LL(t)+" "+FL(t),t.variant!==0&&(e+=" ("+(0,co.variantToString)(t.variant)+")"),e}function xne(t,e=0,n=1,r=!1){let s="";for(let i=7;i>=0;--i){let o=0;for(let a=0;a<8;++a){const u=t.board[i*16+a];u===-1?++o:(o>0&&(s+=o,o=0),s+=G2[u])}o>0&&(s+=o),i>0&&(s+="/")}return s+=" "+(0,co.colorToString)(t.turn)+" "+LL(t,r)+" "+FL(t),s+=" "+e+" "+n,s}function LL(t,e=!1){if((0,q2.refreshEffectiveCastling)(t),t.variant===1){if(e){const s=kN(t,0),i=kN(t,1);if(s!==!1&&i!==!1)return s===""&&i===""?"-":s.toUpperCase()+i}let n="",r="";for(let s=0;s<8;++s)t.effectiveCastling[0]&1<<s&&(n+=(0,co.fileToString)(s)),t.effectiveCastling[1]&1<<s&&(r+=(0,co.fileToString)(s));return n===""&&r===""?"-":n.toUpperCase()+r}else{let n="";return t.effectiveCastling[0]&128&&(n+="K"),t.effectiveCastling[0]&1&&(n+="Q"),t.effectiveCastling[1]&128&&(n+="k"),t.effectiveCastling[1]&1&&(n+="q"),n===""?"-":n}}function kN(t,e){const n=1<<t.king[e]%16,r=t.effectiveCastling[e]&~(n|n-1),s=t.effectiveCastling[e]&n-1;let i="";const o=112*e,a=112*e+7,u=2*2+e;if(r!==0){let l=!1;for(let c=t.king[e]+1;c<=a;++c)if(t.board[c]===u){if(l)return!1;l=!0}i+="k"}if(s!==0){let l=!1;for(let c=t.king[e]-1;c>=o;--c)if(t.board[c]===u){if(l)return!1;l=!0}i+="q"}return i}function FL(t){return(0,q2.refreshEffectiveEnPassant)(t),t.effectiveEnPassant<0?"-":(0,co.fileToString)(t.effectiveEnPassant)+DL[t.turn]}function Sne(t,e,n){const r=n?e.split(" "):e.replace(/^\s+|\s+$/g,"").split(/\s+/);if(r.length!==6)throw new fi.InvalidFEN(e,hi.i18n.WRONG_NUMBER_OF_FEN_FIELDS);const s=r[0].split("/");if(s.length!==8)throw new fi.InvalidFEN(e,hi.i18n.WRONG_NUMBER_OF_SUBFIELDS_IN_BOARD_FIELD);const i=(0,vne.makeEmpty)(t);i.legal=null,i.effectiveCastling=null,i.effectiveEnPassant=null;for(let l=7;l>=0;--l){const c=s[7-l];let d=0,f=0;for(;d<c.length&&f<8;){const h=c[d],p=G2.indexOf(h);if(/^[1-8]$/.test(h))f+=parseInt(h,10);else if(p>=0)i.board[l*16+f]=p,++f;else throw new fi.InvalidFEN(e,hi.i18n.UNEXPECTED_CHARACTER_IN_BOARD_FIELD,h);++d}if(d!==c.length||f!==8)throw new fi.InvalidFEN(e,hi.i18n.UNEXPECTED_END_OF_SUBFIELD_IN_BOARD_FIELD,8-l)}if(i.turn=(0,co.colorFromString)(r[1]),i.turn<0)throw new fi.InvalidFEN(e,hi.i18n.INVALID_TURN_FIELD);const o=t===1?Ene(r[2],n,i.board):Ane(r[2],n);if(o===null)throw new fi.InvalidFEN(e,hi.i18n.INVALID_CASTLING_FIELD);i.castling=o;const a=r[3];if(a!=="-"){if(!/^[a-h][36]$/.test(a))throw new fi.InvalidFEN(e,hi.i18n.INVALID_EN_PASSANT_FIELD);if(i.enPassant=(0,co.fileFromString)(a[0]),n){if(a[1]!==DL[i.turn])throw new fi.InvalidFEN(e,hi.i18n.WRONG_RANK_IN_EN_PASSANT_FIELD);if((0,q2.refreshEffectiveEnPassant)(i),i.enPassant!==i.effectiveEnPassant)throw new fi.InvalidFEN(e,hi.i18n.INEFFECTIVE_EN_PASSANT_FIELD,(0,co.fileToString)(i.enPassant))}}const u=n?/^(?:0|[1-9][0-9]*)$/:/^[0-9]+$/;if(!u.test(r[4]))throw new fi.InvalidFEN(e,hi.i18n.INVALID_HALF_MOVE_COUNT_FIELD);if(!u.test(r[5]))throw new fi.InvalidFEN(e,hi.i18n.INVALID_MOVE_NUMBER_FIELD);return{position:i,fiftyMoveClock:parseInt(r[4],10),fullMoveNumber:parseInt(r[5],10)}}function Ane(t,e){const n=[0,0];return t==="-"?n:(e?/^K?Q?k?q?$/:/^[KQkq]*$/).test(t)?(t.indexOf("K")>=0&&(n[0]|=128),t.indexOf("Q")>=0&&(n[0]|=1),t.indexOf("k")>=0&&(n[1]|=128),t.indexOf("q")>=0&&(n[1]|=1),n):null}function Ene(t,e,n){const r=[0,0];if(t==="-")return r;if(!(e?/^[A-H]{0,2}[a-h]{0,2}$/:/^[A-Ha-h]*|[KQkq]*$/).test(t))return null;function s(o){const a=4+o,u=0*2+o;for(let l=112*o;l<112*o+8;++l){if(n[l]===a)return l%8;if(n[l]===u)break}return 0}function i(o){const a=4+o,u=0*2+o;for(let l=112*o+7;l>=112*o;--l){if(n[l]===a)return l%8;if(n[l]===u)break}return 7}e||(t.indexOf("K")>=0&&(r[0]|=1<<i(0)),t.indexOf("Q")>=0&&(r[0]|=1<<s(0)),t.indexOf("k")>=0&&(r[1]|=1<<i(1)),t.indexOf("q")>=0&&(r[1]|=1<<s(1)));for(let o=0;o<8;++o){const a=(0,co.fileToString)(o);t.indexOf(a.toUpperCase())>=0&&(r[0]|=1<<o),t.indexOf(a)>=0&&(r[1]|=1<<o)}return r}var kd={};/*!
 * -------------------------------------------------------------------------- *
 *                                                                            *
 *    Kokopu - A JavaScript/TypeScript chess library.                         *
 *    <https://www.npmjs.com/package/kokopu>                                  *
 *    Copyright (C) 2018-2024  Yoann Le Montagner <yo35 -at- melix.net>       *
 *                                                                            *
 *    Kokopu is free software: you can redistribute it and/or                 *
 *    modify it under the terms of the GNU Lesser General Public License      *
 *    as published by the Free Software Foundation, either version 3 of       *
 *    the License, or (at your option) any later version.                     *
 *                                                                            *
 *    Kokopu is distributed in the hope that it will be useful,               *
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of          *
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the            *
 *    GNU Lesser General Public License for more details.                     *
 *                                                                            *
 *    You should have received a copy of the GNU Lesser General               *
 *    Public License along with this program. If not, see                     *
 *    <http://www.gnu.org/licenses/>.                                         *
 *                                                                            *
 * -------------------------------------------------------------------------- */Object.defineProperty(kd,"__esModule",{value:!0});kd.MoveDescriptorImpl=void 0;const Ps=xt,Eu=Lt,Cne=Id,RN=1,ON=2,Zp=4,PN=8;class Rc extends Cne.MoveDescriptor{static make(e,n,r,s){const i=s===-1?0:Zp;return new Rc(i,e,n,r,r,s,-1,-1)}static makeCastling(e,n,r,s,i){const o=0+i,a=2*2+i;return new Rc(RN,e,n,o,o,a,r,s)}static makeEnPassant(e,n,r,s){const i=ON|Zp,o=5*2+s,a=5*2+1-s;return new Rc(i,e,n,o,o,a,r,-1)}static makePromotion(e,n,r,s,i){const o=PN|(s===-1?0:Zp),a=5*2+r,u=i*2+r;return new Rc(o,e,n,a,u,s,-1,-1)}constructor(e,n,r,s,i,o,a,u){super(),this._flags=e,this._from=n,this._to=r,this._movingColoredPiece=s,this._finalColoredPiece=i,this._optionalColoredPiece=o,this._optionalSquare1=a,this._optionalSquare2=u}isCastling(){return(this._flags&RN)!==0}isEnPassant(){return(this._flags&ON)!==0}isCapture(){return(this._flags&Zp)!==0}isPromotion(){return(this._flags&PN)!==0}from(){return(0,Ps.squareToString)(this._from)}to(){return(0,Ps.squareToString)(this._to)}color(){return(0,Ps.colorToString)(this._movingColoredPiece%2)}movingPiece(){return(0,Ps.pieceToString)(Math.trunc(this._movingColoredPiece/2))}movingColoredPiece(){return(0,Ps.coloredPieceToString)(this._movingColoredPiece)}capturedPiece(){if(!this.isCapture())throw new Eu.IllegalArgument("MoveDescriptor.capturedPiece()");return(0,Ps.pieceToString)(Math.trunc(this._optionalColoredPiece/2))}capturedColoredPiece(){if(!this.isCapture())throw new Eu.IllegalArgument("MoveDescriptor.capturedColoredPiece()");return(0,Ps.coloredPieceToString)(this._optionalColoredPiece)}rookFrom(){if(!this.isCastling())throw new Eu.IllegalArgument("MoveDescriptor.rookFrom()");return(0,Ps.squareToString)(this._optionalSquare1)}rookTo(){if(!this.isCastling())throw new Eu.IllegalArgument("MoveDescriptor.rookTo()");return(0,Ps.squareToString)(this._optionalSquare2)}enPassantSquare(){if(!this.isEnPassant())throw new Eu.IllegalArgument("MoveDescriptor.enPassantSquare()");return(0,Ps.squareToString)(this._optionalSquare1)}promotion(){if(!this.isPromotion())throw new Eu.IllegalArgument("MoveDescriptor.promotion()");return(0,Ps.pieceToString)(Math.trunc(this._finalColoredPiece/2))}coloredPromotion(){if(!this.isPromotion())throw new Eu.IllegalArgument("MoveDescriptor.coloredPromotion()");return(0,Ps.coloredPieceToString)(this._finalColoredPiece)}}kd.MoveDescriptorImpl=Rc;var fr={};/*!
 * -------------------------------------------------------------------------- *
 *                                                                            *
 *    Kokopu - A JavaScript/TypeScript chess library.                         *
 *    <https://www.npmjs.com/package/kokopu>                                  *
 *    Copyright (C) 2018-2024  Yoann Le Montagner <yo35 -at- melix.net>       *
 *                                                                            *
 *    Kokopu is free software: you can redistribute it and/or                 *
 *    modify it under the terms of the GNU Lesser General Public License      *
 *    as published by the Free Software Foundation, either version 3 of       *
 *    the License, or (at your option) any later version.                     *
 *                                                                            *
 *    Kokopu is distributed in the hope that it will be useful,               *
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of          *
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the            *
 *    GNU Lesser General Public License for more details.                     *
 *                                                                            *
 *    You should have received a copy of the GNU Lesser General               *
 *    Public License along with this program. If not, see                     *
 *    <http://www.gnu.org/licenses/>.                                         *
 *                                                                            *
 * -------------------------------------------------------------------------- */Object.defineProperty(fr,"__esModule",{value:!0});fr.isCheck=Tne;fr.isCheckmate=Ine;fr.isStalemate=kne;fr.isDead=Rne;fr.hasMove=H2;fr.moves=Dne;fr.isCaptureMandatory=K2;fr.isCastlingMoveLegal=VL;fr.isMoveLegal=Lne;fr.play=$ne;fr.isNullMoveLegal=zL;fr.playNullMove=Bne;const Wc=Yh,$L=xt,an=si,ur=kd,Nne=[204,0,0,0,0,0,0,60,0,0,0,0,0,0,204,0,0,204,0,0,0,0,0,60,0,0,0,0,0,204,0,0,0,0,204,0,0,0,0,60,0,0,0,0,204,0,0,0,0,0,0,204,0,0,0,60,0,0,0,204,0,0,0,0,0,0,0,0,204,0,0,60,0,0,204,0,0,0,0,0,0,0,0,0,0,204,768,60,768,204,0,0,0,0,0,0,0,0,0,0,0,768,2255,2111,2255,768,0,0,0,0,0,0,60,60,60,60,60,60,63,0,63,60,60,60,60,60,60,0,0,0,0,0,0,768,1231,1087,1231,768,0,0,0,0,0,0,0,0,0,0,0,204,768,60,768,204,0,0,0,0,0,0,0,0,0,0,204,0,0,60,0,0,204,0,0,0,0,0,0,0,0,204,0,0,0,60,0,0,0,204,0,0,0,0,0,0,204,0,0,0,0,60,0,0,0,0,204,0,0,0,0,204,0,0,0,0,0,60,0,0,0,0,0,204,0,0,204,0,0,0,0,0,0,60,0,0,0,0,0,0,204,0],_ne=[-17,0,0,0,0,0,0,-16,0,0,0,0,0,0,-15,0,0,-17,0,0,0,0,0,-16,0,0,0,0,0,-15,0,0,0,0,-17,0,0,0,0,-16,0,0,0,0,-15,0,0,0,0,0,0,-17,0,0,0,-16,0,0,0,-15,0,0,0,0,0,0,0,0,-17,0,0,-16,0,0,-15,0,0,0,0,0,0,0,0,0,0,-17,0,-16,0,-15,0,0,0,0,0,0,0,0,0,0,0,0,-17,-16,-15,0,0,0,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,15,16,17,0,0,0,0,0,0,0,0,0,0,0,0,15,0,16,0,17,0,0,0,0,0,0,0,0,0,0,15,0,0,16,0,0,17,0,0,0,0,0,0,0,0,15,0,0,0,16,0,0,0,17,0,0,0,0,0,0,15,0,0,0,0,16,0,0,0,0,17,0,0,0,0,15,0,0,0,0,0,16,0,0,0,0,0,17,0,0,15,0,0,0,0,0,0,16,0,0,0,0,0,0,17,0];function BL(t,e){for(let n=0;n<120;n+=(n&7)===7?9:1)if(t.board[n]!==-1&&t.board[n]%2===e)return!0;return!1}function o1(t){return t.king[t.turn]>=0&&(0,Wc.isAttacked)(t,t.king[t.turn],1-t.turn)}function Tne(t){return(0,an.isLegal)(t)&&o1(t)}function Ine(t){return!(0,an.isLegal)(t)||H2(t)?!1:t.variant===5?!0:t.variant===6&&t.turn===0?!BL(t,0):o1(t)}function kne(t){return!(0,an.isLegal)(t)||H2(t)?!1:t.variant===5?!0:t.variant===6&&t.turn===0?BL(t,0):!o1(t)}function Rne(t,e){return(0,an.isLegal)(t)&&(t.variant===0||t.variant===1)?e?Pne(t):One(t):!1}function One(t){let e=!1,n=-1;for(let r=0;r<120;r+=(r&7)===7?9:1){const s=t.board[r];if(s===-1)continue;const i=Math.trunc(s/2);if(i===3){const o=(0,$L.squareColorImpl)(r);if(n===o)continue;n=o}if(i===3||i===4){if(e)return!1;e=!0}else if(i!==0)return!1}return!0}function Pne(t){const e=[0,0],n=[-1,-1];for(let r=0;r<120;r+=(r&7)===7?9:1){const s=t.board[r];if(s===-1)continue;const i=s%2,o=Math.trunc(s/2);if(o===3){const a=(0,$L.squareColorImpl)(r);if(n[i]===a)continue;n[i]=a}if(o===3||o===4){if(e[i]+=o===3?2:1,e[i]>=3)return!1}else if(o!==0)return!1}return!0}function H2(t){class e{}try{return ML(t,()=>{throw new e}),!1}catch(n){if(n instanceof e)return!0;throw n}}function Dne(t){const e=[];return ML(t,n=>{e.push(n)}),e}function ML(t,e){if(!(0,an.isLegal)(t))return;const n=!K2(t);if((0,an.refreshEffectiveCastling)(t),n&&t.effectiveCastling[t.turn]!==0){const r=112*t.turn;for(let s=0;s<8;++s)if(t.effectiveCastling[t.turn]&1<<s){const i=r+s,o=r+(i<t.king[t.turn]?3:5),a=r+(i<t.king[t.turn]?2:6);UL(t,t.king[t.turn],a,i,o)&&e(ur.MoveDescriptorImpl.makeCastling(t.king[t.turn],a,i,o,t.turn))}}if((0,an.refreshEffectiveEnPassant)(t),t.effectiveEnPassant>=0){const r=(5-t.turn*3)*16+t.effectiveEnPassant,s=(4-t.turn)*16+t.effectiveEnPassant,i=5*2+t.turn;!(s-1&136)&&t.board[s-1]===i&&(0,an.isKingSafeAfterMove)(t,s-1,r,s)&&e(ur.MoveDescriptorImpl.makeEnPassant(s-1,r,s,t.turn)),!(s+1&136)&&t.board[s+1]===i&&(0,an.isKingSafeAfterMove)(t,s+1,r,s)&&e(ur.MoveDescriptorImpl.makeEnPassant(s+1,r,s,t.turn))}for(let r=0;r<120;r+=(r&7)===7?9:1){const s=t.board[r],i=Math.trunc(s/2);if(!(s===-1||s%2!==t.turn))if(i===5){const o=Wc.ATTACK_DIRECTIONS[s];for(let a=0;a<o.length;++a){const u=r+o[a];!(u&136)&&t.board[u]!==-1&&t.board[u]%2!==t.turn&&(0,an.isKingSafeAfterMove)(t,r,u)&&DN(t,r,u,e)}if(n){const a=16-t.turn*32;let u=r+a;if(t.board[u]===-1){(0,an.isKingSafeAfterMove)(t,r,u)&&DN(t,r,u,e);const l=t.turn*96;r>=l&&r<l+24&&(u+=a,t.board[u]===-1&&(0,an.isKingSafeAfterMove)(t,r,u)&&e(ur.MoveDescriptorImpl.make(r,u,s,-1)))}}}else if(i===4||i===0){const o=Wc.ATTACK_DIRECTIONS[s];for(let a=0;a<o.length;++a){const u=r+o[a];if(!(u&136)){const l=t.board[u];(l===-1?n:l%2!==t.turn)&&(0,an.isKingSafeAfterMove)(t,r,u)&&e(ur.MoveDescriptorImpl.make(r,u,s,l))}}}else{const o=Wc.ATTACK_DIRECTIONS[s];for(let a=0;a<o.length;++a)for(let u=r+o[a];!(u&136);u+=o[a]){const l=t.board[u];if((l===-1?n:l%2!==t.turn)&&(0,an.isKingSafeAfterMove)(t,r,u)&&e(ur.MoveDescriptorImpl.make(r,u,s,l)),l!==-1)break}}}}function DN(t,e,n,r){const s=t.board[n];n<8||n>=112?(r(ur.MoveDescriptorImpl.makePromotion(e,n,t.turn,s,1)),r(ur.MoveDescriptorImpl.makePromotion(e,n,t.turn,s,2)),r(ur.MoveDescriptorImpl.makePromotion(e,n,t.turn,s,3)),r(ur.MoveDescriptorImpl.makePromotion(e,n,t.turn,s,4)),t.variant===5&&r(ur.MoveDescriptorImpl.makePromotion(e,n,t.turn,s,0))):r(ur.MoveDescriptorImpl.make(e,n,5*2+t.turn,s))}function K2(t){if(t.variant!==5)return!1;for(let e=0;e<120;e+=(e&7)===7?9:1){const n=t.board[e];if(n!==-1&&n%2!==t.turn&&(0,Wc.isAttacked)(t,e,t.turn))return!0}return(0,an.refreshEffectiveEnPassant)(t),t.effectiveEnPassant>=0}function VL(t,e,n){let r=-1,s=-1;if(t.variant===1){const i=n%16;if(Math.trunc(n/16)!==t.turn*7||!(t.effectiveCastling[t.turn]&1<<i))return!1;r=n,s=(e>n?3:5)+112*t.turn,n=(e>n?2:6)+112*t.turn}else if(n===2+t.turn*112){if(!(t.effectiveCastling[t.turn]&1))return!1;r=112*t.turn,s=3+112*t.turn}else if(n===6+t.turn*112){if(!(t.effectiveCastling[t.turn]&128))return!1;r=7+112*t.turn,s=5+112*t.turn}else return!1;return UL(t,e,n,r,s)?ur.MoveDescriptorImpl.makeCastling(e,n,r,s,t.turn):!1}function UL(t,e,n,r,s){t.board[e]=-1,t.board[r]=-1;try{for(let o=Math.min(e,n,r,s);o<=Math.max(e,n,r,s);++o)if(t.board[o]!==-1)return!1;const i=1-t.turn;for(let o=Math.min(e,n);o<=Math.max(e,n);++o)if((0,Wc.isAttacked)(t,o,i))return!1;return!0}finally{t.board[e]=0*2+t.turn,t.board[r]=2*2+t.turn}}function Lne(t,e,n){if(!(0,an.isLegal)(t))return!1;const r=t.board[e],s=t.board[n],i=Math.trunc(r/2);if(r===-1||r%2!==t.turn)return!1;const o=n-e+119;let a=-1,u=!1;const l=i===5&&(n<8||n>=112),c=K2(t);if(i===0&&!c&&((0,an.refreshEffectiveCastling)(t),t.effectiveCastling[t.turn]!==0)){const d=VL(t,e,n);if(d)return{type:"regular",moveDescriptor:d}}if(!(Nne[o]&1<<r))if(i===5&&o===151-t.turn*64){const d=t.turn*96;if(e<d||e>=d+24)return!1;u=!0}else return!1;if(i===5){if((0,an.refreshEffectiveEnPassant)(t),o===135-t.turn*32||u){if(c||s!==-1)return!1}else if(s===-1){if(n!==(5-t.turn*3)*16+t.effectiveEnPassant)return!1;a=(4-t.turn)*16+t.effectiveEnPassant}else if(s%2===t.turn)return!1}else if(s===-1?c:s%2===t.turn)return!1;if(i===3||i===2||i===1){const d=_ne[o];for(let f=e+d;f!==n;f+=d)if(t.board[f]!==-1)return!1}else if(u&&t.board[(e+n)/2]!==-1)return!1;return(0,an.isKingSafeAfterMove)(t,e,n,a)?l?{type:"promotion",moveDescriptorFactory:Fne(e,n,t.variant,t.turn,s)}:{type:"regular",moveDescriptor:a>=0?ur.MoveDescriptorImpl.makeEnPassant(e,n,a,t.turn):ur.MoveDescriptorImpl.make(e,n,r,s)}:!1}function Fne(t,e,n,r,s){return i=>i===5||i===0&&n!==5?!1:ur.MoveDescriptorImpl.makePromotion(t,e,r,s,i)}function $ne(t,e){(0,an.refreshEffectiveCastling)(t),t.board[e._from]=-1,e.isEnPassant()?t.board[e._optionalSquare1]=-1:e.isCastling()&&(t.board[e._optionalSquare1]=-1,t.board[e._optionalSquare2]=e._optionalColoredPiece),t.board[e._to]=e._finalColoredPiece;const n=Math.trunc(e._movingColoredPiece/2);if(n===0&&(t.effectiveCastling[t.turn]=0),e._from<8&&(t.effectiveCastling[0]&=~(1<<e._from)),e._to<8&&(t.effectiveCastling[0]&=~(1<<e._to)),e._from>=112&&(t.effectiveCastling[1]&=~(1<<e._from%16)),e._to>=112&&(t.effectiveCastling[1]&=~(1<<e._to%16)),t.castling[0]=t.effectiveCastling[0],t.castling[1]=t.effectiveCastling[1],t.enPassant=-1,t.effectiveEnPassant=-1,n===5&&Math.abs(e._from-e._to)===32){const r=(1+5*t.turn)*16;if(e._from>=r&&e._from<r+8){const s=e._movingColoredPiece^1;(!(e._to-1&136)&&t.board[e._to-1]===s||!(e._to+1&136)&&t.board[e._to+1]===s)&&(t.enPassant=e._to%16,t.effectiveEnPassant=null)}}n===0&&t.king[t.turn]>=0&&(t.king[t.turn]=e._to),t.turn=1-t.turn}function zL(t){return(0,an.isLegal)(t)&&!o1(t)}function Bne(t){return zL(t)?(t.turn=1-t.turn,t.enPassant=-1,t.effectiveEnPassant=-1,!0):!1}var a1={};/*!
 * -------------------------------------------------------------------------- *
 *                                                                            *
 *    Kokopu - A JavaScript/TypeScript chess library.                         *
 *    <https://www.npmjs.com/package/kokopu>                                  *
 *    Copyright (C) 2018-2024  Yoann Le Montagner <yo35 -at- melix.net>       *
 *                                                                            *
 *    Kokopu is free software: you can redistribute it and/or                 *
 *    modify it under the terms of the GNU Lesser General Public License      *
 *    as published by the Free Software Foundation, either version 3 of       *
 *    the License, or (at your option) any later version.                     *
 *                                                                            *
 *    Kokopu is distributed in the hope that it will be useful,               *
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of          *
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the            *
 *    GNU Lesser General Public License for more details.                     *
 *                                                                            *
 *    You should have received a copy of the GNU Lesser General               *
 *    Public License along with this program. If not, see                     *
 *    <http://www.gnu.org/licenses/>.                                         *
 *                                                                            *
 * -------------------------------------------------------------------------- */Object.defineProperty(a1,"__esModule",{value:!0});a1.getNotation=Vne;a1.parseNotation=zne;const jL=Yh,Tr=xt,ft=Ll,Mne=yo,Ih=si,Bm=kd,qc=fr,ht=Lt,et=As;function Vne(t,e,n){let r="";return e.isCastling()?r=e._to%16===6?"O-O":"O-O-O":Math.trunc(e._movingColoredPiece/2)===5?(e.isCapture()&&(r+=(0,Tr.fileToString)(e._from%16)+"x"),r+=(0,Tr.squareToString)(e._to),e.isPromotion()&&(r+="="+LN(e._finalColoredPiece,n))):(r+=LN(e._movingColoredPiece,n),r+=qL(t,e._from,e._to),e.isCapture()&&(r+="x"),r+=(0,Tr.squareToString)(e._to)),r+=WL(t,e),r}function LN(t,e){switch(e){case"figurine":return(0,Tr.figurineToString)(t);case"standard":return(0,Tr.pieceToString)(Math.trunc(t/2)).toUpperCase()}}function WL(t,e){const n=(0,Mne.makeCopy)(t);return(0,qc.play)(n,e),(0,qc.isCheckmate)(n)?"#":(0,qc.isCheck)(n)?"+":""}function qL(t,e,n){const r=(0,jL.getAttacks)(t,n,t.turn).filter(l=>t.board[l]===t.board[e]);if(r.length<2)return"";let s=!1,i=!1,o=!1;const a=Math.trunc(e/16),u=e%16;for(let l=0;l<r.length;++l){const c=r[l];c===e||Une(t,c,n)||(s=!0,a===Math.trunc(c/16)&&(i=!0),u===c%16&&(o=!0))}return o?i?(0,Tr.squareToString)(e):(0,Tr.rankToString)(a):s?(0,Tr.fileToString)(u):""}function Une(t,e,n){const r=t.king[t.turn];if(r<0)return!1;const s=Math.abs(r-e),i=Math.abs(n-e),o=1*2+1-t.turn,a=2*2+1-t.turn,u=3*2+1-t.turn;return s<8?i>=8&&Jp(t,r,e,r<e?1:-1,a,o):s%16===0?i%16!==0&&Jp(t,r,e,r<e?16:-16,a,o):s%15===0?i%15!==0&&Jp(t,r,e,r<e?15:-15,u,o):s%17===0?i%17!==0&&Jp(t,r,e,r<e?17:-17,u,o):!1}function Jp(t,e,n,r,s,i){for(let o=e+r;o!==n;o+=r)if(t.board[o]!==-1)return!1;for(let o=n+r;!(o&136);o+=r)if(t.board[o]!==-1)return t.board[o]===s||t.board[o]===i;return!1}function zne(t,e,n,r){const s=/^(?:(O-O-O|0-0-0)|(O-O|0-0)|([A-Z\u2654-\u265f])([a-h])?([1-8])?(x)?([a-h][1-8])|(?:([a-h])(x)?)?([a-h][1-8])(?:(=)?([A-Z\u2654-\u265f]))?)([+#])?$/.exec(e);if(s===null)throw new ht.InvalidNotation((0,ft.getFEN)(t),e,et.i18n.INVALID_MOVE_NOTATION_SYNTAX);if(!(0,Ih.isLegal)(t))throw new ht.InvalidNotation((0,ft.getFEN)(t),e,et.i18n.ILLEGAL_POSITION);let i=!1;if(s[1]!==void 0||s[2]!==void 0?i=jne(t,e,n,s[1],s[2]):s[3]!==void 0?i=qne(t,e,n,r,s[3],s[4],s[5],s[7]):i=Gne(t,e,n,r,s[8],s[10],s[11],s[12]),n){const o=s[6]!==void 0||s[9]!==void 0;if(i.isCapture()!==o){const l=i.isCapture()?et.i18n.MISSING_CAPTURE_SYMBOL:et.i18n.INVALID_CAPTURE_SYMBOL;throw new ht.InvalidNotation((0,ft.getFEN)(t),e,l)}const a=WL(t,i),u=s[13]??"";if(a!==u)throw new ht.InvalidNotation((0,ft.getFEN)(t),e,et.i18n.WRONG_CHECK_CHECKMATE_SYMBOL,a,u)}return i}function jne(t,e,n,r,s){const i=t.king[t.turn];if(i<0)throw new ht.InvalidNotation((0,ft.getFEN)(t),e,et.i18n.ILLEGAL_NO_KING_CASTLING);(0,Ih.refreshEffectiveCastling)(t);const o=s!==void 0,a=Wne(t,o),u=a>=0?(0,qc.isCastlingMoveLegal)(t,i,a+112*t.turn):!1;if(!u){const l=o?et.i18n.ILLEGAL_KING_SIDE_CASTLING:et.i18n.ILLEGAL_QUEEN_SIDE_CASTLING;throw new ht.InvalidNotation((0,ft.getFEN)(t),e,l)}if(n&&(o?s:r).charAt(0)==="0")throw new ht.InvalidNotation((0,ft.getFEN)(t),e,et.i18n.CASTLING_MOVE_ENCODED_WITH_ZERO);return u}function Wne(t,e){if(t.variant===1){if(t.effectiveCastling[t.turn]!==0){const n=0+t.turn;for(let r=e?7:0;t.board[r+112*t.turn]!==n;r+=e?-1:1)if(t.effectiveCastling[t.turn]&1<<r)return r}return-1}else return e?6:2}function qne(t,e,n,r,s,i,o,a){const u=GL(t,e,s,n,r)*2+t.turn,l=(0,Tr.squareFromString)(a),c=t.board[l];if(c!==-1&&c%2===t.turn)throw new ht.InvalidNotation((0,ft.getFEN)(t),e,et.i18n.TRYING_TO_CAPTURE_YOUR_OWN_PIECES);if(c===-1&&(0,qc.isCaptureMandatory)(t))throw new ht.InvalidNotation((0,ft.getFEN)(t),e,et.i18n.CAPTURE_IS_MANDATORY);let d=(0,jL.getAttacks)(t,l,t.turn).filter(h=>t.board[h]===u);if(i!==void 0){const h=(0,Tr.fileFromString)(i);d=d.filter(p=>p%16===h)}if(o!==void 0){const h=(0,Tr.rankFromString)(o);d=d.filter(p=>Math.trunc(p/16)===h)}if(d.length===0){const h=i===void 0&&o===void 0?et.i18n.NO_PIECE_CAN_MOVE_TO:et.i18n.NO_PIECE_CAN_MOVE_TO_DISAMBIGUATION;throw new ht.InvalidNotation((0,ft.getFEN)(t),e,h,s,a)}let f=!1;for(let h=0;h<d.length;++h)if((0,Ih.isKingSafeAfterMove)(t,d[h],l)){if(f)throw new ht.InvalidNotation((0,ft.getFEN)(t),e,et.i18n.REQUIRE_DISAMBIGUATION,s,a);f=Bm.MoveDescriptorImpl.make(d[h],l,u,c)}if(!f){const h=t.turn===0?et.i18n.NOT_SAFE_FOR_WHITE_KING:et.i18n.NOT_SAFE_FOR_BLACK_KING;throw new ht.InvalidNotation((0,ft.getFEN)(t),e,h)}if(n){const h=qL(t,f._from,l),p=(i??"")+(o??"");if(h!==p)throw new ht.InvalidNotation((0,ft.getFEN)(t),e,et.i18n.WRONG_DISAMBIGUATION_SYMBOL,h,p)}return f}function Gne(t,e,n,r,s,i,o,a){const u=10+t.turn,l=(0,Tr.squareFromString)(i),c=t.board[l],d=16-t.turn*32;let f=l-d,h=-1;if(s!==void 0){if(f&136)throw new ht.InvalidNotation((0,ft.getFEN)(t),e,et.i18n.INVALID_CAPTURING_PAWN_MOVE);const p=(0,Tr.fileFromString)(s),y=l%16;if(y-p===1)f-=1;else if(y-p===-1)f+=1;else throw new ht.InvalidNotation((0,ft.getFEN)(t),e,et.i18n.INVALID_CAPTURING_PAWN_MOVE);if(t.board[f]!==u)throw new ht.InvalidNotation((0,ft.getFEN)(t),e,et.i18n.INVALID_CAPTURING_PAWN_MOVE);if(c===-1){if((0,Ih.refreshEffectiveEnPassant)(t),l!==(5-t.turn*3)*16+t.effectiveEnPassant)throw new ht.InvalidNotation((0,ft.getFEN)(t),e,et.i18n.INVALID_CAPTURING_PAWN_MOVE);h=(4-t.turn)*16+t.effectiveEnPassant}else if(c%2===t.turn)throw new ht.InvalidNotation((0,ft.getFEN)(t),e,et.i18n.INVALID_CAPTURING_PAWN_MOVE)}else{if((0,qc.isCaptureMandatory)(t))throw new ht.InvalidNotation((0,ft.getFEN)(t),e,et.i18n.CAPTURE_IS_MANDATORY);if(f&136)throw new ht.InvalidNotation((0,ft.getFEN)(t),e,et.i18n.INVALID_NON_CAPTURING_PAWN_MOVE);if(c!==-1)throw new ht.InvalidNotation((0,ft.getFEN)(t),e,et.i18n.INVALID_NON_CAPTURING_PAWN_MOVE);if(t.board[f]===-1){f-=d;const p=t.turn*96;if(f<p||f>=p+24||t.board[f]!==u)throw new ht.InvalidNotation((0,ft.getFEN)(t),e,et.i18n.INVALID_NON_CAPTURING_PAWN_MOVE)}else if(t.board[f]!==u)throw new ht.InvalidNotation((0,ft.getFEN)(t),e,et.i18n.INVALID_NON_CAPTURING_PAWN_MOVE)}if(!(0,Ih.isKingSafeAfterMove)(t,f,l,h)){const p=t.turn===0?et.i18n.NOT_SAFE_FOR_WHITE_KING:et.i18n.NOT_SAFE_FOR_BLACK_KING;throw new ht.InvalidNotation((0,ft.getFEN)(t),e,p)}if(l<8||l>=112){if(a===void 0)throw new ht.InvalidNotation((0,ft.getFEN)(t),e,et.i18n.MISSING_PROMOTION);const p=GL(t,e,a,n,r);if(p===5||p===0&&t.variant!==5)throw new ht.InvalidNotation((0,ft.getFEN)(t),e,et.i18n.INVALID_PROMOTED_PIECE,a);if(n&&o===void 0)throw new ht.InvalidNotation((0,ft.getFEN)(t),e,et.i18n.MISSING_PROMOTION_SYMBOL);return Bm.MoveDescriptorImpl.makePromotion(f,l,t.turn,c,p)}else{if(a!==void 0)throw new ht.InvalidNotation((0,ft.getFEN)(t),e,et.i18n.ILLEGAL_PROMOTION);return h>=0?Bm.MoveDescriptorImpl.makeEnPassant(f,l,h,t.turn):Bm.MoveDescriptorImpl.make(f,l,u,c)}}function GL(t,e,n,r,s){switch(s){case"figurine":{const i=(0,Tr.figurineFromString)(n);if(i<0)throw new ht.InvalidNotation((0,ft.getFEN)(t),e,et.i18n.INVALID_PIECE_SYMBOL,n);if(r&&i%2!==t.turn)throw new ht.InvalidNotation((0,ft.getFEN)(t),e,et.i18n.INVALID_PIECE_SYMBOL_COLOR,n);return Math.trunc(i/2)}case"standard":{const i=(0,Tr.pieceFromString)(n.toLowerCase());if(i<0)throw new ht.InvalidNotation((0,ft.getFEN)(t),e,et.i18n.INVALID_PIECE_SYMBOL,n);return i}}}var u1={};/*!
 * -------------------------------------------------------------------------- *
 *                                                                            *
 *    Kokopu - A JavaScript/TypeScript chess library.                         *
 *    <https://www.npmjs.com/package/kokopu>                                  *
 *    Copyright (C) 2018-2024  Yoann Le Montagner <yo35 -at- melix.net>       *
 *                                                                            *
 *    Kokopu is free software: you can redistribute it and/or                 *
 *    modify it under the terms of the GNU Lesser General Public License      *
 *    as published by the Free Software Foundation, either version 3 of       *
 *    the License, or (at your option) any later version.                     *
 *                                                                            *
 *    Kokopu is distributed in the hope that it will be useful,               *
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of          *
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the            *
 *    GNU Lesser General Public License for more details.                     *
 *                                                                            *
 *    You should have received a copy of the GNU Lesser General               *
 *    Public License along with this program. If not, see                     *
 *    <http://www.gnu.org/licenses/>.                                         *
 *                                                                            *
 * -------------------------------------------------------------------------- */Object.defineProperty(u1,"__esModule",{value:!0});u1.getUCINotation=Xne;u1.parseUCINotation=Yne;const Wy=xt,Cu=Ll,Hne=si,Kne=fr,Nu=Lt,_u=As;function Xne(t,e,n){let r=e.from();return e.isCastling()?r+=n||t.variant===1?e.rookFrom():e.to():r+=e.to(),e.isPromotion()&&(r+=e.promotion()),r}function Yne(t,e,n){const r=/^([a-h][1-8])([a-h][1-8])([kqrbnp]?)$/.exec(e);if(r===null)throw new Nu.InvalidNotation((0,Cu.getFEN)(t),e,_u.i18n.INVALID_UCI_NOTATION_SYNTAX);if(!(0,Hne.isLegal)(t))throw new Nu.InvalidNotation((0,Cu.getFEN)(t),e,_u.i18n.ILLEGAL_POSITION);const s=(0,Wy.squareFromString)(r[1]);let i=(0,Wy.squareFromString)(r[2]),o=!1,a=-1;if(t.variant!==1&&!n&&t.board[s]!==-1&&t.board[i]!==-1&&t.board[s]%2===t.board[i]%2){const c=Math.trunc(t.board[s]/2),d=Math.trunc(t.board[i]/2);c===0&&d===2&&(o=!0,a=i,i=t.turn*112+(s<i?6:2))}const u=(0,Kne.isMoveLegal)(t,s,i);let l=!1;if(!u)throw new Nu.InvalidNotation((0,Cu.getFEN)(t),e,_u.i18n.ILLEGAL_UCI_MOVE);if(u.type==="promotion"){if(r[3]==="")throw new Nu.InvalidNotation((0,Cu.getFEN)(t),e,_u.i18n.ILLEGAL_UCI_MOVE);if(l=u.moveDescriptorFactory((0,Wy.pieceFromString)(r[3])),!l)throw new Nu.InvalidNotation((0,Cu.getFEN)(t),e,_u.i18n.ILLEGAL_UCI_MOVE)}else{if(r[3]!=="")throw new Nu.InvalidNotation((0,Cu.getFEN)(t),e,_u.i18n.ILLEGAL_UCI_MOVE);l=u.moveDescriptor}if(o&&(!l.isCastling()||a!==l._optionalSquare1))throw new Nu.InvalidNotation((0,Cu.getFEN)(t),e,_u.i18n.ILLEGAL_UCI_MOVE);return l}/*!
 * -------------------------------------------------------------------------- *
 *                                                                            *
 *    Kokopu - A JavaScript/TypeScript chess library.                         *
 *    <https://www.npmjs.com/package/kokopu>                                  *
 *    Copyright (C) 2018-2024  Yoann Le Montagner <yo35 -at- melix.net>       *
 *                                                                            *
 *    Kokopu is free software: you can redistribute it and/or                 *
 *    modify it under the terms of the GNU Lesser General Public License      *
 *    as published by the Free Software Foundation, either version 3 of       *
 *    the License, or (at your option) any later version.                     *
 *                                                                            *
 *    Kokopu is distributed in the hope that it will be useful,               *
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of          *
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the            *
 *    GNU Lesser General Public License for more details.                     *
 *                                                                            *
 *    You should have received a copy of the GNU Lesser General               *
 *    Public License along with this program. If not, see                     *
 *    <http://www.gnu.org/licenses/>.                                         *
 *                                                                            *
 * -------------------------------------------------------------------------- */Object.defineProperty(su,"__esModule",{value:!0});su.Position=void 0;const Nt=Lt,em=Bt,Qne=As,FN=Yh,Et=xt,ha=Ll,vr=yo,yf=si,bf=kd,pi=fr,Tu=a1,tm=u1;class Yf{constructor(e,n){switch(arguments.length){case 0:this._impl=(0,vr.makeInitial)(0);break;case 1:{if(e==="start")this._impl=(0,vr.makeInitial)(0);else if(e==="empty")this._impl=(0,vr.makeEmpty)(0);else if(e instanceof Yf)this._impl=(0,vr.makeCopy)(e._impl);else{const r=(0,Et.variantFromString)(e);if(r>=0){if(!(0,vr.hasCanonicalStartPosition)(r))throw new Nt.IllegalArgument("Position()");this._impl=(0,vr.makeInitial)(r)}else if(typeof e=="string"){const s=e.indexOf(":");if(s<0)this._impl=(0,ha.parseFEN)(0,e,!1).position;else{const i=e.substring(0,s),o=(0,Et.variantFromString)(i);if(o<0)throw new Nt.InvalidFEN(e,Qne.i18n.INVALID_VARIANT_PREFIX,i);this._impl=(0,ha.parseFEN)(o,e.substring(s+1),!1).position}}else throw new Nt.IllegalArgument("Position()")}break}default:{const r=(0,Et.variantFromString)(e);if(r<0)throw new Nt.IllegalArgument("Position()");if(n==="start"){if(!(0,vr.hasCanonicalStartPosition)(r))throw new Nt.IllegalArgument("Position()");this._impl=(0,vr.makeInitial)(r)}else if(n==="empty")this._impl=(0,vr.makeEmpty)(r);else if(typeof n=="number"){if(r!==1||!$N(n))throw new Nt.IllegalArgument("Position()");this._impl=(0,vr.make960FromScharnagl)(n)}else if(typeof n=="string")this._impl=(0,ha.parseFEN)(r,n,!1).position;else throw new Nt.IllegalArgument("Position()");break}}}clear(e="regular"){const n=(0,Et.variantFromString)(e);if(n<0)throw new Nt.IllegalArgument("Position.clear()");this._impl=(0,vr.makeEmpty)(n)}reset(){this._impl=(0,vr.makeInitial)(0)}reset960(e){if(!$N(e))throw new Nt.IllegalArgument("Position.reset960()");this._impl=(0,vr.make960FromScharnagl)(e)}resetAntichess(){this._impl=(0,vr.makeInitial)(5)}resetHorde(){this._impl=(0,vr.makeInitial)(6)}static isEqual(e,n){return e instanceof Yf&&n instanceof Yf&&(0,yf.isEqual)(e._impl,n._impl)}ascii(){return(0,ha.ascii)(this._impl)}fen(e,n){if(arguments.length===0)return(0,ha.getFEN)(this._impl);if(arguments.length===1&&typeof e=="object"){const r=Zne(e,"Position.fen()"),s=r("fiftyMoveClock",0,u=>Number.isInteger(u)),i=r("fullMoveNumber",1,u=>Number.isInteger(u)),o=r("withVariant",!1,u=>typeof u=="boolean"),a=r("regularFENIfPossible",!1,u=>typeof u=="boolean");return(o?(0,Et.variantToString)(this._impl.variant)+":":"")+(0,ha.getFEN)(this._impl,s,i,a)}else if(arguments.length===1&&typeof e=="string"){const r=(0,ha.parseFEN)(this._impl.variant,e,!1);return this._impl=r.position,{fiftyMoveClock:r.fiftyMoveClock,fullMoveNumber:r.fullMoveNumber}}else if(arguments.length>=2&&typeof e=="string"&&typeof n=="boolean"){const r=(0,ha.parseFEN)(this._impl.variant,e,n);return this._impl=r.position,{fiftyMoveClock:r.fiftyMoveClock,fullMoveNumber:r.fullMoveNumber}}else throw new Nt.IllegalArgument("Position.fen()")}variant(){return(0,Et.variantToString)(this._impl.variant)}square(e,n){const r=(0,Et.squareFromString)(e);if(r<0)throw new Nt.IllegalArgument("Position.square()");if(arguments.length===1){const s=this._impl.board[r];return s===-1?"-":(0,Et.coloredPieceToString)(s)}else if(n==="-")this._impl.board[r]=-1,this._impl.legal=null,this._impl.effectiveCastling=null,this._impl.effectiveEnPassant=null;else{const s=(0,Et.coloredPieceFromString)(n);if(s<0)throw new Nt.IllegalArgument("Position.square()");this._impl.board[r]=s,this._impl.legal=null,this._impl.effectiveCastling=null,this._impl.effectiveEnPassant=null}}turn(e){if(arguments.length===0)return(0,Et.colorToString)(this._impl.turn);{const n=(0,Et.colorFromString)(e);if(n<0)throw new Nt.IllegalArgument("Position.turn()");this._impl.turn=n,this._impl.legal=null,this._impl.effectiveEnPassant=null}}castling(e,n){if(!(this._impl.variant===1?(0,em.isCastle960)(e):(0,em.isCastle)(e)))throw new Nt.IllegalArgument("Position.castling()");const r=(0,Et.colorFromString)(e[0]),s=this._impl.variant===1?(0,Et.fileFromString)(e[1]):e[1]==="k"?7:0;if(arguments.length===1)return(this._impl.castling[r]&1<<s)!==0;if(typeof n=="boolean")n?this._impl.castling[r]|=1<<s:this._impl.castling[r]&=~(1<<s),this._impl.effectiveCastling=null;else throw new Nt.IllegalArgument("Position.castling()")}effectiveCastling(e){if(!(this._impl.variant===1?(0,em.isCastle960)(e):(0,em.isCastle)(e)))throw new Nt.IllegalArgument("Position.effectiveCastling()");const n=(0,Et.colorFromString)(e[0]),r=this._impl.variant===1?(0,Et.fileFromString)(e[1]):e[1]==="k"?7:0;return(0,yf.refreshEffectiveCastling)(this._impl),(this._impl.effectiveCastling[n]&1<<r)!==0}enPassant(e){if(arguments.length===0)return this._impl.enPassant<0?"-":(0,Et.fileToString)(this._impl.enPassant);if(e==="-")this._impl.enPassant=-1,this._impl.effectiveEnPassant=-1;else{const n=(0,Et.fileFromString)(e);if(n<0)throw new Nt.IllegalArgument("Position.enPassant()");this._impl.enPassant=n,this._impl.effectiveEnPassant=null}}effectiveEnPassant(){return(0,yf.refreshEffectiveEnPassant)(this._impl),this._impl.effectiveEnPassant<0?"-":(0,Et.fileToString)(this._impl.effectiveEnPassant)}isAttacked(e,n){const r=(0,Et.squareFromString)(e),s=(0,Et.colorFromString)(n);if(r<0||s<0)throw new Nt.IllegalArgument("Position.isAttacked()");return(0,FN.isAttacked)(this._impl,r,s)}getAttacks(e,n){const r=(0,Et.squareFromString)(e),s=(0,Et.colorFromString)(n);if(r<0||s<0)throw new Nt.IllegalArgument("Position.getAttacks()");return(0,FN.getAttacks)(this._impl,r,s).map(Et.squareToString)}isLegal(){return(0,yf.isLegal)(this._impl)}kingSquare(e){const n=(0,Et.colorFromString)(e);if(n<0)throw new Nt.IllegalArgument("Position.kingSquare()");(0,yf.refreshLegalFlagAndKingSquares)(this._impl);const r=this._impl.king[n];return r<0?!1:(0,Et.squareToString)(r)}isCheck(){return(0,pi.isCheck)(this._impl)}isCheckmate(){return(0,pi.isCheckmate)(this._impl)}isStalemate(){return(0,pi.isStalemate)(this._impl)}isDead(e=!1){return(0,pi.isDead)(this._impl,e)}hasMove(){return(0,pi.hasMove)(this._impl)}moves(){return(0,pi.moves)(this._impl)}isMoveLegal(e,n){const r=(0,Et.squareFromString)(e),s=(0,Et.squareFromString)(n);if(r<0||s<0)throw new Nt.IllegalArgument("Position.isMoveLegal()");const i=(0,pi.isMoveLegal)(this._impl,r,s);if(!i)return!1;switch(i.type){case"promotion":{const o=a=>{const u=(0,Et.pieceFromString)(a);if(u>=0){const l=i.moveDescriptorFactory(u);if(l)return l}throw new Nt.IllegalArgument("Position.isMoveLegal()")};return o.status="promotion",o}case"regular":{const o=()=>i.moveDescriptor;return o.status="regular",o}}}play(e){if(typeof e=="string")try{return(0,pi.play)(this._impl,(0,Tu.parseNotation)(this._impl,e,!1,"standard")),!0}catch(n){if(n instanceof Nt.InvalidNotation)return!1;throw n}else{if(e instanceof bf.MoveDescriptorImpl)return(0,pi.play)(this._impl,e),!0;throw new Nt.IllegalArgument("Position.play()")}}isNullMoveLegal(){return(0,pi.isNullMoveLegal)(this._impl)}playNullMove(){return(0,pi.playNullMove)(this._impl)}notation(e,n){if(arguments.length===1&&e instanceof bf.MoveDescriptorImpl)return(0,Tu.getNotation)(this._impl,e,"standard");if(arguments.length===1&&typeof e=="string")return(0,Tu.parseNotation)(this._impl,e,!1,"standard");if(arguments.length>=2&&typeof e=="string"&&typeof n=="boolean")return(0,Tu.parseNotation)(this._impl,e,n,"standard");throw new Nt.IllegalArgument("Position.notation()")}figurineNotation(e,n){if(arguments.length===1&&e instanceof bf.MoveDescriptorImpl)return(0,Tu.getNotation)(this._impl,e,"figurine");if(arguments.length===1&&typeof e=="string")return(0,Tu.parseNotation)(this._impl,e,!1,"figurine");if(arguments.length>=2&&typeof e=="string"&&typeof n=="boolean")return(0,Tu.parseNotation)(this._impl,e,n,"figurine");throw new Nt.IllegalArgument("Position.figurineNotation()")}uci(e,n){if(arguments.length===1&&e instanceof bf.MoveDescriptorImpl)return(0,tm.getUCINotation)(this._impl,e,!1);if(arguments.length>=2&&e instanceof bf.MoveDescriptorImpl&&typeof n=="boolean")return(0,tm.getUCINotation)(this._impl,e,n);if(arguments.length===1&&typeof e=="string")return(0,tm.parseUCINotation)(this._impl,e,!1);if(arguments.length>=2&&typeof e=="string"&&typeof n=="boolean")return(0,tm.parseUCINotation)(this._impl,e,n);throw new Nt.IllegalArgument("Position.uci()")}}su.Position=Yf;function $N(t){return Number.isInteger(t)&&t>=0&&t<960}function Zne(t,e){return function(n,r,s){if(t[n]===void 0)return r;{const i=t[n];if(!s(i))throw new Nt.IllegalArgument(e);return i}}}var Oi={};/*!
 * -------------------------------------------------------------------------- *
 *                                                                            *
 *    Kokopu - A JavaScript/TypeScript chess library.                         *
 *    <https://www.npmjs.com/package/kokopu>                                  *
 *    Copyright (C) 2018-2024  Yoann Le Montagner <yo35 -at- melix.net>       *
 *                                                                            *
 *    Kokopu is free software: you can redistribute it and/or                 *
 *    modify it under the terms of the GNU Lesser General Public License      *
 *    as published by the Free Software Foundation, either version 3 of       *
 *    the License, or (at your option) any later version.                     *
 *                                                                            *
 *    Kokopu is distributed in the hope that it will be useful,               *
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of          *
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the            *
 *    GNU Lesser General Public License for more details.                     *
 *                                                                            *
 *    You should have received a copy of the GNU Lesser General               *
 *    Public License along with this program. If not, see                     *
 *    <http://www.gnu.org/licenses/>.                                         *
 *                                                                            *
 * -------------------------------------------------------------------------- */Object.defineProperty(Oi,"__esModule",{value:!0});Oi.Variation=Oi.Node=Oi.AbstractNode=void 0;class X2{constructor(){}}Oi.AbstractNode=X2;let Jne=class extends X2{constructor(){super()}isVariation(){return!1}toString(){return`${this.id()}[${this.notation()}]`}};Oi.Node=Jne;class ere extends X2{constructor(){super()}isVariation(){return!0}toString(){return this.id()}}Oi.Variation=ere;var Rd={},l1={},vo={};/*!
 * -------------------------------------------------------------------------- *
 *                                                                            *
 *    Kokopu - A JavaScript/TypeScript chess library.                         *
 *    <https://www.npmjs.com/package/kokopu>                                  *
 *    Copyright (C) 2018-2024  Yoann Le Montagner <yo35 -at- melix.net>       *
 *                                                                            *
 *    Kokopu is free software: you can redistribute it and/or                 *
 *    modify it under the terms of the GNU Lesser General Public License      *
 *    as published by the Free Software Foundation, either version 3 of       *
 *    the License, or (at your option) any later version.                     *
 *                                                                            *
 *    Kokopu is distributed in the hope that it will be useful,               *
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of          *
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the            *
 *    GNU Lesser General Public License for more details.                     *
 *                                                                            *
 *    You should have received a copy of the GNU Lesser General               *
 *    Public License along with this program. If not, see                     *
 *    <http://www.gnu.org/licenses/>.                                         *
 *                                                                            *
 * -------------------------------------------------------------------------- */var tre=Pt&&Pt.__classPrivateFieldSet||function(t,e,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(t,n):s?s.value=n:e.set(t,n),n},nm=Pt&&Pt.__classPrivateFieldGet||function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Mm,Df;Object.defineProperty(vo,"__esModule",{value:!0});vo.POJOExceptionBuilder=void 0;vo.decodeStringField=sre;vo.decodeNumberField=ire;vo.decodeBooleanField=ore;vo.decodeArrayField=are;vo.decodeObjectField=ure;const nre=Lt,Qh=As;class rre{constructor(e){Mm.set(this,void 0),Df.set(this,[]),tre(this,Mm,e,"f")}push(e){nm(this,Df,"f").push(e)}pop(){nm(this,Df,"f").pop()}build(e,...n){let r="",s=!0;for(const i of nm(this,Df,"f"))typeof i=="number"?r+=`[${i}]`:r+=s?i:"."+i,s=!1;return new nre.InvalidPOJO(nm(this,Mm,"f"),r,e,...n)}}vo.POJOExceptionBuilder=rre;Mm=new WeakMap,Df=new WeakMap;function sre(t,e,n,r){if(!(e in t))return;n.push(e);const s=t[e];if(typeof s=="string")r(s);else if(s!==void 0)throw n.build(Qh.i18n.INVALID_POJO_STRING_FIELD);n.pop()}function ire(t,e,n,r){if(!(e in t))return;n.push(e);const s=t[e];if(typeof s=="number")r(s);else if(s!==void 0)throw n.build(Qh.i18n.INVALID_POJO_NUMBER_FIELD);n.pop()}function ore(t,e,n,r){if(!(e in t))return;n.push(e);const s=t[e];if(typeof s=="boolean")r(s);else if(s!==void 0)throw n.build(Qh.i18n.INVALID_POJO_BOOLEAN_FIELD);n.pop()}function are(t,e,n,r){if(!(e in t))return;n.push(e);const s=t[e];if(Array.isArray(s))r(s);else if(s!==void 0)throw n.build(Qh.i18n.INVALID_POJO_ARRAY_FIELD);n.pop()}function ure(t,e,n,r){if(!(e in t))return;n.push(e);const s=t[e];if(typeof s=="object"&&s!==null)r(s);else if(s!==void 0)throw n.build(Qh.i18n.INVALID_POJO_OBJECT_FIELD);n.pop()}/*!
 * -------------------------------------------------------------------------- *
 *                                                                            *
 *    Kokopu - A JavaScript/TypeScript chess library.                         *
 *    <https://www.npmjs.com/package/kokopu>                                  *
 *    Copyright (C) 2018-2024  Yoann Le Montagner <yo35 -at- melix.net>       *
 *                                                                            *
 *    Kokopu is free software: you can redistribute it and/or                 *
 *    modify it under the terms of the GNU Lesser General Public License      *
 *    as published by the Free Software Foundation, either version 3 of       *
 *    the License, or (at your option) any later version.                     *
 *                                                                            *
 *    Kokopu is distributed in the hope that it will be useful,               *
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of          *
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the            *
 *    GNU Lesser General Public License for more details.                     *
 *                                                                            *
 *    You should have received a copy of the GNU Lesser General               *
 *    Public License along with this program. If not, see                     *
 *    <http://www.gnu.org/licenses/>.                                         *
 *                                                                            *
 * -------------------------------------------------------------------------- */Object.defineProperty(l1,"__esModule",{value:!0});l1.MoveTreeRoot=void 0;const Mr=Lt,BN=Bt,Ys=As,HL=Oi,kn=su,tl=bo,_a=vo,lre=xt;class Ua{constructor(){this._position=new kn.Position,this._fullMoveNumber=1,this._mainVariationData=nl(this,!0)}clearTree(){this._mainVariationData=nl(this,!0)}mainVariation(){return new Hc(this._mainVariationData,this._position)}findById(e,n){const r=e.split("-");if(r.length%2!==1)return;const s=new kn.Position(this._position);let i=this._mainVariationData;for(let a=0;a+1<r.length;a+=2){const u=MN(i,r[a],s);if(u===void 0)return;const l=/^v(\d+)$/.exec(r[a+1]);if(!l)return;const c=parseInt(l[1]);if(c>=u.variations.length)return;i=u.variations[c]}const o=r[r.length-1];if(o==="start")return new Hc(i,s);if(n&&o==="end"){if(i.child===void 0)return new Hc(i,s);{let a=i.child;for(;a.child!==void 0;)Gs(s,a),a=a.child;return new ro(a,s)}}else{const a=MN(i,o,s);return a===void 0?void 0:new ro(a,s)}}getPojo(e){const n=this._position.variant();n!=="regular"&&(e.variant=n),(0,BN.variantWithCanonicalStartPosition)(n)&&kn.Position.isEqual(this._position,new kn.Position(n))&&this._fullMoveNumber===1||(e.initialPosition=this._position.fen({fullMoveNumber:this._fullMoveNumber}));const s=KL(new kn.Position(this._position),this._mainVariationData,!0);(!Array.isArray(s)||s.length>0)&&(e.mainVariation=s)}setPojo(e,n){let r="regular",s=!1;if((0,_a.decodeStringField)(e,"variant",n,i=>{if((0,lre.variantFromString)(i)<0)throw n.build(Ys.i18n.INVALID_VARIANT_IN_POJO);r=i}),(0,_a.decodeStringField)(e,"initialPosition",n,i=>{this._position=new kn.Position(r,"empty");try{const{fullMoveNumber:o}=this._position.fen(i);this._fullMoveNumber=o,s=!0}catch(o){throw o instanceof Mr.InvalidFEN?n.build(Ys.i18n.INVALID_FEN_IN_POJO,o.message):o}}),r!=="regular"&&!s){if(!(0,BN.variantWithCanonicalStartPosition)(r))throw n.push("initialPosition"),n.build(Ys.i18n.MISSING_INITIAL_POSITION_IN_POJO,r);this._position=new kn.Position(r),this._fullMoveNumber=1}"mainVariation"in e&&e.mainVariation!==void 0?(n.push("mainVariation"),this._mainVariationData=YL(e.mainVariation,this,this._position,0,this._fullMoveNumber,!0,n),n.pop()):this.clearTree()}}l1.MoveTreeRoot=Ua;function MN(t,e,n){let r=t.child;for(;r!==void 0;){if(e===r.fullMoveNumber+r.moveColor)return r;Gs(n,r),r=r.child}}function KL(t,e,n){const r=[];let s=e.child;for(;s!==void 0;)r.push(cre(t,s)),Gs(t,s),s=s.child;const i={nodes:r};let o=!0;return e.isLongVariation!==n&&(i.isLongVariation=e.isLongVariation,o=!1),XL(i,e)&&(o=!1),o?i.nodes:i}function cre(t,e){const n={notation:e.moveDescriptor===null?"--":t.notation(e.moveDescriptor)};let r=!0;return e.variations.length>0&&(n.variations=e.variations.map(s=>KL(new kn.Position(t),s,!1)),r=!1),XL(n,e)&&(r=!1),r?n.notation:n}function XL(t,e){let n=!1;return e.comment!==void 0&&(t.comment=e.comment,e.isLongComment&&(t.isLongComment=!0),n=!0),e.nags.size>0&&(t.nags=Z2(e),n=!0),e.tags.size>0&&(t.tags=fre(e),n=!0),n}function YL(t,e,n,r,s,i,o){let a,u;if(Array.isArray(t))a=nl(e,i),u=t;else if(typeof t=="object"&&t!==null){let c=i;if((0,_a.decodeBooleanField)(t,"isLongVariation",o,d=>{c=d}),a=nl(e,c),QL(t,a,o),o.push("nodes"),!("nodes"in t)||!Array.isArray(t.nodes))throw o.build(Ys.i18n.INVALID_OR_MISSING_NODE_ARRAY);u=t.nodes}else throw o.build(Ys.i18n.NOT_A_VARIATION_POJO);let l=a;n=new kn.Position(n);for(let c=0;c<u.length;++c)o.push(c),l.child=dre(u[c],a,n,r,s,o),o.pop(),l=l.child,Gs(n,l),r=Gc(l),n.turn()==="w"&&++s;return Array.isArray(t)||o.pop(),a}function dre(t,e,n,r,s,i){let o;if(typeof t=="string")o=VN(n,t,i);else if(typeof t=="object"&&t!==null){if(i.push("notation"),!("notation"in t)||typeof t.notation!="string")throw i.build(Ys.i18n.INVALID_OR_MISSING_NOTATION_FIELD);o=VN(n,t.notation,i),i.pop()}else throw i.build(Ys.i18n.NOT_A_NODE_POJO);const a=Y2(e,n.turn(),r,s,o);return typeof t=="object"&&t!==null&&(QL(t,a,i),(0,_a.decodeArrayField)(t,"variations",i,u=>{for(let l=0;l<u.length;++l)i.push(l),a.variations.push(YL(u[l],a,n,r,s,!1,i)),i.pop()})),a}function VN(t,e,n){try{return Q2(t,e)}catch(r){throw r instanceof Mr.InvalidNotation?n.build(Ys.i18n.INVALID_MOVE_IN_POJO,e,r.message):r}}function QL(t,e,n){(0,_a.decodeStringField)(t,"comment",n,r=>{e.comment=r}),(0,_a.decodeBooleanField)(t,"isLongComment",n,r=>{e.isLongComment=r}),(0,_a.decodeArrayField)(t,"nags",n,r=>{for(let s=0;s<r.length;++s){const i=r[s];if(i!==void 0){if(!(0,tl.isValidNag)(i))throw n.push(s),n.build(Ys.i18n.INVALID_NAG_IN_POJO,i);e.nags.add(i)}}}),(0,_a.decodeObjectField)(t,"tags",n,r=>{for(const s in r){if(!J2(s))throw n.push(`[${s}]`),n.build(Ys.i18n.INVALID_TAG_IN_POJO,s);const i=r[s];if(i!==void 0){if(typeof i!="string")throw n.push(s),n.build(Ys.i18n.INVALID_TAG_IN_POJO,s);e.tags.set(s,i)}}})}function Y2(t,e,n,r,s){return{parentVariation:t,child:void 0,variations:[],moveColor:e,fiftyMoveClock:n,fullMoveNumber:r,moveDescriptor:s,nags:new Set,tags:new Map,comment:void 0,isLongComment:!1}}function nl(t,e){return{parent:t,child:void 0,isLongVariation:e,nags:new Set,tags:new Map,comment:void 0,isLongComment:!1}}function Q2(t,e){if(e==="--"){if(!t.isNullMoveLegal())throw new Mr.InvalidNotation(t.fen(),"--",Ys.i18n.ILLEGAL_NULL_MOVE);return null}else return t.notation(e)}function Gs(t,e){e.moveDescriptor===null?t.playNullMove():t.play(e.moveDescriptor)}function Gc(t){return t.moveDescriptor===null?t.fiftyMoveClock:t.moveDescriptor.isCapture()||t.moveDescriptor.movingPiece()==="p"?0:t.fiftyMoveClock+1}function Zv(t){return t.moveColor==="w"?t.fullMoveNumber:t.fullMoveNumber+1}function Jv(t){if(t.parent instanceof Ua)return new kn.Position(t.parent._position);{let e=t.parent.parentVariation.child;const n=Jv(t.parent.parentVariation);for(;e!==t.parent;)Gs(n,e),e=e.child;return n}}function ZL(t){return JL(t.parentVariation)+t.fullMoveNumber+t.moveColor}function JL(t){if(t.parent instanceof Ua)return"";{const e=ZL(t.parent),n=t.parent.variations.indexOf(t);return`${e}-v${n}-`}}function ew(t){for(;;){if(!t.isLongVariation)return!1;if(t.parent instanceof Ua)return!0;t=t.parent.parentVariation}}function rm(t,e){return Number.isInteger(t)&&t>=0&&t<e.variations.length}function Z2(t){const e=[];for(const n of t.nags)e.push(n);return e.sort((n,r)=>n-r)}function eF(t,e){const n=new Set;for(const r of t.nags)e(r)&&n.add(r);t.nags=n}function J2(t){return typeof t=="string"&&/^\w+$/.test(t)}function tF(t){const e=[];for(const n of t.tags.keys())e.push(n);return e.sort()}function nF(t,e){const n=new Map;for(const[r,s]of t.tags.entries())e(r,s)&&n.set(r,s);t.tags=n}function fre(t){const e={};for(const[n,r]of t.tags.entries())e[n]=r;return e}class ro extends HL.Node{constructor(e,n){super(),this._data=e,this._positionBefore=n}id(){return ZL(this._data)}nags(){return Z2(this._data)}hasNag(e){if(!(0,tl.isValidNag)(e))throw new Mr.IllegalArgument("Node.hasNag()");return this._data.nags.has(e)}addNag(e){if(!(0,tl.isValidNag)(e))throw new Mr.IllegalArgument("Node.addNag()");return this._data.nags.add(e)}removeNag(e){if(!(0,tl.isValidNag)(e))throw new Mr.IllegalArgument("Node.removeNag()");return this._data.nags.delete(e)}clearNags(){this._data.nags.clear()}filterNags(e){eF(this._data,e)}tags(){return tF(this._data)}tag(e,n){if(!J2(e))throw new Mr.IllegalArgument("Node.tag()");if(arguments.length===1)return this._data.tags.get(e);n==null?this._data.tags.delete(e):this._data.tags.set(e,String(n))}clearTags(){this._data.tags.clear()}filterTags(e){nF(this._data,e)}comment(e,n){if(arguments.length===0)return this._data.comment;e==null?(this._data.comment=void 0,this._data.isLongComment=!1):(this._data.comment=String(e),this._data.isLongComment=!!n)}isLongComment(){return this._data.isLongComment&&ew(this._data.parentVariation)}parentVariation(){const e=Jv(this._data.parentVariation);return new Hc(this._data.parentVariation,e)}previous(){let e=this._data.parentVariation.child;if(e===this._data)return;const n=Jv(this._data.parentVariation);for(;e.child!==this._data;)Gs(n,e),e=e.child;return new ro(e,n)}next(){if(this._data.child===void 0)return;const e=new kn.Position(this._positionBefore);return Gs(e,this._data),new ro(this._data.child,e)}notation(){return this._data.moveDescriptor===null?"--":this._positionBefore.notation(this._data.moveDescriptor)}figurineNotation(){return this._data.moveDescriptor===null?"--":this._positionBefore.figurineNotation(this._data.moveDescriptor)}positionBefore(){return new kn.Position(this._positionBefore)}position(){const e=new kn.Position(this._positionBefore);return Gs(e,this._data),e}fen(){return this.position().fen({fiftyMoveClock:Gc(this._data),fullMoveNumber:Zv(this._data)})}fiftyMoveClock(){return Gc(this._data)}fullMoveNumber(){return this._data.fullMoveNumber}moveColor(){return this._data.moveColor}variations(){return this._data.variations.map(e=>new Hc(e,this._positionBefore))}play(e){const n=new kn.Position(this._positionBefore);Gs(n,this._data);const r=n.turn(),s=Gc(this._data),i=Zv(this._data);return this._data.child=Y2(this._data.parentVariation,r,s,i,Q2(n,e)),new ro(this._data.child,n)}removePrecedingMoves(){const e=hre(this._data);e._position=this._positionBefore,e._fullMoveNumber=this._data.fullMoveNumber,e._mainVariationData=nl(e,!0),e._mainVariationData.child=this._data,qy(this._data,e._mainVariationData),rF(this._data,0)}removeFollowingMoves(){this._data.child=void 0}addVariation(e){const n=nl(this._data,e??!1);return this._data.variations.push(n),new Hc(n,this._positionBefore)}removeVariation(e){if(!rm(e,this._data))throw new Mr.IllegalArgument("Node.removeVariation()");this._data.variations=this._data.variations.slice(0,e).concat(this._data.variations.slice(e+1))}swapVariations(e,n){if(!rm(e,this._data)||!rm(n,this._data))throw new Mr.IllegalArgument("Node.swapVariations()");const r=this._data.variations[e];this._data.variations[e]=this._data.variations[n],this._data.variations[n]=r}promoteVariation(e){if(!rm(e,this._data)||this._data.variations[e].child===void 0)throw new Mr.IllegalArgument("Node.promoteVariation()");const n=this._data,r=this._data.variations[e].child,s=n.variations;n.variations=[],s[e]=nl(r,!1),s[e].child=n,this._data=r,r.variations=s.concat(r.variations),pre(n).child=r,qy(r,n.parentVariation),qy(n,s[e]);for(const i of r.variations)i.parent=r}}function hre(t){let e=t;for(;!(e instanceof Ua);)e=e.parentVariation.parent;return e}function pre(t){let e=t.parentVariation;for(;e.child!==t;)e=e.child;return e}function qy(t,e){let n=t;for(;n!==void 0;)n.parentVariation=e,n=n.child}function rF(t,e){let n=t;for(;n!==void 0;){n.fiftyMoveClock=e;for(const r of n.variations)rF(r.child,e);e=Gc(n),n=n.child}}class Hc extends HL.Variation{constructor(e,n){super(),this._data=e,this._initialPosition=n}id(){return JL(this._data)+"start"}nags(){return Z2(this._data)}hasNag(e){if(!(0,tl.isValidNag)(e))throw new Mr.IllegalArgument("Variation.hasNag()");return this._data.nags.has(e)}addNag(e){if(!(0,tl.isValidNag)(e))throw new Mr.IllegalArgument("Variation.addNag()");return this._data.nags.add(e)}removeNag(e){if(!(0,tl.isValidNag)(e))throw new Mr.IllegalArgument("Variation.removeNag()");return this._data.nags.delete(e)}clearNags(){this._data.nags.clear()}filterNags(e){eF(this._data,e)}tags(){return tF(this._data)}tag(e,n){if(!J2(e))throw new Mr.IllegalArgument("Variation.tag()");if(arguments.length===1)return this._data.tags.get(e);n==null?this._data.tags.delete(e):this._data.tags.set(e,String(n))}clearTags(){this._data.tags.clear()}filterTags(e){nF(this._data,e)}comment(e,n){if(arguments.length===0)return this._data.comment;e==null?(this._data.comment=void 0,this._data.isLongComment=!1):(this._data.comment=String(e),this._data.isLongComment=!!n)}isLongComment(){return this._data.isLongComment&&ew(this._data)}parentNode(){return this._data.parent instanceof Ua?void 0:new ro(this._data.parent,this._initialPosition)}first(){return this._data.child===void 0?void 0:new ro(this._data.child,this._initialPosition)}nodes(){const e=[];let n=this._data.child,r,s=this._initialPosition;for(;n!==void 0;)s=new kn.Position(s),r!==void 0&&Gs(s,r),e.push(new ro(n,s)),r=n,n=n.child;return e}plyCount(){let e=0,n=this._data.child;for(;n!==void 0;)++e,n=n.child;return e}isLongVariation(){return ew(this._data)}initialPosition(){return new kn.Position(this._initialPosition)}initialFEN(){return this._initialPosition.fen({fiftyMoveClock:this.initialFiftyMoveClock(),fullMoveNumber:this.initialFullMoveNumber()})}initialFiftyMoveClock(){return this._data.parent instanceof Ua?0:this._data.parent.fiftyMoveClock}initialFullMoveNumber(){return this._data.parent instanceof Ua?this._data.parent._fullMoveNumber:this._data.parent.fullMoveNumber}finalPosition(){const e=new kn.Position(this._initialPosition);for(let n=this._data.child;n!==void 0;n=n.child)Gs(e,n);return e}finalFEN(){if(this._data.child===void 0)return this.initialFEN();const e=new kn.Position(this._initialPosition);let n=this._data.child;for(;Gs(e,n),n.child!==void 0;)n=n.child;return e.fen({fiftyMoveClock:Gc(n),fullMoveNumber:Zv(n)})}play(e){const n=this._initialPosition.turn(),r=this.initialFiftyMoveClock(),s=this.initialFullMoveNumber();return this._data.child=Y2(this._data,n,r,s,Q2(this._initialPosition,e)),new ro(this._data.child,this._initialPosition)}clearMoves(){this._data.child=void 0}}/*!
 * -------------------------------------------------------------------------- *
 *                                                                            *
 *    Kokopu - A JavaScript/TypeScript chess library.                         *
 *    <https://www.npmjs.com/package/kokopu>                                  *
 *    Copyright (C) 2018-2024  Yoann Le Montagner <yo35 -at- melix.net>       *
 *                                                                            *
 *    Kokopu is free software: you can redistribute it and/or                 *
 *    modify it under the terms of the GNU Lesser General Public License      *
 *    as published by the Free Software Foundation, either version 3 of       *
 *    the License, or (at your option) any later version.                     *
 *                                                                            *
 *    Kokopu is distributed in the hope that it will be useful,               *
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of          *
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the            *
 *    GNU Lesser General Public License for more details.                     *
 *                                                                            *
 *    You should have received a copy of the GNU Lesser General               *
 *    Public License along with this program. If not, see                     *
 *    <http://www.gnu.org/licenses/>.                                         *
 *                                                                            *
 * -------------------------------------------------------------------------- */Object.defineProperty(Rd,"__esModule",{value:!0});Rd.Game=void 0;const Iu=Td,Ds=Lt,Vm=Bt,oc=As,vf=su,Oc=bo,mre=l1,yn=vo,ku=xt;class eS{constructor(){this._playerName=[void 0,void 0],this._playerElo=[void 0,void 0],this._playerTitle=[void 0,void 0],this._round=[void 0,void 0,void 0],this._result=3,this._moveTreeRoot=new mre.MoveTreeRoot}clearHeaders(){this._playerName=[void 0,void 0],this._playerElo=[void 0,void 0],this._playerTitle=[void 0,void 0],this._event=void 0,this._round=[void 0,void 0,void 0],this._date=void 0,this._site=void 0,this._annotator=void 0,this._eco=void 0,this._opening=void 0,this._openingVariation=void 0,this._openingSubVariation=void 0,this._termination=void 0,this._result=3}playerName(e,n){const r=(0,ku.colorFromString)(e);if(r<0)throw new Ds.IllegalArgument("Game.playerName()");if(arguments.length===1)return this._playerName[r];this._playerName[r]=Ki(n)}playerElo(e,n){const r=(0,ku.colorFromString)(e);if(r<0)throw new Ds.IllegalArgument("Game.playerElo()");if(arguments.length===1)return this._playerElo[r];if(n=UN(n),n===void 0||(0,Oc.isValidElo)(n))this._playerElo[r]=n;else throw new Ds.IllegalArgument("Game.playerElo()")}playerTitle(e,n){const r=(0,ku.colorFromString)(e);if(r<0)throw new Ds.IllegalArgument("Game.playerTitle()");if(arguments.length===1)return this._playerTitle[r];this._playerTitle[r]=Ki(n)}event(e){if(arguments.length===0)return this._event;this._event=Ki(e)}round(e){if(arguments.length===0)return this._round[0];this._setRoundPart(0,e,"Game.round()")}subRound(e){if(arguments.length===0)return this._round[1];this._setRoundPart(1,e,"Game.subRound()")}subSubRound(e){if(arguments.length===0)return this._round[2];this._setRoundPart(2,e,"Game.subSubRound()")}_setRoundPart(e,n,r){if(n=UN(n),n===void 0||(0,Oc.isValidRound)(n))this._round[e]=n;else throw new Ds.IllegalArgument(r)}fullRound(){return sF(this._round[0],this._round[1],this._round[2],"?")}date(e,n,r){switch(arguments.length){case 0:return this._date;case 1:if(e==null)this._date=void 0;else if(e instanceof Iu.DateValue)this._date=e;else if(e instanceof Date)this._date=new Iu.DateValue(e);else if(Iu.DateValue.isValid(e))this._date=new Iu.DateValue(e);else throw new Ds.IllegalArgument("Game.date()");break;default:if(Iu.DateValue.isValid(e,n,r))this._date=new Iu.DateValue(e,n,r);else throw new Ds.IllegalArgument("Game.date()");break}}dateAsDate(){return this._date===void 0?void 0:this._date.toDate()}dateAsString(e){return this._date===void 0?void 0:this._date.toHumanReadableString(e)}site(e){if(arguments.length===0)return this._site;this._site=Ki(e)}annotator(e){if(arguments.length===0)return this._annotator;this._annotator=Ki(e)}eco(e){if(arguments.length===0)return this._eco;if(e=Ki(e),e!==void 0&&!(0,Vm.isValidECO)(e))throw new Ds.IllegalArgument("Game.eco()");this._eco=e}opening(e){if(arguments.length===0)return this._opening;this._opening=Ki(e)}openingVariation(e){if(arguments.length===0)return this._openingVariation;this._openingVariation=Ki(e)}openingSubVariation(e){if(arguments.length===0)return this._openingSubVariation;this._openingSubVariation=Ki(e)}termination(e){if(arguments.length===0)return this._termination;this._termination=Ki(e)}result(e){if(arguments.length===0)return(0,ku.resultToString)(this._result);{const n=(0,ku.resultFromString)(e);if(n<0)throw new Ds.IllegalArgument("Game.result()");this._result=n}}variant(){return this._moveTreeRoot._position.variant()}initialPosition(e,n){if(arguments.length===0)return new vf.Position(this._moveTreeRoot._position);if(!(e instanceof vf.Position))throw new Ds.IllegalArgument("Game.initialPosition()");if(arguments.length>=2){if(!Number.isInteger(n))throw new Ds.IllegalArgument("Game.initialPosition()");this._moveTreeRoot._fullMoveNumber=n}else this._moveTreeRoot._fullMoveNumber=1;this._moveTreeRoot._position=new vf.Position(e),this._moveTreeRoot.clearTree()}initialFEN(){return this._moveTreeRoot._position.fen({fiftyMoveClock:0,fullMoveNumber:this._moveTreeRoot._fullMoveNumber})}initialFullMoveNumber(){return this._moveTreeRoot._fullMoveNumber}finalPosition(){return this._moveTreeRoot.mainVariation().finalPosition()}finalFEN(){return this._moveTreeRoot.mainVariation().finalFEN()}mainVariation(){return this._moveTreeRoot.mainVariation()}nodes(e=!1){if(!e)return this.mainVariation().nodes();const n=[];function r(s){for(const i of s.nodes()){for(const o of i.variations())r(o);n.push(i)}}return r(this.mainVariation()),n}plyCount(){return this._moveTreeRoot.mainVariation().plyCount()}findById(e,n=!0){return this._moveTreeRoot.findById(e,n)}pojo(){const e={};function n(s,i){return s._playerName[i]===void 0&&s._playerElo[i]===void 0&&s._playerTitle[i]===void 0}function r(s,i){const o={};return s._playerName[i]!==void 0&&(o.name=s._playerName[i]),s._playerElo[i]!==void 0&&(o.elo=s._playerElo[i]),s._playerTitle[i]!==void 0&&(o.title=s._playerTitle[i]),o}return n(this,0)||(e.white=r(this,0)),n(this,1)||(e.black=r(this,1)),this._event!==void 0&&(e.event=this._event),this._round[0]!==void 0&&(e.round=this._round[0]),this._round[1]!==void 0&&(e.subRound=this._round[1]),this._round[2]!==void 0&&(e.subSubRound=this._round[2]),this._date!==void 0&&(e.date=this._date.toString()),this._site!==void 0&&(e.site=this._site),this._annotator!==void 0&&(e.annotator=this._annotator),this._eco!==void 0&&(e.eco=this._eco),this._opening!==void 0&&(e.opening=this._opening),this._openingVariation!==void 0&&(e.openingVariation=this._openingVariation),this._openingSubVariation!==void 0&&(e.openingSubVariation=this._openingSubVariation),this._termination!==void 0&&(e.termination=this._termination),this._result!==3&&(e.result=this.result()),this._moveTreeRoot.getPojo(e),e}static fromPOJO(e){if(typeof e!="object"||e===null)throw new Ds.InvalidPOJO(e,"",oc.i18n.POJO_MUST_BE_AN_OBJECT);const n=new eS,r=new yn.POJOExceptionBuilder(e);function s(o,a){(0,yn.decodeStringField)(o,"name",r,u=>{n._playerName[a]=u}),(0,yn.decodeNumberField)(o,"elo",r,u=>{if(!(0,Oc.isValidElo)(u))throw r.build(oc.i18n.INVALID_ELO_IN_POJO);n._playerElo[a]=u}),(0,yn.decodeStringField)(o,"title",r,u=>{n._playerTitle[a]=u})}function i(o,a){if(!(0,Oc.isValidRound)(o))throw r.build(oc.i18n.INVALID_ROUND_IN_POJO);n._round[a]=o}return(0,yn.decodeObjectField)(e,"white",r,o=>{s(o,0)}),(0,yn.decodeObjectField)(e,"black",r,o=>{s(o,1)}),(0,yn.decodeStringField)(e,"event",r,o=>{n._event=o}),(0,yn.decodeNumberField)(e,"round",r,o=>{i(o,0)}),(0,yn.decodeNumberField)(e,"subRound",r,o=>{i(o,1)}),(0,yn.decodeNumberField)(e,"subSubRound",r,o=>{i(o,2)}),(0,yn.decodeStringField)(e,"date",r,o=>{const a=Iu.DateValue.fromString(o);if(a===void 0)throw r.build(oc.i18n.INVALID_DATE_IN_POJO);n._date=a}),(0,yn.decodeStringField)(e,"site",r,o=>{n._site=o}),(0,yn.decodeStringField)(e,"annotator",r,o=>{n._annotator=o}),(0,yn.decodeStringField)(e,"eco",r,o=>{if(!(0,Vm.isValidECO)(o))throw r.build(oc.i18n.INVALID_ECO_CODE_IN_POJO);n._eco=o}),(0,yn.decodeStringField)(e,"opening",r,o=>{n._opening=o}),(0,yn.decodeStringField)(e,"openingVariation",r,o=>{n._openingVariation=o}),(0,yn.decodeStringField)(e,"openingSubVariation",r,o=>{n._openingSubVariation=o}),(0,yn.decodeStringField)(e,"termination",r,o=>{n._termination=o}),(0,yn.decodeStringField)(e,"result",r,o=>{const a=(0,ku.resultFromString)(o);if(a<0)throw r.build(oc.i18n.INVALID_RESULT_IN_POJO);n._result=a}),n._moveTreeRoot.setPojo(e,r),n}ascii(){const e=[];function n(a){a!==void 0&&e.push(a)}n(gre(this._event,this._round[0],this._round[1],this._round[2])),n(wf("Site",this._site)),n(wf("Date",this.dateAsString("en-us"))),n(zN("White",this._playerName[0],this._playerElo[0],this._playerTitle[0])),n(zN("Black",this._playerName[1],this._playerElo[1],this._playerTitle[1])),n(wf("Annotator",this._annotator)),n(wf("ECO",this._eco)),n(yre(this._opening,this._openingVariation,this._openingSubVariation)),n(wf("Termination",this._termination));const r=this._moveTreeRoot._position.variant();r!=="regular"&&e.push("Variant: "+r),(!(0,Vm.variantWithCanonicalStartPosition)(r)||!vf.Position.isEqual(this._moveTreeRoot._position,new vf.Position(r)))&&e.push(this._moveTreeRoot._position.ascii());function s(a){return a.first()!==void 0||a.nags().length>0||a.tags().length>0||a.comment()!==void 0}function i(a,u,l){const c=u+a.fullMoveNumber()+(a.moveColor()==="w"?".":"...")+a.notation(),d=jN(a);e.push(d.length===0?c:c+" "+d.join(" "));let f=!1;for(const h of a.variations())s(h)&&(e.push(u+" |"),o(h,u+(l?" |  ":"    "),u+" +- "),f=!0);return f}function o(a,u,l,c){const d=jN(a);d.length>0&&e.push(l+d.join(" "));let f=a.first(),h=!1,p=!0;for(;f!==void 0;){h&&e.push(u+" |");const y=f.next();h=i(f,p&&d.length===0?l:u,y!==void 0),p=!1,f=y}}return o(this._moveTreeRoot.mainVariation(),"",""),e.push((0,ku.resultToString)(this._result)),e.join(`
`)}}Rd.Game=eS;function Ki(t){return t==null?void 0:String(t)}function UN(t){return t==null?void 0:Number(t)}function so(t){return t=(0,Oc.trimAndCollapseSpaces)(t),t===""?"<empty>":t}function wf(t,e){return e===void 0?void 0:`${t}: ${so(e)}`}function gre(t,e,n,r){if(t===void 0&&e===void 0&&n===void 0&&r===void 0)return;let s=t===void 0?"Event: <undefined>":`Event: ${so(t)}`;const i=sF(e,n,r,"*");return i!==void 0&&(s+=` (${i})`),s}function sF(t,e,n,r){if(t===void 0&&e===void 0&&n===void 0)return;let s=t===void 0?r:String(t);return(e!==void 0||n!==void 0)&&(s+="."+(e??r)),n!==void 0&&(s+="."+n),s}function zN(t,e,n,r){if(e===void 0&&n===void 0&&r===void 0)return;let s=e===void 0?`${t}: <undefined>`:`${t}: ${so(e)}`;return n!==void 0&&r!==void 0?s+=` (${so(r)} ${n})`:n!==void 0?s+=` (${n})`:r!==void 0&&(s+=` (${so(r)})`),s}function yre(t,e,n){if(t===void 0&&e===void 0&&n===void 0)return;let r=t===void 0?"Opening: <undefined>":`Opening: ${so(t)}`;return n!==void 0?r+=` (${e===void 0?"<undefined>":so(e)}, ${so(n)})`:e!==void 0&&(r+=` (${so(e)})`),r}function jN(t){const e=[];for(const r of t.nags())e.push((0,Vm.nagSymbol)(r));for(const r of t.tags())e.push(`${r}={${(0,Oc.trimAndCollapseSpaces)(t.tag(r))}}`);const n=t.comment();return n!==void 0&&e.push(so(n)),e}var Fl={};/*!
 * -------------------------------------------------------------------------- *
 *                                                                            *
 *    Kokopu - A JavaScript/TypeScript chess library.                         *
 *    <https://www.npmjs.com/package/kokopu>                                  *
 *    Copyright (C) 2018-2024  Yoann Le Montagner <yo35 -at- melix.net>       *
 *                                                                            *
 *    Kokopu is free software: you can redistribute it and/or                 *
 *    modify it under the terms of the GNU Lesser General Public License      *
 *    as published by the Free Software Foundation, either version 3 of       *
 *    the License, or (at your option) any later version.                     *
 *                                                                            *
 *    Kokopu is distributed in the hope that it will be useful,               *
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of          *
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the            *
 *    GNU Lesser General Public License for more details.                     *
 *                                                                            *
 *    You should have received a copy of the GNU Lesser General               *
 *    Public License along with this program. If not, see                     *
 *    <http://www.gnu.org/licenses/>.                                         *
 *                                                                            *
 * -------------------------------------------------------------------------- */Object.defineProperty(Fl,"__esModule",{value:!0});Fl.Database=void 0;Fl.isValidGameIndex=oF;const iF=Lt;function oF(t){return Number.isInteger(t)&&t>=0}class bre{constructor(){}gameCount(){return this.doGameCount()}game(e){if(!oF(e))throw new iF.IllegalArgument("Database.game()");return this.doGame(e)}games(){const e=this.doGameCount(),n=r=>this.doGame(r);return{[Symbol.iterator](){return new vre(e,n)}}}}Fl.Database=bre;class vre{constructor(e,n){this.gameIndex=0,this.gameCount=e,this.gameLoader=n}next(){for(;this.gameIndex<this.gameCount;)try{return{done:!1,value:this.gameLoader(this.gameIndex++)}}catch(e){if(!(e instanceof iF.InvalidPGN))throw e}return{done:!0,value:void 0}}}var c1={},d1={},f1={};/*!
 * -------------------------------------------------------------------------- *
 *                                                                            *
 *    Kokopu - A JavaScript/TypeScript chess library.                         *
 *    <https://www.npmjs.com/package/kokopu>                                  *
 *    Copyright (C) 2018-2024  Yoann Le Montagner <yo35 -at- melix.net>       *
 *                                                                            *
 *    Kokopu is free software: you can redistribute it and/or                 *
 *    modify it under the terms of the GNU Lesser General Public License      *
 *    as published by the Free Software Foundation, either version 3 of       *
 *    the License, or (at your option) any later version.                     *
 *                                                                            *
 *    Kokopu is distributed in the hope that it will be useful,               *
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of          *
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the            *
 *    GNU Lesser General Public License for more details.                     *
 *                                                                            *
 *    You should have received a copy of the GNU Lesser General               *
 *    Public License along with this program. If not, see                     *
 *    <http://www.gnu.org/licenses/>.                                         *
 *                                                                            *
 * -------------------------------------------------------------------------- */Object.defineProperty(f1,"__esModule",{value:!0});f1.TokenStream=void 0;const Gy=Lt,Hy=As,tw=bo;function Mn(t,e){const n=t;return n.needIncrementLineIndex=e!==void 0&&e,n.matchedIndex=-1,n.matched=null,n}const wre=5,xre=11,mn=new Map;mn.set("!!",3);mn.set("!",1);mn.set("!?",5);mn.set("?!",6);mn.set("?",2);mn.set("??",4);mn.set("+-",18);mn.set("+/-",16);mn.set("+/=",14);mn.set("+=",14);mn.set("=",10);mn.set("~",13);mn.set("inf",13);mn.set("=/+",15);mn.set("=+",15);mn.set("-/+",17);mn.set("-+",19);mn.set("RR",145);mn.set("N",146);class Sre{constructor(e,n){this._pos=0,this._lineIndex=1,this._token=0,this._tokenValue=null,this._tokenCharacterIndex=-1,this._tokenLineIndex=-1,this._emptyLineBeforeToken=!1,this._emptyLineAfterToken=!1,this._matchSpaces=Mn(/[ \f\t\v]+/g),this._matchLineBreak=Mn(/\r?\n|\r/g,!0),this._matchFastAdvance=Mn(/[^ \f\t\v\r\n"{][^ \f\t\v\r\n"{10*]*/g),this._matchBeginHeader=Mn(/\[/g),this._matchEndHeader=Mn(/\]/g),this._matchHeaderId=Mn(/(\w+)/g),this._matchEnterHeaderValue=Mn(/"/g),this._matchMoveNumber=Mn(/[0-9]+\.(?:\.\.)?/g),this._matchMove=Mn(/(?:O-O(?:-O)?|0-0(?:-0)?|[KQRBN][a-h]?[1-8]?x?[a-h][1-8]|(?:[a-h]x?)?[a-h][1-8](?:=?[KQRBNP])?)[+#]?|--/g),this._matchNag=Mn(/([!?][!?]?|\+\/?[-=]|[-=]\/?\+|=|inf|~|RR|N)|\$([1-9][0-9]*)/g),this._matchEnterComment=Mn(/\{/g),this._matchBeginVariation=Mn(/\(/g),this._matchEndVariation=Mn(/\)/g),this._matchEndOfGame=Mn(/1-0|0-1|1\/2-1\/2|\*/g),this._headerValueMode=Mn(/((?:[^\\"\f\t\v\r\n]|\\[^\f\t\v\r\n])*)"/g),this._headerValueDegradedMode=Mn(/[^\r\n]*/g),this._commentMode=Mn(/((?:[^\\}]|\\(?:.|[\r\n]))*)\}/g,!0),e.codePointAt(0)===65279&&(e=e.substring(1)),this._text=e,n!==void 0&&(this._pos=n.pos,this._lineIndex=n.lineIndex)}text(){return this._text}currentLocation(){return{pos:this._pos,lineIndex:this._lineIndex}}emptyLineBeforeToken(){return this._emptyLineBeforeToken}emptyLineAfterToken(){return this._emptyLineAfterToken}token(){return this._token}tokenValue(){return this._tokenValue}tokenCharacterIndex(){return this._tokenCharacterIndex}tokenLineIndex(){return this._tokenLineIndex}isMoveTextSection(){return this._token>=wre&&this._token<=xre}consumeToken(){if(this._emptyLineBeforeToken=this._token===0||this._token===11?this.skipBlanks():this._emptyLineAfterToken,this._pos>=this._text.length)return this._tokenCharacterIndex=this._text.length,this._tokenLineIndex=this._lineIndex,!1;if(this._tokenCharacterIndex=this._pos,this._tokenLineIndex=this._lineIndex,this.testAtPos(this._matchMoveNumber))this._token=5,this._tokenValue=null;else if(this.testAtPos(this._matchMove))this._token=6,this._tokenValue=this._matchMove.matched[0];else if(this.testAtPos(this._matchNag))this._token=7,this._tokenValue=this._matchNag.matched[2]===void 0?mn.get(this._matchNag.matched[1]):parseInt(this._matchNag.matched[2],10);else if(this.testAtPos(this._matchEnterComment)){if(!this.testAtPos(this._commentMode))throw new Gy.InvalidPGN(this._text,this._pos,this._lineIndex,Hy.i18n.INVALID_PGN_TOKEN);this._token=8,this._tokenValue=Ere(this._commentMode.matched[1])}else if(this.testAtPos(this._matchBeginVariation))this._token=9,this._tokenValue=null;else if(this.testAtPos(this._matchEndVariation))this._token=10,this._tokenValue=null;else if(this.testAtPos(this._matchEndOfGame))this._token=11,this._tokenValue=this._matchEndOfGame.matched[0];else if(this.testAtPos(this._matchBeginHeader))this._token=1,this._tokenValue=null;else if(this.testAtPos(this._matchEndHeader))this._token=2,this._tokenValue=null;else if(this.testAtPos(this._matchHeaderId))this._token=3,this._tokenValue=this._matchHeaderId.matched[1];else if(this.testAtPos(this._matchEnterHeaderValue)){if(!this.testAtPos(this._headerValueMode))throw new Gy.InvalidPGN(this._text,this._pos,this._lineIndex,Hy.i18n.INVALID_PGN_TOKEN);this._token=4,this._tokenValue=Are(this._headerValueMode.matched[1])}else throw new Gy.InvalidPGN(this._text,this._pos,this._lineIndex,Hy.i18n.INVALID_PGN_TOKEN);return this._emptyLineAfterToken=this._token===11?!1:this.skipBlanks(),!0}skipGame(){let e=!1;for(this._token=0;;){if(this.skipBlanks(),this._pos>=this._text.length)return e;if(e=!0,this.testAtPos(this._matchEnterComment)){if(!this.testAtPos(this._commentMode))return this._pos=this._text.length,!0}else if(this.testAtPos(this._matchEnterHeaderValue))this.testAtPos(this._headerValueMode)||this.testAtPos(this._headerValueDegradedMode);else{if(this.testAtPos(this._matchEndOfGame))return!0;this.testAtPos(this._matchFastAdvance)}}}skipBlanks(){let e=0;for(;this._pos<this._text.length;)if(!this.testAtPos(this._matchSpaces))if(this.testAtPos(this._matchLineBreak))++e;else break;return e>=2}testAtPos(e){if(e.matchedIndex<this._pos&&(e.lastIndex=this._pos,e.matched=e.exec(this._text),e.matchedIndex=e.matched===null?this._text.length:e.matched.index),e.matchedIndex===this._pos){if(this._pos=e.lastIndex,e.needIncrementLineIndex){const n=/\r?\n|\r/g;for(;n.exec(e.matched[0]);)++this._lineIndex}return!0}else return!1}}f1.TokenStream=Sre;function Are(t){return(0,tw.trimAndCollapseSpaces)(t.replace(/\\([\\"])/g,"$1"))}function Ere(t){t=t.replace(/\\([\\}])/g,"$1");const e=new Map;let n=t.replace(/\[%(\w+)\s([^[\]]*)\]/g,(r,s,i)=>(i=(0,tw.trimAndCollapseSpaces)(i),i!==""&&e.set(s,i)," "));return n=(0,tw.trimAndCollapseSpaces)(n),n===""&&(n=void 0),{comment:n,tags:e}}/*!
 * -------------------------------------------------------------------------- *
 *                                                                            *
 *    Kokopu - A JavaScript/TypeScript chess library.                         *
 *    <https://www.npmjs.com/package/kokopu>                                  *
 *    Copyright (C) 2018-2024  Yoann Le Montagner <yo35 -at- melix.net>       *
 *                                                                            *
 *    Kokopu is free software: you can redistribute it and/or                 *
 *    modify it under the terms of the GNU Lesser General Public License      *
 *    as published by the Free Software Foundation, either version 3 of       *
 *    the License, or (at your option) any later version.                     *
 *                                                                            *
 *    Kokopu is distributed in the hope that it will be useful,               *
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of          *
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the            *
 *    GNU Lesser General Public License for more details.                     *
 *                                                                            *
 *    You should have received a copy of the GNU Lesser General               *
 *    Public License along with this program. If not, see                     *
 *    <http://www.gnu.org/licenses/>.                                         *
 *                                                                            *
 * -------------------------------------------------------------------------- */Object.defineProperty(d1,"__esModule",{value:!0});d1.readDatabase=Dre;d1.readOneGame=Lre;const Cre=Fl,Nre=Td,jn=Lt,_re=Rd,aF=Bt,Er=As,WN=Oi,Ky=su,nw=f1;function sm(t){return t==="?"?void 0:t}function qN(t){if(/^\d+$/.test(t)){const e=Number(t);if(Number.isInteger(e))return e}}function Tre(t){if(/^(\?|\d+)(?:\.(\?|\d+)(?:\.(\?|\d+)(?:\.(?:\?|\d+))*)?)?$/.test(t)){const e=Number(RegExp.$1),n=RegExp.$2?Number(RegExp.$2):void 0,r=RegExp.$3?Number(RegExp.$3):void 0;return{round:Number.isInteger(e)?e:void 0,subRound:Number.isInteger(n)?n:void 0,subSubRound:Number.isInteger(r)?r:void 0}}return{round:void 0,subRound:void 0,subSubRound:void 0}}function Ire(t){return(0,aF.isValidECO)(t)?t:void 0}function kre(t){return t=t.toLowerCase(),t==="regular"||t==="standard"?"regular":t==="fischerandom"||/^chess[ -]?960$/.test(t)?"chess960":/^no[ -]king$/.test(t)?"no-king":/^white[ -]king[ -]only$/.test(t)?"white-king-only":/^black[ -]king[ -]only$/.test(t)?"black-king-only":/^anti[ -]?chess/.test(t)?"antichess":t==="horde"?"horde":void 0}function Rre(t,e,n,r,s,i,o){switch(s=s.trim(),r){case"White":e.playerName("w",sm(s));break;case"Black":e.playerName("b",sm(s));break;case"WhiteElo":e.playerElo("w",qN(s));break;case"BlackElo":e.playerElo("b",qN(s));break;case"WhiteTitle":e.playerTitle("w",s);break;case"BlackTitle":e.playerTitle("b",s);break;case"Event":e.event(sm(s));break;case"Round":{const{round:a,subRound:u,subSubRound:l}=Tre(s);e.round(a),e.subRound(u),e.subSubRound(l);break}case"Date":e.date(Nre.DateValue.fromPGNString(s));break;case"Site":e.site(sm(s));break;case"Annotator":e.annotator(s);break;case"ECO":e.eco(Ire(s));break;case"Opening":e.opening(s);break;case"Variation":e.openingVariation(s);break;case"SubVariation":e.openingSubVariation(s);break;case"Termination":e.termination(s);break;case"FEN":n.fen=s,n.fenTokenCharacterIndex=i,n.fenTokenLineIndex=o;break;case"Variant":if(n.variant=kre(s),n.variant===void 0)throw new jn.InvalidPGN(t.text(),i,o,Er.i18n.UNKNOWN_VARIANT,s);n.variantTokenCharacterIndex=i,n.variantTokenLineIndex=o;break}}function Ore(t,e,n){if(n.fen!==void 0)try{const r=n.variant===void 0?new Ky.Position:new Ky.Position(n.variant,"empty"),s=r.fen(n.fen);e.initialPosition(r,s.fullMoveNumber)}catch(r){throw r instanceof jn.InvalidFEN?new jn.InvalidPGN(t.text(),n.fenTokenCharacterIndex,n.fenTokenLineIndex,Er.i18n.INVALID_FEN_IN_PGN_TEXT,r.message):r}else if(n.variant!==void 0)if((0,aF.variantWithCanonicalStartPosition)(n.variant)){const r=new Ky.Position(n.variant,"start");e.initialPosition(r,1)}else throw new jn.InvalidPGN(t.text(),n.variantTokenCharacterIndex,n.variantTokenLineIndex,Er.i18n.VARIANT_WITHOUT_FEN,n.variant)}function uF(t){const e=new _re.Game;let n=!1,r=!1,s=null;const i=[],o={};for(;!n&&t.consumeToken();)switch(r=!0,t.isMoveTextSection()&&s===null&&(Ore(t,e,o),s=e.mainVariation()),t.token()){case 1:{if(s!==null)throw new jn.InvalidPGN(t.text(),t.tokenCharacterIndex(),t.tokenLineIndex(),Er.i18n.UNEXPECTED_PGN_HEADER);if(!t.consumeToken()||t.token()!==3)throw new jn.InvalidPGN(t.text(),t.tokenCharacterIndex(),t.tokenLineIndex(),Er.i18n.MISSING_PGN_HEADER_ID);const a=t.tokenValue();if(!t.consumeToken()||t.token()!==4)throw new jn.InvalidPGN(t.text(),t.tokenCharacterIndex(),t.tokenLineIndex(),Er.i18n.MISSING_PGN_HEADER_VALUE);const u=t.tokenValue(),l=t.tokenCharacterIndex(),c=t.tokenLineIndex();if(!t.consumeToken()||t.token()!==2)throw new jn.InvalidPGN(t.text(),t.tokenCharacterIndex(),t.tokenLineIndex(),Er.i18n.MISSING_END_OF_PGN_HEADER);Rre(t,e,o,a,u,l,c);break}case 5:break;case 6:try{s=s.play(t.tokenValue())}catch(a){throw a instanceof jn.InvalidNotation?new jn.InvalidPGN(t.text(),t.tokenCharacterIndex(),t.tokenLineIndex(),Er.i18n.INVALID_MOVE_IN_PGN_TEXT,a.notation,a.message):a}break;case 7:s.addNag(t.tokenValue());break;case 8:{const{comment:a,tags:u}=t.tokenValue();for(const[l,c]of u)s.tag(l,c);if(a!==void 0)if(s.comment()===void 0){const l=s instanceof WN.Variation?t.emptyLineAfterToken():t.emptyLineBeforeToken();s.comment(a,l)}else{const l=s.isLongComment();s.comment(s.comment()+" "+a,l)}break}case 9:if(s instanceof WN.Variation)throw new jn.InvalidPGN(t.text(),t.tokenCharacterIndex(),t.tokenLineIndex(),Er.i18n.UNEXPECTED_BEGIN_OF_VARIATION);i.push(s),s=s.addVariation(t.emptyLineBeforeToken());break;case 10:if(i.length===0)throw new jn.InvalidPGN(t.text(),t.tokenCharacterIndex(),t.tokenLineIndex(),Er.i18n.UNEXPECTED_END_OF_VARIATION);s=i.pop();break;case 11:n=!0,e.result(t.tokenValue());break;default:throw new jn.InvalidPGN(t.text(),t.tokenCharacterIndex(),t.tokenLineIndex(),Er.i18n.INVALID_PGN_TOKEN)}if(i.length!==0)throw new jn.InvalidPGN(t.text(),t.tokenCharacterIndex(),t.tokenLineIndex(),Er.i18n.UNEXPECTED_END_OF_GAME);return{game:e,atLeastOneTokenFound:r}}class Pre extends Cre.Database{constructor(e){for(super(),this._currentGameIndex=-1,this._text=e,this._gameLocations=[],this._stream=new nw.TokenStream(e);;){const n=this._stream.currentLocation();if(!this._stream.skipGame())break;this._gameLocations.push(n)}}doGameCount(){return this._gameLocations.length}doGame(e){if(e>=this._gameLocations.length)throw new jn.InvalidPGN(this._text,-1,-1,Er.i18n.INVALID_GAME_INDEX,e,this._gameLocations.length);this._currentGameIndex!==e&&(this._stream=new nw.TokenStream(this._text,this._gameLocations[e])),this._currentGameIndex=-1;const{game:n}=uF(this._stream);return this._currentGameIndex=e+1,n}}function Dre(t){return new Pre(t)}function Lre(t,e){const n=new nw.TokenStream(t);let r=0;for(;r!==e;){if(!n.skipGame())throw new jn.InvalidPGN(t,-1,-1,Er.i18n.INVALID_GAME_INDEX,e,r);++r}const{game:s,atLeastOneTokenFound:i}=uF(n);if(!i)throw new jn.InvalidPGN(t,-1,-1,Er.i18n.INVALID_GAME_INDEX,e,r);return s}var h1={};/*!
 * -------------------------------------------------------------------------- *
 *                                                                            *
 *    Kokopu - A JavaScript/TypeScript chess library.                         *
 *    <https://www.npmjs.com/package/kokopu>                                  *
 *    Copyright (C) 2018-2024  Yoann Le Montagner <yo35 -at- melix.net>       *
 *                                                                            *
 *    Kokopu is free software: you can redistribute it and/or                 *
 *    modify it under the terms of the GNU Lesser General Public License      *
 *    as published by the Free Software Foundation, either version 3 of       *
 *    the License, or (at your option) any later version.                     *
 *                                                                            *
 *    Kokopu is distributed in the hope that it will be useful,               *
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of          *
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the            *
 *    GNU Lesser General Public License for more details.                     *
 *                                                                            *
 *    You should have received a copy of the GNU Lesser General               *
 *    Public License along with this program. If not, see                     *
 *    <http://www.gnu.org/licenses/>.                                         *
 *                                                                            *
 * -------------------------------------------------------------------------- */Object.defineProperty(h1,"__esModule",{value:!0});h1.writeGame=fF;h1.writeGames=zre;const Fre=Bt,$re=Oi,GN=su,G0=bo;function lF(t){return t.replace(/([\\"])/g,"\\$1")}function HN(t){return t.replace(/([\\}])/g,"\\$1")}function im(t){return t!==void 0&&(t=(0,G0.trimAndCollapseSpaces)(t)),t?lF(t):"?"}function Bre(t){return t??"?"}function Mre(t){return t===void 0?"????.??.??":t.toPGNString()}function Vre(t){switch(t){case"regular":return;case"chess960":return"Fischerandom";case"antichess":return"Antichess";case"horde":return"Horde";default:return t}}function To(t,e){return e!==void 0&&(e=(0,G0.trimAndCollapseSpaces)(e)),e?`[${t} "${lF(e)}"]
`:""}function KN(t,e){return e===void 0?"":`[${t} "${e}"]
`}function cF(t,e,n,r){for(const u of t.nags())n("$"+u,!1,!1);let s=t.comment();s!==void 0&&(s=(0,G0.trimAndCollapseSpaces)(s));const i=t.tags(),o=new Map;let a=!1;for(const u of i){const l=(0,G0.trimAndCollapseSpaces)(t.tag(u).replace(/[[\]]/g,""));l&&(o.set(u,l),a=!0)}if(a||s){s&&t.isLongComment()&&t instanceof $re.Node&&r(),n("{",!1,!0);for(const u of i){const l=o.get(u);l&&n(`[%${u} ${HN(l)}]`,!0,!1)}if(s)for(const u of HN(s).split(" "))n(u,!1,!1);return n("}",!0,!1),s&&t.isLongComment()&&e&&r(),!0}else return!1}function Ure(t,e,n,r,s){t.moveColor()==="w"?r(t.fullMoveNumber()+".",!1,!1):e&&r(t.fullMoveNumber()+"...",!1,!1),r(t.notation(),!1,!1);const i=t.variations();let o=-1;for(let u=i.length-1;u>=0;--u)if(i[u].first()!==void 0){o=u;break}let a=cF(t,(n||t.next()!==void 0)&&o<0,r,s);for(let u=0;u<i.length;++u){const l=i[u];l.first()!==void 0&&(l.isLongVariation()&&s(),r("(",!1,!0),dF(l,!1,r,s),r(")",!0,!1),u===o&&l.isLongVariation()&&s(),a=!0)}return a}function dF(t,e,n,r){cF(t,!0,n,r);let s=t.first(),i=!0;for(;s!==void 0;)i=Ure(s,i,e,n,r),s=s.next()}function fF(t,e){let n="";n+=`[Event "${im(t.event())}"]
`,n+=`[Site "${im(t.site())}"]
`,n+=`[Date "${Mre(t.date())}"]
`,n+=`[Round "${Bre(t.fullRound())}"]
`,n+=`[White "${im(t.playerName("w"))}"]
`,n+=`[Black "${im(t.playerName("b"))}"]
`,n+=`[Result "${t.result()}"]
`;const r=t.variant(),s=t.initialPosition(),i=!(0,Fre.variantWithCanonicalStartPosition)(r)||!GN.Position.isEqual(s,new GN.Position(r))||t.initialFullMoveNumber()!==1;n+=To("Annotator",t.annotator()),n+=KN("BlackElo",t.playerElo("b")),n+=To("BlackTitle",t.playerTitle("b")),n+=To("ECO",t.eco()),i&&(n+=`[FEN "${s.fen({fullMoveNumber:t.initialFullMoveNumber(),regularFENIfPossible:!0})}"]
`),n+=To("Opening",t.opening()),e.withPlyCount&&(n+=`[PlyCount "${t.plyCount()}"]
`),i&&(n+=`[SetUp "1"]
`),n+=To("SubVariation",t.openingSubVariation()),n+=To("Termination",t.termination()),n+=To("Variant",Vre(r)),n+=To("Variation",t.openingVariation()),n+=KN("WhiteElo",t.playerElo("w")),n+=To("WhiteTitle",t.playerTitle("w")),n+=`
`;let o="",a=!1;function u(c,d,f){o.length===0?o=c:o.length+c.length+(a||d?0:1)<=80?o+=(a||d?"":" ")+c:(n+=o+`
`,o=c),a=f}function l(){n+=o+`
`,n+=`
`,o="",a=!1}return dF(t.mainVariation(),!0,u,l),u(t.result(),!1,!1),n+=o+`
`,n}function zre(t,e){return t.map(n=>fF(n,e)).join(`

`)}/*!
 * -------------------------------------------------------------------------- *
 *                                                                            *
 *    Kokopu - A JavaScript/TypeScript chess library.                         *
 *    <https://www.npmjs.com/package/kokopu>                                  *
 *    Copyright (C) 2018-2024  Yoann Le Montagner <yo35 -at- melix.net>       *
 *                                                                            *
 *    Kokopu is free software: you can redistribute it and/or                 *
 *    modify it under the terms of the GNU Lesser General Public License      *
 *    as published by the Free Software Foundation, either version 3 of       *
 *    the License, or (at your option) any later version.                     *
 *                                                                            *
 *    Kokopu is distributed in the hope that it will be useful,               *
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of          *
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the            *
 *    GNU Lesser General Public License for more details.                     *
 *                                                                            *
 *    You should have received a copy of the GNU Lesser General               *
 *    Public License along with this program. If not, see                     *
 *    <http://www.gnu.org/licenses/>.                                         *
 *                                                                            *
 * -------------------------------------------------------------------------- */Object.defineProperty(c1,"__esModule",{value:!0});c1.pgnRead=Wre;c1.pgnWrite=qre;const jre=Fl,rw=Lt,XN=Rd,YN=d1,QN=h1;function Wre(t,e){if(typeof t!="string")throw new rw.IllegalArgument("pgnRead()");if(arguments.length===1)return(0,YN.readDatabase)(t);if(!(0,jre.isValidGameIndex)(e))throw new rw.IllegalArgument("pgnRead()");return(0,YN.readOneGame)(t,e)}function qre(t,e){if(e==null&&(e={}),t instanceof XN.Game)return(0,QN.writeGame)(t,e);if(Array.isArray(t)&&t.every(n=>n instanceof XN.Game))return(0,QN.writeGames)(t,e);throw new rw.IllegalArgument("pgnWrite()")}(function(t){/*!
 * -------------------------------------------------------------------------- *
 *                                                                            *
 *    Kokopu - A JavaScript/TypeScript chess library.                         *
 *    <https://www.npmjs.com/package/kokopu>                                  *
 *    Copyright (C) 2018-2024  Yoann Le Montagner <yo35 -at- melix.net>       *
 *                                                                            *
 *    Kokopu is free software: you can redistribute it and/or                 *
 *    modify it under the terms of the GNU Lesser General Public License      *
 *    as published by the Free Software Foundation, either version 3 of       *
 *    the License, or (at your option) any later version.                     *
 *                                                                            *
 *    Kokopu is distributed in the hope that it will be useful,               *
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of          *
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the            *
 *    GNU Lesser General Public License for more details.                     *
 *                                                                            *
 *    You should have received a copy of the GNU Lesser General               *
 *    Public License along with this program. If not, see                     *
 *    <http://www.gnu.org/licenses/>.                                         *
 *                                                                            *
 * -------------------------------------------------------------------------- */Object.defineProperty(t,"__esModule",{value:!0}),t.pgnWrite=t.pgnRead=t.Database=t.Game=t.Variation=t.Node=t.AbstractNode=t.Position=t.isMoveDescriptor=t.MoveDescriptor=t.DateValue=t.isValidECO=t.nagSymbol=t.variantWithCanonicalStartPosition=t.oppositeColor=t.coordinatesToSquare=t.squareToCoordinates=t.squareColor=t.forEachSquare=t.isGameVariant=t.isGameResult=t.isCastle960=t.isCastle=t.isSquareCouple=t.isSquare=t.isRank=t.isFile=t.isColoredPiece=t.isPiece=t.isColor=t.exception=t.i18n=void 0;var e=As;Object.defineProperty(t,"i18n",{enumerable:!0,get:function(){return e.i18n}}),t.exception=Lt;var n=Bt;Object.defineProperty(t,"isColor",{enumerable:!0,get:function(){return n.isColor}}),Object.defineProperty(t,"isPiece",{enumerable:!0,get:function(){return n.isPiece}}),Object.defineProperty(t,"isColoredPiece",{enumerable:!0,get:function(){return n.isColoredPiece}}),Object.defineProperty(t,"isFile",{enumerable:!0,get:function(){return n.isFile}}),Object.defineProperty(t,"isRank",{enumerable:!0,get:function(){return n.isRank}}),Object.defineProperty(t,"isSquare",{enumerable:!0,get:function(){return n.isSquare}}),Object.defineProperty(t,"isSquareCouple",{enumerable:!0,get:function(){return n.isSquareCouple}}),Object.defineProperty(t,"isCastle",{enumerable:!0,get:function(){return n.isCastle}}),Object.defineProperty(t,"isCastle960",{enumerable:!0,get:function(){return n.isCastle960}}),Object.defineProperty(t,"isGameResult",{enumerable:!0,get:function(){return n.isGameResult}}),Object.defineProperty(t,"isGameVariant",{enumerable:!0,get:function(){return n.isGameVariant}}),Object.defineProperty(t,"forEachSquare",{enumerable:!0,get:function(){return n.forEachSquare}}),Object.defineProperty(t,"squareColor",{enumerable:!0,get:function(){return n.squareColor}}),Object.defineProperty(t,"squareToCoordinates",{enumerable:!0,get:function(){return n.squareToCoordinates}}),Object.defineProperty(t,"coordinatesToSquare",{enumerable:!0,get:function(){return n.coordinatesToSquare}}),Object.defineProperty(t,"oppositeColor",{enumerable:!0,get:function(){return n.oppositeColor}}),Object.defineProperty(t,"variantWithCanonicalStartPosition",{enumerable:!0,get:function(){return n.variantWithCanonicalStartPosition}}),Object.defineProperty(t,"nagSymbol",{enumerable:!0,get:function(){return n.nagSymbol}}),Object.defineProperty(t,"isValidECO",{enumerable:!0,get:function(){return n.isValidECO}});var r=Td;Object.defineProperty(t,"DateValue",{enumerable:!0,get:function(){return r.DateValue}});var s=Id;Object.defineProperty(t,"MoveDescriptor",{enumerable:!0,get:function(){return s.MoveDescriptor}}),Object.defineProperty(t,"isMoveDescriptor",{enumerable:!0,get:function(){return s.isMoveDescriptor}});var i=su;Object.defineProperty(t,"Position",{enumerable:!0,get:function(){return i.Position}});var o=Oi;Object.defineProperty(t,"AbstractNode",{enumerable:!0,get:function(){return o.AbstractNode}}),Object.defineProperty(t,"Node",{enumerable:!0,get:function(){return o.Node}}),Object.defineProperty(t,"Variation",{enumerable:!0,get:function(){return o.Variation}});var a=Rd;Object.defineProperty(t,"Game",{enumerable:!0,get:function(){return a.Game}});var u=Fl;Object.defineProperty(t,"Database",{enumerable:!0,get:function(){return u.Database}});var l=c1;Object.defineProperty(t,"pgnRead",{enumerable:!0,get:function(){return l.pgnRead}}),Object.defineProperty(t,"pgnWrite",{enumerable:!0,get:function(){return l.pgnWrite}})})(tt);/*!
 * -------------------------------------------------------------------------- *
 *                                                                            *
 *    Kokopu-React - A React-based library of chess-related components.       *
 *    <https://www.npmjs.com/package/kokopu-react>                            *
 *    Copyright (C) 2021-2024  Yoann Le Montagner <yo35 -at- melix.net>       *
 *                                                                            *
 *    Kokopu-React is free software: you can redistribute it and/or           *
 *    modify it under the terms of the GNU Lesser General Public License      *
 *    as published by the Free Software Foundation, either version 3 of       *
 *    the License, or (at your option) any later version.                     *
 *                                                                            *
 *    Kokopu-React is distributed in the hope that it will be useful,         *
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of          *
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the            *
 *    GNU Lesser General Public License for more details.                     *
 *                                                                            *
 *    You should have received a copy of the GNU Lesser General               *
 *    Public License along with this program. If not, see                     *
 *    <http://www.gnu.org/licenses/>.                                         *
 *                                                                            *
 * -------------------------------------------------------------------------- */const ba=12,Pc=96;function Gre(t){return typeof t!="object"||t===null?!1:typeof t.K=="string"&&typeof t.Q=="string"&&typeof t.R=="string"&&typeof t.B=="string"&&typeof t.N=="string"&&typeof t.P=="string"}function Hre(t){return typeof t=="string"&&/^(?:[A-Za-z0-9]|plus|times|dot|circle)$/.test(t)}function Lf(t){return t==="b"||t==="g"||t==="r"||t==="y"}function Kre(t){if(typeof t!="string")throw new pt("parseSquareMarkers()","markers");return tS(t,e=>/^([BGRY])([a-h][1-8])$/.test(e)?{key:RegExp.$2,value:RegExp.$1.toLowerCase()}:void 0)}function Xre(t){if(typeof t!="string")throw new pt("parseTextMarkers()","markers");return tS(t,e=>/^([BGRY])(?:([A-Za-z0-9])|\((plus|times|dot|circle)\))([a-h][1-8])$/.test(e)?{key:RegExp.$4,value:{symbol:RegExp.$2||RegExp.$3,color:RegExp.$1.toLowerCase()}}:void 0)}function Yre(t){if(typeof t!="string")throw new pt("parseArrowMarkers()","markers");return tS(t,e=>/^([BGRY])([a-h][1-8][a-h][1-8])$/.test(e)?{key:RegExp.$2,value:RegExp.$1.toLowerCase()}:void 0)}function tS(t,e){const n={};return t.split(",").map(r=>e(r.trim())).forEach(r=>{r&&(n[r.key]=r.value)}),n}/*!
 * -------------------------------------------------------------------------- *
 *                                                                            *
 *    Kokopu-React - A React-based library of chess-related components.       *
 *    <https://www.npmjs.com/package/kokopu-react>                            *
 *    Copyright (C) 2021-2024  Yoann Le Montagner <yo35 -at- melix.net>       *
 *                                                                            *
 *    Kokopu-React is free software: you can redistribute it and/or           *
 *    modify it under the terms of the GNU Lesser General Public License      *
 *    as published by the Free Software Foundation, either version 3 of       *
 *    the License, or (at your option) any later version.                     *
 *                                                                            *
 *    Kokopu-React is distributed in the hope that it will be useful,         *
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of          *
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the            *
 *    GNU Lesser General Public License for more details.                     *
 *                                                                            *
 *    You should have received a copy of the GNU Lesser General               *
 *    Public License along with this program. If not, see                     *
 *    <http://www.gnu.org/licenses/>.                                         *
 *                                                                            *
 * -------------------------------------------------------------------------- */function zo(t){return String(t)}function Xt(t){return!!t}function H0(t,e){if(t==null)return{};if(typeof t!="object")throw e();return t}function K0(t,e){if(typeof t!="number"||!Number.isFinite(t))throw e();return Math.round(t)}function X0(t,e,n,r){return Math.min(Math.max(K0(t,r),e),n)}function Vr(t,e){return t==null?void 0:e(t)}/*!
 * -------------------------------------------------------------------------- *
 *                                                                            *
 *    Kokopu-React - A React-based library of chess-related components.       *
 *    <https://www.npmjs.com/package/kokopu-react>                            *
 *    Copyright (C) 2021-2024  Yoann Le Montagner <yo35 -at- melix.net>       *
 *                                                                            *
 *    Kokopu-React is free software: you can redistribute it and/or           *
 *    modify it under the terms of the GNU Lesser General Public License      *
 *    as published by the Free Software Foundation, either version 3 of       *
 *    the License, or (at your option) any later version.                     *
 *                                                                            *
 *    Kokopu-React is distributed in the hope that it will be useful,         *
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of          *
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the            *
 *    GNU Lesser General Public License for more details.                     *
 *                                                                            *
 *    You should have received a copy of the GNU Lesser General               *
 *    Public License along with this program. If not, see                     *
 *    <http://www.gnu.org/licenses/>.                                         *
 *                                                                            *
 * -------------------------------------------------------------------------- */function hF(){const t=new Uint32Array(8);crypto.getRandomValues(t);let e="";for(let n=0;n<t.length;++n)e+=t[n].toString(16);return e}function pF(t,...e){return t.replace(/{(\d+)}/g,(n,r)=>{const s=Number(r);return s<e.length?String(e[s]):n})}/*!
 * -------------------------------------------------------------------------- *
 *                                                                            *
 *    Kokopu-React - A React-based library of chess-related components.       *
 *    <https://www.npmjs.com/package/kokopu-react>                            *
 *    Copyright (C) 2021-2024  Yoann Le Montagner <yo35 -at- melix.net>       *
 *                                                                            *
 *    Kokopu-React is free software: you can redistribute it and/or           *
 *    modify it under the terms of the GNU Lesser General Public License      *
 *    as published by the Free Software Foundation, either version 3 of       *
 *    the License, or (at your option) any later version.                     *
 *                                                                            *
 *    Kokopu-React is distributed in the hope that it will be useful,         *
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of          *
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the            *
 *    GNU Lesser General Public License for more details.                     *
 *                                                                            *
 *    You should have received a copy of the GNU Lesser General               *
 *    Public License along with this program. If not, see                     *
 *    <http://www.gnu.org/licenses/>.                                         *
 *                                                                            *
 * -------------------------------------------------------------------------- */const ZN=5,JN=36,Xy=4;function Y0({title:t,message:e,text:n,errorIndex:r,lineNumber:s}){t=zo(t),e=zo(e),n=Vr(n,zo),r=Number.isInteger(r)?r:void 0,s=Number.isInteger(s)?s:void 0;let i;return n&&r!==void 0&&r>=0&&r<n.length&&(i=P.createElement("div",{className:"kokopu-errorExcerpt"},Qre(n,r,s))),P.createElement("div",{className:"kokopu-errorBox"},P.createElement("div",{className:"kokopu-errorTitle"},t),P.createElement("div",{className:"kokopu-errorMessage"},e),i)}function Qre(t,e,n){let r=e-ZN,s=!0;for(let l=0;l<=ZN+Xy;++l){const c=e-l-1;if(c<0||t.charAt(c)===`
`||t.charAt(c)==="\r"){r=c+1,s=!1;break}}let i=e+JN,o=!0;for(let l=0;l<=JN+Xy;++l){const c=e+l+1;if(c>=t.length||t.charAt(c)===`
`||t.charAt(c)==="\r"){i=c-1,o=!1;break}}let a=(s?"... ":"")+t.substring(r,i+1)+(o?" ...":"");a=a.replace(/\s/g," ");let u=" ".repeat(e-r+(s?Xy:0))+"^";return n&&n>=1&&(u+=` (${pF(Cr.LINE,n)})`),a+`
`+u}/*!
 * -------------------------------------------------------------------------- *
 *                                                                            *
 *    Kokopu-React - A React-based library of chess-related components.       *
 *    <https://www.npmjs.com/package/kokopu-react>                            *
 *    Copyright (C) 2021-2024  Yoann Le Montagner <yo35 -at- melix.net>       *
 *                                                                            *
 *    Kokopu-React is free software: you can redistribute it and/or           *
 *    modify it under the terms of the GNU Lesser General Public License      *
 *    as published by the Free Software Foundation, either version 3 of       *
 *    the License, or (at your option) any later version.                     *
 *                                                                            *
 *    Kokopu-React is distributed in the hope that it will be useful,         *
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of          *
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the            *
 *    GNU Lesser General Public License for more details.                     *
 *                                                                            *
 *    You should have received a copy of the GNU Lesser General               *
 *    Public License along with this program. If not, see                     *
 *    <http://www.gnu.org/licenses/>.                                         *
 *                                                                            *
 * -------------------------------------------------------------------------- */const Zre=.1,Jre=.15,ese=.425;function tse({x:t,y:e,size:n,symbol:r,color:s}){if(r==="dot")return P.createElement("circle",{cx:t,cy:e,r:n*Jre,fill:s});if(r==="circle"){const i=n*Zre;return P.createElement("circle",{className:"kokopu-symbolCircle",cx:t,cy:e,r:n*ese,stroke:s,strokeWidth:i})}else{const i=r==="plus"?"+":r==="times"?"":r;return P.createElement("text",{className:"kokopu-symbolText",x:t,y:e,fill:s,fontSize:n},i)}}/*!
 * -------------------------------------------------------------------------- *
 *                                                                            *
 *    Kokopu-React - A React-based library of chess-related components.       *
 *    <https://www.npmjs.com/package/kokopu-react>                            *
 *    Copyright (C) 2021-2024  Yoann Le Montagner <yo35 -at- melix.net>       *
 *                                                                            *
 *    Kokopu-React is free software: you can redistribute it and/or           *
 *    modify it under the terms of the GNU Lesser General Public License      *
 *    as published by the Free Software Foundation, either version 3 of       *
 *    the License, or (at your option) any later version.                     *
 *                                                                            *
 *    Kokopu-React is distributed in the hope that it will be useful,         *
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of          *
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the            *
 *    GNU Lesser General Public License for more details.                     *
 *                                                                            *
 *    You should have received a copy of the GNU Lesser General               *
 *    Public License along with this program. If not, see                     *
 *    <http://www.gnu.org/licenses/>.                                         *
 *                                                                            *
 * -------------------------------------------------------------------------- */function mF({id:t,color:e}){return P.createElement("marker",{id:t,markerWidth:4,markerHeight:4,refX:2.5,refY:2,orient:"auto"},P.createElement("path",{fill:e,d:"M 4,2 L 0,4 L 1,2 L 0,0 Z"}))}/*!
 * -------------------------------------------------------------------------- *
 *                                                                            *
 *    Kokopu-React - A React-based library of chess-related components.       *
 *    <https://www.npmjs.com/package/kokopu-react>                            *
 *    Copyright (C) 2021-2024  Yoann Le Montagner <yo35 -at- melix.net>       *
 *                                                                            *
 *    Kokopu-React is free software: you can redistribute it and/or           *
 *    modify it under the terms of the GNU Lesser General Public License      *
 *    as published by the Free Software Foundation, either version 3 of       *
 *    the License, or (at your option) any later version.                     *
 *                                                                            *
 *    Kokopu-React is distributed in the hope that it will be useful,         *
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of          *
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the            *
 *    GNU Lesser General Public License for more details.                     *
 *                                                                            *
 *    You should have received a copy of the GNU Lesser General               *
 *    Public License along with this program. If not, see                     *
 *    <http://www.gnu.org/licenses/>.                                         *
 *                                                                            *
 * -------------------------------------------------------------------------- */const nse=.2;class rse extends P.Component{constructor(){super(...arguments),this.arrowTipId=hF()}render(){const e=X0(this.props.size,ba,Pc,()=>new pt("ArrowMarkerIcon","size")),n=zo(this.props.color),r=e*nse/2,s=`0 0 ${e} ${e}`;return P.createElement("svg",{className:"kokopu-arrowMarkerIcon",viewBox:s,width:e,height:e},P.createElement("defs",null,P.createElement(mF,{id:this.arrowTipId,color:this.props.color})),P.createElement("line",{className:"kokopu-arrow",x1:r,y1:e/2,x2:e-r*3,y2:e/2,stroke:n,strokeWidth:r*2,markerEnd:`url(#${this.arrowTipId})`}))}}rse.defaultProps={color:"currentcolor"};const sse="data:image/png;base64,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",ise="data:image/png;base64,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",ose="data:image/png;base64,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",ase="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAffwAAH38BPlrE4wAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAOGSURBVHic7Z07axRRGIaf3aBBRfFC1JhENGgTES8YUTGiVoIIBiUoYmOhiAr5C/ba6B+wimChYGehhYKgIgiCicTClYAXiFpE10tiLIaBkGySvZzvfGfOfA+87Xd7Z2fOnJ3ZBcMwDMMwDMMwDMMwDMMwDMMwDMOImYJ2ATXSDfQCO4E2YAIYAZ4C94BBvdLiZgfwCJicQ/+AO8BGpRqj5QxQZu7hT9UocFil0gg5SXJkVzv8VGVgt0K9UdEJjFH78FONAEu9Vx0RA9Q//FRXvVcdCauBcRo34AvQ5Ln2mihqFzALR3EzuBZgr4M4YoRqQJfDWFscxnJOqAasdRir1WEs54RqQDnQWM4J1YCSw1jvHcbKDT00vgJKtyfWea49CorAMI0b8MB34bUS6ikI4EUgMXLHYpKtZRenoEngJoHfjIXEIuAJ7oaf6jZhf9qDoIDbI3+6rvlrJZtcQm746YroiLduMkYrjW09V6sS0Oypp0xxA/nhp7riqafMsAQ/R3+qt37ayg6n8Tf8VN1eOquCEJZmh3KSsyIhGLArJzkrEoIBbQo52xVyViQEA5Yr5FyhkLMiIRgwoZDzj0LOioRgwKhCzq8KOSsSggFDOclZkRAMeK6Q85lCzmDZh9+bsHFgjZfOMkIBeIM/A+77aStbnMOfAQc89ZQpmoBXyA//rq+Gssg24Bdyw/+M2yfuouQs9b2QMZ/KBHrqCWEZmlIkuSB/E4j9EVgmEDca2oGHyF8DBtDZewqaEyRbA75WQSVgv5fOMsB5ks04X8NP9Rs47qG/oOlH5oJbiwm94l0GSj96g5+qv+Twk3AMndPObBojuQfJBRuA7+gPfbrekYN3iovAY/SHPZtuiXUeCBfRH/J8ivbZ0Rb8rvXr1SCwUGgGqlxHf7jV6oLQDNRoBX6iP9hq9QGPT1D72Iy7TPLmS1boAE5pF+GKZuAT+kd1rXopMQwN+tAfZr3aLjCPGUifgvqE40uS5dqB5HXTH+gfyfVq2P1IZiL5CeghMSGrbCL52TRRJA2I4ZcLD0onkDQghm+deqQTSBlQALYKxfaJ+Da1lAGdxLG92wUskEwgZcBmobi+aQbWSyaQMqBDKK4Gou+TSRmg8eKdFKK9SBmwUiiuBqskg0sZENMPYoj2ImVATN8qmQHKiBog9Rcme4hnJTQEvNYuwjAMwzAMwzAMwzDi4D/jOTUZCN0IJAAAAABJRU5ErkJggg==",use="data:image/png;base64,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",lse="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAffwAAH38BPlrE4wAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAOGSURBVHic7d2/axNhHMfxd1oN2hYrtBCpKVIdunSoCCr5AyoOVrI4BxfBRdyy6uaiOLg7uDkUOigWBeliCg4dutwUJFIo9CwHbSVN4zk0BbGtl7vec19TPi94hnLX59enz5Pc5UdBREREREREREREREREnMo5rHsMuA30R5z3DfgQcc4QUAbOdtn2T2AO2Iw47xZwKeKcNvAeWO2y7f9CHvgOhF2W+xH1vYtR1355F1Hn/Rh1fe+MKXV9LioFisDFGOdfjzh+I0Efon4nqs0/XWRvTKlzFUDcrS3q/CRbZdp1OtmuT7moNIFzwOV/HE/yh9IXUee5BHX2jCvE37P/93Il1RnqcLUFSZcUgDEFYEwBGFMAxpw9Dc3lckxNTZHPO7mAzMzOzg4rKyuEYWjdlViuVqvV8KSoVqshcNXFRLlaAXXP88K1tbXcSVgBnueFQN26L3HdATawv4A6btnojKUnjQKL2E9i0vIFuJD6rGTsDPAG+8mMW950+u6Uyxdk/vYIeD4wMNA3Pz/PxMREhk1Hq9frzM7Osr29HQJPgSfsBXGilIvF4m6r1bJ+YnNAq9UKi8XiLnuvvGUmyxWwb2lycvL6+Pi4QdNHazQaeJ63BNy07otrH7Hf348qHx2O+1C6FWFMARhTAMYUgDEFYEwBGFMAxhSAMQVgTAEYUwDGFIAxBWBMARhTAMYUgDEFYEwBGFMAxhSAMQVgTAEYUwDGLD4nfHp4eJiRkRGDpo/m+z5BEJy27odzhUJhIwgC63ciHhAEQVgoFDayno+st6B7zWbzvO/7GTcbzfd9ms3meeCedV9cGQIa2L/9MKo0On09cZ5hP7ndlmeO5uCALN4dPQBUxsbGXs7NzZ0aHR3NoMnk1tfXKZfLu6urq4+A18C2cZeO7RMQlkol68fZrpVKpf2V8Mn15GSxAtp0Huynp6fphRWwvLy8/+Mvor9y7ViyCKDXP+bjdI50JWxMARhTAMYUgDHnN+P6+/uZmZlhaKi3Li43NzdZWFig3W5bd6UreeAV8PXvUqlUrJ/WJ1apVMLDxtQZayrfQpLWCrgLPDzsQK1WY3FxkcHBwZSaysbW1ha1Wg3g2iGHrwGfgbdZ9ulfHmB//ybr8iCNidODsDEFYEwBGFMAxhSAsbQC+JFSPb0klTGndas1D7wg2T9a6EVLwGNgx7ojIiIiIiIiIiIx/AaF7IxaEEuv8gAAAABJRU5ErkJggg==",cse="data:image/png;base64,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",dse="data:image/png;base64,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",fse="data:image/png;base64,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",hse="data:image/png;base64,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",pse="/assets/cburnett-wq-BOZYs3_w.png",mse="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAffwAAH38BPlrE4wAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAATCSURBVHic7ZxNSCNnGMd/+TC2KlZtoNAtClVPUvyItCkeiqe23nrYpScpe3DP3aseV8KeehUv9iJ7szfbCov01LqJoAdB0EJjl0LRjjaoDdE4PeSjY4xOojPzTOzzgxecyeMzz/v+533eD2YGFEVRFEVRFEVRFEVRFEVRFEVRFFcJuOj7XeBzIGRjlwZ+tLFpA74A3qzx2v8A3wHHNnafAj02Nnnge+CPGq/tCyLAa8CssTy28bdch69SWbbx+bgOX6+LdXKcoBtOgfeAB3XYf2jz+0e3iMHuf+yuaeUBhTo5TtgNp1SktqGhIUKhy5konU5zcHBQ1f4mf/39/bS3t1c1ymQy7Ozs1O0zGo3S03M5E+XzeTY2NqraNwK9WLqwYRhmJVNTU9Yu/gJ4/4ZyVLJdWVm54qvEysqK1eeRjc8XJdupqakrvgzDqExDvW40lFs9oF6+LBYneQv41WGfjuPWGGBLJHK7Ma25uflWv7kRi5+xTUHJZNKMRqN1zWzGxsbMbDZ7bQrKZrPm2NhYXT6j0aiZTCbFUpBbA0svsFs6MAyDzs7OK0ZnZ2ccH9tN1QsEAgE6Ojpqsj06OsI0zZps29raaGpqunL+8PCQrq4u66k+XEhpomNAU1NTVWHuSq1C+QGxMUAp4EkP2NjYuHbu7lcymYx0CHfiA+CC+rcP/FouinVyHLcG4TeAP4Hybd/a2tow071cLsfJyYn1VAZ4B8jKRHQ7YoBB8S4KBALm3NzctVNIv7CwsGAGg0Hr3f83EBdsxzvRUCLct8Yv0RAiSDW+Vzt8HwM/UBwTgsEgz549o6+vz6PL38zu7i4zMzNcXFyUTmWAz4Cf5aJynjiFu0p6RmNXPE07Xu9xx4GfIpFIZGBggImJCcbHxz0O4TKrq6ssLy+ztbVFLpfLAZ8Av4gG5TKvKN5tiURCOvWbiUTCeve/8roxJLYi/LzE9Dw23QsSRgUQRgUQRgUQRgUQRgUQRgUQRgUQRgUQRgUQRgUQRgUQRgUQRgUQRgUQRgUQRgUQRgUQRgUQRgUQRgUQRgUQRuIVpfIz6ouLi6yvrwuE8B/b29vWQ8+fn5d4+/svoAv88c5AxbsABvC2YDiu8wjLc5hLS0vSD8aZS0tLlc+GPhJsH1dpAX6jWNHR0VEzn89Lt7+Zz+fNeDxuFeB3Cp/HuXc8p1jJYDBorq2tSbd9mVQqZYZCIasIz71qFC8G4RbgK+Bp6cTIyAjpdJp0Ou3B5WtjeHiYVCpVOnxK4UNS3wKnUjE5xUvkn/m/bXnpQntcwotZUJ7GXW9cYP/JtTvhhQBm6Y9wOEwg4O/vHpmmyfn5ufWUvwOugXKXrvZVEr+RTCYr05CrNGpquDeoAMKoAMKoAMI4tRCLAN9g863OyclJWlpaHLqkO5yeXll3paqYrQFfAznXA6qRh8gvmrwuD51oOKdSUJe9yb3DkTo7vhfU3d3N9PR0+fj09JTNzc3KxY3vCYfDDA4OXkqZs7Oz7O3tCUZ1PU8ods1YLCa9lnKNWCxmTUFPnGg4nQUJ43gK2t/fZ35+3mm3vmB/f186hGspp6D/UfFVCjIc8tNIOFJnp7Zaa1qI3SN8txBTFEVRFEVRFEVRFEWpgX8BnjZU4/kAAugAAAAASUVORK5CYII=",gse="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAffwAAH38BPlrE4wAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAN4SURBVHic7ZxNS5RRGIavGm1cWLQoKyhlMLQ2UeofaBMktak/EUgf+wrqB0QU0ReVRLgxbNO6Fm2ztZOQWRFpm4RSZ0KoxRkhpMmZ8T7vOe/pueDe3pxzP+f9Oh8vGIZhGIZhGIZhGIZhGIZhGIZhGEbKbArdgAbpBYaAfuAA0AVsBzqBX8Ai8A34CpSBt8Ab4F2IxqZAO3ASGAU+4EJuRbPAI+AE0JZlB/JKD3AdN5JbDb2e5oFrQHdmvckRvbjR/hN98GtVBR4CpUx6FjkdwBVgGf/Br9UScBko+u5krAwC02Qf/FqVgSOe+xod54AK4cNfVQUY8drjSCgA9wgfeD3drrUxSYrABOFDXk9PSfC5UCAf4f9ZhKSuhJuED7VZ3fWSRADOEj7MVpX7B/Mgcb3tNKsKMCBPJSM6iOM9f6Mq4/Gh7PNBcwk45dE/K3bgpkhehW5IM/QSZnrBl5bI2dzRKOFDU+uBNCGP9JDNrGbWquJhKnuz2hC4gFtQSY0twHm1qXpJsh34DOwU+8bCPLAXWFEZqq+A46QbPsAu4JjSUF2AFF471+N06Ab8i40soOdF72VpidlP+HCykuybQHkLGhR6xc6QykhZgANCr9jpVxkpC9An9IqdKAuwW+gVO3tURsoCbBN6xc5WlZGyAJ1Cr9iJsgBGCygL8EPoFTvfVUbKAsgalQOiLMAXoVfsyPqqLMC00Ct2yiojZQFkjcoBssGmLMCk0Ct2XoduQD1mCT9T6VszqrBA/x3wUuwXIy+UZuoCPBP7xciE0ky9KN+GW5TvEvvGQvSL8ivAmNgzJsYQhu+LbtLdmLVPmBPgZzLuI/DEg29oHgOfQjeiUUq4Da2hR61Ki7gtl3J8bU9fqHkf9eSfNVeB56Eb0SwduL+WhB69G9UUOT41eYh834oqJHCKfoTwQbaqMx7yCMINwofZrO54SSIQBdzh59ChNqpxElwvL5KPIoyT44fuehRwl3bokOvpFgmO/L8xQlwHuJdJ6IHbKAPE8Z0wBRz23NdoKeJ+GxbiW2ERuEjC9/tmKOHO4VbxH3wVuI+nuZ280437teQc+uDnat7yKeUUaQOGcVfFDK2HPlPzGCbSH7fm5dfFJdyxoD7gIO646Oqvi8HtS13AjfIybt/OJBEfqDMMwzAMwzAMwzAMwzAMwzAMwzCM/4PfntmsabVQe94AAAAASUVORK5CYII=",yse="data:image/png;base64,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",bse="/assets/celtic-bb-BNuWCExM.png",vse="/assets/celtic-bk-DzOiCqm4.png",wse="/assets/celtic-bn-B0pkp6ee.png",xse="/assets/celtic-bp-DnVFTGGa.png",Sse="/assets/celtic-bq-bYDhVnAn.png",Ase="/assets/celtic-br-maGpI-mF.png",Ese="/assets/celtic-wb-CTTF5Kh0.png",Cse="/assets/celtic-wk-DAXL8Qbm.png",Nse="/assets/celtic-wn-CD5lFyOW.png",_se="/assets/celtic-wp-DuDco3p6.png",Tse="/assets/celtic-wq-CpWmX6Kj.png",Ise="/assets/celtic-wr-B1kWKByO.png",kse="/assets/eyes-bb-BO9ue2xq.png",Rse="/assets/eyes-bk-ER7WYIf6.png",Ose="/assets/eyes-bn-B6O4hcom.png",Pse="/assets/eyes-bp-rBv7A9K1.png",Dse="/assets/eyes-bq-Dwa62kgf.png",Lse="/assets/eyes-br-DG_EgEXC.png",Fse="/assets/eyes-wb-Bh4VOqb0.png",$se="/assets/eyes-wk-B4Jaecrm.png",Bse="/assets/eyes-wn-Ct2FNrdk.png",Mse="/assets/eyes-wp-Bop0WEEb.png",Vse="/assets/eyes-wq-IJbNxRSP.png",Use="/assets/eyes-wr-BzvE_8j_.png",zse="/assets/fantasy-bb-CzulAa2x.png",jse="/assets/fantasy-bk-vJNH5mBr.png",Wse="/assets/fantasy-bn-BJIqqBoD.png",qse="data:image/png;base64,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",Gse="/assets/fantasy-bq-R2Cyi1oU.png",Hse="/assets/fantasy-br-D4FHN6Yq.png",Kse="/assets/fantasy-wb-B-ryC1HY.png",Xse="/assets/fantasy-wk-D0f-Nlcm.png",Yse="/assets/fantasy-wn-BtyWgNKa.png",Qse="data:image/png;base64,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",Zse="/assets/fantasy-wq-gFVhZNxo.png",Jse="/assets/fantasy-wr-wAbnUmva.png",eie="/assets/skulls-bb-BCqwDo2I.png",tie="/assets/skulls-bk-BZnnjK9o.png",nie="/assets/skulls-bn-BASMjBs9.png",rie="data:image/png;base64,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",sie="/assets/skulls-bq-Zm5G8a0d.png",iie="/assets/skulls-br-CryCKCT3.png",oie="/assets/skulls-wb-DF3bXQA6.png",aie="/assets/skulls-wk-BBSgJneI.png",uie="/assets/skulls-wn-Bq3Eo93h.png",lie="data:image/png;base64,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",cie="/assets/skulls-wq-BGd-GTWF.png",die="/assets/skulls-wr-BnYBfSp7.png",fie="/assets/spatial-bb-Ch2H-WGw.png",hie="/assets/spatial-bk-BHKdheab.png",pie="/assets/spatial-bn-O3ijmuF_.png",mie="data:image/png;base64,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",gie="/assets/spatial-bq-C-vFxqI2.png",yie="data:image/png;base64,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",bie="/assets/spatial-wb-i3zfExl6.png",vie="/assets/spatial-wk-Bc5iu__l.png",wie="/assets/spatial-wn-D5IsQjKG.png",xie="data:image/png;base64,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",Sie="/assets/spatial-wq-DqjKl4f7.png",Aie="data:image/png;base64,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",Eie="data:image/png;base64,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",Cie="data:image/png;base64,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",gF="data:image/png;base64,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",yF="data:image/png;base64,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",Nie="data:image/png;base64,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",_ie="data:image/png;base64,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",Tie="data:image/png;base64,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",Iie="data:image/png;base64,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";/*!
 * -------------------------------------------------------------------------- *
 *                                                                            *
 *    Kokopu-React - A React-based library of chess-related components.       *
 *    <https://www.npmjs.com/package/kokopu-react>                            *
 *    Copyright (C) 2021-2024  Yoann Le Montagner <yo35 -at- melix.net>       *
 *                                                                            *
 *    Kokopu-React is free software: you can redistribute it and/or           *
 *    modify it under the terms of the GNU Lesser General Public License      *
 *    as published by the Free Software Foundation, either version 3 of       *
 *    the License, or (at your option) any later version.                     *
 *                                                                            *
 *    Kokopu-React is distributed in the hope that it will be useful,         *
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of          *
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the            *
 *    GNU Lesser General Public License for more details.                     *
 *                                                                            *
 *    You should have received a copy of the GNU Lesser General               *
 *    Public License along with this program. If not, see                     *
 *    <http://www.gnu.org/licenses/>.                                         *
 *                                                                            *
 * -------------------------------------------------------------------------- */const kie="cburnett",Ya={};Ya.cburnett={bb:sse,bk:ise,bn:ose,bp:ase,bq:use,br:lse,bx:gse,wb:cse,wk:dse,wn:fse,wp:hse,wq:pse,wr:mse,wx:yse};Ya.celtic={bb:bse,bk:vse,bn:wse,bp:xse,bq:Sse,br:Ase,bx:Eie,wb:Ese,wk:Cse,wn:Nse,wp:_se,wq:Tse,wr:Ise,wx:Cie};Ya.eyes={bb:kse,bk:Rse,bn:Ose,bp:Pse,bq:Dse,br:Lse,bx:gF,wb:Fse,wk:$se,wn:Bse,wp:Mse,wq:Vse,wr:Use,wx:yF};Ya.fantasy={bb:zse,bk:jse,bn:Wse,bp:qse,bq:Gse,br:Hse,bx:Nie,wb:Kse,wk:Xse,wn:Yse,wp:Qse,wq:Zse,wr:Jse,wx:_ie};Ya.skulls={bb:eie,bk:tie,bn:nie,bp:rie,bq:sie,br:iie,bx:Tie,wb:oie,wk:aie,wn:uie,wp:lie,wq:cie,wr:die,wx:Iie};Ya.spatial={bb:fie,bk:hie,bn:pie,bp:mie,bq:gie,br:yie,bx:gF,wb:bie,wk:vie,wn:wie,wp:xie,wq:Sie,wr:Aie,wx:yF};/*!
 * -------------------------------------------------------------------------- *
 *                                                                            *
 *    Kokopu-React - A React-based library of chess-related components.       *
 *    <https://www.npmjs.com/package/kokopu-react>                            *
 *    Copyright (C) 2021-2024  Yoann Le Montagner <yo35 -at- melix.net>       *
 *                                                                            *
 *    Kokopu-React is free software: you can redistribute it and/or           *
 *    modify it under the terms of the GNU Lesser General Public License      *
 *    as published by the Free Software Foundation, either version 3 of       *
 *    the License, or (at your option) any later version.                     *
 *                                                                            *
 *    Kokopu-React is distributed in the hope that it will be useful,         *
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of          *
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the            *
 *    GNU Lesser General Public License for more details.                     *
 *                                                                            *
 *    You should have received a copy of the GNU Lesser General               *
 *    Public License along with this program. If not, see                     *
 *    <http://www.gnu.org/licenses/>.                                         *
 *                                                                            *
 * -------------------------------------------------------------------------- */const Rie="original",gs={};gs.original={b:"#b5876b",w:"#f0dec7",cb:"#04f",cg:"#0e0",cr:"#d00",cy:"#db0"};gs.gray={b:"#bbbbbb",w:"#f8f8f8",cb:"#04f",cg:"#0a0",cr:"#d00",cy:"#a90"};gs.scid={b:"#7389b6",w:"#f3f3f3",cb:"#04f",cg:"#0e0",cr:"#d00",cy:"#db0"};gs.wikipedia={b:"#d18b47",w:"#ffce9e",cb:"#04f",cg:"#0e0",cr:"#d00",cy:"#db0"};gs.xboard={b:"#77a26d",w:"#c8c365",cb:"#04f",cg:"#0f0",cr:"#d00",cy:"#ff0"};gs.coral={b:"rgb(112,162,163)",w:"rgb(177,228,185)",cb:"#04f",cg:"#080",cr:"#d00",cy:"#ff0"};gs.dusk={b:"rgb(112,102,119)",w:"rgb(204,183,174)",cb:"#04f",cg:"#3f3",cr:"#f20",cy:"#ff0"};gs.emerald={b:"rgb(111,143,114)",w:"rgb(173,189,143)",cb:"#04f",cg:"#6f6",cr:"#d00",cy:"#ff0"};gs.marine={b:"rgb(111,115,210)",w:"rgb(157,172,255)",cb:"#04f",cg:"#6f6",cr:"#f50",cy:"#ff0"};gs.sandcastle={b:"rgb(184,139,74)",w:"rgb(227,193,111)",cb:"#04f",cg:"#0c3",cr:"#d02",cy:"#ff0"};gs.wheat={b:"rgb(187,190,100)",w:"rgb(234,240,206)",cb:"#04f",cg:"#0c3",cr:"#d00",cy:"#ff3"};/*!
 * -------------------------------------------------------------------------- *
 *                                                                            *
 *    Kokopu-React - A React-based library of chess-related components.       *
 *    <https://www.npmjs.com/package/kokopu-react>                            *
 *    Copyright (C) 2021-2024  Yoann Le Montagner <yo35 -at- melix.net>       *
 *                                                                            *
 *    Kokopu-React is free software: you can redistribute it and/or           *
 *    modify it under the terms of the GNU Lesser General Public License      *
 *    as published by the Free Software Foundation, either version 3 of       *
 *    the License, or (at your option) any later version.                     *
 *                                                                            *
 *    Kokopu-React is distributed in the hope that it will be useful,         *
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of          *
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the            *
 *    GNU Lesser General Public License for more details.                     *
 *                                                                            *
 *    You should have received a copy of the GNU Lesser General               *
 *    Public License along with this program. If not, see                     *
 *    <http://www.gnu.org/licenses/>.                                         *
 *                                                                            *
 * -------------------------------------------------------------------------- */const bF=40;function Oie(){return{squareSize:bF,coordinateVisible:!0,turnVisible:!0,colorset:Rie,pieceset:kie}}function vF(){return{...Oie(),moveArrowVisible:!0,moveArrowColor:"b",animated:!1}}/*!
 * -------------------------------------------------------------------------- *
 *                                                                            *
 *    Kokopu-React - A React-based library of chess-related components.       *
 *    <https://www.npmjs.com/package/kokopu-react>                            *
 *    Copyright (C) 2021-2024  Yoann Le Montagner <yo35 -at- melix.net>       *
 *                                                                            *
 *    Kokopu-React is free software: you can redistribute it and/or           *
 *    modify it under the terms of the GNU Lesser General Public License      *
 *    as published by the Free Software Foundation, either version 3 of       *
 *    the License, or (at your option) any later version.                     *
 *                                                                            *
 *    Kokopu-React is distributed in the hope that it will be useful,         *
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of          *
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the            *
 *    GNU Lesser General Public License for more details.                     *
 *                                                                            *
 *    You should have received a copy of the GNU Lesser General               *
 *    Public License along with this program. If not, see                     *
 *    <http://www.gnu.org/licenses/>.                                         *
 *                                                                            *
 * -------------------------------------------------------------------------- */class Pie extends P.Component{constructor(){super(...arguments),this.innerRef=P.createRef(),this.mouseDownListener=e=>this.handleMouseDown(e),this.mouseMoveListener=e=>this.handleMouseMove(e),this.mouseUpListener=e=>this.handleMouseUp(e),this.touchStartListener=e=>this.handleTouchStart(e),this.touchMoveListener=e=>this.handleTouchMove(e),this.touchEndListener=e=>this.handleTouchEnd(e),this.touchCancelListener=e=>this.handleTouchCancel(e)}componentDidMount(){this.innerRef.current.addEventListener("mousedown",this.mouseDownListener),window.addEventListener("mousemove",this.mouseMoveListener),window.addEventListener("mouseup",this.mouseUpListener),this.innerRef.current.addEventListener("touchstart",this.touchStartListener,{passive:!1}),window.addEventListener("touchmove",this.touchMoveListener,{passive:!1}),window.addEventListener("touchend",this.touchEndListener),window.addEventListener("touchcancel",this.touchCancelListener)}componentWillUnmount(){this.innerRef.current.removeEventListener("mousedown",this.mouseDownListener),window.removeEventListener("mousemove",this.mouseMoveListener),window.removeEventListener("mouseup",this.mouseUpListener),this.innerRef.current.removeEventListener("touchstart",this.touchStartListener),window.removeEventListener("touchmove",this.touchMoveListener),window.removeEventListener("touchend",this.touchEndListener),window.removeEventListener("touchcancel",this.touchCancelListener)}render(){const e=["kokopu-handle",this.props.isArrowHandle?"kokopu-arrowDraggable":"kokopu-pieceDraggable"];return P.createElement("rect",{ref:this.innerRef,className:e.join(" "),x:this.props.x,y:this.props.y,width:this.props.width,height:this.props.height})}handleTouchStart(e){this.dragData||e.touches.length!==1||(e.preventDefault(),this.doInitDrag(e.target,e.touches[0]))}handleTouchMove(e){this.dragData&&(e.preventDefault(),e.touches.length===1?this.doUpdateDrag(e.touches[0]):this.doCancelDrag())}handleTouchEnd(e){this.dragData&&(e.preventDefault(),e.touches.length===0&&e.changedTouches.length===1?this.doEndDrag(e.changedTouches[0]):this.doCancelDrag())}handleTouchCancel(e){this.dragData&&(e.preventDefault(),this.doCancelDrag())}handleMouseDown(e){this.dragData||e.button!==0||(e.preventDefault(),this.doInitDrag(e.target,e))}handleMouseMove(e){this.dragData&&(e.preventDefault(),this.doUpdateDrag(e))}handleMouseUp(e){this.dragData&&(e.preventDefault(),this.doEndDrag(e))}doInitDrag(e,{pageX:n,pageY:r,clientX:s,clientY:i}){this.dragData={originX:n,originY:r};const o=e.getBoundingClientRect(),a=s-o.left,u=i-o.top;this.props.onDragStart&&this.props.onDragStart(a,u)}doUpdateDrag({pageX:e,pageY:n}){const{originX:r,originY:s}=this.dragData;this.props.onDrag&&this.props.onDrag(e-r,n-s)}doEndDrag({pageX:e,pageY:n}){const{originX:r,originY:s}=this.dragData;this.dragData=void 0,this.props.onDragStop&&this.props.onDragStop(e-r,n-s)}doCancelDrag(){this.props.onDragCanceled&&this.props.onDragCanceled()}}/*!
 * -------------------------------------------------------------------------- *
 *                                                                            *
 *    Kokopu-React - A React-based library of chess-related components.       *
 *    <https://www.npmjs.com/package/kokopu-react>                            *
 *    Copyright (C) 2021-2024  Yoann Le Montagner <yo35 -at- melix.net>       *
 *                                                                            *
 *    Kokopu-React is free software: you can redistribute it and/or           *
 *    modify it under the terms of the GNU Lesser General Public License      *
 *    as published by the Free Software Foundation, either version 3 of       *
 *    the License, or (at your option) any later version.                     *
 *                                                                            *
 *    Kokopu-React is distributed in the hope that it will be useful,         *
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of          *
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the            *
 *    GNU Lesser General Public License for more details.                     *
 *                                                                            *
 *    You should have received a copy of the GNU Lesser General               *
 *    Public License along with this program. If not, see                     *
 *    <http://www.gnu.org/licenses/>.                                         *
 *                                                                            *
 * -------------------------------------------------------------------------- */const Die="__kokopu_debug_freeze_motion";class Lie extends P.Component{constructor(e){super(e),this.state={cursor:0},this.cursorStop=1;const n=window[Die];typeof n=="number"&&n>=0&&n<=1&&(this.cursorStop=n)}componentDidMount(){this.animationFrameId=window.requestAnimationFrame(e=>this.handleAnimationStep(e))}componentWillUnmount(){this.animationFrameId!==void 0&&(window.cancelAnimationFrame(this.animationFrameId),this.animationFrameId=void 0)}handleAnimationStep(e){this.initialTimestamp===void 0&&(this.initialTimestamp=e);let n=(e-this.initialTimestamp)/this.props.duration;n<0?n=0:n>this.cursorStop&&(n=this.cursorStop),this.setState({cursor:n}),n===this.cursorStop?this.animationFrameId=void 0:this.animationFrameId=window.requestAnimationFrame(r=>this.handleAnimationStep(r))}render(){return this.props.children(this.state.cursor)}}/*!
 * -------------------------------------------------------------------------- *
 *                                                                            *
 *    Kokopu-React - A React-based library of chess-related components.       *
 *    <https://www.npmjs.com/package/kokopu-react>                            *
 *    Copyright (C) 2021-2024  Yoann Le Montagner <yo35 -at- melix.net>       *
 *                                                                            *
 *    Kokopu-React is free software: you can redistribute it and/or           *
 *    modify it under the terms of the GNU Lesser General Public License      *
 *    as published by the Free Software Foundation, either version 3 of       *
 *    the License, or (at your option) any later version.                     *
 *                                                                            *
 *    Kokopu-React is distributed in the hope that it will be useful,         *
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of          *
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the            *
 *    GNU Lesser General Public License for more details.                     *
 *                                                                            *
 *    You should have received a copy of the GNU Lesser General               *
 *    Public License along with this program. If not, see                     *
 *    <http://www.gnu.org/licenses/>.                                         *
 *                                                                            *
 * -------------------------------------------------------------------------- */const sw=.1,iw=1,ow=1.4,Fie=.1,Yy=.15,om=.3,$ie=150,Bie="12345678",Mie="abcdefgh";class Vie extends P.Component{constructor(e){super(e),this.arrowTipIdSuffix=hF(),this.state={}}render(){let e=0;const n=[];tt.forEachSquare(c=>n.push(this.renderSquare(c)));const r=[],s=[];if(this.props.coordinateVisible){e=wF(this.props.squareSize);for(let c=0;c<8;++c)r.push(this.renderRankCoordinate(e,c)),s.push(this.renderFileCoordinate(e,c))}const i=Math.round(-iw*e),o=0,a=this.props.turnVisible?9*this.props.squareSize+Math.round(sw*this.props.squareSize):8*this.props.squareSize,u=8*this.props.squareSize+Math.round(ow*e),l=`${i} ${o} ${a-i} ${u-o}`;return P.createElement("svg",{className:"kokopu-chessboard",viewBox:l,width:a-i,height:u-o},P.createElement("defs",null,this.renderArrowTip("b"),this.renderArrowTip("g"),this.renderArrowTip("r"),this.renderArrowTip("y")),n,r,s,this.renderBoardContent())}renderBoardContent(){return this.props.move&&this.props.animated?P.createElement(Lie,{duration:$ie},e=>e===1?this.renderBoardContentStill():this.renderBoardContentAnimated(e)):this.renderBoardContentStill()}renderBoardContentAnimated(e){const n=[];return tt.forEachSquare(r=>n.push(this.renderPieceAnimated(e,r))),P.createElement(P.Fragment,null,n,this.renderMoveArrow(e),this.renderTurnFlag(tt.oppositeColor(this.props.position.turn())))}renderBoardContentStill(){const e=this.getPositionStill(),n=[],r=[];return tt.forEachSquare(s=>{n.push(this.renderPiece(e,s)),this.props.interactionMode&&r.push(this.renderSquareHandle(e,s))}),P.createElement(P.Fragment,null,this.renderSquareMarkers(),this.renderHoveredSquare(),n,this.renderTextMarkers(),this.renderArrowMarkers(),this.renderMoveArrow(1),r,this.renderPromotionDrawer(e),this.renderDraggedPiece(e),this.renderDraggedArrow(),this.renderTurnFlag(e.turn()))}renderSquare(e){const{x:n,y:r}=this.getSquareCoordinates(e);return P.createElement("rect",{key:e,x:n,y:r,width:this.props.squareSize,height:this.props.squareSize,fill:this.props.colorset[tt.squareColor(e)]})}renderHoveredSquare(){if(!this.state.hoveredSquare)return;const{x:e,y:n}=this.getSquareCoordinates(this.state.hoveredSquare),r=Math.max(2,Math.round(Fie*this.props.squareSize)),s=this.props.squareSize-r,i=this.getColorForAnnotation(this.props.interactionMode==="editArrows"?this.props.editedArrowColor:this.props.moveArrowColor);return P.createElement("rect",{className:"kokopu-hoveredSquare",x:e+r/2,y:n+r/2,width:s,height:s,stroke:i,strokeWidth:r})}renderPiece(e,n){const r=e.square(n);if(r==="-"||this.state.inhibitedSquare===n)return;const{x:s,y:i}=this.getSquareCoordinates(n);return P.createElement("image",{key:"piece-"+n,x:s,y:i,width:this.props.squareSize,height:this.props.squareSize,href:this.props.pieceset[r]})}renderPieceAnimated(e,n){const r=this.props.move;let s=this.props.position.square(n);if(s==="-"||r.to()===n||r.isEnPassant()&&r.enPassantSquare()===n)return;let{x:i,y:o}=this.getSquareCoordinates(n);if(n===r.from()){const{x:a,y:u}=this.getSquareCoordinates(r.to());i=a*e+i*(1-e),o=u*e+o*(1-e),r.isPromotion()&&e>.8&&(s=r.coloredPromotion())}else if(r.isCastling()&&n===r.rookFrom()){const{x:a,y:u}=this.getSquareCoordinates(r.rookTo());i=a*e+i*(1-e),o=u*e+o*(1-e)}return P.createElement("image",{key:"piece-"+n,x:i,y:o,width:this.props.squareSize,height:this.props.squareSize,href:this.props.pieceset[s]})}renderDraggedPiece(e){if(this.props.interactionMode!=="movePieces"&&this.props.interactionMode!=="playMoves"||!this.state.draggedSquare)return;const n=e.square(this.state.draggedSquare);let{x:r,y:s}=this.getSquareCoordinates(this.state.draggedSquare);return r=Math.min(Math.max(r+this.state.dragPosition.x,0),7*this.props.squareSize),s=Math.min(Math.max(s+this.state.dragPosition.y,0),7*this.props.squareSize),P.createElement("image",{className:"kokopu-pieceDraggable kokopu-dragging",x:r,y:s,width:this.props.squareSize,height:this.props.squareSize,href:this.props.pieceset[n]})}renderDraggedArrow(){if(this.props.interactionMode!=="editArrows"||!this.state.draggedSquare)return;const{x:e,y:n}=this.getSquareCoordinates(this.state.draggedSquare),r=e+this.props.squareSize/2,s=n+this.props.squareSize/2,i=Math.min(Math.max(e+this.state.dragPosition.x+this.state.cursorOffset.x,this.props.squareSize/2),15*this.props.squareSize/2),o=Math.min(Math.max(n+this.state.dragPosition.y+this.state.cursorOffset.y,this.props.squareSize/2),15*this.props.squareSize/2);if(r===i&&s===o)return;const a=this.props.squareSize*Yy,u=this.props.editedArrowColor;return P.createElement("line",{className:"kokopu-annotation kokopu-arrow kokopu-arrowDraggable kokopu-dragging",x1:r,y1:s,x2:i,y2:o,strokeWidth:a,stroke:this.getColorForAnnotation(u),markerEnd:`url(#${this.getArrowTipId(u)})`})}renderPromotionDrawer(e){if(!this.state.promotionDrawer)return;const{x:n,y:r}=this.getSquareCoordinates(this.state.promotionDrawer.origin),s=e.turn()===(this.props.flipped?"w":"b"),i=s?r-this.props.squareSize*(this.state.promotionDrawer.buttons.length-1):r,o=this.state.promotionDrawer.buttons.map((a,u)=>{const l=e.turn()+a;return P.createElement("image",{key:"drawer-piece-"+a,className:"kokopu-clickable",x:n,y:r+u*(s?-this.props.squareSize:this.props.squareSize),width:this.props.squareSize,height:this.props.squareSize,href:this.props.pieceset[l],onClick:()=>this.handleDrawerButtonClicked(a)})});return P.createElement(P.Fragment,null,P.createElement("rect",{className:"kokopu-handle",x:0,y:0,width:this.props.squareSize*8,height:this.props.squareSize*8,onClick:()=>this.handleDrawerCancelButtonClicked()}),P.createElement("rect",{x:n,y:i,width:this.props.squareSize,height:this.props.squareSize*this.state.promotionDrawer.buttons.length,fill:this.props.colorset.b}),P.createElement("rect",{x:n,y:i,width:this.props.squareSize,height:this.props.squareSize*this.state.promotionDrawer.buttons.length,className:"kokopu-drawerMask",fill:this.props.colorset.w}),o)}renderSquareHandle(e,n){const{x:r,y:s}=this.getSquareCoordinates(n),i=this.props.interactionMode==="movePieces"&&e.square(n)!=="-",o=this.props.interactionMode==="editArrows",a=this.props.interactionMode==="playMoves"&&!this.state.promotionDrawer&&e.isLegal()&&e.square(n).startsWith(e.turn());return i||o||a?P.createElement(Pie,{key:"handle-"+n,x:r,y:s,width:this.props.squareSize,height:this.props.squareSize,isArrowHandle:o,onDragStart:(u,l)=>this.handleDragStart(n,u,l),onDrag:(u,l)=>this.handleDrag(n,u,l),onDragStop:(u,l)=>this.handleDragStop(n,u,l),onDragCanceled:()=>this.handleDragCanceled()}):this.props.interactionMode==="clickSquares"?P.createElement("rect",{key:"handle-"+n,className:"kokopu-handle kokopu-clickable",x:r,y:s,width:this.props.squareSize,height:this.props.squareSize,onClick:()=>this.handleSquareClicked(n)}):void 0}renderSquareMarkers(){if(this.props.squareMarkers)return Object.entries(this.props.squareMarkers).map(([e,n])=>{const{x:r,y:s}=this.getSquareCoordinates(e);return P.createElement("rect",{key:"sqm-"+e,className:"kokopu-annotation",x:r,y:s,width:this.props.squareSize,height:this.props.squareSize,fill:this.getColorForAnnotation(n)})})}renderTextMarkers(){if(this.props.textMarkers)return Object.entries(this.props.textMarkers).map(([e,n])=>{let{x:r,y:s}=this.getSquareCoordinates(e);return r+=this.props.squareSize/2,s+=this.props.squareSize/2,P.createElement("g",{key:"txtm-"+e,className:"kokopu-annotation"},P.createElement(tse,{x:r,y:s,size:this.props.squareSize,symbol:n.symbol,color:this.getColorForAnnotation(n.color)}))})}renderArrowMarkers(){if(!this.props.arrowMarkers)return;const e=this.props.squareSize*Yy;return Object.entries(this.props.arrowMarkers).map(([n,r])=>{const s=n.substring(0,2),i=n.substring(2,4);if(s===i)return;let{x:o,y:a}=this.getSquareCoordinates(s),{x:u,y:l}=this.getSquareCoordinates(i);return o+=this.props.squareSize/2,a+=this.props.squareSize/2,u+=this.props.squareSize/2,l+=this.props.squareSize/2,u+=Math.sign(o-u)*om*this.props.squareSize,l+=Math.sign(a-l)*om*this.props.squareSize,P.createElement("line",{key:"arm-"+n,className:"kokopu-annotation kokopu-arrow",x1:o,y1:a,x2:u,y2:l,strokeWidth:e,stroke:this.getColorForAnnotation(r),markerEnd:`url(#${this.getArrowTipId(r)})`})})}renderMoveArrow(e){if(!this.props.move||e<.1||!this.props.moveArrowVisible||this.props.move.from()===this.props.move.to())return;const n=this.props.squareSize*Yy;let{x:r,y:s}=this.getSquareCoordinates(this.props.move.from());r+=this.props.squareSize/2,s+=this.props.squareSize/2;let{x:i,y:o}=this.getSquareCoordinates(this.props.move.to());i+=this.props.squareSize/2,o+=this.props.squareSize/2,i+=Math.sign(r-i)*om*this.props.squareSize,o+=Math.sign(s-o)*om*this.props.squareSize;const a=i*e+r*(1-e),u=o*e+s*(1-e);return P.createElement("line",{className:"kokopu-annotation kokopu-arrow",x1:r,y1:s,x2:a,y2:u,strokeWidth:n,stroke:this.getColorForAnnotation(this.props.moveArrowColor),markerEnd:`url(#${this.getArrowTipId(this.props.moveArrowColor)})`})}renderArrowTip(e){return P.createElement(mF,{id:this.getArrowTipId(e),color:this.getColorForAnnotation(e)})}renderTurnFlag(e){if(!this.props.turnVisible)return;const n=8*this.props.squareSize+Math.round(sw*this.props.squareSize),r=e===(this.props.flipped?"b":"w")?7*this.props.squareSize:0;return P.createElement("image",{key:"turn-"+e,x:n,y:r,width:this.props.squareSize,height:this.props.squareSize,href:this.getURLForTurnFlag(e)})}renderRankCoordinate(e,n){const r=Math.round(-iw*e)/2,s=(this.props.flipped?n+.5:7.5-n)*this.props.squareSize,i=Bie[n];return P.createElement("text",{key:"rank-"+i,className:"kokopu-coordinate",x:r,y:s,fontSize:e},i)}renderFileCoordinate(e,n){const r=(this.props.flipped?7.5-n:.5+n)*this.props.squareSize,s=8*this.props.squareSize+Math.round(ow*e)/2,i=Mie[n];return P.createElement("text",{key:"file-"+i,className:"kokopu-coordinate",x:r,y:s,fontSize:e},i)}handleDragStart(e,n,r){this.setState({inhibitedSquare:this.props.interactionMode==="movePieces"||this.props.interactionMode==="playMoves"?e:void 0,draggedSquare:e,hoveredSquare:e,cursorOffset:{x:n,y:r},dragPosition:{x:0,y:0}})}handleDrag(e,n,r){const{x:s,y:i}=this.getSquareCoordinates(e),o=this.getSquareAt(s+n+this.state.cursorOffset.x,i+r+this.state.cursorOffset.y);this.setState({hoveredSquare:o,dragPosition:{x:n,y:r}})}handleDragStop(e,n,r){const{x:s,y:i}=this.getSquareCoordinates(e),o=this.getSquareAt(s+n+this.state.cursorOffset.x,i+r+this.state.cursorOffset.y);if(this.setState({inhibitedSquare:void 0,draggedSquare:void 0,hoveredSquare:void 0}),!(e===o||!o)){if(this.props.interactionMode==="movePieces"&&this.props.onPieceMoved)this.props.onPieceMoved(e,o);else if(this.props.interactionMode==="editArrows"&&this.props.onArrowEdited)this.props.onArrowEdited(e,o);else if(this.props.interactionMode==="playMoves"){const a=this.getPositionStill(),u=a.isMoveLegal(e,o);if(!u)return;switch(u.status){case"regular":this.props.onMovePlayed&&this.props.onMovePlayed(a.notation(u()));break;case"promotion":this.setState({inhibitedSquare:e,promotionDrawer:{origin:o,buttons:a.variant()==="antichess"?["q","r","b","n","k"]:["q","r","b","n"],builder:l=>a.notation(u(l))}});break}}}}handleDragCanceled(){this.setState({inhibitedSquare:void 0,draggedSquare:void 0,hoveredSquare:void 0})}handleDrawerCancelButtonClicked(){this.setState({inhibitedSquare:void 0,promotionDrawer:void 0})}handleDrawerButtonClicked(e){const n=this.state.promotionDrawer.builder;this.setState({inhibitedSquare:void 0,promotionDrawer:void 0}),this.props.onMovePlayed&&this.props.onMovePlayed(n(e))}handleSquareClicked(e){this.props.onSquareClicked&&this.props.onSquareClicked(e)}getPositionStill(){if(!this.props.move)return this.props.position;const e=new tt.Position(this.props.position);return e.play(this.props.move),e}getSquareCoordinates(e){const{file:n,rank:r}=tt.squareToCoordinates(e),s=this.props.flipped?(7-n)*this.props.squareSize:n*this.props.squareSize,i=this.props.flipped?r*this.props.squareSize:(7-r)*this.props.squareSize;return{x:s,y:i}}getSquareAt(e,n){const r=this.props.flipped?7-Math.floor(e/this.props.squareSize):Math.floor(e/this.props.squareSize),s=this.props.flipped?Math.floor(n/this.props.squareSize):7-Math.floor(n/this.props.squareSize);return r>=0&&r<8&&s>=0&&s<8?tt.coordinatesToSquare(r,s):void 0}getArrowTipId(e){return`kokopu-arrowTip-${e}-${this.arrowTipIdSuffix}`}getColorForAnnotation(e){return this.props.colorset["c"+e]}getURLForTurnFlag(e){return this.props.pieceset[e+"x"]}}function Uie(t,e,n){let r=8*t,s=8*t;if(n&&(r+=t+Math.round(sw*t)),e){const i=wF(t);r+=Math.round(iw*i),s+=Math.round(ow*i)}return{width:r,height:s}}function wF(t){return t<=32?8:8+(t-32)*.2}/*!
 * -------------------------------------------------------------------------- *
 *                                                                            *
 *    Kokopu-React - A React-based library of chess-related components.       *
 *    <https://www.npmjs.com/package/kokopu-react>                            *
 *    Copyright (C) 2021-2024  Yoann Le Montagner <yo35 -at- melix.net>       *
 *                                                                            *
 *    Kokopu-React is free software: you can redistribute it and/or           *
 *    modify it under the terms of the GNU Lesser General Public License      *
 *    as published by the Free Software Foundation, either version 3 of       *
 *    the License, or (at your option) any later version.                     *
 *                                                                            *
 *    Kokopu-React is distributed in the hope that it will be useful,         *
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of          *
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the            *
 *    GNU Lesser General Public License for more details.                     *
 *                                                                            *
 *    You should have received a copy of the GNU Lesser General               *
 *    Public License along with this program. If not, see                     *
 *    <http://www.gnu.org/licenses/>.                                         *
 *                                                                            *
 * -------------------------------------------------------------------------- */function zie(t,e){if(t instanceof tt.Position)return{error:!1,position:t};if(t==="start"||t==="empty")return{error:!1,position:new tt.Position(t)};if(typeof t=="string")try{const{variant:n,fen:r}=jie(t),s=new tt.Position(n,"empty");return s.fen(r),{error:!1,position:s}}catch(n){if(n instanceof tt.exception.InvalidFEN)return{error:!0,errorBox:P.createElement(Y0,{title:Cr.INVALID_FEN_ERROR_TITLE,message:n.message})};throw n}else throw new pt(e,"position")}function jie(t){const e=t.indexOf(":");if(e<0)return{variant:"regular",fen:t};const n=t.substring(0,e);return tt.isGameVariant(n)?{variant:n,fen:t.substring(e+1)}:{variant:"regular",fen:t}}function Wie(t,e,n){if(e==null)return{error:!1,type:"none"};if(e instanceof tt.MoveDescriptor)return{error:!1,type:"regular",move:e};if(typeof e=="string"){if(e==="--")return t.isNullMoveLegal()?{error:!1,type:"null-move"}:{error:!0,errorBox:P.createElement(Y0,{title:Cr.INVALID_NOTATION_ERROR_TITLE,message:tt.i18n.ILLEGAL_NULL_MOVE})};try{return{error:!1,type:"regular",move:t.notation(e)}}catch(r){if(r instanceof tt.exception.InvalidNotation)return{error:!0,errorBox:P.createElement(Y0,{title:Cr.INVALID_NOTATION_ERROR_TITLE,message:r.message})};throw r}}else throw new pt(n,"move")}function xF(t,e,n){if(t instanceof tt.Game)return{error:!1,game:t};if(t instanceof tt.Database||typeof t=="string"){if(!Number.isInteger(e)||e<0)throw new pt(n,"gameIndex");try{return{error:!1,game:t instanceof tt.Database?t.game(e):tt.pgnRead(t,e)}}catch(r){if(r instanceof tt.exception.InvalidPGN)return{error:!0,errorBox:P.createElement(Y0,{title:Cr.INVALID_PGN_ERROR_TITLE,message:r.message,text:r.pgn,errorIndex:r.index,lineNumber:r.lineNumber})};throw r}}else throw new pt(n,"game")}/*!
 * -------------------------------------------------------------------------- *
 *                                                                            *
 *    Kokopu-React - A React-based library of chess-related components.       *
 *    <https://www.npmjs.com/package/kokopu-react>                            *
 *    Copyright (C) 2021-2024  Yoann Le Montagner <yo35 -at- melix.net>       *
 *                                                                            *
 *    Kokopu-React is free software: you can redistribute it and/or           *
 *    modify it under the terms of the GNU Lesser General Public License      *
 *    as published by the Free Software Foundation, either version 3 of       *
 *    the License, or (at your option) any later version.                     *
 *                                                                            *
 *    Kokopu-React is distributed in the hope that it will be useful,         *
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of          *
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the            *
 *    GNU Lesser General Public License for more details.                     *
 *                                                                            *
 *    You should have received a copy of the GNU Lesser General               *
 *    Public License along with this program. If not, see                     *
 *    <http://www.gnu.org/licenses/>.                                         *
 *                                                                            *
 * -------------------------------------------------------------------------- */class Kc extends P.Component{constructor(e){super(e),this.windowResizeListener=()=>this.handleWindowResize(),this.state={windowWidth:window.innerWidth}}componentDidMount(){window.addEventListener("resize",this.windowResizeListener)}componentWillUnmount(){window.removeEventListener("resize",this.windowResizeListener)}handleWindowResize(){this.setState({windowWidth:window.innerWidth})}render(){const e=zie(this.props.position,"Chessboard");if(e.error)return e.errorBox;let n=e.position;const r=Wie(n,this.props.move,"Chessboard");if(r.error)return r.errorBox;const s=r.type==="regular"?r.move:void 0;r.type==="null-move"&&(n=new tt.Position(n),n.playNullMove());const i=eb(this.props.squareMarkers,"squareMarkers",Kre,tt.isSquare,Lf),o=eb(this.props.textMarkers,"textMarkers",Xre,tt.isSquare,qie),a=eb(this.props.arrowMarkers,"arrowMarkers",Yre,tt.isSquareCouple,Lf),u=Xt(this.props.flipped),l=X0(this.props.squareSize,ba,Pc,()=>new pt("Chessboard","squareSize")),c=Xt(this.props.coordinateVisible),d=Xt(this.props.turnVisible),f=Xt(this.props.moveArrowVisible);if(!Lf(this.props.moveArrowColor))throw new pt("Chessboard","moveArrowColor");const h=Xt(this.props.animated),p=gs[this.props.colorset];if(!p)throw new pt("Chessboard","colorset");const y=Ya[this.props.pieceset];if(!y)throw new pt("Chessboard","pieceset");const b=tb(this.props.smallScreenLimits,()=>new pt("Chessboard","smallScreenLimits")),g=Qy(l,b,this.state.windowWidth),v=Zy(c,b,this.state.windowWidth),w=Jy(d,b,this.state.windowWidth),x={squareSize:g,coordinateVisible:v,turnVisible:w},N=this.getInteractionModeAndValidateEditedArrowColor(),{onPieceMoved:k,onSquareClicked:O,onArrowEdited:_,onMovePlayed:$}=this.props,M=`${n.variant()}|${n.fen()}|${s?n.notation(s):""}`;return P.createElement(P.Fragment,null,this.props.topComponent?this.props.topComponent(x):void 0,P.createElement(Vie,{key:M,position:n,move:s,squareMarkers:i,textMarkers:o,arrowMarkers:a,flipped:u,squareSize:g,coordinateVisible:v,turnVisible:w,moveArrowVisible:f,moveArrowColor:this.props.moveArrowColor,animated:h,colorset:p,pieceset:y,interactionMode:N,editedArrowColor:this.props.editedArrowColor,onPieceMoved:k,onSquareClicked:O,onArrowEdited:_,onMovePlayed:$}),this.props.bottomComponent?this.props.bottomComponent(x):void 0)}getInteractionModeAndValidateEditedArrowColor(){const e=Vr(this.props.interactionMode,zo);if(e===void 0||e==="movePieces"||e==="clickSquares"||e==="playMoves")return e;if(e==="editArrows"){if(!Lf(this.props.editedArrowColor))throw new pt("Chessboard","editedArrowColor");return e}else throw new pt("Chessboard","interactionMode")}static size(e){const{squareSize:n,coordinateVisible:r,turnVisible:s,smallScreenLimits:i,topComponent:o,bottomComponent:a}=H0(e,()=>new pt("Chessboard.size()","attr"));let u=n===void 0?bF:X0(n,ba,Pc,()=>new pt("Chessboard.size()","squareSize")),l=r===void 0?!0:Xt(r),c=s===void 0?!0:Xt(s);const d=tb(i,()=>new pt("Chessboard.size()","smallScreenLimits"));return typeof window<"u"&&(u=Qy(u,d,window.innerWidth),l=Zy(l,d,window.innerWidth),c=Jy(c,d,window.innerWidth)),e_(u,l,c,o,a)}static adaptSquareSize(e,n,r){const{coordinateVisible:s,turnVisible:i,smallScreenLimits:o,topComponent:a,bottomComponent:u}=H0(r,()=>new pt("Chessboard.adaptSquareSize()","attr"));e=K0(e,()=>new pt("Chessboard.adaptSquareSize()","width")),n=K0(n,()=>new pt("Chessboard.adaptSquareSize()","height"));let l=s===void 0?!0:Xt(s),c=i===void 0?!0:Xt(i);const d=tb(o,()=>new pt("Chessboard.adaptSquareSize()","smallScreenLimits"));let f=Pc;typeof window<"u"&&(f=Qy(f,d,window.innerWidth),l=Zy(l,d,window.innerWidth),c=Jy(c,d,window.innerWidth));function h(b){const{width:g,height:v}=e_(b,l,c,a,u);return g<=e&&v<=n}if(h(f))return f;if(!h(ba))return ba;let p=ba,y=f;for(;p+1<y;){const b=Math.floor((p+y)/2);h(b)?p=b:y=b}return p}static minSquareSize(){return ba}static maxSquareSize(){return Pc}static colorsets(){return gs}static piecesets(){return Ya}}Kc.defaultProps={...vF(),position:"start",flipped:!1};function e_(t,e,n,r,s){let{width:i,height:o}=Uie(t,e,n);const a={squareSize:t,coordinateVisible:e,turnVisible:n};if(r){const{width:u,height:l}=r(a);i=Math.max(i,u),o+=l}if(s){const{width:u,height:l}=s(a);i=Math.max(i,u),o+=l}return{width:i,height:o}}function Qy(t,e,n){const r=nS(e,n,s=>s.squareSize);return r===void 0?t:Math.min(t,r)}function Zy(t,e,n){const r=nS(e,n,s=>s.coordinateVisible);return r===void 0?t:t&&r}function Jy(t,e,n){const r=nS(e,n,s=>s.turnVisible);return r===void 0?t:t&&r}function nS(t,e,n){let r=1/0,s;for(const i of t)e>i.width||n(i)===void 0||i.width<r&&(r=i.width,s=n(i));return s}function eb(t,e,n,r,s){if(t!=null){if(typeof t=="string")return n(t);if(typeof t=="object"){const i={};return Object.entries(t).forEach(([o,a])=>{r(o)&&s(a)&&(i[o]=a)}),i}else throw new pt("Chessboard",e)}}function qie(t){return typeof t!="object"||t===null?!1:Hre(t.symbol)&&Lf(t.color)}function tb(t,e){if(t==null)return[];if(Array.isArray(t))return t.map(n=>{if(typeof n!="object"||n===null)throw e();return{width:K0(n.width,e),squareSize:Vr(n.squareSize,r=>X0(r,ba,Pc,e)),coordinateVisible:Vr(n.coordinateVisible,Xt),turnVisible:Vr(n.turnVisible,Xt)}});throw e()}/*!
 * -------------------------------------------------------------------------- *
 *                                                                            *
 *    Kokopu-React - A React-based library of chess-related components.       *
 *    <https://www.npmjs.com/package/kokopu-react>                            *
 *    Copyright (C) 2021-2024  Yoann Le Montagner <yo35 -at- melix.net>       *
 *                                                                            *
 *    Kokopu-React is free software: you can redistribute it and/or           *
 *    modify it under the terms of the GNU Lesser General Public License      *
 *    as published by the Free Software Foundation, either version 3 of       *
 *    the License, or (at your option) any later version.                     *
 *                                                                            *
 *    Kokopu-React is distributed in the hope that it will be useful,         *
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of          *
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the            *
 *    GNU Lesser General Public License for more details.                     *
 *                                                                            *
 *    You should have received a copy of the GNU Lesser General               *
 *    Public License along with this program. If not, see                     *
 *    <http://www.gnu.org/licenses/>.                                         *
 *                                                                            *
 * -------------------------------------------------------------------------- */function Gie(t){if(t==="native")return e=>e;if(t==="localized"){const e=Cr.PIECE_SYMBOLS;return n=>t_(e,n)}else{if(t==="figurines")return e=>Hie("alpha",e);if(Gre(t))return e=>t_(t,e);throw new pt("moveFormatter","pieceSymbols")}}function t_(t,e){return e.replace(/[KQRBNP]/g,n=>t[n])}function Hie(t,e){const n=[];let r=0,s=0;for(let i=0;i<e.length;++i){const o=e.charAt(i);if(o==="K"||o==="Q"||o==="R"||o==="B"||o==="N"||o==="P"){i>r&&n.push(e.substring(r,i)),r=i+1;const a="symbol-"+s++;n.push(P.createElement("span",{className:"kokopu-font-"+t,key:a},o))}}return r<e.length&&n.push(e.substring(r)),P.createElement(P.Fragment,null,n)}/*!
 * -------------------------------------------------------------------------- *
 *                                                                            *
 *    Kokopu-React - A React-based library of chess-related components.       *
 *    <https://www.npmjs.com/package/kokopu-react>                            *
 *    Copyright (C) 2021-2024  Yoann Le Montagner <yo35 -at- melix.net>       *
 *                                                                            *
 *    Kokopu-React is free software: you can redistribute it and/or           *
 *    modify it under the terms of the GNU Lesser General Public License      *
 *    as published by the Free Software Foundation, either version 3 of       *
 *    the License, or (at your option) any later version.                     *
 *                                                                            *
 *    Kokopu-React is distributed in the hope that it will be useful,         *
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of          *
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the            *
 *    GNU Lesser General Public License for more details.                     *
 *                                                                            *
 *    You should have received a copy of the GNU Lesser General               *
 *    Public License along with this program. If not, see                     *
 *    <http://www.gnu.org/licenses/>.                                         *
 *                                                                            *
 * -------------------------------------------------------------------------- */class SF extends P.Component{constructor(){super(...arguments),this.focusFieldRef=P.createRef()}render(){return P.createElement("div",{className:"kokopu-focusFieldContainer"},P.createElement("a",{className:"kokopu-focusField",href:"#",ref:this.focusFieldRef,onKeyDown:e=>this.handleKeyDown(e)}))}handleKeyDown(e){xf(e,"Home",this.props.onFirstPressed)||xf(e,"ArrowLeft",this.props.onPreviousPressed)||xf(e,"ArrowRight",this.props.onNextPressed)||xf(e,"End",this.props.onLastPressed)||xf(e,"Escape",this.props.onExitPressed)}focus(){const e=this.focusFieldRef.current;e&&e.focus()}}function xf(t,e,n){return t.key!==e?!1:(n&&(t.preventDefault(),n()),!0)}function Q0(t,e){if(t.findById(e))return e==="start"?void 0:"start"}function Z0(t,e){let n=t.findById(e);if(n&&!(n instanceof tt.Variation&&(n=n.parentNode(),!n))){for(;n;){const r=n.previous();if(r)return r.id();n=n.parentVariation().parentNode()}return"start"}}function Qf(t,e){const n=t.findById(e);if(!n)return;const r=n instanceof tt.Variation?n.first():n.next();return r?r.id():void 0}function J0(t,e){let n=t.findById(e);if(!n||(n=n instanceof tt.Variation?n.first():n.next(),!n))return;let r=n;for(;;){const s=r.next();if(!s)return r.id();r=s}}const AF=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(t=>t.charCodeAt(0))),EF=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(t=>t.charCodeAt(0)));var nb;const Kie=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),aw=(nb=String.fromCodePoint)!==null&&nb!==void 0?nb:function(t){let e="";return t>65535&&(t-=65536,e+=String.fromCharCode(t>>>10&1023|55296),t=56320|t&1023),e+=String.fromCharCode(t),e};function Xie(t){var e;return t>=55296&&t<=57343||t>1114111?65533:(e=Kie.get(t))!==null&&e!==void 0?e:t}var Rn;(function(t){t[t.NUM=35]="NUM",t[t.SEMI=59]="SEMI",t[t.EQUALS=61]="EQUALS",t[t.ZERO=48]="ZERO",t[t.NINE=57]="NINE",t[t.LOWER_A=97]="LOWER_A",t[t.LOWER_F=102]="LOWER_F",t[t.LOWER_X=120]="LOWER_X",t[t.LOWER_Z=122]="LOWER_Z",t[t.UPPER_A=65]="UPPER_A",t[t.UPPER_F=70]="UPPER_F",t[t.UPPER_Z=90]="UPPER_Z"})(Rn||(Rn={}));const Yie=32;var Ta;(function(t){t[t.VALUE_LENGTH=49152]="VALUE_LENGTH",t[t.BRANCH_LENGTH=16256]="BRANCH_LENGTH",t[t.JUMP_TABLE=127]="JUMP_TABLE"})(Ta||(Ta={}));function uw(t){return t>=Rn.ZERO&&t<=Rn.NINE}function Qie(t){return t>=Rn.UPPER_A&&t<=Rn.UPPER_F||t>=Rn.LOWER_A&&t<=Rn.LOWER_F}function Zie(t){return t>=Rn.UPPER_A&&t<=Rn.UPPER_Z||t>=Rn.LOWER_A&&t<=Rn.LOWER_Z||uw(t)}function Jie(t){return t===Rn.EQUALS||Zie(t)}var _n;(function(t){t[t.EntityStart=0]="EntityStart",t[t.NumericStart=1]="NumericStart",t[t.NumericDecimal=2]="NumericDecimal",t[t.NumericHex=3]="NumericHex",t[t.NamedEntity=4]="NamedEntity"})(_n||(_n={}));var Ji;(function(t){t[t.Legacy=0]="Legacy",t[t.Strict=1]="Strict",t[t.Attribute=2]="Attribute"})(Ji||(Ji={}));class CF{constructor(e,n,r){this.decodeTree=e,this.emitCodePoint=n,this.errors=r,this.state=_n.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Ji.Strict}startEntity(e){this.decodeMode=e,this.state=_n.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,n){switch(this.state){case _n.EntityStart:return e.charCodeAt(n)===Rn.NUM?(this.state=_n.NumericStart,this.consumed+=1,this.stateNumericStart(e,n+1)):(this.state=_n.NamedEntity,this.stateNamedEntity(e,n));case _n.NumericStart:return this.stateNumericStart(e,n);case _n.NumericDecimal:return this.stateNumericDecimal(e,n);case _n.NumericHex:return this.stateNumericHex(e,n);case _n.NamedEntity:return this.stateNamedEntity(e,n)}}stateNumericStart(e,n){return n>=e.length?-1:(e.charCodeAt(n)|Yie)===Rn.LOWER_X?(this.state=_n.NumericHex,this.consumed+=1,this.stateNumericHex(e,n+1)):(this.state=_n.NumericDecimal,this.stateNumericDecimal(e,n))}addToNumericResult(e,n,r,s){if(n!==r){const i=r-n;this.result=this.result*Math.pow(s,i)+parseInt(e.substr(n,i),s),this.consumed+=i}}stateNumericHex(e,n){const r=n;for(;n<e.length;){const s=e.charCodeAt(n);if(uw(s)||Qie(s))n+=1;else return this.addToNumericResult(e,r,n,16),this.emitNumericEntity(s,3)}return this.addToNumericResult(e,r,n,16),-1}stateNumericDecimal(e,n){const r=n;for(;n<e.length;){const s=e.charCodeAt(n);if(uw(s))n+=1;else return this.addToNumericResult(e,r,n,10),this.emitNumericEntity(s,2)}return this.addToNumericResult(e,r,n,10),-1}emitNumericEntity(e,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===Rn.SEMI)this.consumed+=1;else if(this.decodeMode===Ji.Strict)return 0;return this.emitCodePoint(Xie(this.result),this.consumed),this.errors&&(e!==Rn.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,n){const{decodeTree:r}=this;let s=r[this.treeIndex],i=(s&Ta.VALUE_LENGTH)>>14;for(;n<e.length;n++,this.excess++){const o=e.charCodeAt(n);if(this.treeIndex=eoe(r,s,this.treeIndex+Math.max(1,i),o),this.treeIndex<0)return this.result===0||this.decodeMode===Ji.Attribute&&(i===0||Jie(o))?0:this.emitNotTerminatedNamedEntity();if(s=r[this.treeIndex],i=(s&Ta.VALUE_LENGTH)>>14,i!==0){if(o===Rn.SEMI)return this.emitNamedEntityData(this.treeIndex,i,this.consumed+this.excess);this.decodeMode!==Ji.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:n,decodeTree:r}=this,s=(r[n]&Ta.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,s,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,n,r){const{decodeTree:s}=this;return this.emitCodePoint(n===1?s[e]&~Ta.VALUE_LENGTH:s[e+1],r),n===3&&this.emitCodePoint(s[e+2],r),r}end(){var e;switch(this.state){case _n.NamedEntity:return this.result!==0&&(this.decodeMode!==Ji.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case _n.NumericDecimal:return this.emitNumericEntity(0,2);case _n.NumericHex:return this.emitNumericEntity(0,3);case _n.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case _n.EntityStart:return 0}}}function NF(t){let e="";const n=new CF(t,r=>e+=aw(r));return function(s,i){let o=0,a=0;for(;(a=s.indexOf("&",a))>=0;){e+=s.slice(o,a),n.startEntity(i);const l=n.write(s,a+1);if(l<0){o=a+n.end();break}o=a+l,a=l===0?o+1:o}const u=e+s.slice(o);return e="",u}}function eoe(t,e,n,r){const s=(e&Ta.BRANCH_LENGTH)>>7,i=e&Ta.JUMP_TABLE;if(s===0)return i!==0&&r===i?n:-1;if(i){const u=r-i;return u<0||u>=s?-1:t[n+u]-1}let o=n,a=o+s-1;for(;o<=a;){const u=o+a>>>1,l=t[u];if(l<r)o=u+1;else if(l>r)a=u-1;else return t[u+s]}return-1}NF(AF);NF(EF);var De;(function(t){t[t.Tab=9]="Tab",t[t.NewLine=10]="NewLine",t[t.FormFeed=12]="FormFeed",t[t.CarriageReturn=13]="CarriageReturn",t[t.Space=32]="Space",t[t.ExclamationMark=33]="ExclamationMark",t[t.Number=35]="Number",t[t.Amp=38]="Amp",t[t.SingleQuote=39]="SingleQuote",t[t.DoubleQuote=34]="DoubleQuote",t[t.Dash=45]="Dash",t[t.Slash=47]="Slash",t[t.Zero=48]="Zero",t[t.Nine=57]="Nine",t[t.Semi=59]="Semi",t[t.Lt=60]="Lt",t[t.Eq=61]="Eq",t[t.Gt=62]="Gt",t[t.Questionmark=63]="Questionmark",t[t.UpperA=65]="UpperA",t[t.LowerA=97]="LowerA",t[t.UpperF=70]="UpperF",t[t.LowerF=102]="LowerF",t[t.UpperZ=90]="UpperZ",t[t.LowerZ=122]="LowerZ",t[t.LowerX=120]="LowerX",t[t.OpeningSquareBracket=91]="OpeningSquareBracket"})(De||(De={}));var oe;(function(t){t[t.Text=1]="Text",t[t.BeforeTagName=2]="BeforeTagName",t[t.InTagName=3]="InTagName",t[t.InSelfClosingTag=4]="InSelfClosingTag",t[t.BeforeClosingTagName=5]="BeforeClosingTagName",t[t.InClosingTagName=6]="InClosingTagName",t[t.AfterClosingTagName=7]="AfterClosingTagName",t[t.BeforeAttributeName=8]="BeforeAttributeName",t[t.InAttributeName=9]="InAttributeName",t[t.AfterAttributeName=10]="AfterAttributeName",t[t.BeforeAttributeValue=11]="BeforeAttributeValue",t[t.InAttributeValueDq=12]="InAttributeValueDq",t[t.InAttributeValueSq=13]="InAttributeValueSq",t[t.InAttributeValueNq=14]="InAttributeValueNq",t[t.BeforeDeclaration=15]="BeforeDeclaration",t[t.InDeclaration=16]="InDeclaration",t[t.InProcessingInstruction=17]="InProcessingInstruction",t[t.BeforeComment=18]="BeforeComment",t[t.CDATASequence=19]="CDATASequence",t[t.InSpecialComment=20]="InSpecialComment",t[t.InCommentLike=21]="InCommentLike",t[t.BeforeSpecialS=22]="BeforeSpecialS",t[t.BeforeSpecialT=23]="BeforeSpecialT",t[t.SpecialStartSequence=24]="SpecialStartSequence",t[t.InSpecialTag=25]="InSpecialTag",t[t.InEntity=26]="InEntity"})(oe||(oe={}));function ko(t){return t===De.Space||t===De.NewLine||t===De.Tab||t===De.FormFeed||t===De.CarriageReturn}function am(t){return t===De.Slash||t===De.Gt||ko(t)}function toe(t){return t>=De.LowerA&&t<=De.LowerZ||t>=De.UpperA&&t<=De.UpperZ}var eo;(function(t){t[t.NoValue=0]="NoValue",t[t.Unquoted=1]="Unquoted",t[t.Single=2]="Single",t[t.Double=3]="Double"})(eo||(eo={}));const Vn={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101]),TextareaEnd:new Uint8Array([60,47,116,101,120,116,97,114,101,97])};class noe{constructor({xmlMode:e=!1,decodeEntities:n=!0},r){this.cbs=r,this.state=oe.Text,this.buffer="",this.sectionStart=0,this.index=0,this.entityStart=0,this.baseState=oe.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.xmlMode=e,this.decodeEntities=n,this.entityDecoder=new CF(e?EF:AF,(s,i)=>this.emitCodePoint(s,i))}reset(){this.state=oe.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=oe.Text,this.currentSequence=void 0,this.running=!0,this.offset=0}write(e){this.offset+=this.buffer.length,this.buffer=e,this.parse()}end(){this.running&&this.finish()}pause(){this.running=!1}resume(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()}stateText(e){e===De.Lt||!this.decodeEntities&&this.fastForwardTo(De.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=oe.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&e===De.Amp&&this.startEntity()}stateSpecialStartSequence(e){const n=this.sequenceIndex===this.currentSequence.length;if(!(n?am(e):(e|32)===this.currentSequence[this.sequenceIndex]))this.isSpecial=!1;else if(!n){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=oe.InTagName,this.stateInTagName(e)}stateInSpecialTag(e){if(this.sequenceIndex===this.currentSequence.length){if(e===De.Gt||ko(e)){const n=this.index-this.currentSequence.length;if(this.sectionStart<n){const r=this.index;this.index=n,this.cbs.ontext(this.sectionStart,n),this.index=r}this.isSpecial=!1,this.sectionStart=n+2,this.stateInClosingTagName(e);return}this.sequenceIndex=0}(e|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===Vn.TitleEnd?this.decodeEntities&&e===De.Amp&&this.startEntity():this.fastForwardTo(De.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(e===De.Lt)}stateCDATASequence(e){e===Vn.Cdata[this.sequenceIndex]?++this.sequenceIndex===Vn.Cdata.length&&(this.state=oe.InCommentLike,this.currentSequence=Vn.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=oe.InDeclaration,this.stateInDeclaration(e))}fastForwardTo(e){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===e)return!0;return this.index=this.buffer.length+this.offset-1,!1}stateInCommentLike(e){e===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===Vn.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=oe.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):e!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)}isTagStartChar(e){return this.xmlMode?!am(e):toe(e)}startSpecial(e,n){this.isSpecial=!0,this.currentSequence=e,this.sequenceIndex=n,this.state=oe.SpecialStartSequence}stateBeforeTagName(e){if(e===De.ExclamationMark)this.state=oe.BeforeDeclaration,this.sectionStart=this.index+1;else if(e===De.Questionmark)this.state=oe.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(e)){const n=e|32;this.sectionStart=this.index,this.xmlMode?this.state=oe.InTagName:n===Vn.ScriptEnd[2]?this.state=oe.BeforeSpecialS:n===Vn.TitleEnd[2]?this.state=oe.BeforeSpecialT:this.state=oe.InTagName}else e===De.Slash?this.state=oe.BeforeClosingTagName:(this.state=oe.Text,this.stateText(e))}stateInTagName(e){am(e)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=oe.BeforeAttributeName,this.stateBeforeAttributeName(e))}stateBeforeClosingTagName(e){ko(e)||(e===De.Gt?this.state=oe.Text:(this.state=this.isTagStartChar(e)?oe.InClosingTagName:oe.InSpecialComment,this.sectionStart=this.index))}stateInClosingTagName(e){(e===De.Gt||ko(e))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=oe.AfterClosingTagName,this.stateAfterClosingTagName(e))}stateAfterClosingTagName(e){(e===De.Gt||this.fastForwardTo(De.Gt))&&(this.state=oe.Text,this.sectionStart=this.index+1)}stateBeforeAttributeName(e){e===De.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=oe.InSpecialTag,this.sequenceIndex=0):this.state=oe.Text,this.sectionStart=this.index+1):e===De.Slash?this.state=oe.InSelfClosingTag:ko(e)||(this.state=oe.InAttributeName,this.sectionStart=this.index)}stateInSelfClosingTag(e){e===De.Gt?(this.cbs.onselfclosingtag(this.index),this.state=oe.Text,this.sectionStart=this.index+1,this.isSpecial=!1):ko(e)||(this.state=oe.BeforeAttributeName,this.stateBeforeAttributeName(e))}stateInAttributeName(e){(e===De.Eq||am(e))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=this.index,this.state=oe.AfterAttributeName,this.stateAfterAttributeName(e))}stateAfterAttributeName(e){e===De.Eq?this.state=oe.BeforeAttributeValue:e===De.Slash||e===De.Gt?(this.cbs.onattribend(eo.NoValue,this.sectionStart),this.sectionStart=-1,this.state=oe.BeforeAttributeName,this.stateBeforeAttributeName(e)):ko(e)||(this.cbs.onattribend(eo.NoValue,this.sectionStart),this.state=oe.InAttributeName,this.sectionStart=this.index)}stateBeforeAttributeValue(e){e===De.DoubleQuote?(this.state=oe.InAttributeValueDq,this.sectionStart=this.index+1):e===De.SingleQuote?(this.state=oe.InAttributeValueSq,this.sectionStart=this.index+1):ko(e)||(this.sectionStart=this.index,this.state=oe.InAttributeValueNq,this.stateInAttributeValueNoQuotes(e))}handleInAttributeValue(e,n){e===n||!this.decodeEntities&&this.fastForwardTo(n)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(n===De.DoubleQuote?eo.Double:eo.Single,this.index+1),this.state=oe.BeforeAttributeName):this.decodeEntities&&e===De.Amp&&this.startEntity()}stateInAttributeValueDoubleQuotes(e){this.handleInAttributeValue(e,De.DoubleQuote)}stateInAttributeValueSingleQuotes(e){this.handleInAttributeValue(e,De.SingleQuote)}stateInAttributeValueNoQuotes(e){ko(e)||e===De.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(eo.Unquoted,this.index),this.state=oe.BeforeAttributeName,this.stateBeforeAttributeName(e)):this.decodeEntities&&e===De.Amp&&this.startEntity()}stateBeforeDeclaration(e){e===De.OpeningSquareBracket?(this.state=oe.CDATASequence,this.sequenceIndex=0):this.state=e===De.Dash?oe.BeforeComment:oe.InDeclaration}stateInDeclaration(e){(e===De.Gt||this.fastForwardTo(De.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=oe.Text,this.sectionStart=this.index+1)}stateInProcessingInstruction(e){(e===De.Gt||this.fastForwardTo(De.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=oe.Text,this.sectionStart=this.index+1)}stateBeforeComment(e){e===De.Dash?(this.state=oe.InCommentLike,this.currentSequence=Vn.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=oe.InDeclaration}stateInSpecialComment(e){(e===De.Gt||this.fastForwardTo(De.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=oe.Text,this.sectionStart=this.index+1)}stateBeforeSpecialS(e){const n=e|32;n===Vn.ScriptEnd[3]?this.startSpecial(Vn.ScriptEnd,4):n===Vn.StyleEnd[3]?this.startSpecial(Vn.StyleEnd,4):(this.state=oe.InTagName,this.stateInTagName(e))}stateBeforeSpecialT(e){const n=e|32;n===Vn.TitleEnd[3]?this.startSpecial(Vn.TitleEnd,4):n===Vn.TextareaEnd[3]?this.startSpecial(Vn.TextareaEnd,4):(this.state=oe.InTagName,this.stateInTagName(e))}startEntity(){this.baseState=this.state,this.state=oe.InEntity,this.entityStart=this.index,this.entityDecoder.startEntity(this.xmlMode?Ji.Strict:this.baseState===oe.Text||this.baseState===oe.InSpecialTag?Ji.Legacy:Ji.Attribute)}stateInEntity(){const e=this.entityDecoder.write(this.buffer,this.index-this.offset);e>=0?(this.state=this.baseState,e===0&&(this.index=this.entityStart)):this.index=this.offset+this.buffer.length-1}cleanup(){this.running&&this.sectionStart!==this.index&&(this.state===oe.Text||this.state===oe.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===oe.InAttributeValueDq||this.state===oe.InAttributeValueSq||this.state===oe.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))}shouldContinue(){return this.index<this.buffer.length+this.offset&&this.running}parse(){for(;this.shouldContinue();){const e=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case oe.Text:{this.stateText(e);break}case oe.SpecialStartSequence:{this.stateSpecialStartSequence(e);break}case oe.InSpecialTag:{this.stateInSpecialTag(e);break}case oe.CDATASequence:{this.stateCDATASequence(e);break}case oe.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(e);break}case oe.InAttributeName:{this.stateInAttributeName(e);break}case oe.InCommentLike:{this.stateInCommentLike(e);break}case oe.InSpecialComment:{this.stateInSpecialComment(e);break}case oe.BeforeAttributeName:{this.stateBeforeAttributeName(e);break}case oe.InTagName:{this.stateInTagName(e);break}case oe.InClosingTagName:{this.stateInClosingTagName(e);break}case oe.BeforeTagName:{this.stateBeforeTagName(e);break}case oe.AfterAttributeName:{this.stateAfterAttributeName(e);break}case oe.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(e);break}case oe.BeforeAttributeValue:{this.stateBeforeAttributeValue(e);break}case oe.BeforeClosingTagName:{this.stateBeforeClosingTagName(e);break}case oe.AfterClosingTagName:{this.stateAfterClosingTagName(e);break}case oe.BeforeSpecialS:{this.stateBeforeSpecialS(e);break}case oe.BeforeSpecialT:{this.stateBeforeSpecialT(e);break}case oe.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(e);break}case oe.InSelfClosingTag:{this.stateInSelfClosingTag(e);break}case oe.InDeclaration:{this.stateInDeclaration(e);break}case oe.BeforeDeclaration:{this.stateBeforeDeclaration(e);break}case oe.BeforeComment:{this.stateBeforeComment(e);break}case oe.InProcessingInstruction:{this.stateInProcessingInstruction(e);break}case oe.InEntity:{this.stateInEntity();break}}this.index++}this.cleanup()}finish(){this.state===oe.InEntity&&(this.entityDecoder.end(),this.state=this.baseState),this.handleTrailingData(),this.cbs.onend()}handleTrailingData(){const e=this.buffer.length+this.offset;this.sectionStart>=e||(this.state===oe.InCommentLike?this.currentSequence===Vn.CdataEnd?this.cbs.oncdata(this.sectionStart,e,0):this.cbs.oncomment(this.sectionStart,e,0):this.state===oe.InTagName||this.state===oe.BeforeAttributeName||this.state===oe.BeforeAttributeValue||this.state===oe.AfterAttributeName||this.state===oe.InAttributeName||this.state===oe.InAttributeValueSq||this.state===oe.InAttributeValueDq||this.state===oe.InAttributeValueNq||this.state===oe.InClosingTagName||this.cbs.ontext(this.sectionStart,e))}emitCodePoint(e,n){this.baseState!==oe.Text&&this.baseState!==oe.InSpecialTag?(this.sectionStart<this.entityStart&&this.cbs.onattribdata(this.sectionStart,this.entityStart),this.sectionStart=this.entityStart+n,this.index=this.sectionStart-1,this.cbs.onattribentity(e)):(this.sectionStart<this.entityStart&&this.cbs.ontext(this.sectionStart,this.entityStart),this.sectionStart=this.entityStart+n,this.index=this.sectionStart-1,this.cbs.ontextentity(e,this.sectionStart))}}const ac=new Set(["input","option","optgroup","select","button","datalist","textarea"]),Ct=new Set(["p"]),n_=new Set(["thead","tbody"]),r_=new Set(["dd","dt"]),s_=new Set(["rt","rp"]),roe=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",Ct],["h1",Ct],["h2",Ct],["h3",Ct],["h4",Ct],["h5",Ct],["h6",Ct],["select",ac],["input",ac],["output",ac],["button",ac],["datalist",ac],["textarea",ac],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",r_],["dt",r_],["address",Ct],["article",Ct],["aside",Ct],["blockquote",Ct],["details",Ct],["div",Ct],["dl",Ct],["fieldset",Ct],["figcaption",Ct],["figure",Ct],["footer",Ct],["form",Ct],["header",Ct],["hr",Ct],["main",Ct],["nav",Ct],["ol",Ct],["pre",Ct],["section",Ct],["table",Ct],["ul",Ct],["rt",s_],["rp",s_],["tbody",n_],["tfoot",n_]]),soe=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),i_=new Set(["math","svg"]),o_=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),ioe=/\s|\//;class ooe{constructor(e,n={}){var r,s,i,o,a,u;this.options=n,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=e??{},this.htmlMode=!this.options.xmlMode,this.lowerCaseTagNames=(r=n.lowerCaseTags)!==null&&r!==void 0?r:this.htmlMode,this.lowerCaseAttributeNames=(s=n.lowerCaseAttributeNames)!==null&&s!==void 0?s:this.htmlMode,this.recognizeSelfClosing=(i=n.recognizeSelfClosing)!==null&&i!==void 0?i:!this.htmlMode,this.tokenizer=new((o=n.Tokenizer)!==null&&o!==void 0?o:noe)(this.options,this),this.foreignContext=[!this.htmlMode],(u=(a=this.cbs).onparserinit)===null||u===void 0||u.call(a,this)}ontext(e,n){var r,s;const i=this.getSlice(e,n);this.endIndex=n-1,(s=(r=this.cbs).ontext)===null||s===void 0||s.call(r,i),this.startIndex=n}ontextentity(e,n){var r,s;this.endIndex=n-1,(s=(r=this.cbs).ontext)===null||s===void 0||s.call(r,aw(e)),this.startIndex=n}isVoidElement(e){return this.htmlMode&&soe.has(e)}onopentagname(e,n){this.endIndex=n;let r=this.getSlice(e,n);this.lowerCaseTagNames&&(r=r.toLowerCase()),this.emitOpenTag(r)}emitOpenTag(e){var n,r,s,i;this.openTagStart=this.startIndex,this.tagname=e;const o=this.htmlMode&&roe.get(e);if(o)for(;this.stack.length>0&&o.has(this.stack[0]);){const a=this.stack.shift();(r=(n=this.cbs).onclosetag)===null||r===void 0||r.call(n,a,!0)}this.isVoidElement(e)||(this.stack.unshift(e),this.htmlMode&&(i_.has(e)?this.foreignContext.unshift(!0):o_.has(e)&&this.foreignContext.unshift(!1))),(i=(s=this.cbs).onopentagname)===null||i===void 0||i.call(s,e),this.cbs.onopentag&&(this.attribs={})}endOpenTag(e){var n,r;this.startIndex=this.openTagStart,this.attribs&&((r=(n=this.cbs).onopentag)===null||r===void 0||r.call(n,this.tagname,this.attribs,e),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""}onopentagend(e){this.endIndex=e,this.endOpenTag(!1),this.startIndex=e+1}onclosetag(e,n){var r,s,i,o,a,u,l,c;this.endIndex=n;let d=this.getSlice(e,n);if(this.lowerCaseTagNames&&(d=d.toLowerCase()),this.htmlMode&&(i_.has(d)||o_.has(d))&&this.foreignContext.shift(),this.isVoidElement(d))this.htmlMode&&d==="br"&&((o=(i=this.cbs).onopentagname)===null||o===void 0||o.call(i,"br"),(u=(a=this.cbs).onopentag)===null||u===void 0||u.call(a,"br",{},!0),(c=(l=this.cbs).onclosetag)===null||c===void 0||c.call(l,"br",!1));else{const f=this.stack.indexOf(d);if(f!==-1)for(let h=0;h<=f;h++){const p=this.stack.shift();(s=(r=this.cbs).onclosetag)===null||s===void 0||s.call(r,p,h!==f)}else this.htmlMode&&d==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=n+1}onselfclosingtag(e){this.endIndex=e,this.recognizeSelfClosing||this.foreignContext[0]?(this.closeCurrentTag(!1),this.startIndex=e+1):this.onopentagend(e)}closeCurrentTag(e){var n,r;const s=this.tagname;this.endOpenTag(e),this.stack[0]===s&&((r=(n=this.cbs).onclosetag)===null||r===void 0||r.call(n,s,!e),this.stack.shift())}onattribname(e,n){this.startIndex=e;const r=this.getSlice(e,n);this.attribname=this.lowerCaseAttributeNames?r.toLowerCase():r}onattribdata(e,n){this.attribvalue+=this.getSlice(e,n)}onattribentity(e){this.attribvalue+=aw(e)}onattribend(e,n){var r,s;this.endIndex=n,(s=(r=this.cbs).onattribute)===null||s===void 0||s.call(r,this.attribname,this.attribvalue,e===eo.Double?'"':e===eo.Single?"'":e===eo.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""}getInstructionName(e){const n=e.search(ioe);let r=n<0?e:e.substr(0,n);return this.lowerCaseTagNames&&(r=r.toLowerCase()),r}ondeclaration(e,n){this.endIndex=n;const r=this.getSlice(e,n);if(this.cbs.onprocessinginstruction){const s=this.getInstructionName(r);this.cbs.onprocessinginstruction(`!${s}`,`!${r}`)}this.startIndex=n+1}onprocessinginstruction(e,n){this.endIndex=n;const r=this.getSlice(e,n);if(this.cbs.onprocessinginstruction){const s=this.getInstructionName(r);this.cbs.onprocessinginstruction(`?${s}`,`?${r}`)}this.startIndex=n+1}oncomment(e,n,r){var s,i,o,a;this.endIndex=n,(i=(s=this.cbs).oncomment)===null||i===void 0||i.call(s,this.getSlice(e,n-r)),(a=(o=this.cbs).oncommentend)===null||a===void 0||a.call(o),this.startIndex=n+1}oncdata(e,n,r){var s,i,o,a,u,l,c,d,f,h;this.endIndex=n;const p=this.getSlice(e,n-r);!this.htmlMode||this.options.recognizeCDATA?((i=(s=this.cbs).oncdatastart)===null||i===void 0||i.call(s),(a=(o=this.cbs).ontext)===null||a===void 0||a.call(o,p),(l=(u=this.cbs).oncdataend)===null||l===void 0||l.call(u)):((d=(c=this.cbs).oncomment)===null||d===void 0||d.call(c,`[CDATA[${p}]]`),(h=(f=this.cbs).oncommentend)===null||h===void 0||h.call(f)),this.startIndex=n+1}onend(){var e,n;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(let r=0;r<this.stack.length;r++)this.cbs.onclosetag(this.stack[r],!0)}(n=(e=this.cbs).onend)===null||n===void 0||n.call(e)}reset(){var e,n,r,s;(n=(e=this.cbs).onreset)===null||n===void 0||n.call(e),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(s=(r=this.cbs).onparserinit)===null||s===void 0||s.call(r,this),this.buffers.length=0,this.foreignContext.length=0,this.foreignContext.unshift(!this.htmlMode),this.bufferOffset=0,this.writeIndex=0,this.ended=!1}parseComplete(e){this.reset(),this.end(e)}getSlice(e,n){for(;e-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();let r=this.buffers[0].slice(e-this.bufferOffset,n-this.bufferOffset);for(;n-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),r+=this.buffers[0].slice(0,n-this.bufferOffset);return r}shiftBuffer(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()}write(e){var n,r;if(this.ended){(r=(n=this.cbs).onerror)===null||r===void 0||r.call(n,new Error(".write() after done!"));return}this.buffers.push(e),this.tokenizer.running&&(this.tokenizer.write(e),this.writeIndex++)}end(e){var n,r;if(this.ended){(r=(n=this.cbs).onerror)===null||r===void 0||r.call(n,new Error(".end() after done!"));return}e&&this.write(e),this.ended=!0,this.tokenizer.end()}pause(){this.tokenizer.pause()}resume(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()}parseChunk(e){this.write(e)}done(e){this.end(e)}}var mt;(function(t){t.Root="root",t.Text="text",t.Directive="directive",t.Comment="comment",t.Script="script",t.Style="style",t.Tag="tag",t.CDATA="cdata",t.Doctype="doctype"})(mt||(mt={}));function aoe(t){return t.type===mt.Tag||t.type===mt.Script||t.type===mt.Style}mt.Root;mt.Text;mt.Directive;mt.Comment;mt.Script;mt.Style;mt.Tag;mt.CDATA;mt.Doctype;let _F=class{constructor(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}get parentNode(){return this.parent}set parentNode(e){this.parent=e}get previousSibling(){return this.prev}set previousSibling(e){this.prev=e}get nextSibling(){return this.next}set nextSibling(e){this.next=e}cloneNode(e=!1){return OF(this,e)}};class rS extends _F{constructor(e){super(),this.data=e}get nodeValue(){return this.data}set nodeValue(e){this.data=e}}class lw extends rS{constructor(){super(...arguments),this.type=mt.Text}get nodeType(){return 3}}class TF extends rS{constructor(){super(...arguments),this.type=mt.Comment}get nodeType(){return 8}}class IF extends rS{constructor(e,n){super(n),this.name=e,this.type=mt.Directive}get nodeType(){return 1}}class sS extends _F{constructor(e){super(),this.children=e}get firstChild(){var e;return(e=this.children[0])!==null&&e!==void 0?e:null}get lastChild(){return this.children.length>0?this.children[this.children.length-1]:null}get childNodes(){return this.children}set childNodes(e){this.children=e}}class kF extends sS{constructor(){super(...arguments),this.type=mt.CDATA}get nodeType(){return 4}}class cw extends sS{constructor(){super(...arguments),this.type=mt.Root}get nodeType(){return 9}}let RF=class extends sS{constructor(e,n,r=[],s=e==="script"?mt.Script:e==="style"?mt.Style:mt.Tag){super(r),this.name=e,this.attribs=n,this.type=s}get nodeType(){return 1}get tagName(){return this.name}set tagName(e){this.name=e}get attributes(){return Object.keys(this.attribs).map(e=>{var n,r;return{name:e,value:this.attribs[e],namespace:(n=this["x-attribsNamespace"])===null||n===void 0?void 0:n[e],prefix:(r=this["x-attribsPrefix"])===null||r===void 0?void 0:r[e]}})}};function uoe(t){return aoe(t)}function loe(t){return t.type===mt.CDATA}function coe(t){return t.type===mt.Text}function doe(t){return t.type===mt.Comment}function foe(t){return t.type===mt.Directive}function hoe(t){return t.type===mt.Root}function OF(t,e=!1){let n;if(coe(t))n=new lw(t.data);else if(doe(t))n=new TF(t.data);else if(uoe(t)){const r=e?rb(t.children):[],s=new RF(t.name,{...t.attribs},r);r.forEach(i=>i.parent=s),t.namespace!=null&&(s.namespace=t.namespace),t["x-attribsNamespace"]&&(s["x-attribsNamespace"]={...t["x-attribsNamespace"]}),t["x-attribsPrefix"]&&(s["x-attribsPrefix"]={...t["x-attribsPrefix"]}),n=s}else if(loe(t)){const r=e?rb(t.children):[],s=new kF(r);r.forEach(i=>i.parent=s),n=s}else if(hoe(t)){const r=e?rb(t.children):[],s=new cw(r);r.forEach(i=>i.parent=s),t["x-mode"]&&(s["x-mode"]=t["x-mode"]),n=s}else if(foe(t)){const r=new IF(t.name,t.data);t["x-name"]!=null&&(r["x-name"]=t["x-name"],r["x-publicId"]=t["x-publicId"],r["x-systemId"]=t["x-systemId"]),n=r}else throw new Error(`Not implemented yet: ${t.type}`);return n.startIndex=t.startIndex,n.endIndex=t.endIndex,t.sourceCodeLocation!=null&&(n.sourceCodeLocation=t.sourceCodeLocation),n}function rb(t){const e=t.map(n=>OF(n,!0));for(let n=1;n<e.length;n++)e[n].prev=e[n-1],e[n-1].next=e[n];return e}const a_={withStartIndices:!1,withEndIndices:!1,xmlMode:!1};class poe{constructor(e,n,r){this.dom=[],this.root=new cw(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof n=="function"&&(r=n,n=a_),typeof e=="object"&&(n=e,e=void 0),this.callback=e??null,this.options=n??a_,this.elementCB=r??null}onparserinit(e){this.parser=e}onreset(){this.dom=[],this.root=new cw(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null}onend(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))}onerror(e){this.handleCallback(e)}onclosetag(){this.lastNode=null;const e=this.tagStack.pop();this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(e)}onopentag(e,n){const r=this.options.xmlMode?mt.Tag:void 0,s=new RF(e,n,void 0,r);this.addNode(s),this.tagStack.push(s)}ontext(e){const{lastNode:n}=this;if(n&&n.type===mt.Text)n.data+=e,this.options.withEndIndices&&(n.endIndex=this.parser.endIndex);else{const r=new lw(e);this.addNode(r),this.lastNode=r}}oncomment(e){if(this.lastNode&&this.lastNode.type===mt.Comment){this.lastNode.data+=e;return}const n=new TF(e);this.addNode(n),this.lastNode=n}oncommentend(){this.lastNode=null}oncdatastart(){const e=new lw(""),n=new kF([e]);this.addNode(n),e.parent=n,this.lastNode=e}oncdataend(){this.lastNode=null}onprocessinginstruction(e,n){const r=new IF(e,n);this.addNode(r)}handleCallback(e){if(typeof this.callback=="function")this.callback(e,this.dom);else if(e)throw e}addNode(e){const n=this.tagStack[this.tagStack.length-1],r=n.children[n.children.length-1];this.options.withStartIndices&&(e.startIndex=this.parser.startIndex),this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),n.children.push(e),r&&(e.prev=r,r.next=e),e.parent=n,this.lastNode=null}}function moe(t,e){const n=new poe(void 0,e);return new ooe(n,e).end(t),n.root}/*!
 * -------------------------------------------------------------------------- *
 *                                                                            *
 *    Kokopu-React - A React-based library of chess-related components.       *
 *    <https://www.npmjs.com/package/kokopu-react>                            *
 *    Copyright (C) 2021-2024  Yoann Le Montagner <yo35 -at- melix.net>       *
 *                                                                            *
 *    Kokopu-React is free software: you can redistribute it and/or           *
 *    modify it under the terms of the GNU Lesser General Public License      *
 *    as published by the Free Software Foundation, either version 3 of       *
 *    the License, or (at your option) any later version.                     *
 *                                                                            *
 *    Kokopu-React is distributed in the hope that it will be useful,         *
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of          *
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the            *
 *    GNU Lesser General Public License for more details.                     *
 *                                                                            *
 *    You should have received a copy of the GNU Lesser General               *
 *    Public License along with this program. If not, see                     *
 *    <http://www.gnu.org/licenses/>.                                         *
 *                                                                            *
 * -------------------------------------------------------------------------- */var sb=function(t,e,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(t,n):s?s.value=n:e.set(t,n),n},um=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Um,Ff,zm;const goe=new Set(["br","hr","img"]);function u_(t){let e=["span","a","b","strong","i","em","del","ins","s","u","sub","sup","abbr","q","cite","mark","small"];const n={"*":["class","id","title"],a:["href","target"]};t==="comment"&&(e=e.concat(["div","h1","h2","h3","h4","h5","h6","p","br","blockquote","img","pre","ul","ol","li"]),Object.assign(n,{img:["alt","src","height","width"]}));const r=new yoe({allowedTags:e,allowedAttributes:n});return s=>r.parse(s)}class yoe{constructor({allowedTags:e,allowedAttributes:n}){Um.set(this,void 0),Ff.set(this,void 0),zm.set(this,0),sb(this,Um,e?new Set(e):new Set,"f"),sb(this,Ff,n?new Map(Object.entries(n).map(([r,s])=>[r,new Set(s)])):new Map,"f")}parse(e){const n=moe(e);if(n.type!=="root")return;const r=[];if(n.children.forEach(s=>{const i=this.processNode(s);i&&r.push(i)}),r.length!==0)return r.length===1?r[0]:P.createElement(P.Fragment,{key:this.allocateKey()},r)}processNode(e){if(e.type==="text")return e.data;if(e.type==="tag"){const n=goe.has(e.name)?void 0:e.children.map(r=>this.processNode(r));if(um(this,Um,"f").has(e.name)){const r=this.filterAttributes(e.name,e.attribs);return r.key=this.allocateKey(),P.createElement(e.name,r,n)}else return n?P.createElement(P.Fragment,{key:this.allocateKey()},n):void 0}else return}filterAttributes(e,n){const r={};for(const[s,i]of Object.entries(n))this.isAttributeAllowed(e,s)&&(r[s==="class"?"className":s]=i);return r}isAttributeAllowed(e,n){if(n==="key"||n==="ref"||n==="className")return!1;const r=um(this,Ff,"f").get(e);if(r&&r.has(n))return!0;const s=um(this,Ff,"f").get("*");return!!(s&&s.has(n))}allocateKey(){var e,n;return"auto-"+(sb(this,zm,(n=um(this,zm,"f"),e=n++,n),"f"),e)}}Um=new WeakMap,Ff=new WeakMap,zm=new WeakMap;/*!
 * -------------------------------------------------------------------------- *
 *                                                                            *
 *    Kokopu-React - A React-based library of chess-related components.       *
 *    <https://www.npmjs.com/package/kokopu-react>                            *
 *    Copyright (C) 2021-2024  Yoann Le Montagner <yo35 -at- melix.net>       *
 *                                                                            *
 *    Kokopu-React is free software: you can redistribute it and/or           *
 *    modify it under the terms of the GNU Lesser General Public License      *
 *    as published by the Free Software Foundation, either version 3 of       *
 *    the License, or (at your option) any later version.                     *
 *                                                                            *
 *    Kokopu-React is distributed in the hope that it will be useful,         *
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of          *
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the            *
 *    GNU Lesser General Public License for more details.                     *
 *                                                                            *
 *    You should have received a copy of the GNU Lesser General               *
 *    Public License along with this program. If not, see                     *
 *    <http://www.gnu.org/licenses/>.                                         *
 *                                                                            *
 * -------------------------------------------------------------------------- */class boe extends P.Component{constructor(){super(...arguments),this.navigationFieldRef=P.createRef()}render(){return P.createElement("div",{className:"kokopu-movetext"},this.renderHeaders(),this.renderBody(),this.renderNavigationField())}renderHeaders(){if(!this.props.headerVisible)return;const e=u_("header"),n=[];return n.push(this.renderPlayerHeaders(e,"w")),n.push(this.renderPlayerHeaders(e,"b")),n.push(this.renderEventRoundHeaders(e)),n.push(this.renderDateSiteHeaders(e)),n.push(this.renderAnnotatorHeader(e)),n.some(r=>r!==void 0)?P.createElement("div",{className:"kokopu-headers"},n):void 0}renderPlayerHeaders(e,n){const r=this.props.game.playerName(n);if(r===void 0)return;const s=this.props.game.playerTitle(n),i=this.props.game.playerElo(n),o=["kokopu-headerGroup-player",n==="w"?"kokopu-headerGroup-whitePlayer":"kokopu-headerGroup-blackPlayer"],a=P.createElement("span",{className:"kokopu-colorTag"}),u=P.createElement("span",{className:"kokopu-header-playerName"},e(r)),l=s===void 0?void 0:P.createElement("span",{className:"kokopu-header-playerTitle"},e(s)),c=i===void 0?void 0:P.createElement("span",{className:"kokopu-header-playerRating"},i),d=s===void 0||i===void 0?void 0:"",f=s===void 0&&i===void 0?void 0:P.createElement("span",{className:"kokopu-headerGroup-titleRating"},l,d,c);return P.createElement("div",{className:o.join(" "),key:"player-"+n},a,u,f)}renderEventRoundHeaders(e){const n=this.props.game.event();if(n===void 0)return;const r=this.props.game.fullRound(),s=r===void 0?void 0:P.createElement("span",{className:"kokopu-header-round"},r),i=P.createElement("span",{className:"kokopu-header-event"},e(n));return P.createElement("div",{className:"kokopu-headerGroup-eventRound",key:"event-round"},i,s)}renderDateSiteHeaders(e){const n=this.props.game.dateAsString(),r=this.props.game.site();if(n===void 0&&r===void 0)return;const s=n===void 0?void 0:P.createElement("span",{className:"kokopu-header-date"},voe(n)),i=r===void 0?void 0:P.createElement("span",{className:"kokopu-header-site"},e(r)),o=n===void 0||r===void 0?void 0:"";return P.createElement("div",{className:"kokopu-headerGroup-dateSite",key:"date-site"},s,o,i)}renderAnnotatorHeader(e){const n=this.props.game.annotator();if(n!==void 0)return P.createElement("div",{className:"kokopu-header-annotator",key:"annotator"},e(pF(Cr.ANNOTATED_BY,n)))}renderNavigationField(){if(this.props.interactionMode==="selectMove")return P.createElement(SF,{ref:this.navigationFieldRef,onFirstPressed:()=>this.handleNavigationPressed(Q0,"key-first"),onPreviousPressed:()=>this.handleNavigationPressed(Z0,"key-previous"),onNextPressed:()=>this.handleNavigationPressed(Qf,"key-next"),onLastPressed:()=>this.handleNavigationPressed(J0,"key-last"),onExitPressed:()=>this.handleExitPressed()})}renderBody(){const e=u_("comment");return this.renderVariation(e,this.props.game.mainVariation(),!0,this.props.game.result())}renderVariation(e,n,r,s){const i=[];let o=[];function a(){!n.isLongVariation()||o.length===0||(i.push(P.createElement("div",{className:"kokopu-moveGroup",key:"group-"+i.length},o)),o=[])}const u=this.extractComment(n);u!==void 0&&(n.isLongComment()?i.push(this.renderComment(e,n,u)):o.push(this.renderComment(e,n,u)));let l=!0,c=n.first();for(;c!==void 0;){o.push(this.renderMove(c,l));const f=this.extractComment(c);f!==void 0&&(c.isLongComment()?(a(),i.push(this.renderComment(e,c,f))):o.push(this.renderComment(e,c,f)));let h=!1;for(const p of c.variations()){const y=this.renderVariation(e,p,!1);y&&(p.isLongVariation()?(a(),i.push(y)):o.push(y),h=!0)}l=f!==void 0||h,c=c.next()}r&&s!=="*"&&o.push(P.createElement("span",{className:"kokopu-gameResult",key:"game-result"},woe(s))),a();const d=n.isLongVariation()?i:o;if(d.length!==0)return r?P.createElement("div",{className:"kokopu-variation kokopu-mainVariation",key:n.id()},d):n.isLongVariation()?P.createElement("div",{className:"kokopu-variation kokopu-subVariation",key:n.id()},d):P.createElement("span",{className:"kokopu-variation kokopu-subVariation",key:n.id()},d)}renderMove(e,n){let r;if(n||e.moveColor()==="w"){const l=e.fullMoveNumber()+(e.moveColor()==="w"?".":"");r=P.createElement("span",{className:"kokopu-moveNumber"},l)}const s=this.props.moveFormatter(e.notation()),i=e.nags().map(l=>P.createElement("span",{className:"kokopu-nag",key:l},tt.nagSymbol(l))),o=e.id(),a=["kokopu-move"];let u;return this.props.selection&&this.props.selection===o&&a.push("kokopu-selectedMove"),this.props.interactionMode==="selectMove"&&(a.push("kokopu-clickableMove"),u=()=>this.handleNodeClicked(o)),P.createElement("span",{className:a.join(" "),key:e.id()},P.createElement("span",{className:"kokopu-moveContent",onClick:u},r,P.createElement("span",{className:"kokopu-moveNotation"},s),i.length===0?void 0:i))}renderComment(e,n,r){let s;if(this.props.diagramVisible&&r.includes("[#]")){const o=[];let a=!0,u=0;for(let l of r.split("[#]")){if(!a){const c=n instanceof tt.Variation?n.initialPosition():n.position(),d=P.createElement(Kc,{position:c,squareMarkers:n.tag("csl"),arrowMarkers:n.tag("cal"),textMarkers:n.tag("ctl"),flipped:this.props.diagramOptions.flipped,squareSize:this.props.diagramOptions.squareSize,coordinateVisible:this.props.diagramOptions.coordinateVisible,turnVisible:this.props.diagramOptions.turnVisible,colorset:this.props.diagramOptions.colorset,pieceset:this.props.diagramOptions.pieceset,smallScreenLimits:this.props.diagramOptions.smallScreenLimits});o.push(P.createElement("div",{className:"kokopu-diagram",key:"diagram-"+u++},d))}a=!1,l=l.trim(),l.length!==0&&o.push(e(l))}s=o}else s=e(r);const i=n.id()+"-comment";return n.isLongComment()?P.createElement("div",{className:"kokopu-comment",key:i},s):P.createElement("span",{className:"kokopu-comment",key:i},s)}extractComment(e){let n=e.comment();return n&&(this.props.diagramVisible||(n=n.replace(/\[#\]/g," ")),n=n.replace(/\s+/g," ").trim()),n||void 0}handleNavigationPressed(e,n){this.props.selection&&this.fireMoveSelected(e(this.props.game,this.props.selection),n)}handleExitPressed(){this.props.selection&&this.props.game.findById(this.props.selection)&&this.fireMoveSelected(void 0,"key-exit")}fireMoveSelected(e,n){(e||n==="key-exit")&&this.props.onMoveSelected&&this.props.onMoveSelected(e,n)}handleNodeClicked(e){this.focus(),this.props.onMoveSelected&&this.props.onMoveSelected(e===this.props.selection?void 0:e,"click")}focus(){const e=this.navigationFieldRef.current;e&&e.focus()}}function voe(t){return t.length===0?"":t.charAt(0).toUpperCase()+t.slice(1)}function woe(t){switch(t){case"1/2-1/2":return"";case"1-0":return"10";case"0-1":return"01"}}/*!
 * -------------------------------------------------------------------------- *
 *                                                                            *
 *    Kokopu-React - A React-based library of chess-related components.       *
 *    <https://www.npmjs.com/package/kokopu-react>                            *
 *    Copyright (C) 2021-2024  Yoann Le Montagner <yo35 -at- melix.net>       *
 *                                                                            *
 *    Kokopu-React is free software: you can redistribute it and/or           *
 *    modify it under the terms of the GNU Lesser General Public License      *
 *    as published by the Free Software Foundation, either version 3 of       *
 *    the License, or (at your option) any later version.                     *
 *                                                                            *
 *    Kokopu-React is distributed in the hope that it will be useful,         *
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of          *
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the            *
 *    GNU Lesser General Public License for more details.                     *
 *                                                                            *
 *    You should have received a copy of the GNU Lesser General               *
 *    Public License along with this program. If not, see                     *
 *    <http://www.gnu.org/licenses/>.                                         *
 *                                                                            *
 * -------------------------------------------------------------------------- */class xoe extends P.Component{constructor(){super(...arguments),this.implRef=P.createRef()}render(){const e=xF(this.props.game,this.props.gameIndex,"Movetext");if(e.error)return e.errorBox;if(typeof this.props.diagramOptions!="object"||this.props.diagramOptions===null)throw new pt("Movetext","diagramOptions");const n=Gie(this.props.pieceSymbols),r=Xt(this.props.diagramVisible),s=Xt(this.props.headerVisible),i=Vr(this.props.selection,zo),o=this.getInteractionMode(),{onMoveSelected:a}=this.props;return P.createElement(boe,{ref:this.implRef,game:e.game,diagramOptions:this.props.diagramOptions,moveFormatter:n,diagramVisible:r,headerVisible:s,selection:i,interactionMode:o,onMoveSelected:a})}getInteractionMode(){const e=Vr(this.props.interactionMode,zo);if(e===void 0||e==="selectMove")return e;throw new pt("Movetext","interactionMode")}focus(){const e=this.implRef.current;e&&e.focus()}static firstNodeId(e,n){return Q0(e,n)}static previousNodeId(e,n){return Z0(e,n)}static nextNodeId(e,n){return Qf(e,n)}static lastNodeId(e,n){return J0(e,n)}}xoe.defaultProps={game:new tt.Game,gameIndex:0,diagramOptions:{},pieceSymbols:"native",diagramVisible:!0,headerVisible:!0};/*!
 * -------------------------------------------------------------------------- *
 *                                                                            *
 *    Kokopu-React - A React-based library of chess-related components.       *
 *    <https://www.npmjs.com/package/kokopu-react>                            *
 *    Copyright (C) 2021-2024  Yoann Le Montagner <yo35 -at- melix.net>       *
 *                                                                            *
 *    Kokopu-React is free software: you can redistribute it and/or           *
 *    modify it under the terms of the GNU Lesser General Public License      *
 *    as published by the Free Software Foundation, either version 3 of       *
 *    the License, or (at your option) any later version.                     *
 *                                                                            *
 *    Kokopu-React is distributed in the hope that it will be useful,         *
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of          *
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the            *
 *    GNU Lesser General Public License for more details.                     *
 *                                                                            *
 *    You should have received a copy of the GNU Lesser General               *
 *    Public License along with this program. If not, see                     *
 *    <http://www.gnu.org/licenses/>.                                         *
 *                                                                            *
 * -------------------------------------------------------------------------- */function Soe(t){return typeof t!="object"||t===null?!1:typeof t.iconPath=="string"&&(t.tooltip===void 0||typeof t.tooltip=="string")&&(t.enabled===void 0||typeof t.enabled=="boolean")&&(t.onClick===void 0||typeof t.onClick=="function")}function Aoe(t){if(Array.isArray(t)){for(const e of t)if(!(Soe(e)||e==="spacer"))return!1;return!0}else return!1}function l_(t){if(Array.isArray(t)){for(const e of t)if(!(e==="button"||e==="spacer"))return!1;return!0}else return!1}/*!
 * -------------------------------------------------------------------------- *
 *                                                                            *
 *    Kokopu-React - A React-based library of chess-related components.       *
 *    <https://www.npmjs.com/package/kokopu-react>                            *
 *    Copyright (C) 2021-2024  Yoann Le Montagner <yo35 -at- melix.net>       *
 *                                                                            *
 *    Kokopu-React is free software: you can redistribute it and/or           *
 *    modify it under the terms of the GNU Lesser General Public License      *
 *    as published by the Free Software Foundation, either version 3 of       *
 *    the License, or (at your option) any later version.                     *
 *                                                                            *
 *    Kokopu-React is distributed in the hope that it will be useful,         *
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of          *
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the            *
 *    GNU Lesser General Public License for more details.                     *
 *                                                                            *
 *    You should have received a copy of the GNU Lesser General               *
 *    Public License along with this program. If not, see                     *
 *    <http://www.gnu.org/licenses/>.                                         *
 *                                                                            *
 * -------------------------------------------------------------------------- */const Wn=2,uc=7,lc=5,Eoe=16;function fd(t,e,n){const r=t-n*Wn*Math.sqrt(2)/2,s=t-n*(uc+Wn/Math.sqrt(2)/2),i=t-n*(uc-Wn/Math.sqrt(2)/2),o=t+n*Wn*Math.sqrt(2)/2,a=e-n*(uc-Wn/Math.sqrt(2)/2),u=e-n*(uc+Wn/Math.sqrt(2)/2),l=e+n*(uc+Wn/Math.sqrt(2)/2),c=e+n*(uc-Wn/Math.sqrt(2)/2);return`M ${r} ${e} L ${s} ${a} L ${i} ${u} L ${o} ${e} L ${i} ${l} L ${s} ${c} Z`}function c_(t,e,n){const r=t-n*(lc+Wn/Math.sqrt(2)/2),s=t-n*(lc-Wn/Math.sqrt(2)/2),i=t-n*Wn/2,o=t+n*Wn/2,a=t+n*(lc-Wn/Math.sqrt(2)/2),u=t+n*(lc+Wn/Math.sqrt(2)/2),l=e-n*Wn*Math.sqrt(2)/2,c=l-n*(lc-Wn/Math.sqrt(2)/2),d=l-n*(lc+Wn/Math.sqrt(2)/2),f=d+(i-s),h=e-n*Eoe;return`M ${t} ${e} L ${r} ${c} L ${s} ${d} L ${i} ${f} V ${h} H ${o} V ${f} L ${a} ${d} L ${u} ${c} Z`}const Coe=fd(14,16,-1)+" "+fd(10,16,-1),Noe=fd(12,16,-1),_oe=fd(20,16,1),Toe=fd(18,16,1)+" "+fd(22,16,1),Ioe="M 23 16 L 12 23 V 9 Z",koe="M 11 11 H 21 V 21 H 11 Z",Roe=c_(11,25,1)+" "+c_(21,7,-1);/*!
 * -------------------------------------------------------------------------- *
 *                                                                            *
 *    Kokopu-React - A React-based library of chess-related components.       *
 *    <https://www.npmjs.com/package/kokopu-react>                            *
 *    Copyright (C) 2021-2024  Yoann Le Montagner <yo35 -at- melix.net>       *
 *                                                                            *
 *    Kokopu-React is free software: you can redistribute it and/or           *
 *    modify it under the terms of the GNU Lesser General Public License      *
 *    as published by the Free Software Foundation, either version 3 of       *
 *    the License, or (at your option) any later version.                     *
 *                                                                            *
 *    Kokopu-React is distributed in the hope that it will be useful,         *
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of          *
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the            *
 *    GNU Lesser General Public License for more details.                     *
 *                                                                            *
 *    You should have received a copy of the GNU Lesser General               *
 *    Public License along with this program. If not, see                     *
 *    <http://www.gnu.org/licenses/>.                                         *
 *                                                                            *
 * -------------------------------------------------------------------------- */function Ooe({squareSize:t,buttons:e}){const n=PF(t),r=DF(t),s=[];let i=!1;for(let o=0;o<e.length;++o){const a=e[o];a!=="spacer"&&(i&&e[o-1]==="spacer"&&s.push(P.createElement("div",{key:s.length,className:"kokopu-navigationSpacer",style:{width:r}})),i=!0,s.push(P.createElement(Poe,{key:s.length,tooltip:a.tooltip,iconPath:a.iconPath,enabled:a.enabled,onClick:a.onClick,size:n,spaceOnLeft:o===0||e[o-1]==="spacer",spaceOnRight:o===e.length-1||e[o+1]==="spacer"})))}return P.createElement("div",{className:"kokopu-navigationToolbar",style:{marginTop:LF(t)}},s)}function Poe({size:t,spaceOnLeft:e,spaceOnRight:n,iconPath:r,tooltip:s,enabled:i,onClick:o}){const a=e?"A 16 16 0 0 0 16 32":"L 1 0 L 1 32 L 16 32",u=n?"A 16 16 0 0 0 16 0":"L 31 32 L 31 0 L 16 0",l=i??!0;return P.createElement("div",{className:l?"kokopu-enabledNavigationButton":"kokopu-disabledNavigationButton",title:s,onClick:l?o:void 0},P.createElement("svg",{viewBox:"0 0 32 32",width:t,height:t},P.createElement("path",{d:`M 16 0 ${a} ${u} Z ${r}`,fill:"currentcolor"})))}function d_(t,e){const n=PF(t),r=DF(t);let s=0,i=!1;for(let o=0;o<e.length;++o)e[o]!=="spacer"&&(i&&e[o-1]==="spacer"&&(s+=r),i=!0,s+=n);return{width:s,height:n+LF(t)}}function PF(t){return Math.round((t*2+116)/7)}function DF(t){return Math.round((t*2+116)/14)}function LF(t){return Math.round((t*2+116)/28)}/*!
 * -------------------------------------------------------------------------- *
 *                                                                            *
 *    Kokopu-React - A React-based library of chess-related components.       *
 *    <https://www.npmjs.com/package/kokopu-react>                            *
 *    Copyright (C) 2021-2024  Yoann Le Montagner <yo35 -at- melix.net>       *
 *                                                                            *
 *    Kokopu-React is free software: you can redistribute it and/or           *
 *    modify it under the terms of the GNU Lesser General Public License      *
 *    as published by the Free Software Foundation, either version 3 of       *
 *    the License, or (at your option) any later version.                     *
 *                                                                            *
 *    Kokopu-React is distributed in the hope that it will be useful,         *
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of          *
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the            *
 *    GNU Lesser General Public License for more details.                     *
 *                                                                            *
 *    You should have received a copy of the GNU Lesser General               *
 *    Public License along with this program. If not, see                     *
 *    <http://www.gnu.org/licenses/>.                                         *
 *                                                                            *
 * -------------------------------------------------------------------------- */const Doe=1e3;class dw extends P.Component{constructor(e){super(e),this.navigationFieldRef=P.createRef(),this.state={nodeIdAsUncontrolled:zo(e.initialNodeId),isPlayingAsUncontrolled:Xt(e.initialIsPlaying),flippedAsUncontrolled:Xt(e.initialFlipped)}}componentWillUnmount(){this.cancelCurrentTimeout()}render(){this.cancelCurrentTimeout();const e=xF(this.props.game,this.props.gameIndex,"NavigationBoard");if(e.error)return e.errorBox;const n=Vr(this.props.nodeId,zo)??this.state.nodeIdAsUncontrolled,r=e.game.findById(n)??e.game.mainVariation(),s=Vr(this.props.isPlaying,Xt)??this.state.isPlayingAsUncontrolled,i=Vr(this.props.flipped,Xt)??this.state.flippedAsUncontrolled;return P.createElement("div",{className:"kokopu-navigationBoard"},this.renderBoard(e.game,r,s,i),this.renderNavigationField(e.game,r.id()))}renderBoard(e,n,r,s){const i=n instanceof tt.Node?n.positionBefore():n.initialPosition(),o=n instanceof tt.Node?n.notation():void 0;return P.createElement(Kc,{position:i,move:o,flipped:s,squareMarkers:n.tag("csl"),arrowMarkers:n.tag("cal"),textMarkers:n.tag("ctl"),squareSize:this.props.squareSize,coordinateVisible:this.props.coordinateVisible,turnVisible:this.props.turnVisible,colorset:this.props.colorset,pieceset:this.props.pieceset,smallScreenLimits:this.props.smallScreenLimits,moveArrowVisible:this.props.moveArrowVisible,moveArrowColor:this.props.moveArrowColor,animated:this.props.animated,bottomComponent:({squareSize:a})=>this.renderToolbar(e,n,a,r)})}renderNavigationField(e,n){return P.createElement(SF,{ref:this.navigationFieldRef,onFirstPressed:()=>this.handleNavClicked(Q0(e,n)),onPreviousPressed:()=>this.handleNavClicked(Z0(e,n)),onNextPressed:()=>this.handleNavClicked(Qf(e,n)),onLastPressed:()=>this.handleNavClicked(J0(e,n))})}renderToolbar(e,n,r,s){const i=[],o=n.id(),a=o!=="start",u=(n instanceof tt.Variation?n.first():n.next())!==void 0;if(i.push({iconPath:Coe,tooltip:Cr.TOOLTIP_GO_FIRST,enabled:a,onClick:()=>this.handleNavClicked(Q0(e,o))}),i.push({iconPath:Noe,tooltip:Cr.TOOLTIP_GO_PREVIOUS,enabled:a,onClick:()=>this.handleNavClicked(Z0(e,o))}),Xt(this.props.playButtonVisible)&&i.push({iconPath:s?koe:Ioe,tooltip:Cr.TOOLTIP_PLAY_STOP,enabled:u,onClick:()=>this.handlePlayStopClicked(!s)}),i.push({iconPath:_oe,tooltip:Cr.TOOLTIP_GO_NEXT,enabled:u,onClick:()=>this.handleNavClicked(Qf(e,o))}),i.push({iconPath:Toe,tooltip:Cr.TOOLTIP_GO_LAST,enabled:u,onClick:()=>this.handleNavClicked(J0(e,o))}),i.push("spacer"),Xt(this.props.flipButtonVisible)&&i.push({iconPath:Roe,tooltip:Cr.TOOLTIP_FLIP,onClick:()=>this.handleFlipButtonClicked()}),i.push("spacer"),s&&(u?this.timeoutId=window.setTimeout(()=>this.handleNavClicked(Qf(e,o),!1),Doe):this.timeoutId=window.setTimeout(()=>this.handlePlayStopClicked(!1,!1),0)),!Aoe(this.props.additionalButtons))throw new pt("NavigationBoard","additionalButtons");for(const l of this.props.additionalButtons)i.push(l);return P.createElement(Ooe,{squareSize:r,buttons:i})}handleNavClicked(e,n=!0){n&&this.focus(),e!==void 0&&(this.props.nodeId===void 0?this.setState({nodeIdAsUncontrolled:e}):this.props.onNodeIdChanged&&this.props.onNodeIdChanged(e))}handlePlayStopClicked(e,n=!0){n&&this.focus(),this.props.isPlaying===void 0?this.setState({isPlayingAsUncontrolled:e}):this.props.onIsPlayingChanged&&this.props.onIsPlayingChanged(e)}handleFlipButtonClicked(){this.focus(),this.props.flipped===void 0?this.setState({flippedAsUncontrolled:!this.state.flippedAsUncontrolled}):this.props.onFlippedChanged&&this.props.onFlippedChanged(!this.props.flipped)}cancelCurrentTimeout(){this.timeoutId!==void 0&&(window.clearTimeout(this.timeoutId),this.timeoutId=void 0)}focus(){const e=this.navigationFieldRef.current;e&&e.focus()}static size(e){const{squareSize:n,coordinateVisible:r,turnVisible:s,smallScreenLimits:i,playButtonVisible:o,flipButtonVisible:a,additionalButtons:u}=H0(e,()=>new pt("NavigationBoard.size()","attr")),l=Vr(o,Xt),c=Vr(a,Xt);if(u!==void 0&&!l_(u))throw new pt("NavigationBoard.size()","additionalButtons");const d=f_(l,c,u);return Kc.size({squareSize:n,coordinateVisible:r,turnVisible:s,smallScreenLimits:i,bottomComponent:({squareSize:f})=>d_(f,d)})}static adaptSquareSize(e,n,r){const{coordinateVisible:s,turnVisible:i,smallScreenLimits:o,playButtonVisible:a,flipButtonVisible:u,additionalButtons:l}=H0(r,()=>new pt("NavigationBoard.adaptSquareSize()","attr")),c=Vr(a,Xt),d=Vr(u,Xt);if(l!==void 0&&!l_(l))throw new pt("NavigationBoard.adaptSquareSize()","additionalButtons");const f=f_(c,d,l);return Kc.adaptSquareSize(e,n,{coordinateVisible:s,turnVisible:i,smallScreenLimits:o,bottomComponent:({squareSize:h})=>d_(h,f)})}}dw.defaultProps={...vF(),game:new tt.Game,gameIndex:0,initialNodeId:"start",initialIsPlaying:!1,initialFlipped:!1,playButtonVisible:!1,flipButtonVisible:!0,additionalButtons:[]};function f_(t,e,n){const r=[];if(r.push("button"),r.push("button"),(t??dw.defaultProps.playButtonVisible)&&r.push("button"),r.push("button"),r.push("button"),r.push("spacer"),(e??dw.defaultProps.flipButtonVisible)&&r.push("button"),r.push("spacer"),n!==void 0)for(const s of n)r.push(s);return r}const Zh=t=>{const e=Cd(),n=()=>E.jsx(Kc,{turnVisible:!1,squareSize:20,position:e.fen,coordinateVisible:!1}),r=()=>E.jsx("div",{className:"text-white",children:t.text.map(function(i,o){return E.jsx("div",{children:i},o)})}),s=()=>E.jsxs("div",{className:"btn-group w-100",role:"group",children:[E.jsx(wee,{setText:t.setText,playing:t.playing}),E.jsx(_L,{})]});return E.jsx("div",{ref:t.sidebarRef,className:"d-flex flex-column text-center mx-1",style:{minWidth:"200px"},children:E.jsxs("ul",{className:"nav nav-pills flex-column",children:[E.jsx("li",{className:"my-1",style:{display:t.playing?"inline-block":"none"},children:n()}),t.children,E.jsx("li",{className:"border-top"}),E.jsx("li",{className:"my-1",children:r()}),E.jsx("li",{className:"border-top"}),E.jsx("li",{className:"my-1",children:s()})]})})},FF=t=>E.jsx("div",{className:"d-flex bg-dark h-100",children:t.children}),$F=(t,e,n,r)=>{const[s,i,o,a,u]=jD(t);WD(s,e,"blue",a,u),rQ(s,n,"blue",a,u);for(let l=0;l<64;l++){let c=.1,d=-1;for(let p=0;p<12;p++)r[l][p]>c&&(c=r[l][p],d=p);if(d===-1)continue;const f=rN[d%rN.length],h=`${VD[d]}:${Math.round(100*c)}`;sQ(s,f,e[l][0]*a,e[l][1]*u,h,i,o)}},ib=(t,e,n=.6,r=.6)=>{let s=0;e.from.forEach(i=>{s+=1-Math.max(...t[i])-n});for(let i=0;i<e.to.length;i++)s+=t[e.to[i]][e.targets[i]]-r;return s},Loe=(t,e,n)=>{let r=Number.NEGATIVE_INFINITY,s=Number.NEGATIVE_INFINITY,i=Number.NEGATIVE_INFINITY,o=null,a=null;const u=new Set;return e.forEach(l=>{if(!(l.move1.sans[0]in u)){u.add(l.move1.sans[0]);const f=ib(t,l.move1);f>0&&n.add(l.move1.sans[0]),f>r&&(o=l.move1,r=f)}if(l.move2===null||l.moves===null||!n.has(l.move1.sans[0]))return;const c=ib(t,l.move2);if(c<0)return;c>s&&(s=c);const d=ib(t,l.moves);d>i&&(i=d,a=l.moves)}),{bestScore1:r,bestScore2:s,bestJointScore:i,bestMove:o,bestMoves:a}},Foe=t=>He(()=>{const n=Le(t,[0,0],[-1,1]),r=Le(t,[0,2],[-1,1]),s=Le(t,[0,3],[-1,1]),i=lt(ke(n,r),2),o=Pe(s,lt(Pe(r,n),3));return dn([i,o],1)}),BF=(t,e,n)=>He(()=>{const s=os(Foe(t),1),i=Rt(Xs(Pe(s,e)),2),o=XP(i,1),a=dn([Le(n,[0,1,0],[1,3,2]),Le(n,[0,0,0],[1,1,2])],1),u=s.shape[0],l=Bo(Pe(Le(n,[0,0,0],[1,4,1]),Le(a,[0,0,0],[1,4,1])),[2]),c=Bo(Pe(Le(n,[0,0,1],[1,4,1]),Le(a,[0,0,1],[1,4,1])),[2]),d=Bo(Pe(Le(s,[0,0,0],[u,1,1]),Le(a,[0,0,0],[1,4,1])),[2]),f=Bo(Pe(Le(s,[0,0,1],[u,1,1]),Le(a,[0,0,1],[1,4,1])),[2]),h=Pe(fe(l,f),fe(c,d));return Vo(HP(M0(h,0),1),Qe(-1),o).arraySync()}),MF=(t,e)=>{const n=oL(64,12),r=t.arraySync();for(let s=0;s<e.length;s++){const i=e[s];if(i!=-1)for(let o=0;o<12;o++)n[i][o]=Math.max(n[i][o],r[s][o])}return n},$oe=(t,e,n=.5)=>{for(let r=0;r<64;r++)for(let s=0;s<12;s++)t[r][s]=n*t[r][s]+(1-n)*e[r][s];return t},Boe=(t,e)=>{t.move(e);const n=t.history({verbose:!0}),r=n[n.length-1].lan;return t.undo(),r},VF=async(t,e,n)=>{const{image4D:r,width:s,height:i,padding:o,roi:a}=P2(e,n),u=e.current.videoWidth,l=e.current.videoHeight,c=t.current.predict(r),{boxes:d,scores:f}=D2(c,s,i,u,l,o,a);return rn([r,c]),{boxes:d,scores:f}},UF=(t,e)=>_2.map(r=>rL(t.current[r],e.current.height,e.current.width)),Moe=(t,e,n,r,s,i,o,a,u,l,c,d)=>{let f=null,h,p,y,b,g,v,w,x;const N=async()=>{if(r.current===!1||O2(e))f=null;else{if(f===null){g=UF(o,n);const se=JD(g);[f,p]=eL(se),[h,y]=tL(se),b=oL(64,12),v=new Set,x={}}const k=performance.now(),O=ld().numTensors,{boxes:_,scores:$}=await VF(t,e,g),M=BF(_,p,y),K=MF($,M);b=$oe(b,K);const{bestScore1:Z,bestScore2:ie,bestJointScore:ee,bestMove:W,bestMoves:V}=Loe(b,u.current,v),D=performance.now(),L=(1e3/(D-k)).toFixed(1);let U=!1;if(V!==null&&d!=="play"){const se=V.sans[0];U=ie>0&&ee>0&&v.has(se),U&&(a.current.move(se),v.clear(),x={})}let F=!1;if(W!==null&&!U&&Z>0){const se=W.sans[0];se in x||(x[se]=D);const he=D-x[se]>1e3,ae=Boe(a.current,se)!==l.current;F=he&&ae,F&&(a.current.move(se),x={greedyMove:x[se]})}if(U||F){const se=d==="play"?!1:F,he=M2(a.current,se);console.log("payload",he),i(V2(he))}s([`FPS: ${L}`,c.current]),$F(n.current,f,h,b),rn([_,$]);const ue=ld().numTensors;O<ue&&console.error(`Memory Leak! (${ue} > ${O})`)}w=requestAnimationFrame(N)};return w=requestAnimationFrame(N),()=>{Xx(),w&&window.cancelAnimationFrame(w)}},Voe=t=>{const e=P.useRef(t);return P.useEffect(()=>{e.current=t}),e},Uoe=(t,e=100,n=!1)=>{const r=Voe(t),s=P.useRef(),i=[e,n,r];function o(){s.current&&clearTimeout(s.current),s.current=void 0}P.useEffect(()=>o,i);function a(){s.current=void 0}return P.useCallback(function(){const u=arguments,{current:l}=s;if(l===void 0&&n)return s.current=setTimeout(a,e),r.current.apply(null,u);l&&clearTimeout(l),s.current=setTimeout(()=>{s.current=void 0,r.current.apply(null,u)},e)},i)},zoe=(t,e,n)=>{const r=P.useState(t);return[r[0],Uoe(r[1],e,n)]};function ob(t,e,n,r){const s=P.useRef(n),i=P.useRef(r);P.useEffect(()=>{s.current=n,i.current=r}),P.useEffect(()=>{const o=t&&"current"in t?t.current:t;if(!o)return;let a=0;function u(...c){a||s.current.apply(this,c)}o.addEventListener(e,u);const l=i.current;return()=>{a=1,o.removeEventListener(e,u),l&&l()}},[t,e])}const joe={},Zf=typeof window>"u"?null:window,Woe=Zf&&typeof Zf.visualViewport<"u"?Zf.visualViewport:null,h_=()=>[document.documentElement.clientWidth,document.documentElement.clientHeight],zF=function(t){t===void 0&&(t=joe);const{wait:e,leading:n,initialWidth:r=0,initialHeight:s=0}=t,[i,o]=zoe(typeof document>"u"?[r,s]:h_,e,n),a=()=>o(h_);return ob(Zf,"resize",a),ob(Woe,"resize",a),ob(Zf,"orientationchange",a),i},qoe=t=>zF(t)[1],Goe=t=>zF(t)[0],Hoe={g1:[wi.h1,wi.f1,Rf.R],c1:[wi.a1,wi.d1,Rf.R],g8:[wi.h8,wi.f8,Rf.r],c8:[wi.a8,wi.d8,Rf.r]},Koe=t=>{let e=t.piece;return t!=null&&t.promotion&&(e=t.promotion),t.color=="w"&&(e=e.toUpperCase()),Rf[e]},p_=t=>{const e=[wi[t.from]],n=[wi[t.to]],r=[Koe(t)];if(t.flags.includes("k")||t.flags.includes("q")){const[i,o,a]=Hoe[t.to];e.push(i),n.push(o),r.push(a)}else if(t.flags.includes("e")){const i=wi[t.to[0]+t.from[1]];e.push(i)}return{sans:[t.san],from:e,to:n,targets:r}},Xoe=(t,e)=>{const n=e.from.concat(e.to),r=t.from.filter(c=>!n.includes(c)),s=[],i=[];for(let c=0;c<t.to.length;c++)n.includes(t.to[c])||(s.push(t.to[c]),i.push(t.targets[c]));const o=r.concat(e.from),a=s.concat(e.to),u=i.concat(e.targets);return{sans:[t.sans[0],e.sans[0]],from:o,to:a,targets:u}},m_=t=>{const e=[];return t.moves({verbose:!0}).forEach(n=>{const r=p_(n);t.move(n);let s=!0;if(t.moves({verbose:!0}).forEach(i=>{const o=p_(i),a=Xoe(r,o),u={move1:r,move2:o,moves:a};e.push(u),s=!1}),s){const i={move1:r,move2:null,moves:null};e.push(i)}t.undo()}),e},Yoe=({piecesModelRef:t,canvasRef:e,videoRef:n,sidebarRef:r,playing:s,setPlaying:i,playingRef:o,setText:a,mode:u,cornersRef:l})=>{const c=Cd(),d=P.useRef(null),f=P.useRef(Kv(c)),h=P.useRef(m_(f.current)),p=P.useRef(c.lastMove),y=P.useRef(""),b=Goe(),g=qoe(),v=ei();P.useEffect(()=>{const ee=Kv(c);y.current=w(ee),c.greedy===!0?ee.undo():h.current=m_(ee),f.current=ee,p.current=c.lastMove},[c]);const w=ee=>{const W=ee.history();if(W.length==0)return"";if(W.length==1)return`1. ${W[W.length-1]}`;const V=W[W.length-2],D=W[W.length-1],L=Math.floor(W.length/2);return W.length%2==0?`${L}.${V} ${D}`:`${L}...${V} ${L+1}.${D}`},x=async()=>{const ee=await navigator.mediaDevices.getUserMedia(UD);return n.current!==null&&(n.current.srcObject=ee),ee},N=async()=>x(),k=()=>{let ee=(b-r.current.offsetWidth-Na)/Gv+Na;if(ee>g&&(ee=g),e.current.offsetHeight==0||e.current.offsetWidth==0)return;const W=(ee-Na)*Gv+Na,V=e.current.height,D=e.current.width;d.current.style.width=`${W}px`,d.current.style.height=`${ee}px`,d.current.width=W,d.current.height=ee,e.current.width=n.current.offsetWidth,e.current.height=n.current.offsetHeight,_2.forEach(L=>{const U=rL(l.current[L],V,D),F={xy:nL(U,e.current.height,e.current.width),key:L};v(L2(F))})};P.useEffect(()=>{k();let ee=null;u!=="upload"&&(ee=N()),Moe(t,n,e,o,a,v,l,f,h,p,y,u);const W=async()=>{const V=await ee;V!==null&&V.getTracks().forEach(D=>D.stop())};return()=>{W()}},[]),P.useEffect(()=>{k()},[b,g]),P.useEffect(()=>{u!=="upload"||n.current.src===""||(o.current===!0?n.current.pause():n.current.play())},[s]);const O={position:"absolute",left:Fm,top:Fm},_={width:"100%",height:"100%",padding:Fm},$={width:"auto",height:"100%"},M={position:"relative",backgroundColor:"#343a40"},K=()=>{u!=="upload"&&window.setTimeout(()=>{if(!n.current)return;const ee=n.current.srcObject.getVideoTracks();if(ee.length!=0){try{const W=ee[0].getCapabilities();console.log("Capabilties",W),W.zoom&&ee[0].applyConstraints({zoom:W.zoom.min})}catch{console.log("Cannot update track capabilities")}try{const W=ee[0].getSettings();console.log("Settings",W)}catch{console.log("Cannot log track settings")}}},2e3)},Z=()=>{k()},ie=()=>{u==="upload"&&(n.current.currentTime=n.current.duration,n.current.pause()),i(!1)};return E.jsx("div",{className:"d-flex align-top justify-content-center",children:E.jsxs("div",{ref:d,style:M,children:[E.jsxs("div",{style:_,children:[E.jsx("video",{ref:n,autoPlay:u!=="upload",playsInline:!0,muted:!0,onLoadedMetadata:K,style:$,onCanPlay:Z,onEnded:ie}),E.jsx("canvas",{ref:e,style:O})]}),E.jsx(dte,{})]})})};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qoe=X();Qoe.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var Fr;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"})(Fr||(Fr={}));var g_;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(g_||(g_={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zoe={};function jF(t){return Zoe[t]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A(t,e,n,r,s){const i=e.inputParams[t];if(i&&i.inputIndexStart!==void 0){const a=i.inputIndexStart,u=i.inputIndexEnd===0?void 0:i.inputIndexEnd===void 0?a+1:i.inputIndexEnd,l=a<0?e.inputNames.length+a:a;if(i.type==="tensor")return On(e.inputNames[l],n,r,s);if(i.type==="tensors"){const f=e.inputs.slice(a,u);return e.inputNames.slice(a,u).filter((p,y)=>{var b;return((b=f[y])===null||b===void 0?void 0:b.op)!=="NoOp"}).map(p=>On(p,n,r,s))}const c=On(e.inputNames[l],n,r,s),d=c.dataSync();return i.type==="number"?d[0]:xv(c.shape,d)}const o=e.attrParams[t];return o&&o.value}function On(t,e,n,r){const[s,i]=Br(t,n);if(r!=null){const a=r.getHashTableHandleByName(s);if(a!=null)return a}const o=n.currentContextIds.find(a=>!!e[eg(s,a)]);return o!==void 0?e[eg(s,o)][i]:void 0}function y_(t,e,n){return e[eg(t,n.currentContextId)]}function Po(t,e){const[n,r,s]=Br(t,e);return[eg(n,e&&e.currentContextId),r,s]}function eg(t,e){return e?`${t}-${e}`:t}function Br(t,e){if(t==="")return["",0,void 0];const n=e!=null&&e.parseNodeNameCache!=null;if(n){const i=e.parseNodeNameCache.get(t);if(i!=null)return i}const r=t.split(":");let s;if(r.length===1)s=[t,0,void 0];else{const i=r[0],o=r.length===3?r[1]:void 0,a=Number(r[r.length-1]);s=[i,a,o]}return n&&e.parseNodeNameCache.set(t,s),s}function jm(t,e,n){let r=A("pad",t,e,n);if(r==="explicit"){r=A("explicitPaddings",t,e,n);const s=[[0,0],[0,0],[0,0],[0,0]];for(let i=0;i<4;i++)s[i][0]=r[i*2],s[i][1]=r[i*2+1];return s}return r}function Do(t){return t.kept?t:Va(t)}/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Joe=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],eae=Object.freeze(Object.defineProperty({__proto__:null,json:Joe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tae=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],nae=Object.freeze(Object.defineProperty({__proto__:null,json:tae},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rae=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],sae=Object.freeze(Object.defineProperty({__proto__:null,json:rae},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iae=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],oae=Object.freeze(Object.defineProperty({__proto__:null,json:iae},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aae=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],uae=Object.freeze(Object.defineProperty({__proto__:null,json:aae},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lae=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],cae=Object.freeze(Object.defineProperty({__proto__:null,json:lae},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dae=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],fae=Object.freeze(Object.defineProperty({__proto__:null,json:dae},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hae=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],pae=Object.freeze(Object.defineProperty({__proto__:null,json:hae},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mae=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],gae=Object.freeze(Object.defineProperty({__proto__:null,json:mae},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yae=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],bae=Object.freeze(Object.defineProperty({__proto__:null,json:yae},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vae=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],wae=Object.freeze(Object.defineProperty({__proto__:null,json:vae},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xae=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],Sae=Object.freeze(Object.defineProperty({__proto__:null,json:xae},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Aae=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],Eae=Object.freeze(Object.defineProperty({__proto__:null,json:Aae},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cae=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],Nae=Object.freeze(Object.defineProperty({__proto__:null,json:Cae},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _ae=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],Tae=Object.freeze(Object.defineProperty({__proto__:null,json:_ae},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Iae=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],kae=Object.freeze(Object.defineProperty({__proto__:null,json:Iae},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rae=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],Oae=Object.freeze(Object.defineProperty({__proto__:null,json:Rae},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pae=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],Dae=Object.freeze(Object.defineProperty({__proto__:null,json:Pae},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lae=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],Fae=Object.freeze(Object.defineProperty({__proto__:null,json:Lae},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class b_{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[eae,nae,sae,oae,uae,cae,fae,pae,gae,bae,wae,Sae,Eae,Nae,Tae,kae,Oae,Dae,Fae],n=[].concat(...e.map(r=>r.json));this.opMappers=n.reduce((r,s)=>(r[s.tfOpName]=s,r),{})}transformGraph(e,n={}){const r=e.node,s=[],i=[],o=[],a=r.reduce((y,b)=>(y[b.name]=this.mapNode(b),b.op.startsWith("Placeholder")?s.push(y[b.name]):b.op==="Const"?i.push(y[b.name]):(b.input==null||b.input.length===0)&&o.push(y[b.name]),y),{});let u=[];const l=[];let c={},d={};n!=null&&(c=this.mapSignatureEntries(n.inputs),d=this.mapSignatureEntries(n.outputs));const f=Object.keys(a);f.forEach(y=>{const b=a[y];b.inputNames.forEach((g,v)=>{const[w,,x]=Po(g),N=a[w];if(N.outputs!=null){const k=N.outputs.indexOf(x);if(k!==-1){const O=`${w}:${k}`;b.inputNames[v]=O}}b.inputs.push(N),N.children.push(b)})}),Object.keys(d).length===0?f.forEach(y=>{const b=a[y];b.children.length===0&&l.push(b)}):Object.keys(d).forEach(y=>{const[b]=Po(y),g=a[b];g!=null&&(g.signatureKey=d[y],l.push(g))}),Object.keys(c).length>0?Object.keys(c).forEach(y=>{const[b]=Po(y),g=a[b];g&&(g.signatureKey=c[y],u.push(g))}):u=s;let h={};e.library!=null&&e.library.function!=null&&(h=e.library.function.reduce((y,b)=>(y[b.signature.name]=this.mapFunction(b),y),{}));const p={nodes:a,inputs:u,outputs:l,weights:i,placeholders:s,signature:n,functions:h};return o.length>0&&(p.initNodes=o),p}mapSignatureEntries(e){return Object.keys(e||{}).reduce((n,r)=>(n[e[r].name]=r,n),{})}mapNode(e){const n=jF(e.op)||this.opMappers[e.op]||{};e.attr==null&&(e.attr={});const r={name:e.name,op:e.op,category:n.category,inputNames:(e.input||[]).map(s=>s.startsWith("^")?s.slice(1):s),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:n.outputs};return n.inputs!=null&&(r.inputParams=n.inputs.reduce((s,i)=>(s[i.name]={type:i.type,inputIndexStart:i.start,inputIndexEnd:i.end},s),{})),n.attrs!=null&&(r.attrParams=n.attrs.reduce((s,i)=>{const o=i.type;let a;switch(i.type){case"string":a=fw(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=fw(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"string[]":a=vw(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=vw(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"number":a=pw(e.attr,i.tfName,i.defaultValue||0),a===void 0&&i.tfDeprecatedName&&(a=pw(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"number[]":a=bw(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=bw(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool":a=hw(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=hw(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool[]":a=xw(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=xw(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape":a=yw(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=yw(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape[]":a=ww(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=ww(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype":a=mw(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=mw(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype[]":a=gw(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=gw(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"func":a=v_(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=v_(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${i.type} for op: ${e.op}`)}return s[i.name]={value:a,type:o},s},{})),r}mapFunction(e){const n=e.nodeDef,r=[],s=[];let i={};n!=null&&(i=n.reduce((d,f)=>(d[f.name]=this.mapNode(f),f.op==="Const"&&s.push(d[f.name]),d),{}));const o=[],a=[];e.signature.inputArg.forEach(d=>{const[f]=Po(d.name),h={name:f,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:iS(d.type),type:"dtype"}},children:[]};h.signatureKey=d.name,o.push(h),i[f]=h}),Object.keys(i).forEach(d=>{const f=i[d];f.inputNames.forEach((h,p)=>{const[y,,b]=Po(h),g=i[y];if(g.outputs!=null){const v=g.outputs.indexOf(b);if(v!==-1){const w=`${y}:${v}`;f.inputNames[p]=w}}f.inputs.push(g),g.children.push(f)})});const l=e.ret;e.signature.outputArg.forEach(d=>{const[f,h]=Po(l[d.name]),p=i[f];p!=null&&(p.defaultOutput=h,a.push(p))});const c=this.mapArgsToSignature(e);return{nodes:i,inputs:o,outputs:a,weights:s,placeholders:r,signature:c}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r),n),{}),outputs:e.signature.outputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r,e.ret),n),{})}}mapArgToTensorInfo(e,n){let r=e.name;return n!=null&&(r=n[r]),{name:r,dtype:e.type}}}function $ae(t){const e=X().global;if(typeof e.atob<"u")return e.atob(t);if(typeof Buffer<"u")return new Buffer(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function WF(t,e){const n=Array.isArray(t)?String.fromCharCode.apply(null,t):$ae(t);return e?n:n.toLowerCase()}function fw(t,e,n,r=!1){const s=t[e];return s!=null?WF(s.s,r):n}function hw(t,e,n){const r=t[e];return r?r.b:n}function pw(t,e,n){const r=t[e]||{},s=r.i!=null?r.i:r.f!=null?r.f:n;return typeof s=="number"?s:parseInt(s,10)}function iS(t){switch(typeof t=="string"&&(t=Fr[t]),t){case Fr.DT_FLOAT:case Fr.DT_HALF:return"float32";case Fr.DT_INT32:case Fr.DT_INT64:case Fr.DT_INT8:case Fr.DT_UINT8:return"int32";case Fr.DT_BOOL:return"bool";case Fr.DT_DOUBLE:return"float32";case Fr.DT_STRING:return"string";case Fr.DT_COMPLEX64:case Fr.DT_COMPLEX128:return"complex64";default:return null}}function v_(t,e,n){const r=t[e];return r&&r.func?r.func.name:n}function mw(t,e,n){const r=t[e];return r&&r.type?iS(r.type):n}function gw(t,e,n){const r=t[e];return r&&r.list&&r.list.type?r.list.type.map(s=>iS(s)):n}function qF(t){if(!t.unknownRank)return t.dim!=null?t.dim.map(e=>typeof e.size=="number"?e.size:parseInt(e.size,10)):[]}function yw(t,e,n){const r=t[e];return r&&r.shape?qF(r.shape):n}function bw(t,e,n){const r=t[e];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(s=>typeof s=="number"?s:parseInt(s,10)):n}function vw(t,e,n,r=!1){const s=t[e];return s&&s.list&&s.list.s?s.list.s.map(i=>WF(i,r)):n}function ww(t,e,n){const r=t[e];return r&&r.list&&r.list.shape?r.list.shape.map(s=>qF(s)):n}function xw(t,e,n){const r=t[e];return r&&r.list&&r.list.b?r.list.b:n}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Bae{constructor(e,n,r){this.node=e,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(s=>this.getInput(s)),e.rawAttrs!=null&&(this.attrs=Object.keys(e.rawAttrs).reduce((s,i)=>(s[i]=this.getAttr(i),s),{}))}getInput(e){return On(e,this.tensorMap,this.context)}getAttr(e,n){const r=this.node.rawAttrs[e];if(r.tensor!=null)return On(e,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return pw(this.node.rawAttrs,e,n);if(r.s!=null)return fw(this.node.rawAttrs,e,n);if(r.b!=null)return hw(this.node.rawAttrs,e,n);if(r.shape!=null)return yw(this.node.rawAttrs,e,n);if(r.type!=null)return mw(this.node.rawAttrs,e,n);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return bw(this.node.rawAttrs,e,n);if(r.list.s!=null)return vw(this.node.rawAttrs,e,n);if(r.list.shape!=null)return ww(this.node.rawAttrs,e,n);if(r.list.b!=null)return xw(this.node.rawAttrs,e,n);if(r.list.type!=null)return gw(this.node.rawAttrs,e,n)}return n}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $n=Object.freeze(Object.defineProperty({__proto__:null,OP_SCOPE_SUFFIX:RP,abs:ss,acos:bj,acosh:wj,add:ke,addN:Sj,all:Ej,any:HP,argMax:KP,argMin:XP,asin:Ij,asinh:Rj,atan:Pj,atan2:Lj,atanh:$j,avgPool:QP,avgPool3d:qj,basicLSTMCell:Zj,batchNorm:Lg,batchNorm2d:rW,batchNorm3d:iW,batchNorm4d:aW,batchToSpaceND:ZP,bincount:JP,bitwiseAnd:cW,booleanMaskAsync:XH,broadcastArgs:fW,broadcastTo:Kf,buffer:Ht,cast:cn,ceil:mW,clipByValue:yW,clone:Va,complex:Ha,concat:dn,concat1d:vW,concat2d:xW,concat3d:AW,concat4d:CW,conv1d:TW,conv2d:Fg,conv2dTranspose:RW,conv3d:PW,conv3dTranspose:$W,cos:MW,cosh:UW,cosineWindow:g2,cumprod:jW,cumsum:qW,denseBincount:HW,depthToSpace:XW,depthwiseConv2d:Jx,diag:ZW,dilation2d:e9,div:lt,divNoNan:i9,dot:a9,dropout:uK,einsum:hc,elu:r4,enclosingPowerOfTwo:R4,ensureShape:d9,equal:n4,erf:h9,euclideanNorm:S9,exp:gl,expandDims:os,expm1:N9,eye:o4,fft:h2,fill:Hh,floor:a4,floorDiv:GP,fused:AK,gather:B0,gatherND:iK,greater:Bg,greaterEqual:u4,ifft:j0,imag:Mg,image:b2,inTopKAsync:cK,irfft:E4,isFinite:L9,isInf:$9,isNaN:M9,leakyRelu:l4,less:M0,lessEqual:n2,linalg:nY,linspace:j9,localResponseNormalization:q9,log:Eh,log1p:c4,logSigmoid:Z9,logSoftmax:tq,logSumExp:f4,logicalAnd:V0,logicalNot:h4,logicalOr:p4,logicalXor:aq,losses:rY,lowerBound:lq,matMul:bt,max:Zu,maxPool:m4,maxPool3d:fq,maxPoolWithArgmax:pq,maximum:g4,mean:U0,meshgrid:yq,min:Vv,minimum:z0,mirrorPad:wq,mod:Sq,moments:Eq,movingAverage:ZH,mul:fe,multiRNNCell:Nq,multinomial:Tq,neg:lo,norm:$g,notEqual:y4,oneHot:Rq,ones:Ku,onesLike:Pq,op:B,outerProduct:Lq,pad:Sd,pad1d:Bq,pad2d:Vq,pad3d:zq,pad4d:Wq,pool:Xq,pow:Ah,prelu:v4,print:qP,prod:Zq,raggedGather:eG,raggedRange:nG,raggedTensorToTensor:sG,rand:oG,randomGamma:NG,randomNormal:x4,randomStandardNormal:IG,randomUniform:f2,randomUniformInt:OG,range:Ch,real:Nh,reciprocal:LG,relu:Vg,relu6:S4,reshape:te,reverse:yl,reverse1d:VG,reverse2d:zG,reverse3d:WG,reverse4d:GG,rfft:p2,round:A4,rsqrt:XG,scalar:Qe,scatterND:eK,searchSorted:r2,selu:QG,separableConv2d:JG,setdiff1dAsync:tH,sigmoid:jc,sign:rH,signal:tY,sin:iH,sinh:aH,slice:Le,slice1d:lH,slice2d:dH,slice3d:hH,slice4d:mH,softmax:yH,softplus:d4,spaceToBatchND:b4,sparse:sY,sparseToDense:rK,spectral:eY,split:_h,sqrt:Ko,square:Xs,squaredDifference:C4,squeeze:Bo,stack:Yo,step:N4,stridedSlice:TH,string:iY,sub:Pe,sum:Rt,tan:kH,tanh:Mv,tensor:uo,tensor1d:qs,tensor2d:Ju,tensor3d:_4,tensor4d:RH,tensor5d:OH,tensor6d:PH,tensorScatterUpdate:LH,tile:Xf,topk:$H,transpose:W0,truncatedNormal:MH,unique:UH,unsortedSegmentSum:jH,unstack:kl,upperBound:qH,variable:GH,where:Vo,whereAsync:k4,zeros:Xa,zerosLike:ds},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mae=(t,e,n,r=$n)=>{switch(t.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(A("a",t,e,n),A("b",t,e,n))];case"AddN":return[r.addN(A("tensors",t,e,n))];case"FloorMod":case"Mod":return[r.mod(A("a",t,e,n),A("b",t,e,n))];case"Mul":return[r.mul(A("a",t,e,n),A("b",t,e,n))];case"RealDiv":case"Div":return[r.div(A("a",t,e,n),A("b",t,e,n))];case"DivNoNan":return[r.divNoNan(A("a",t,e,n),A("b",t,e,n))];case"FloorDiv":return[r.floorDiv(A("a",t,e,n),A("b",t,e,n))];case"Sub":return[r.sub(A("a",t,e,n),A("b",t,e,n))];case"Minimum":return[r.minimum(A("a",t,e,n),A("b",t,e,n))];case"Maximum":return[r.maximum(A("a",t,e,n),A("b",t,e,n))];case"Pow":return[r.pow(A("a",t,e,n),A("b",t,e,n))];case"SquaredDifference":return[r.squaredDifference(A("a",t,e,n),A("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vae=(t,e,n,r=$n)=>{switch(t.op){case"Abs":case"ComplexAbs":return[r.abs(A("x",t,e,n))];case"Acos":return[r.acos(A("x",t,e,n))];case"Acosh":return[r.acosh(A("x",t,e,n))];case"Asin":return[r.asin(A("x",t,e,n))];case"Asinh":return[r.asinh(A("x",t,e,n))];case"Atan":return[r.atan(A("x",t,e,n))];case"Atan2":return[r.atan2(A("x",t,e,n),A("y",t,e,n))];case"Atanh":return[r.atanh(A("x",t,e,n))];case"Ceil":return[r.ceil(A("x",t,e,n))];case"Complex":return[r.complex(A("real",t,e,n),A("imag",t,e,n))];case"Cos":return[r.cos(A("x",t,e,n))];case"Cosh":return[r.cosh(A("x",t,e,n))];case"Elu":return[r.elu(A("x",t,e,n))];case"Erf":return[r.erf(A("x",t,e,n))];case"Exp":return[r.exp(A("x",t,e,n))];case"Expm1":return[r.expm1(A("x",t,e,n))];case"Floor":return[r.floor(A("x",t,e,n))];case"Log":return[r.log(A("x",t,e,n))];case"Log1p":return[r.log1p(A("x",t,e,n))];case"Imag":return[r.imag(A("x",t,e,n))];case"Neg":return[r.neg(A("x",t,e,n))];case"Reciprocal":return[r.reciprocal(A("x",t,e,n))];case"Real":return[r.real(A("x",t,e,n))];case"Relu":return[r.relu(A("x",t,e,n))];case"Round":return[r.round(A("x",t,e,n))];case"Selu":return[r.selu(A("x",t,e,n))];case"Sigmoid":return[r.sigmoid(A("x",t,e,n))];case"Sin":return[r.sin(A("x",t,e,n))];case"Sign":return[r.sign(A("x",t,e,n))];case"Sinh":return[r.sinh(A("x",t,e,n))];case"Softplus":return[r.softplus(A("x",t,e,n))];case"Sqrt":return[r.sqrt(A("x",t,e,n))];case"Square":return[r.square(A("x",t,e,n))];case"Tanh":return[r.tanh(A("x",t,e,n))];case"Tan":return[r.tan(A("x",t,e,n))];case"ClipByValue":return[r.clipByValue(A("x",t,e,n),A("clipValueMin",t,e,n),A("clipValueMax",t,e,n))];case"Relu6":return[r.relu6(A("x",t,e,n))];case"Rsqrt":return[r.rsqrt(On(t.inputNames[0],e,n))];case"LeakyRelu":return[r.leakyRelu(A("x",t,e,n),A("alpha",t,e,n))];case"Prelu":return[r.prelu(A("x",t,e,n),A("alpha",t,e,n))];case"IsNan":return[r.isNaN(On(t.inputNames[0],e,n))];case"IsInf":return[r.isInf(On(t.inputNames[0],e,n))];case"IsFinite":return[r.isFinite(On(t.inputNames[0],e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bs(t,e,n=""){if(!(typeof t=="number"||typeof e=="number")){R(t.length===e.length,()=>n+` Shapes ${t} and ${e} must match`);for(let r=0;r<t.length;r++){const s=t[r],i=e[r];R(s<0||i<0||s===i,()=>n+` Shapes ${t} and ${e} must match`)}}}function w_(t){return!(typeof t=="number"||t.some(e=>e<0))}function Sf(t,e,n){let r=Sw(t,n);const s=!w_(r);if(s&&e.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(s&&e.forEach(i=>{r=Sw(i.shape,r)}),!w_(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function Sw(t,e){if(typeof t=="number")return e;if(typeof e=="number")return t;if(t.length!==e.length)throw new Error(`Incompatible ranks during merge: ${t} vs. ${e}`);const n=[];for(let r=0;r<t.length;++r){const s=t[r],i=e[r];if(s>=0&&i>=0&&s!==i)throw new Error(`Incompatible shape during merge: ${t} vs. ${e}`);n[r]=s>=0?s:i}return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Uae{constructor(e,n,r,s,i,o,a){this.name=e,this.dtype=n,this.maxSize=r,this.elementShape=s,this.identicalElementShapes=i,this.dynamicSize=o,this.clearAfterRead=a,this.tensors=[],this.closed_=!1,this.idTensor=Qe(0),to(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.tensor.id))&&n.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const n=this.tensors[e];if(n.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(n.cleared=!0),n.read=!0,n.tensor}readMany(e){return e.map(n=>this.read(n))}write(e,n){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);const r=this.tensors[e]||{};if(n.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},
          because the value dtype is ${n.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=n.shape),Bs(this.elementShape,n.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),r.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(r.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);r.tensor=n,to(n),r.written=!0,this.tensors[e]=r}writeMany(e,n){if(e.length!==n.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${n.length}.`);e.forEach((r,s)=>this.write(r,n[s]))}gather(e,n){if(n&&n!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${n}`);if(e)e=e.slice(0,this.size());else{e=[];for(let s=0;s<this.size();s++)e.push(s)}if(e.length===0)return uo([],[0].concat(this.elementShape));const r=this.readMany(e);return Bs(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),Yo(r,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(this.size()===0)return uo([],[0].concat(this.elementShape));const n=[];for(let s=0;s<this.size();s++)n.push(s);const r=this.readMany(n);return Bs(this.elementShape,r[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${r[0].shape})`),dn(r,0)}scatter(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);if(e.length!==n.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${n.shape[0]}`);const r=Math.max(...e);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(e,kl(n,0))}split(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);let r=0;const s=e.map(u=>(r+=u,r));if(r!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${n.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);const i=r===0?0:n.size/r,o=[];He(()=>{n=te(n,[1,r,i]);for(let u=0;u<e.length;++u){const c=[0,u===0?0:s[u-1],0],d=[1,e[u],i];o[u]=te(Le(n,c,d),this.elementShape)}return o});const a=[];for(let u=0;u<e.length;u++)a[u]=u;this.writeMany(a,o)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xl{get id(){return this.idTensor.id}constructor(e,n,r,s=-1){this.tensors=e,this.elementShape=n,this.elementDtype=r,e!=null&&e.forEach(i=>{if(r!==i.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${i.dtype}`);Bs(n,i.shape,"TensorList shape mismatch: "),to(i)}),this.idTensor=Qe(0),this.maxNumElements=s,to(this.idTensor)}copy(){return new xl([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.id))&&n.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,n,r=-1){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(r!==-1&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);Bs(e,this.elementShape,"TensorList shape mismatch: ");const s=Sf(this.elementShape,this.tensors,e);return He(()=>{const i=this.tensors.map(o=>te(o,s));return Yo(i,0)})}popBack(e,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");const r=Sf(this.elementShape,this.tensors,e),s=this.tensors.pop();return s.kept=!1,Bs(s.shape,e,"TensorList shape mismatch: "),te(s,r)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(Bs(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");to(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(this.maxNumElements!==-1&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);const n=new xl([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=e;for(let r=0;r<Math.min(this.tensors.length,e);++r)n.tensors[r]=this.tensors[r];return n}getItem(e,n,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(this.tensors[e]==null)throw new Error(`element at index ${e} is null.`);Bs(this.tensors[e].shape,n,"TensorList shape mismatch: ");const s=Sf(this.elementShape,this.tensors,n);return te(this.tensors[e],s)}setItem(e,n){if(n.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${this.elementDtype}`);if(e<0||this.maxNumElements!==-1&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);Bs(this.elementShape,n.shape,"TensorList shape mismatch: "),to(n),this.tensors[e]!=null&&(this.tensors[e].kept=!1),this.tensors[e]=n}gather(e,n,r){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);Bs(this.elementShape,r,"TensorList shape mismatch: "),e=e.slice(0,this.size());const s=Sf(this.elementShape,this.tensors,r);return e.length===0?uo([],[0].concat(s)):He(()=>{const i=e.map(o=>te(this.tensors[o],s));return Yo(i,0)})}concat(e,n){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);Bs(this.elementShape,n,"TensorList shape mismatch: ");const r=Sf(this.elementShape,this.tensors,n);return this.size()===0?uo([],[0].concat(r)):He(()=>{const s=this.tensors.map(i=>te(i,r));return dn(s,0)})}}function zae(t,e,n){const r=t.dtype;if(t.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${t.shape}`);if(t.dtype!==n)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${n}`);const s=t.shape.slice(1);Bs(s,e,"TensorList shape mismatch: ");const i=kl(t);return new xl(i,e,r)}function jae(t,e,n,r){return new xl([],t,e,r)}function Wae(t,e,n,r){if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const s=Math.max(...e);if(r!=null&&r!==-1&&s>=r)throw new Error(`Max index must be < array size (${s}  vs. ${r})`);const i=new xl([],n,t.dtype,r),o=kl(t,0);return e.forEach((a,u)=>{i.setItem(a,o[u])}),i}function qae(t,e,n){let r=0;const s=e.map(c=>(r+=c,r));if(r!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${t.shape}`);const i=t.shape.slice(1),o=Sw(i,n),a=r===0?0:t.size/r,u=He(()=>{const c=[];t=te(t,[1,r,a]);for(let d=0;d<e.length;++d){const h=[0,d===0?0:s[d-1],0],p=[1,e[d],a];c[d]=te(Le(t,h,p),o)}return t.dispose(),c}),l=new xl([],n,t.dtype,e.length);for(let c=0;c<u.length;c++)l.setItem(c,u[c]);return l}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gae=async(t,e,n)=>{switch(t.op){case"If":case"StatelessIf":{const r=A("thenBranch",t,e,n),s=A("elseBranch",t,e,n),i=A("cond",t,e,n),o=A("args",t,e,n);return(await i.data())[0]?n.functionMap[r].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap):n.functionMap[s].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const r=A("body",t,e,n),s=A("cond",t,e,n),i=A("args",t,e,n),o=await n.functionMap[s].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap),a=i.map(c=>c.id);let u=await o[0].data();o.forEach(c=>{!c.kept&&a.indexOf(c.id)===-1&&c.dispose()});let l=i;for(;u[0];){const c=l;l=await n.functionMap[r].executeFunctionAsync(l,n.tensorArrayMap,n.tensorListMap);const d=l.map(h=>h.id);c.forEach(h=>{!h.kept&&a.indexOf(h.id)===-1&&d.indexOf(h.id)===-1&&h.dispose()});const f=await n.functionMap[s].executeFunctionAsync(l,n.tensorArrayMap,n.tensorListMap);u=await f[0].data(),f.forEach(h=>{!h.kept&&a.indexOf(h.id)===-1&&d.indexOf(h.id)===-1&&h.dispose()})}return l}case"LoopCond":{const r=A("pred",t,e,n);return[Do(r)]}case"Switch":{const r=A("pred",t,e,n);let s=A("data",t,e,n);return s.kept||(s=Do(s)),(await r.data())[0]?[void 0,s]:[s,void 0]}case"Merge":{const r=t.inputNames.find(s=>On(s,e,n)!==void 0);if(r){const s=On(r,e,n);return[Do(s)]}return}case"Enter":{const r=A("frameName",t,e,n),s=A("tensor",t,e,n);return n.enterFrame(r),[Do(s)]}case"Exit":{const r=A("tensor",t,e,n);return n.exitFrame(),[Do(r)]}case"NextIteration":{const r=A("tensor",t,e,n);return n.nextIteration(),[Do(r)]}case"TensorArrayV3":{const r=A("size",t,e,n),s=A("dtype",t,e,n),i=A("elementShape",t,e,n),o=A("dynamicSize",t,e,n),a=A("clearAfterRead",t,e,n),u=A("identicalElementShapes",t,e,n),l=A("name",t,e,n),c=new Uae(l,s,r,i,u,o,a);return n.addTensorArray(c),[c.idTensor,Qe(1)]}case"TensorArrayWriteV3":{const r=A("tensorArrayId",t,e,n),s=A("index",t,e,n),i=A("tensor",t,e,n),o=n.getTensorArray(r.id);return o.write(s,i),[o.idTensor]}case"TensorArrayReadV3":{const r=A("tensorArrayId",t,e,n),s=A("index",t,e,n);return[n.getTensorArray(r.id).read(s)]}case"TensorArrayGatherV3":{const r=A("tensorArrayId",t,e,n),s=A("indices",t,e,n),i=A("dtype",t,e,n);return[n.getTensorArray(r.id).gather(s,i)]}case"TensorArrayScatterV3":{const r=A("tensorArrayId",t,e,n),s=A("indices",t,e,n),i=A("tensor",t,e,n),o=n.getTensorArray(r.id);return o.scatter(s,i),[o.idTensor]}case"TensorArrayConcatV3":{const r=A("tensorArrayId",t,e,n),s=n.getTensorArray(r.id),i=A("dtype",t,e,n);return[s.concat(i)]}case"TensorArraySplitV3":{const r=A("tensorArrayId",t,e,n),s=A("tensor",t,e,n),i=A("lengths",t,e,n),o=n.getTensorArray(r.id);return o.split(i,s),[o.idTensor]}case"TensorArraySizeV3":{const r=A("tensorArrayId",t,e,n),s=n.getTensorArray(r.id);return[Qe(s.size(),"int32")]}case"TensorArrayCloseV3":{const r=A("tensorArrayId",t,e,n),s=n.getTensorArray(r.id);return s.clearAndClose(),[s.idTensor]}case"TensorListSetItem":{const r=A("tensorListId",t,e,n),s=A("index",t,e,n),i=A("tensor",t,e,n),o=n.getTensorList(r.id);return o.setItem(s,i),[o.idTensor]}case"TensorListGetItem":{const r=A("tensorListId",t,e,n),s=A("index",t,e,n),i=A("elementShape",t,e,n),o=A("elementDType",t,e,n);return[n.getTensorList(r.id).getItem(s,i,o)]}case"TensorListScatterV2":case"TensorListScatter":{const r=A("indices",t,e,n),s=A("tensor",t,e,n),i=A("elementShape",t,e,n),o=A("numElements",t,e,n),a=Wae(s,r,i,o);return n.addTensorList(a),[a.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=A("elementShape",t,e,n),s=A("elementDType",t,e,n);let i;t.op==="TensorListReserve"?i="numElements":i="maxNumElements";const o=A(i,t,e,n),a=t.op==="TensorListReserve"?-1:o,u=jae(r,s,o,a);return n.addTensorList(u),[u.idTensor]}case"TensorListGather":{const r=A("tensorListId",t,e,n),s=A("indices",t,e,n),i=A("elementShape",t,e,n),o=A("elementDType",t,e,n);return[n.getTensorList(r.id).gather(s,o,i)]}case"TensorListStack":{const r=A("tensorListId",t,e,n),s=A("elementShape",t,e,n),i=A("elementDType",t,e,n),o=A("numElements",t,e,n);return[n.getTensorList(r.id).stack(s,i,o)]}case"TensorListFromTensor":{const r=A("tensor",t,e,n),s=A("elementShape",t,e,n),i=A("elementDType",t,e,n),o=zae(r,s,i);return n.addTensorList(o),[o.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const r=A("tensorListId",t,e,n),s=n.getTensorList(r.id),i=A("dtype",t,e,n),o=A("elementShape",t,e,n);return[s.concat(i,o)]}case"TensorListPushBack":{const r=A("tensorListId",t,e,n),s=A("tensor",t,e,n),i=n.getTensorList(r.id);return i.pushBack(s),[i.idTensor]}case"TensorListPopBack":{const r=A("tensorListId",t,e,n),s=A("elementShape",t,e,n),i=A("elementDType",t,e,n);return[n.getTensorList(r.id).popBack(s,i)]}case"TensorListSplit":{const r=A("tensor",t,e,n),s=A("elementShape",t,e,n),i=A("lengths",t,e,n),o=qae(r,i,s);return n.addTensorList(o),[o.idTensor]}case"TensorListLength":{const r=A("tensorListId",t,e,n),s=n.getTensorList(r.id);return[Qe(s.size(),"int32")]}case"TensorListResize":{const r=A("tensorListId",t,e,n),s=A("size",t,e,n),o=n.getTensorList(r.id).resize(s);return n.addTensorList(o),[o.idTensor]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x_(t,e,n){const[r,s]=A("fusedOps",t,e,n),i=r==="biasadd",o=!i,a=s==="prelu",u=r==="fusedbatchnorm",l=A("numArgs",t,e,n);if(i){if(a&&l!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&i&&l!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(u)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const c=A("strides",t,e,n),d=jm(t,e,n),f=A("dataFormat",t,e,n).toUpperCase(),h=A("dilations",t,e,n);let[p,y]=A("args",t,e,n);o&&(y=p,p=void 0);const b=A("leakyreluAlpha",t,e,n);return{stride:c,pad:d,dataFormat:f,dilations:h,biasArg:p,preluArg:y,activationFunc:s,leakyreluAlpha:b}}const Hae=(t,e,n,r=$n)=>{switch(t.op){case"Conv1D":{const s=A("stride",t,e,n),i=A("pad",t,e,n),o=A("dataFormat",t,e,n).toUpperCase(),a=A("dilation",t,e,n);return[r.conv1d(A("x",t,e,n),A("filter",t,e,n),s,i,o,a)]}case"Conv2D":{const s=A("strides",t,e,n),i=jm(t,e,n),o=A("dataFormat",t,e,n).toUpperCase(),a=A("dilations",t,e,n);return[r.conv2d(A("x",t,e,n),A("filter",t,e,n),[s[1],s[2]],i,o,[a[1],a[2]])]}case"_FusedConv2D":{const{stride:s,pad:i,dataFormat:o,dilations:a,biasArg:u,preluArg:l,activationFunc:c,leakyreluAlpha:d}=x_(t,e,n);return[r.fused.conv2d({x:A("x",t,e,n),filter:A("filter",t,e,n),strides:[s[1],s[2]],pad:i,dataFormat:o,dilations:[a[1],a[2]],bias:u,activation:c,preluActivationWeights:l,leakyreluAlpha:d})]}case"FusedDepthwiseConv2dNative":{const{stride:s,pad:i,dataFormat:o,dilations:a,biasArg:u,preluArg:l,activationFunc:c,leakyreluAlpha:d}=x_(t,e,n);return[r.fused.depthwiseConv2d({x:A("x",t,e,n),filter:A("filter",t,e,n),strides:[s[1],s[2]],pad:i,dataFormat:o,dilations:[a[1],a[2]],bias:u,activation:c,preluActivationWeights:l,leakyreluAlpha:d})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const s=A("outputShape",t,e,n),i=A("strides",t,e,n),o=jm(t,e,n);return[r.conv2dTranspose(A("x",t,e,n),A("filter",t,e,n),s,[i[1],i[2]],o)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const s=A("strides",t,e,n),i=jm(t,e,n),o=A("dilations",t,e,n),a=A("dataFormat",t,e,n).toUpperCase();return[r.depthwiseConv2d(A("input",t,e,n),A("filter",t,e,n),[s[1],s[2]],i,a,[o[1],o[2]])]}case"Conv3D":{const s=A("strides",t,e,n),i=A("pad",t,e,n),o=A("dataFormat",t,e,n).toUpperCase(),a=A("dilations",t,e,n);return[r.conv3d(A("x",t,e,n),A("filter",t,e,n),[s[1],s[2],s[3]],i,o,[a[1],a[2],a[3]])]}case"AvgPool":{const s=A("strides",t,e,n),i=A("pad",t,e,n),o=A("kernelSize",t,e,n);return[r.avgPool(A("x",t,e,n),[o[1],o[2]],[s[1],s[2]],i)]}case"MaxPool":{const s=A("strides",t,e,n),i=A("pad",t,e,n),o=A("kernelSize",t,e,n);return[r.maxPool(A("x",t,e,n),[o[1],o[2]],[s[1],s[2]],i)]}case"MaxPoolWithArgmax":{const s=A("strides",t,e,n),i=A("pad",t,e,n),o=A("kernelSize",t,e,n),a=A("includeBatchInIndex",t,e,n),{result:u,indexes:l}=r.maxPoolWithArgmax(A("x",t,e,n),[o[1],o[2]],[s[1],s[2]],i,a);return[u,l]}case"AvgPool3D":{const s=A("strides",t,e,n),i=A("pad",t,e,n),o=A("kernelSize",t,e,n);return[r.avgPool3d(A("x",t,e,n),[o[1],o[2],o[3]],[s[1],s[2],s[3]],i)]}case"MaxPool3D":{const s=A("strides",t,e,n),i=A("pad",t,e,n),o=A("kernelSize",t,e,n);return[r.maxPool3d(A("x",t,e,n),[o[1],o[2],o[3]],[s[1],s[2],s[3]],i)]}case"Dilation2D":{const s=A("strides",t,e,n),i=A("pad",t,e,n),o=A("dilations",t,e,n),a=s[1],u=s[2],l=o[1],c=o[2];return[r.dilation2d(A("x",t,e,n),A("filter",t,e,n),[a,u],i,[l,c],"NHWC")]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kae=(t,e,n,r=$n)=>{switch(t.op){case"Fill":{const s=A("shape",t,e,n),i=A("dtype",t,e,n),o=A("value",t,e,n);return[r.fill(s,o,i)]}case"LinSpace":{const s=A("start",t,e,n),i=A("stop",t,e,n),o=A("num",t,e,n);return[r.linspace(s,i,o)]}case"Multinomial":{const s=A("logits",t,e,n),i=A("numSamples",t,e,n),o=A("seed",t,e,n);return[r.multinomial(s,i,o)]}case"OneHot":{const s=A("indices",t,e,n),i=A("depth",t,e,n),o=A("onValue",t,e,n),a=A("offValue",t,e,n),u=A("dtype",t,e,n);return[r.oneHot(s,i,o,a,u)]}case"Ones":return[r.ones(A("shape",t,e,n),A("dtype",t,e,n))];case"OnesLike":return[r.onesLike(A("x",t,e,n))];case"RandomStandardNormal":return[r.randomStandardNormal(A("shape",t,e,n),A("dtype",t,e,n),A("seed",t,e,n))];case"RandomUniform":return[r.randomUniform(A("shape",t,e,n),A("minval",t,e,n),A("maxval",t,e,n),A("dtype",t,e,n))];case"RandomUniformInt":return[r.randomUniformInt(A("shape",t,e,n),A("minval",t,e,n),A("maxval",t,e,n),A("seed",t,e,n))];case"Range":{const s=A("start",t,e,n),i=A("stop",t,e,n),o=A("step",t,e,n);return[r.range(s,i,o,A("dtype",t,e,n))]}case"TruncatedNormal":{const s=A("shape",t,e,n),i=A("mean",t,e,n),o=A("stdDev",t,e,n),a=A("seed",t,e,n);return[r.truncatedNormal(s,i,o,A("dtype",t,e,n),a)]}case"Zeros":return[r.zeros(A("shape",t,e,n),A("dtype",t,e,n))];case"ZerosLike":return[r.zerosLike(A("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ab(t,e,n){const r=A("boxes",t,e,n),s=A("scores",t,e,n),i=A("maxOutputSize",t,e,n),o=A("iouThreshold",t,e,n),a=A("scoreThreshold",t,e,n),u=A("softNmsSigma",t,e,n);return{boxes:r,scores:s,maxOutputSize:i,iouThreshold:o,scoreThreshold:a,softNmsSigma:u}}const Xae=async(t,e,n,r,s=$n)=>{switch(t.op){case"NonMaxSuppressionV5":{const{boxes:i,scores:o,maxOutputSize:a,iouThreshold:u,scoreThreshold:l,softNmsSigma:c}=ab(t,e,n),d=await s.image.nonMaxSuppressionWithScoreAsync(i,o,a,u,l,c);return[d.selectedIndices,d.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:i,scores:o,maxOutputSize:a,iouThreshold:u,scoreThreshold:l}=ab(t,e,n),c=A("padToMaxOutputSize",t,e,n),d=await s.image.nonMaxSuppressionPaddedAsync(i,o,a,u,l,c);return[d.selectedIndices,d.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:i,scores:o,maxOutputSize:a,iouThreshold:u,scoreThreshold:l}=ab(t,e,n);return[await s.image.nonMaxSuppressionAsync(i,o,a,u,l)]}case"Where":{const i=s.cast(A("condition",t,e,n),"bool"),o=[await s.whereAsync(i)];return i.dispose(),o}case"ListDiff":return s.setdiff1dAsync(A("x",t,e,n),A("y",t,e,n));default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yae=(t,e,n,r=$n)=>{switch(t.op){case"LowerBound":{const s=A("sortedSequence",t,e,n),i=A("values",t,e,n);return[r.lowerBound(s,i)]}case"TopKV2":{const s=A("x",t,e,n),i=A("k",t,e,n),o=A("sorted",t,e,n),a=r.topk(s,i,o);return[a.values,a.indices]}case"UpperBound":{const s=A("sortedSequence",t,e,n),i=A("values",t,e,n);return[r.upperBound(s,i)]}case"Unique":{const s=A("x",t,e,n),i=r.unique(s);return[i.values,i.indices]}case"UniqueV2":{const s=A("x",t,e,n),i=A("axis",t,e,n),o=r.unique(s,i);return[o.values,o.indices]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qae=(t,e,n,r=$n)=>{switch(t.op){case"Const":return e[t.name];case"PlaceholderWithDefault":const s=A("default",t,e,n);return[On(t.name,e,n)||s];case"Placeholder":return[On(t.name,e,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const c=A("x",t,e,n);return[Do(c)]}case"IdentityN":return A("x",t,e,n).map(c=>Do(c));case"Snapshot":const i=A("x",t,e,n);return[Do(i)];case"Shape":return[r.tensor1d(A("x",t,e,n).shape,"int32")];case"ShapeN":return A("x",t,e,n).map(c=>r.tensor1d(c.shape));case"Size":return[r.scalar(A("x",t,e,n).size,"int32")];case"Rank":return[r.scalar(A("x",t,e,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":const o=A("x",t,e,n),a=A("data",t,e,n),u=A("message",t,e,n),l=A("summarize",t,e,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(u);for(let c=0;c<a.length;c++)console.log(Array.prototype.slice.call(a[c].dataSync()).slice(0,l));return[o];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Zae{get id(){return this.handle.id}constructor(e,n){this.keyDType=e,this.valueDType=n,this.handle=Qe(0),this.tensorMap=new Map,to(this.handle)}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return Qe(this.size(),"int32")}async import(e,n){this.checkKeyAndValueTensor(e,n);const r=await e.data();return this.tensorMap.forEach(s=>s.dispose()),this.tensorMap.clear(),He(()=>{const s=kl(n),i=r.length,o=s.length;R(i===o,()=>`The number of elements doesn't match, keys has ${i} elements, the values has ${o} elements.`);for(let a=0;a<i;a++){const u=r[a],l=s[a];to(l),this.tensorMap.set(u,l)}return this.handle})}async find(e,n){this.checkKeyAndValueTensor(e,n);const r=await e.data();return He(()=>{const s=[];for(let i=0;i<r.length;i++){const o=r[i],a=this.findWithDefault(o,n);s.push(a)}return Yo(s)})}findWithDefault(e,n){const r=this.tensorMap.get(e);return r??n}checkKeyAndValueTensor(e,n){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(n.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${n.dtype}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jae=async(t,e,n,r)=>{switch(t.op){case"HashTable":case"HashTableV2":{const s=r.getHashTableHandleByName(t.name);if(s!=null)return[s];{const i=A("keyDType",t,e,n),o=A("valueDType",t,e,n),a=new Zae(i,o);return r.addHashTable(t.name,a),[a.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{const s=A("tableHandle",t,e,n,r),i=A("keys",t,e,n),o=A("values",t,e,n);return[await r.getHashTableById(s.id).import(i,o)]}case"LookupTableFind":case"LookupTableFindV2":{const s=A("tableHandle",t,e,n,r),i=A("keys",t,e,n),o=A("defaultValue",t,e,n);return[await r.getHashTableById(s.id).find(i,o)]}case"LookupTableSize":case"LookupTableSizeV2":{const s=A("tableHandle",t,e,n,r);return[r.getHashTableById(s.id).tensorSize()]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eue=(t,e,n,r=$n)=>{switch(t.op){case"ResizeBilinear":{const s=A("images",t,e,n),i=A("size",t,e,n),o=A("alignCorners",t,e,n),a=A("halfPixelCenters",t,e,n);return[r.image.resizeBilinear(s,[i[0],i[1]],o,a)]}case"ResizeNearestNeighbor":{const s=A("images",t,e,n),i=A("size",t,e,n),o=A("alignCorners",t,e,n),a=A("halfPixelCenters",t,e,n);return[r.image.resizeNearestNeighbor(s,[i[0],i[1]],o,a)]}case"CropAndResize":{const s=A("image",t,e,n),i=A("boxes",t,e,n),o=A("boxInd",t,e,n),a=A("cropSize",t,e,n),u=A("method",t,e,n),l=A("extrapolationValue",t,e,n);return[r.image.cropAndResize(s,i,o,a,u,l)]}case"ImageProjectiveTransformV3":{const s=A("images",t,e,n),i=A("transforms",t,e,n),o=A("outputShape",t,e,n),a=A("fillValue",t,e,n),u=A("interpolation",t,e,n),l=A("fillMode",t,e,n);return[r.image.transform(s,i,u.toLowerCase(),l.toLowerCase(),a,o)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tue=(t,e,n,r=$n)=>{switch(t.op){case"Equal":return[r.equal(A("a",t,e,n),A("b",t,e,n))];case"NotEqual":return[r.notEqual(A("a",t,e,n),A("b",t,e,n))];case"Greater":return[r.greater(A("a",t,e,n),A("b",t,e,n))];case"GreaterEqual":return[r.greaterEqual(A("a",t,e,n),A("b",t,e,n))];case"Less":return[r.less(A("a",t,e,n),A("b",t,e,n))];case"LessEqual":return[r.lessEqual(A("a",t,e,n),A("b",t,e,n))];case"LogicalAnd":return[r.logicalAnd(A("a",t,e,n),A("b",t,e,n))];case"LogicalNot":return[r.logicalNot(A("a",t,e,n))];case"LogicalOr":return[r.logicalOr(A("a",t,e,n),A("b",t,e,n))];case"Select":case"SelectV2":return[r.where(A("condition",t,e,n),A("a",t,e,n),A("b",t,e,n))];case"BitwiseAnd":return[r.bitwiseAnd(A("a",t,e,n),A("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nue=(t,e,n,r=$n)=>{switch(t.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(A("a",t,e,n),A("b",t,e,n),A("transposeA",t,e,n),A("transposeB",t,e,n))];case"Einsum":return[r.einsum(A("equation",t,e,n),...A("tensors",t,e,n))];case"Transpose":return[r.transpose(A("x",t,e,n),A("perm",t,e,n))];case"_FusedMatMul":const[s,i]=A("fusedOps",t,e,n),o=s==="biasadd",a=i==="prelu",u=A("numArgs",t,e,n),l=A("leakyreluAlpha",t,e,n);if(o){if(a&&u!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&u!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[c,d]=A("args",t,e,n);return[r.fused.matMul({a:A("a",t,e,n),b:A("b",t,e,n),transposeA:A("transposeA",t,e,n),transposeB:A("transposeB",t,e,n),bias:c,activation:i,preluActivationWeights:d,leakyreluAlpha:l})];case"MatrixBandPart":return[r.linalg.bandPart(A("a",t,e,n),A("numLower",t,e,n),A("numUpper",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rue=(t,e,n,r=$n)=>{switch(t.op){case"EuclideanNorm":return[r.euclideanNorm(A("x",t,e,n),A("axis",t,e,n),A("keepDims",t,e,n))];case"FusedBatchNorm":case"FusedBatchNormV2":return[r.batchNorm(A("x",t,e,n),A("mean",t,e,n),A("variance",t,e,n),A("offset",t,e,n),A("scale",t,e,n),A("epsilon",t,e,n))];case"FusedBatchNormV3":return[r.batchNorm(A("x",t,e,n),A("mean",t,e,n),A("variance",t,e,n),A("offset",t,e,n),A("scale",t,e,n),A("epsilon",t,e,n))];case"LRN":return[r.localResponseNormalization(A("x",t,e,n),A("radius",t,e,n),A("bias",t,e,n),A("alpha",t,e,n),A("beta",t,e,n))];case"Softmax":return[r.softmax(A("x",t,e,n))];case"LogSoftmax":return[r.logSoftmax(A("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sue=(t,e,n,r=$n)=>{switch(t.op){case"RaggedGather":{const{outputNestedSplits:s,outputDenseValues:i}=r.raggedGather(A("paramsNestedSplits",t,e,n),A("paramsDenseValues",t,e,n),A("indices",t,e,n),A("outputRaggedRank",t,e,n));return s.concat(i)}case"RaggedRange":{const{rtNestedSplits:s,rtDenseValues:i}=r.raggedRange(A("starts",t,e,n),A("limits",t,e,n),A("splits",t,e,n));return[s,i]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(A("shape",t,e,n),A("values",t,e,n),A("defaultValue",t,e,n),A("rowPartitionTensors",t,e,n),A("rowPartitionTypes",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iue=(t,e,n,r=$n)=>{switch(t.op){case"Max":{const a=A("axis",t,e,n),u=A("keepDims",t,e,n);return[r.max(A("x",t,e,n),a,u)]}case"Mean":{const a=A("axis",t,e,n),u=A("keepDims",t,e,n);return[r.mean(A("x",t,e,n),a,u)]}case"Min":{const a=A("axis",t,e,n),u=A("keepDims",t,e,n);return[r.min(A("x",t,e,n),a,u)]}case"Sum":{const a=A("axis",t,e,n),u=A("keepDims",t,e,n);return[r.sum(A("x",t,e,n),a,u)]}case"All":{const a=A("axis",t,e,n),u=A("keepDims",t,e,n);return[r.all(A("x",t,e,n),a,u)]}case"Any":{const a=A("axis",t,e,n),u=A("keepDims",t,e,n);return[r.any(A("x",t,e,n),a,u)]}case"ArgMax":{const a=A("axis",t,e,n);return[r.argMax(A("x",t,e,n),a)]}case"ArgMin":{const a=A("axis",t,e,n);return[r.argMin(A("x",t,e,n),a)]}case"Prod":{const a=A("axis",t,e,n),u=A("keepDims",t,e,n);return[r.prod(A("x",t,e,n),a,u)]}case"Cumprod":{const a=A("axis",t,e,n),u=A("exclusive",t,e,n),l=A("reverse",t,e,n);return[r.cumprod(A("x",t,e,n),a,u,l)]}case"Cumsum":{const a=A("axis",t,e,n),u=A("exclusive",t,e,n),l=A("reverse",t,e,n);return[r.cumsum(A("x",t,e,n),a,u,l)]}case"Bincount":const s=A("x",t,e,n),i=A("weights",t,e,n),o=A("size",t,e,n);return[r.bincount(s,i,o)];case"DenseBincount":{const a=A("x",t,e,n),u=A("weights",t,e,n),l=A("size",t,e,n),c=A("binaryOutput",t,e,n);return[r.denseBincount(a,u,l,c)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oue=(t,e,n,r=$n)=>{switch(t.op){case"ConcatV2":case"Concat":{const s=A("n",t,e,n),i=A("axis",t,e,n);let o=A("tensors",t,e,n);return o=o.slice(0,s),[r.concat(o,i)]}case"Gather":{const s=A("x",t,e,n),i=A("indices",t,e,n);return[r.gather(s,r.cast(i,"int32"),0)]}case"GatherV2":{const s=A("axis",t,e,n),i=A("batchDims",t,e,n),o=A("x",t,e,n),a=A("indices",t,e,n);return[r.gather(o,r.cast(a,"int32"),s,i)]}case"Reverse":{const s=A("dims",t,e,n),i=[];for(let a=0;a<s.length;a++)s[a]&&i.push(a);const o=A("x",t,e,n);return[r.reverse(o,i)]}case"ReverseV2":{const s=A("axis",t,e,n),i=A("x",t,e,n);return[r.reverse(i,s)]}case"Slice":{const s=A("begin",t,e,n),i=A("size",t,e,n);return[r.slice(A("x",t,e,n),s,i)]}case"StridedSlice":{const s=A("begin",t,e,n),i=A("end",t,e,n),o=A("strides",t,e,n),a=A("beginMask",t,e,n),u=A("endMask",t,e,n),l=A("ellipsisMask",t,e,n),c=A("newAxisMask",t,e,n),d=A("shrinkAxisMask",t,e,n),f=A("x",t,e,n);return[r.stridedSlice(f,s,i,o,a,u,l,c,d)]}case"Pack":return He(()=>{const s=A("axis",t,e,n),i=A("tensors",t,e,n),o=i[0].shape,a=r.squeeze(i[0]).shape,u=i.map(l=>{const c=Gt(l.shape,o);if(!c&&!Gt(r.squeeze(l).shape,a))throw new Error("the input tensors shape does not match");return c?l:r.reshape(l,o)});return[r.stack(u,s)]});case"Unpack":{const s=A("axis",t,e,n),i=A("tensor",t,e,n);return r.unstack(i,s)}case"Tile":{const s=A("reps",t,e,n);return[r.tile(A("x",t,e,n),s)]}case"Split":case"SplitV":{const s=A("axis",t,e,n),i=A("numOrSizeSplits",t,e,n),o=A("x",t,e,n);return r.split(o,i,s)}case"ScatterNd":{const s=A("indices",t,e,n),i=A("values",t,e,n),o=A("shape",t,e,n);return[r.scatterND(s,i,o)]}case"GatherNd":{const s=A("x",t,e,n),i=A("indices",t,e,n);return[r.gatherND(s,i)]}case"SparseToDense":{const s=A("sparseIndices",t,e,n),i=A("outputShape",t,e,n),o=A("sparseValues",t,e,n),a=A("defaultValue",t,e,n);return[r.sparseToDense(s,o,i,o.dtype===a.dtype?a:r.cast(a,o.dtype))]}case"TensorScatterUpdate":{const s=A("indices",t,e,n),i=A("values",t,e,n),o=A("tensor",t,e,n);return[r.tensorScatterUpdate(o,s,i)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aue=(t,e,n,r=$n)=>{switch(t.op){case"SparseFillEmptyRows":{const{outputIndices:s,outputValues:i,emptyRowIndicator:o,reverseIndexMap:a}=r.sparse.sparseFillEmptyRows(A("indices",t,e,n),A("values",t,e,n),A("denseShape",t,e,n),A("defaultValue",t,e,n));return[s,i,o,a]}case"SparseReshape":{const{outputIndices:s,outputShape:i}=r.sparse.sparseReshape(A("inputIndices",t,e,n),A("inputShape",t,e,n),A("newShape",t,e,n));return[s,i]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(A("data",t,e,n),A("indices",t,e,n),A("segmentIds",t,e,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(A("data",t,e,n),A("indices",t,e,n),A("segmentIds",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uue=(t,e,n,r=$n)=>{switch(t.op){case"FFT":return[r.fft(A("x",t,e,n))];case"IFFT":return[r.ifft(A("x",t,e,n))];case"RFFT":return[r.rfft(A("x",t,e,n))];case"IRFFT":return[r.irfft(A("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lue=(t,e,n,r=$n)=>{switch(t.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(A("input",t,e,n),A("pattern",t,e,n),A("rewrite",t,e,n),A("replaceGlobal",t,e,n))];case"StringNGrams":{const{nGrams:s,nGramsSplits:i}=r.string.stringNGrams(A("data",t,e,n),A("dataSplits",t,e,n),A("separator",t,e,n),A("nGramWidths",t,e,n),A("leftPad",t,e,n),A("rightPad",t,e,n),A("padWidth",t,e,n),A("preserveShortSequences",t,e,n));return[s,i]}case"StringSplit":{const{indices:s,values:i,shape:o}=r.string.stringSplit(A("input",t,e,n),A("delimiter",t,e,n),A("skipEmpty",t,e,n));return[s,i,o]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(A("input",t,e,n),A("numBuckets",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cue=(t,e,n,r=$n)=>{switch(t.op){case"Cast":return[r.cast(A("x",t,e,n),A("dtype",t,e,n))];case"ExpandDims":{const s=A("axis",t,e,n);return[r.expandDims(A("x",t,e,n),s)]}case"Squeeze":{const s=A("axis",t,e,n);return[r.squeeze(A("x",t,e,n),s)]}case"Reshape":return[r.reshape(A("x",t,e,n),A("shape",t,e,n))];case"EnsureShape":return[r.ensureShape(A("x",t,e,n),A("shape",t,e,n))];case"MirrorPad":return[r.mirrorPad(A("x",t,e,n),A("padding",t,e,n),A("mode",t,e,n))];case"PadV2":case"Pad":return[r.pad(A("x",t,e,n),A("padding",t,e,n),A("constantValue",t,e,n))];case"SpaceToBatchND":{const s=A("blockShape",t,e,n),i=A("paddings",t,e,n);return[r.spaceToBatchND(A("x",t,e,n),s,i)]}case"BatchToSpaceND":{const s=A("blockShape",t,e,n),i=A("crops",t,e,n);return[r.batchToSpaceND(A("x",t,e,n),s,i)]}case"DepthToSpace":{const s=A("blockSize",t,e,n),i=A("dataFormat",t,e,n).toUpperCase();return[r.depthToSpace(A("x",t,e,n),s,i)]}case"BroadcastTo":return[r.broadcastTo(A("x",t,e,n),A("shape",t,e,n))];case"BroadcastArgs":return[r.broadcastArgs(A("s0",t,e,n),A("s1",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S_(t,e,n,r,s=He){const i=((o,a,u)=>{switch(o.category){case"arithmetic":return s(()=>Mae(o,a,u));case"basic_math":return s(()=>Vae(o,a,u));case"control":return Gae(o,a,u);case"convolution":return s(()=>Hae(o,a,u));case"creation":return s(()=>Kae(o,a,u));case"dynamic":return Xae(o,a,u);case"evaluation":return s(()=>Yae(o,a,u));case"image":return s(()=>eue(o,a,u));case"graph":return s(()=>Qae(o,a,u));case"logical":return s(()=>tue(o,a,u));case"matrices":return s(()=>nue(o,a,u));case"normalization":return s(()=>rue(o,a,u));case"ragged":return s(()=>sue(o,a,u));case"reduction":return s(()=>iue(o,a,u));case"slice_join":return s(()=>oue(o,a,u));case"sparse":return s(()=>aue(o,a,u));case"spectral":return s(()=>uue(o,a,u));case"string":return s(()=>lue(o,a,u));case"transformation":return s(()=>cue(o,a,u));case"hash_table":return Jae(o,a,u,r);case"custom":const l=jF(o.op);if(l&&l.customExecutor)return l.customExecutor(new Bae(o,a,u));throw TypeError(`Custom op ${o.op} is not registered.`);default:throw TypeError(`Unknown op '${o.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(t,e,n);return cl(i)?i.then(o=>[].concat(o)):[].concat(i)}class A_{constructor(e={},n={},r={},s={},i){this.weightMap=e,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=s,this.parseNodeNameCache=i,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,n){return{id:e,frameName:n,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let n=0;n<this.contexts.length-1;n++){const r=this.contexts.slice(0,this.contexts.length-n);e.push(this.contextIdforContexts(r))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(n=>n.id===0&&n.iterationId===0?"":`${n.frameName}-${n.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const n in this.tensorArrayMap)this.tensorArrayMap[n].clearAndClose(e);for(const n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E_(t,e,n,r){const s=new Set,i=[];let o=null,a=null;const u=new Set,l=new Set(Object.keys(t).map(f=>Br(f)[0]));r=r||[];const c=new Set(r.map(f=>Br(f.name)[0])),d=[...e];for(;d.length>0;){const f=d.pop();if((Mu(f)||bue(f)||vue(f))&&o==null&&(o=f,a=o.children.map(h=>h.name).filter(h=>s.has(h))),s.add(f.name),n[f.name]==null&&!l.has(f.name)&&!c.has(f.name)){if(f.inputs.length===0){i.push(f.name);continue}f.inputs.forEach(h=>{u.has(h.name)||(u.add(h.name),d.push(h))})}}return{inputs:t,outputs:e,usedNodes:s,missingInputs:i,dynamicNode:o,syncInputs:a}}function due(t,e){const{usedNodes:n,inputs:r}=e,s=Object.keys(r).map(b=>Br(b)[0]).map(b=>t.nodes[b]),i=t.initNodes||[],o=b=>n.has(typeof b=="string"?b:b.name);function a(b){return[...new Map(b.map(g=>[g.name,g])).values()]}const u=a([...s,...t.weights,...i]).filter(o),l=a([...u,...Object.values(t.nodes)]).filter(o),c=new Map(l.map(b=>[b.name,b])),d={};for(const b of l){d[b.name]=d[b.name]||0;for(const g of b.children)o(g)||(d[g.name]=Number.POSITIVE_INFINITY),d[g.name]=(d[g.name]||0)+1}const f=Object.entries(d).filter(([,b])=>b===0).map(([b])=>b),h=[...f];for(;f.length>0;){const b=f.pop(),g=c.get(b);for(const v of g.children.filter(o))--d[v.name]===0&&(h.push(v.name),f.push(v.name))}const p=h.map(b=>c.get(b)),y=fue(p,u);return hue(y,u),y}function fue(t,e){const n=new Map(t.map(o=>[o.name,o])),r=e.map(o=>o.name),s=new Set(r);for(;r.length>0;){const o=r.pop(),a=n.get(o);for(const u of a.children)!n.has(u.name)||s.has(u.name)||(s.add(u.name),r.push(u.name))}return t.filter(o=>s.has(o.name))}class lm extends Error{constructor(e){super(`NodesExecutionOrderError: ${e}`)}}function hue(t,e){const n=new Map(t.map((a,u)=>[a.name,u])),r=new Set(e.map(a=>a.name)),s=a=>r.has(typeof a=="string"?a:a.name),i=new Set(t.map(a=>a.name)),o=a=>i.has(typeof a=="string"?a:a.name);for(const a of t){for(const u of a.children.filter(o)){if(!n.has(u.name))throw new lm(`Child ${u.name} of node ${a.name} is unreachable.`);if(n.get(a.name)>n.get(u.name))throw new lm(`Node ${a.name} is scheduled to run after its child ${u.name}.`)}if(!s(a))for(const u of a.inputs){if(!n.has(u.name))throw new lm(`Input ${u.name} of node ${a.name} is unreachable.`);if(n.get(u.name)>n.get(a.name))throw new lm(`Node ${a.name} is scheduled to run before its input ${u.name}.`)}}}function pue(t){const e=new Map(t.map((a,u)=>[a.name,u])),n=Number.MAX_SAFE_INTEGER,r=t.map((a,u)=>Mu(a)?n:u),s=a=>{const u=r[e.get(a.name)];return u??-1},i=t.map((a,u)=>a.children.map(s).reduce((l,c)=>Math.max(l,c),r[u])),o=new Map;for(let a=0;a<t.length;++a){const u=i[a];if(u===n)continue;const l=t[a],c=t[u];o.has(c.name)||o.set(c.name,[]),o.get(c.name).push(l)}return o}const mue=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),gue=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),yue=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function Mu(t){return mue.has(t.op)}function bue(t){return gue.has(t.op)}function vue(t){return yue.has(t.op)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tg{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const n=Object.keys(e).map(r=>e[r].map(s=>s.id));this._weightIds=[].concat(...n),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{const n=e.signatureKey||e.name;return e.defaultOutput?`${n}:${e.defaultOutput}`:n})}get functions(){return Object.keys(this._functions).reduce((e,n)=>(e[n]=this._functions[n].signature,e),{})}constructor(e,n){this.graph=e,this.parent=n,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,e.functions!=null&&Object.keys(e.functions).forEach(r=>{this._functionExecutorMap[r]=new tg(e.functions[r],this)})}getCompilationKey(e,n){const r=e.map(i=>i.name).sort(),s=n.map(i=>i.name).sort();return r.join(this.SEPARATOR)+"--"+s.join(this.SEPARATOR)}compile(e,n){const r=E_(e,n,this.weightMap,this._initNodes),{missingInputs:s,dynamicNode:i,syncInputs:o}=r;if(i!=null)throw new Error(`This execution contains the node '${i.name}', which has the dynamic op '${i.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${o}]`);if(s.length>0){const l=n.map(d=>d.name),c=Object.keys(e);throw new Error(`Cannot compute the outputs [${l}] from the provided inputs [${c}]. Missing the following inputs: [${s}]`)}const a=due(this.graph,r),u=pue(a);return{orderedNodes:a,nodeLiveUntilMap:u}}cloneAndKeepTensor(e){if(e==null)return null;const n=e.clone();return to(n),n}cloneTensorList(e){return e?e.map(r=>this.cloneAndKeepTensor(r)):null}cloneTensorMap(e){return Object.fromEntries(Object.entries(e).map(([n,r])=>[n,this.cloneTensorList(r)]))}execute(e,n){this.disposeIntermediateTensors(),e=this.mapInputs(e);const r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n);const s=r.map(f=>this.graph.nodes[Br(f)[0]]),i=n.map(f=>Br(f)[0]),o=new Set(i);let a=i.map(f=>this.graph.nodes[f]);a.length===0&&(a=this._outputs);const u=this.getCompilationKey(s,a);let l=this.compiledMap.get(u);l==null&&(l=this.compile(e,a),this.compiledMap.set(u,l));try{this.keepIntermediateTensors=X().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(f){this.keepIntermediateTensors=!1,console.warn(f.message)}const c={},d={};return He(()=>{const f=new A_(this.weightMap,c,d,this.functionExecutorMap,this.parseNodeNameCache),h=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(e).forEach(g=>{const[v,w]=Br(g,f),x=[];x[w]=e[g],h[v]=x,this.keepIntermediateTensors&&(this.clonedTensorsMap[v]=this.cloneTensorList(x))});const p=this.getFrozenTensorIds(h),{orderedNodes:y,nodeLiveUntilMap:b}=l;for(const g of y){if(h[g.name])continue;const v=S_(g,h,f,this._resourceManager);if(cl(v))throw new Error(`The execution of the op '${g.op}' returned a promise. Please use model.executeAsync() instead.`);h[g.name]=v,this.keepIntermediateTensors&&(this.clonedTensorsMap[g.name]=this.cloneTensorList(v)),this.checkTensorForDisposalWithNodeLiveUntilInfo(g,h,f,p,o,b.get(g.name))}return this.parent==null&&f.dispose(p),n.map(g=>On(g,h,f))})}getFrozenTensorIds(e){const n=[].concat.apply([],Object.keys(e).map(r=>e[r]).map(r=>r.map(s=>s.id)));return new Set(n)}checkTensorForDisposal(e,n,r,s,i,o,a){if(!(Mu(n)||o.has(e))){for(const u of r[e])u!=null&&(a[u.id]=(a[u.id]||0)+n.children.length);for(const u of n.inputs){if(Mu(u))continue;const l=y_(u.name,r,s);if(l!=null)for(const c of l){if(!c||c.kept||i.has(c.id))continue;const d=a[c.id];d===1?(c.dispose(),delete a[c.id]):d!=null&&a[c.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(e,n,r,s,i,o){function a(u){return Mu(u)||i.has(u.name)}if(!(Mu(e)||o==null))for(const u of o){if(a(u))continue;const l=y_(u.name,n,r);for(const c of l)!c||c.kept||s.has(c.id)||c.dispose()}}async executeAsync(e,n){return this._executeAsync(e,n)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(e=>{for(const n of e)n&&!n.isDisposed&&n.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(e,n,r=!1,s={},i={}){this.disposeIntermediateTensors(),r||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepIntermediateTensors=X().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(f){this.keepIntermediateTensors=!1,console.warn(f.message)}const o=new A_(this.weightMap,s,i,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));const a=await this.executeWithControlFlow(e,o,n,r),u=n.map(f=>On(f,a,o)),l=u.map(f=>f.id),c=Object.keys(e).map(f=>e[f].id),d=new Set([...l,...c,...this.weightIds]);return Object.values(a).forEach(f=>{f.forEach(h=>{h&&!h.isDisposed&&!d.has(h.id)&&h.dispose()})}),this.parent==null&&o.dispose(d),u}async executeFunctionAsync(e,n,r){const s=e.reduce((i,o,a)=>(i[this.inputs[a].name]=o,i),{});return this._executeAsync(s,this.outputNodes,!0,n,r)}async executeWithControlFlow(e,n,r,s){const i=Object.keys(e),o=i.map(x=>this.graph.nodes[Br(x)[0]]),a=r.map(x=>Br(x)[0]),u=new Set(a);let l=a.map(x=>this.graph.nodes[x]);l.length===0&&(l=this._outputs);const{usedNodes:c,missingInputs:d,dynamicNode:f,syncInputs:h}=E_(e,l,this.weightMap,this._initNodes),p=[...o,...this.graph.weights,...this._initNodes||[]].map(x=>({node:x,contexts:n.currentContext})),y=Object.assign({},this.weightMap);Object.keys(e).forEach(x=>{const[N,k]=Br(x),O=[];O[k]=e[x],y[N]=O});const b={},g=this.getFrozenTensorIds(y),v={};for(;p.length>0;){const x=this.processStack(o,p,n,y,v,g,u,b,c);await Promise.all(x)}f==null&&!s&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const w=l.filter(x=>!Mu(x)&&!On(x.name,y,n)).map(x=>x.name);if(w.length>0){let x="";throw f!=null&&(x=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${h}]`),new Error(`Cannot compute the outputs [${w}] from the provided inputs [${i}]. Consider providing the following inputs: [${d}]. ${x}`)}return y}processStack(e,n,r,s,i,o,a,u,l){const c=[];for(;n.length>0;){const d=n.pop();r.currentContext=d.contexts;let f="";if(d.node.op==="Enter"&&A("isConstant",d.node,s,r)&&([f]=Po(d.node.name,r)),s[d.node.name]==null){const h=S_(d.node,s,r,this._resourceManager);f||([f]=Po(d.node.name,r));const p=r.currentContext;cl(h)?c.push(h.then(y=>(s[f]=y,this.keepIntermediateTensors&&(this.clonedTensorsMap[f]=this.cloneTensorList(y)),r.currentContext=p,this.checkTensorForDisposal(f,d.node,s,r,o,a,u),this.processChildNodes(d.node,n,r,s,i,l),y))):(s[f]=h,this.keepIntermediateTensors&&(this.clonedTensorsMap[f]=this.cloneTensorList(h)),this.checkTensorForDisposal(f,d.node,s,r,o,a,u),this.processChildNodes(d.node,n,r,s,i,l))}else this.processChildNodes(d.node,n,r,s,i,l)}return c}processChildNodes(e,n,r,s,i,o){e.children.forEach(a=>{const[u]=Po(a.name,r);i[u]||!o.has(a.name)||(a.op==="Merge"?a.inputNames.some(l=>!!On(l,s,r))&&(i[u]=!0,n.push({contexts:r.currentContext,node:a})):a.inputNames.every(l=>!!On(l,s,r))&&(i[u]=!0,n.push({contexts:r.currentContext,node:a})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(n=>n.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(n=>{const r=e[n],[s]=Br(n),i=this.graph.nodes[s];if(i.attrParams.shape&&i.attrParams.shape.value){const o=i.attrParams.shape.value,a=o.length===r.shape.length&&r.shape.every((u,l)=>o[l]===-1||o[l]===u);R(a,()=>`The shape of dict['${i.name}'] provided in model.execute(dict) must be [${o}], but was [${r.shape}]`)}i.attrParams.dtype&&i.attrParams.dtype.value&&R(r.dtype===i.attrParams.dtype.value,()=>`The dtype of dict['${i.name}'] provided in model.execute(dict) must be ${i.attrParams.dtype.value}, but was ${r.dtype}`)})}mapInputs(e){var n,r;const s={};for(const i in e){const o=(r=(n=this._signature)===null||n===void 0?void 0:n.inputs)===null||r===void 0?void 0:r[i];o!=null?s[o.name]=e[i]:s[i]=e[i]}return s}checkInputs(e){const n=Object.keys(e).filter(r=>{const[s]=Br(r);return this.graph.nodes[s]==null});if(n.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${n}] that are not part of graph`)}mapOutputs(e){return e.map(n=>{var r,s;const i=(s=(r=this._signature)===null||r===void 0?void 0:r.outputs)===null||s===void 0?void 0:s[n];return i!=null?i.name:n},{})}checkOutputs(e){e.forEach(n=>{const[r]=Br(n);if(!this.graph.nodes[r])throw new Error(`The output '${n}' is not found in the graph`)})}}class wue{constructor(e={},n={}){this.hashTableNameToHandle=e,this.hashTableMap=n}addHashTable(e,n){this.hashTableNameToHandle[e]=n.handle,this.hashTableMap[n.id]=n}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xue="?tfjs-format=file",Sue="model.json";class Aue{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(e,n={},r=j4){this.modelUrl=e,this.loadOptions=n,this.version="n/a",this.io=r,n==null&&(this.loadOptions={}),this.resourceManager=new wue}findIOHandler(){const e=this.modelUrl;if(e.load!=null)this.handler=e;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{const n=this.io.getLoadHandlers(e,this.loadOptions);if(n.length===0)n.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(n.length>1)throw new Error(`Found more than one (${n.length}) load handlers for URL '${[e]}'`);this.handler=n[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=this.handler.load();return cl(e)?e.then(n=>n.getWeightStream==null?this.loadSync(n):this.loadStreaming(n)):this.loadSync(e)}loadSync(e){const n=this.io.decodeWeights(e.weightData,e.weightSpecs);return this.loadWithWeightMap(e,n)}async loadStreaming(e){if(e.getWeightStream==null)throw new Error("Model artifacts missing streamWeights function");const n=await LP(e.getWeightStream(),e.weightSpecs);return this.loadWithWeightMap(e,n)}loadWithWeightMap(e,n){this.artifacts=e;const r=this.artifacts.modelTopology;let s=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){const i=this.artifacts.userDefinedMetadata;i.signature!=null&&(s=i.signature),i.structuredOutputKeys!=null&&(this.structuredOutputKeys=i.structuredOutputKeys)}if(this.signature=s,this.version=`${r.versions.producer}.${r.versions.minConsumer}`,this.executor=new tg(b_.Instance.transformGraph(r,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(n),this.executor.resourceManager=this.resourceManager,e.modelInitializer!=null&&e.modelInitializer.node!=null){const i=b_.Instance.transformGraph(e.modelInitializer);this.initializer=new tg(i),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}async save(e,n){if(typeof e=="string"){const r=this.io.getSaveHandlers(e);if(r.length===0)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(r.length>1)throw new Error(`Found more than one (${r.length}) save handlers for URL '${e}'`);e=r[0]}if(e.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}addStructuredOutputNames(e){if(this.structuredOutputKeys){const n=e instanceof ar?[e]:e,r={};return n.forEach((s,i)=>r[this.structuredOutputKeys[i]]=s),r}return e}predict(e,n){const r=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(r)}async predictAsync(e,n){const r=await this.executeAsync(e,this.outputNodes);return this.addStructuredOutputNames(r)}normalizeInputs(e){var n;if(!(e instanceof ar)&&!Array.isArray(e)){const i=(n=this.signature)===null||n===void 0?void 0:n.inputs;if(i!=null)for(const o in i){const a=i[o];a.resourceId!=null&&(e[o]=this.resourceIdToCapturedInput[a.resourceId])}return e}e=Array.isArray(e)?e:[e];const r=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+r!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-r} non-resource placeholders, while there are ${e.length} input tensors provided.`);let s=0;return this.inputNodes.reduce((i,o)=>{var a,u,l;const c=(l=(u=(a=this.signature)===null||a===void 0?void 0:a.inputs)===null||u===void 0?void 0:u[o])===null||l===void 0?void 0:l.resourceId;return c!=null?i[o]=this.resourceIdToCapturedInput[c]:i[o]=e[s++],i},{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}executeInitializerGraph(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(e){if(this.resourceIdToCapturedInput={},this.initializerSignature){const n=this.initializerSignature.outputs,r=Object.keys(n);for(let s=0;s<r.length;s++){const i=r[s],o=n[i];this.resourceIdToCapturedInput[o.resourceId]=e[s]}}}execute(e,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=this.executor.execute(e,n);return r.length>1?r:r[0]}async executeAsync(e,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=await this.executor.executeAsync(e,n);return r.length>1?r:r[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((n,r)=>(n[r]=[e[r]],n),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&rn(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}async function C_(t,e={},n=j4){if(t==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");e==null&&(e={}),e.fromTFHub&&typeof t=="string"&&(t=Eue(t));const r=new Aue(t,e,n);return await r.load(),r}function Eue(t){return t.endsWith("/")||(t=t+"/"),`${t}${Sue}${xue}`}const Cue=(t,e)=>{t.current!==void 0&&e.current!==void 0||_7().then(async()=>{X().set("WEBGL_EXP_CONV",!0),X().set("WEBGL_PACK",!1),X().set("ENGINE_COMPILE_ONLY",!0);const n=Xa([1,sr,rr,3]),r=await C_("480M_pieces_float16/model.json"),s=r.execute(n),i=await C_("480L_xcorners_float16/model.json"),o=i.execute(n);rn([n,s,o]);const a=OP();a.checkCompileCompletion(),a.getUniformLocations(),X().set("ENGINE_COMPILE_ONLY",!1),t.current=r,e.current=i})},Nue=({piecesModelRef:t,xcornersModelRef:e,videoRef:n,canvasRef:r,sidebarRef:s,playing:i,setPlaying:o,text:a,setText:u,cornersRef:l})=>{const c={display:i?"none":"inline-block"};return E.jsxs(Zh,{sidebarRef:s,playing:i,text:a,setText:u,children:[E.jsx("li",{className:"my-1",style:c,children:E.jsx(uS,{videoRef:n})}),E.jsx("li",{className:"my-1",style:c,children:E.jsx(Kg,{piecesModelRef:t,xcornersModelRef:e,videoRef:n,canvasRef:r,setText:u})}),E.jsx("li",{className:"my-1",style:c,children:E.jsx(ZF,{piecesModelRef:t,videoRef:n,canvasRef:r,setText:u,cornersRef:l})}),E.jsx("li",{className:"my-1",children:E.jsxs("div",{className:"btn-group w-100",role:"group",children:[E.jsx(F2,{playing:i,setPlaying:o}),E.jsx(hL,{setPlaying:o,setText:u})]})})]})},_ue=({videoRef:t,playing:e,setPlaying:n})=>{const r=s=>{s.preventDefault(),t.current.src.startsWith("blob")&&n(!e)};return E.jsx(ho,{onClick:r,children:E.jsx(Pl,{iconName:e?"bi-pause":"bi-play"})})},Tue=({videoRef:t,setText:e})=>{const n=ei(),r=s=>{s.preventDefault(),t.current.currentTime=0,n(Nd()),n(Xh()),e(["Rewound video","Reset PGN to start position"])};return E.jsx(ho,{onClick:r,children:E.jsx(Pl,{iconName:"bi-skip-start"})})},Iue=({videoRef:t,canvasRef:e,setPlaying:n})=>{const r=P.useRef(null),[s,i]=P.useState(!1),o=()=>{if(t.current.src!==void 0){const l=t.current.src;t.current.src="",URL.revokeObjectURL(l)}zD(e.current.getContext("2d")),i(!1),r.current.value="",t.current.style.display="none"},a=l=>{const c=URL.createObjectURL(l.target.files[0]);t.current.src=c,t.current.style.display="block",i(!0)},u=()=>{s===!1?r.current.click():o(),n(!1)};return E.jsxs(E.Fragment,{children:[E.jsx("input",{type:"file",accept:"video/*",style:{display:"none"},onChange:a,ref:r}),E.jsx(ho,{onClick:u,children:E.jsx(Pl,{iconName:s?"bi-folder-x":"bi-folder"})})]})},kue=({videoRef:t})=>{const e=({playbackRate:n})=>{const r=s=>{s.preventDefault(),t.current.playbackRate=n};return E.jsxs("button",{type:"button",className:"btn btn-secondary btn-dark btn-outline-light w-100",onClick:r,children:[n,"x"]})};return E.jsxs("div",{className:"btn-group w-100",role:"group",children:[E.jsx(e,{playbackRate:1}),E.jsx(e,{playbackRate:2}),E.jsx(e,{playbackRate:4})]})},Rue=({videoRef:t,setPlaying:e,setText:n})=>{const r=ei(),s=i=>{i.preventDefault(),t.current.src.startsWith("blob")&&(e(!1),r(Nd()),r(Xh()),n(["Reset to start position"]))};return E.jsx(ho,{onClick:s,children:E.jsx(Pl,{iconName:"bi-stop"})})},Oue=({videoRef:t,xcornersModelRef:e,piecesModelRef:n,canvasRef:r,sidebarRef:s,text:i,setText:o,playing:a,setPlaying:u,cornersRef:l})=>{const c={display:a?"none":"inline-block"};return E.jsxs(Zh,{sidebarRef:s,playing:a,text:i,setText:o,children:[E.jsx("li",{className:"my-1",style:c,children:E.jsx(Iue,{videoRef:t,canvasRef:r,setPlaying:u})}),E.jsx("li",{className:"my-1",style:c,children:E.jsx(Kg,{piecesModelRef:n,xcornersModelRef:e,videoRef:t,canvasRef:r,setText:o})}),E.jsx("li",{className:"my-1",style:c,children:E.jsx(ZF,{piecesModelRef:n,videoRef:t,canvasRef:r,setText:o,cornersRef:l})}),E.jsx("li",{className:"my-1",style:c,children:E.jsx(kue,{videoRef:t})}),E.jsx("li",{className:"my-1",children:E.jsxs("div",{className:"btn-group w-100",role:"group",children:[E.jsx(_ue,{videoRef:t,playing:a,setPlaying:u}),E.jsx(Rue,{videoRef:t,setPlaying:u,setText:o}),E.jsx(Tue,{videoRef:t,setText:o})]})})]})},Pue=({setBoardNumber:t})=>{const e=n=>{t(parseInt(n.target.value))};return E.jsxs("div",{className:"text-white",children:[E.jsx("label",{className:"form-check-label",htmlFor:"board",children:"Board:"}),E.jsx("input",{type:"number",id:"board",onChange:e,min:1,max:64})]})},Due=({piecesModelRef:t,xcornersModelRef:e,videoRef:n,canvasRef:r,sidebarRef:s,playing:i,setPlaying:o,text:a,setText:u,study:l,setStudy:c,setBoardNumber:d})=>{const f={display:i?"none":"inline-block"};return E.jsxs(Zh,{sidebarRef:s,playing:i,text:a,setText:u,children:[E.jsx("li",{className:"my-1",style:f,children:E.jsx(uS,{videoRef:n})}),E.jsx("li",{className:"my-1",style:f,children:E.jsx(QF,{study:l,setStudy:c,onlyBroadcasts:!0})}),E.jsx("li",{className:"my-1",style:f,children:E.jsx(Pue,{setBoardNumber:d})}),E.jsx("li",{className:"my-1",style:f,children:E.jsx(Kg,{piecesModelRef:t,xcornersModelRef:e,videoRef:n,canvasRef:r,setText:u})}),E.jsx("li",{className:"my-1",children:E.jsxs("div",{className:"btn-group w-100",role:"group",children:[E.jsx(F2,{playing:i,setPlaying:o}),E.jsx(hL,{setPlaying:o,setText:u})]})})]})},Lue=({setGameId:t,setColor:e,setText:n})=>{const r=Zo().token,[s,i]=P.useState([]),[o,a]=P.useState(null),u=ei(),l=async(d,f)=>{if(d.preventDefault(),(o==null?void 0:o.fullId)===f.fullId)return;a(f),t(f.gameId),e(f.color==="white"?"w":"b");const h=f.color==="white"?"White":"Black",p=f.opponent.username;n(["Starting game",`${h} vs ${p}`]);const y=new $2(f.fen),b=M2(y);u(V2(b)),u(dL(f.fen))},c=async d=>{d.preventDefault();const f=await mz(r);i(f.nowPlaying)};return E.jsxs("div",{className:"dropdown",children:[E.jsx("button",{className:"btn btn-dark btn-sm btn-outline-light dropdown-toggle w-100",id:"deviceButton","data-bs-toggle":"dropdown","aria-expanded":"false",onClick:d=>c(d),children:o===null?"Select a Game":`Game: ${o.opponent.username}`}),E.jsx("ul",{className:"dropdown-menu","aria-labelledby":"deviceButton",children:s.map(d=>E.jsx("li",{children:E.jsxs("a",{onClick:f=>l(f,d),className:"dropdown-item",href:"#",children:[d.opponent.username," (",d.gameId,")"]})},d.fullId))})]})},Fue=({piecesModelRef:t,xcornersModelRef:e,videoRef:n,canvasRef:r,sidebarRef:s,playing:i,setPlaying:o,text:a,setText:u})=>{const l=Zo().token,c=Cd(),d=P.useRef(c),[f,h]=P.useState(),[p,y]=P.useState(),b=ei(),g={display:i?"none":"inline-block"};P.useEffect(()=>{d.current=c},[c]),P.useEffect(()=>{const w=d.current.fen.split(" ")[1],x=d.current.lastMove;w===p||x===""||f===void 0||p===void 0||gz(l,f,x)},[d.current]);const v=async w=>{const x=w.moves;if(x===void 0)return;const N=x.split(" "),k=N[N.length-1];if(k===d.current.lastMove)return;const O=Kv(d.current);O.move(k);const _=M2(O);console.log("payload",_),b(V2(_))};return P.useEffect(()=>{f!==void 0&&pz(l,v,f)},[f]),E.jsxs(Zh,{sidebarRef:s,playing:i,text:a,setText:u,children:[E.jsx("li",{className:"my-1",style:g,children:E.jsx(uS,{videoRef:n})}),E.jsx("li",{className:"my-1",style:g,children:E.jsx(Lue,{setGameId:h,setColor:y,setText:u})}),E.jsx("li",{className:"my-1",style:g,children:E.jsx(Kg,{piecesModelRef:t,xcornersModelRef:e,videoRef:n,canvasRef:r,setText:u})}),E.jsx("li",{className:"my-1",children:E.jsx("div",{className:"btn-group w-100",role:"group",children:E.jsx(F2,{playing:i,setPlaying:o})})})]})};var oS={};oS.match=zue;oS.parse=GF;var $ue=/(?:(only|not)?\s*([^\s\(\)]+)(?:\s*and)?\s*)?(.+)?/i,Bue=/\(\s*([^\s\:\)]+)\s*(?:\:\s*([^\s\)]+))?\s*\)/,Mue=/^(?:(min|max)-)?(.+)/,Vue=/(em|rem|px|cm|mm|in|pt|pc)?$/,Uue=/(dpi|dpcm|dppx)?$/;function zue(t,e){return GF(t).some(function(n){var r=n.inverse,s=n.type==="all"||e.type===n.type;if(s&&r||!(s||r))return!1;var i=n.expressions.every(function(o){var a=o.feature,u=o.modifier,l=o.value,c=e[a];if(!c)return!1;switch(a){case"orientation":case"scan":return c.toLowerCase()===l.toLowerCase();case"width":case"height":case"device-width":case"device-height":l=T_(l),c=T_(c);break;case"resolution":l=__(l),c=__(c);break;case"aspect-ratio":case"device-aspect-ratio":case"device-pixel-ratio":l=N_(l),c=N_(c);break;case"grid":case"color":case"color-index":case"monochrome":l=parseInt(l,10)||1,c=parseInt(c,10)||0;break}switch(u){case"min":return c>=l;case"max":return c<=l;default:return c===l}});return i&&!r||!i&&r})}function GF(t){return t.split(",").map(function(e){e=e.trim();var n=e.match($ue),r=n[1],s=n[2],i=n[3]||"",o={};return o.inverse=!!r&&r.toLowerCase()==="not",o.type=s?s.toLowerCase():"all",i=i.match(/\([^\)]+\)/g)||[],o.expressions=i.map(function(a){var u=a.match(Bue),l=u[1].toLowerCase().match(Mue);return{modifier:l[1],feature:l[2],value:u[2]}}),o})}function N_(t){var e=Number(t),n;return e||(n=t.match(/^(\d+)\s*\/\s*(\d+)$/),e=n[1]/n[2]),e}function __(t){var e=parseFloat(t),n=String(t).match(Uue)[1];switch(n){case"dpcm":return e/2.54;case"dppx":return e*96;default:return e}}function T_(t){var e=parseFloat(t),n=String(t).match(Vue)[1];switch(n){case"em":return e*16;case"rem":return e*16;case"cm":return e*96/2.54;case"mm":return e*96/2.54/10;case"in":return e*96;case"pt":return e*72;case"pc":return e*72/12;default:return e}}var jue=oS.match,I_=typeof window<"u"?window.matchMedia:null;function Wue(t,e,n){var r=this,s;I_&&!n&&(s=I_.call(window,t)),s?(this.matches=s.matches,this.media=s.media,s.addListener(a)):(this.matches=jue(t,e),this.media=t),this.addListener=i,this.removeListener=o,this.dispose=u;function i(l){s&&s.addListener(l)}function o(l){s&&s.removeListener(l)}function a(l){r.matches=l.matches,r.media=l.media}function u(){s&&s.removeListener(a)}}function que(t,e,n){return new Wue(t,e,n)}var Gue=que;const Hue=md(Gue);var Kue=/[A-Z]/g,Xue=/^ms-/,ub={};function Yue(t){return"-"+t.toLowerCase()}function HF(t){if(ub.hasOwnProperty(t))return ub[t];var e=t.replace(Kue,Yue);return ub[t]=Xue.test(e)?"-"+e:e}function Que(t,e){if(t===e)return!0;if(!t||!e)return!1;const n=Object.keys(t),r=Object.keys(e),s=n.length;if(r.length!==s)return!1;for(let i=0;i<s;i++){const o=n[i];if(t[o]!==e[o]||!Object.prototype.hasOwnProperty.call(e,o))return!1}return!0}const Sr=Ge.oneOfType([Ge.string,Ge.number]),aS={all:Ge.bool,grid:Ge.bool,aural:Ge.bool,braille:Ge.bool,handheld:Ge.bool,print:Ge.bool,projection:Ge.bool,screen:Ge.bool,tty:Ge.bool,tv:Ge.bool,embossed:Ge.bool},KF={orientation:Ge.oneOf(["portrait","landscape"]),scan:Ge.oneOf(["progressive","interlace"]),aspectRatio:Ge.string,deviceAspectRatio:Ge.string,height:Sr,deviceHeight:Sr,width:Sr,deviceWidth:Sr,color:Ge.bool,colorIndex:Ge.bool,monochrome:Ge.bool,resolution:Sr,type:Object.keys(aS)},{type:Exe,...Zue}=KF,XF={minAspectRatio:Ge.string,maxAspectRatio:Ge.string,minDeviceAspectRatio:Ge.string,maxDeviceAspectRatio:Ge.string,minHeight:Sr,maxHeight:Sr,minDeviceHeight:Sr,maxDeviceHeight:Sr,minWidth:Sr,maxWidth:Sr,minDeviceWidth:Sr,maxDeviceWidth:Sr,minColor:Ge.number,maxColor:Ge.number,minColorIndex:Ge.number,maxColorIndex:Ge.number,minMonochrome:Ge.number,maxMonochrome:Ge.number,minResolution:Sr,maxResolution:Sr,...Zue},Jue={...aS,...XF};var ele={all:Jue,types:aS,matchers:KF,features:XF};const tle=t=>`not ${t}`,nle=(t,e)=>{const n=HF(t);return typeof e=="number"&&(e=`${e}px`),e===!0?n:e===!1?tle(n):`(${n}: ${e})`},rle=t=>t.join(" and "),sle=t=>{const e=[];return Object.keys(ele.all).forEach(n=>{const r=t[n];r!=null&&e.push(nle(n,r))}),rle(e)},ile=P.createContext(void 0),ole=t=>t.query||sle(t),k_=t=>t?Object.keys(t).reduce((n,r)=>(n[HF(r)]=t[r],n),{}):void 0,YF=()=>{const t=P.useRef(!1);return P.useEffect(()=>{t.current=!0},[]),t.current},ale=t=>{const e=P.useContext(ile),n=()=>k_(t)||k_(e),[r,s]=P.useState(n);return P.useEffect(()=>{const i=n();Que(r,i)||s(i)},[t,e]),r},ule=t=>{const e=()=>ole(t),[n,r]=P.useState(e);return P.useEffect(()=>{const s=e();n!==s&&r(s)},[t]),n},lle=(t,e)=>{const n=()=>Hue(t,e||{},!!e),[r,s]=P.useState(n),i=YF();return P.useEffect(()=>{if(i){const o=n();return s(o),()=>{o&&o.dispose()}}},[t,e]),r},cle=t=>{const[e,n]=P.useState(t.matches);return P.useEffect(()=>{const r=s=>{n(s.matches)};return t.addListener(r),n(t.matches),()=>{t.removeListener(r)}},[t]),e},dle=(t,e,n)=>{const r=ale(e),s=ule(t);if(!s)throw new Error("Invalid or missing MediaQuery!");const i=lle(s,r),o=cle(i),a=YF();return P.useEffect(()=>{a&&n&&n(o)},[o]),P.useEffect(()=>()=>{i&&i.dispose()},[]),o},fle=()=>E.jsx("h1",{className:"text-white text-center w-100 p-3 h-2",children:"Please use your device in landscape mode"}),cm=({mode:t})=>{const e=b5(),n=ei(),r=iL(),s=Zo().token,i=Cd().moves,o=dle({orientation:"portrait"}),[a,u]=P.useState([]),[l,c]=P.useState(!1),[d,f]=P.useState(null),[h,p]=P.useState(-1),y=P.useRef(null),b=P.useRef(l),g=P.useRef(null),v=P.useRef(null),w=P.useRef(r);P.useEffect(()=>{if(t!=="broadcast"||d===null||h===-1)return;const k=['[Result "*"]',`[FEN "${qv}"]`,`[Board "${h}"]`,`[Site "${h}"]`,`[White "White ${h}"]`,`[Black "Black ${h}"]`,'[Annotator "ChessCam"]',"",i].join("\r");hz(s,k,d.id)},[i]),P.useEffect(()=>{b.current=l},[l]),P.useEffect(()=>{w.current=r},[r]),P.useEffect(()=>{Cue(e.piecesModelRef,e.xcornersModelRef),n(jJ()),n(fL()),n(Nd()),n(Xh())},[]);const x={playing:l,text:a,study:d,setPlaying:c,setText:u,setBoardNumber:p,setStudy:f,piecesModelRef:e.piecesModelRef,xcornersModelRef:e.xcornersModelRef,videoRef:y,canvasRef:g,sidebarRef:v,cornersRef:w,playingRef:b,mode:t},N=()=>{switch(t){case"record":return E.jsx(Nue,{...x});case"upload":return E.jsx(Oue,{...x});case"play":return E.jsx(Fue,{...x});case"broadcast":return E.jsx(Due,{...x})}};return E.jsx(FF,{children:o?E.jsx(fle,{}):E.jsxs(E.Fragment,{children:[N(),E.jsx(Yoe,{...x})]})})},QF=({study:t,setStudy:e,onlyBroadcasts:n})=>{const[r,s]=P.useState([]),i=Zo();P.useEffect(()=>{cz(i.token,s,i.username,n)},[]);const o=(a,u)=>{a.preventDefault(),e(u)};return E.jsxs("div",{className:"dropdown",children:[E.jsx("button",{className:"btn btn-dark btn-sm btn-outline-light dropdown-toggle w-100",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false",children:t===null?"Select a Study":`Study: ${t.name}`}),E.jsx("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton1",children:r.map(a=>E.jsx("li",{children:E.jsxs("a",{onClick:u=>o(u,a),className:"dropdown-item",href:"#",children:[a.name," (",a.id,")"]})},a.id))})]})},hle=(t,e)=>{let n=t.fen();const r=e==="w"?"b":"w";n=n.replace(` ${r} `,` ${e} `);let s=null;for(let i=0;i<64;i++){const o=q0[i],a=t.get(o),u=a.type==="k",l=a.color===r,c=t.isAttacked(o,e);if(u&&l&&c)return s="Side to move has opponent in check",{fen:n,error:s}}return{fen:n,error:s}},ple=(t,e,n,r)=>{const s=Array(64).fill(-1);let i=-1,o=-1;for(let h=0;h<64;h++){const p=t[h][1];p>i&&(i=p,o=h)}s[o]=1;let a=-1,u=-1;for(let h=0;h<64;h++){if(h==o)continue;const p=t[h][7];p>a&&(a=p,u=h)}s[u]=7;const l=[0,2,3,4,5,6,8,9,10,11];for(let h=0;h<64;h++){if(s[h]!==-1)continue;let p=null,y=.3;l.forEach(b=>{const g=q0[h],v=g[1]==="1"||g[1]==="8";if(nN[b%6]==="p"&&v)return;const x=t[h][b];x>y&&(p=b,y=x)}),p!==null&&(s[h]=p)}const c=new $2;c.clear();for(let h=0;h<64;h++){if(s[h]===-1)continue;const p=nN[s[h]%6],y=s[h]>5?"w":"b",b=q0[h];c.put({type:p,color:y},b)}const{fen:d,error:f}=hle(c,e);f===null?(n(dL(d)),n(bee(d)),n(Nd()),r(["Set starting FEN"])):r(["Invalid FEN:",f])},mle=async({piecesModelRef:t,videoRef:e,cornersRef:n,canvasRef:r,dispatch:s,setText:i,color:o})=>{if(O2(e))return;const a=UF(n,r),u=JD(a),[l,c]=eL(u),[d,f]=tL(u),{boxes:h,scores:p}=await VF(t,e,a),y=BF(h,c,f),b=MF(p,y);ple(b,o,s,i),$F(r.current,l,d,b),rn([h,p,c,f])},gle=async({piecesModelRef:t,videoRef:e,cornersRef:n,canvasRef:r,dispatch:s,setText:i,color:o})=>{const a=ld().numTensors;await mle({piecesModelRef:t,videoRef:e,cornersRef:n,canvasRef:r,dispatch:s,setText:i,color:o});const u=ld().numTensors;return a<u&&console.error(`Memory Leak! (${u} > ${a})`),()=>{Xx()}},ZF=({piecesModelRef:t,videoRef:e,canvasRef:n,setText:r,cornersRef:s})=>{const i=["Normal","Infer (White to move)","Infer (Black to move)"],o=ei(),[a,u]=P.useState(i[0]),l=(c,d)=>{if(c.preventDefault(),d==="Normal")o(fL()),o(Nd()),o(Xh());else{const f=d.includes("White to move")?"w":"b";gle({piecesModelRef:t,videoRef:e,cornersRef:s,canvasRef:n,dispatch:o,setText:r,color:f})}u(d)};return E.jsxs("div",{className:"dropdown",children:[E.jsxs("button",{className:"btn btn-dark btn-sm btn-outline-light dropdown-toggle w-100",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false",children:["Start: ",a]}),E.jsx("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton1",children:i.map(c=>E.jsx("li",{children:E.jsx("a",{onClick:d=>l(d,c),className:"dropdown-item",href:"#",children:c})},c))})]})},uS=({videoRef:t})=>{const[e,n]=P.useState([]),[r,s]=P.useState(null),i=async(o,a)=>{if(o.preventDefault(),(r==null?void 0:r.deviceId)===a.deviceId)return;s(a);const u={...UD};u.video.deviceId=a.deviceId;const l=await navigator.mediaDevices.getUserMedia(u);t.current.srcObject=l};return P.useEffect(()=>{const o=[];navigator.mediaDevices.enumerateDevices().then(a=>{a.forEach(u=>{u.kind=="videoinput"&&o.push(u)})}).catch(a=>{console.error(`${a.name}: ${a.message}`)}),n(o)},[]),E.jsxs("div",{className:"dropdown",children:[E.jsx("button",{className:"btn btn-dark btn-sm btn-outline-light dropdown-toggle w-100",id:"deviceButton","data-bs-toggle":"dropdown","aria-expanded":"false",children:r===null?"Select a Device":`Device: ${r.label.split("(")[0]}`}),E.jsx("ul",{className:"dropdown-menu","aria-labelledby":"deviceButton",children:e.map(o=>E.jsx("li",{children:E.jsx("a",{onClick:a=>i(a,o),className:"dropdown-item",href:"#",children:o.label.split("(")[0]})},o.deviceId))})]})},yle=({study:t,setText:e,pgn:n})=>{const r=Zo().token,s=()=>{const o=new Date,a=o.getFullYear(),u=String(o.getMonth()+1).padStart(2,"0"),l=String(o.getDate()).padStart(2,"0"),c=String(o.getHours()).padStart(2,"0"),d=String(o.getMinutes()).padStart(2,"0"),f=String(o.getSeconds()).padStart(2,"0");return`${a}-${u}-${l}-${c}-${d}-${f}`},i=async()=>{if(t===null){e(["Please select a study"]);return}const o=s();fz(r,n,o,t.id),e(["Exported game to",`"${t.name}/${o}"`])};return E.jsx(ho,{onClick:i,children:"Export Game"})},ble=({pgn:t})=>{const[e,n]=P.useState(null),[r,s]=P.useState(["Select a study","Export the game"]);return E.jsxs(Zh,{playing:!1,text:r,setText:s,children:[E.jsx("li",{className:"border-top"}),E.jsx("li",{className:"my-2",children:E.jsx(QF,{study:e,setStudy:n,onlyBroadcasts:!1})}),E.jsx("li",{className:"my-2",children:E.jsx(yle,{study:e,setText:s,pgn:t})})]})},vle=({pgn:t})=>{const[e,n]=P.useState(""),r=Zo().token,s=async()=>{const o=`https://lichess.org/embed/game/${(await dz(r,t)).id}?theme=brown&bg=dark`;n(o)};return P.useEffect(()=>{s()},[]),E.jsx("div",{className:"ratio ratio-21x9",children:E.jsx("iframe",{src:e})})},wle=()=>{const t=B2(Cd());return E.jsxs(FF,{children:[E.jsx(ble,{pgn:t}),E.jsx(vle,{pgn:t})]})},xle=()=>E.jsxs("div",{className:"page",children:[E.jsx("div",{className:"header",children:E.jsx("div",{className:"container",children:E.jsx("p",{className:"title",children:"Privacy Policy for ChessCam"})})}),E.jsx("div",{className:"translations-content-container",children:E.jsx("div",{className:"container",children:E.jsxs("div",{className:"tab-content translations-content-item en visible",id:"en",children:[E.jsx("h1",{children:"Privacy Policy"}),E.jsx("p",{children:"Last updated: December 08, 2023"}),E.jsx("p",{children:"This Privacy Policy describes Our policies and procedures on the collection, use and disclosure of Your information when You use the Service and tells You about Your privacy rights and how the law protects You."}),E.jsx("p",{children:"We use Your Personal data to provide and improve the Service. By using the Service, You agree to the collection and use of information in accordance with this Privacy Policy."}),E.jsx("h2",{children:"Interpretation and Definitions"}),E.jsx("h3",{children:"Interpretation"}),E.jsx("p",{children:"The words of which the initial letter is capitalized have meanings defined under the following conditions. The following definitions shall have the same meaning regardless of whether they appear in singular or in plural."}),E.jsx("h3",{children:"Definitions"}),E.jsx("p",{children:"For the purposes of this Privacy Policy:"}),E.jsxs("ul",{children:[E.jsx("li",{children:E.jsxs("p",{children:[E.jsx("strong",{children:"Account"})," means a unique account created for You to access our Service or parts of our Service."]})}),E.jsx("li",{children:E.jsxs("p",{children:[E.jsx("strong",{children:"Affiliate"}),' means an entity that controls, is controlled by or is under common control with a party, where "control" means ownership of 50% or more of the shares, equity interest or other securities entitled to vote for election of directors or other managing authority.']})}),E.jsx("li",{children:E.jsxs("p",{children:[E.jsx("strong",{children:"Application"})," refers to ChessCam, the software program provided by the Company."]})}),E.jsx("li",{children:E.jsxs("p",{children:[E.jsx("strong",{children:"Company"}),' (referred to as either "the Company", "We", "Us" or "Our" in this Agreement) refers to ChessCam.']})}),E.jsx("li",{children:E.jsxs("p",{children:[E.jsx("strong",{children:"Country"})," refers to: United Kingdom"]})}),E.jsx("li",{children:E.jsxs("p",{children:[E.jsx("strong",{children:"Device"})," means any device that can access the Service such as a computer, a cellphone or a digital tablet."]})}),E.jsx("li",{children:E.jsxs("p",{children:[E.jsx("strong",{children:"Personal Data"})," is any information that relates to an identified or identifiable individual."]})}),E.jsx("li",{children:E.jsxs("p",{children:[E.jsx("strong",{children:"Service"})," refers to the Application."]})}),E.jsx("li",{children:E.jsxs("p",{children:[E.jsx("strong",{children:"Service Provider"})," means any natural or legal person who processes the data on behalf of the Company. It refers to third-party companies or individuals employed by the Company to facilitate the Service, to provide the Service on behalf of the Company, to perform services related to the Service or to assist the Company in analyzing how the Service is used."]})}),E.jsx("li",{children:E.jsxs("p",{children:[E.jsx("strong",{children:"Usage Data"})," refers to data collected automatically, either generated by the use of the Service or from the Service infrastructure itself (for example, the duration of a page visit)."]})}),E.jsx("li",{children:E.jsxs("p",{children:[E.jsx("strong",{children:"You"})," means the individual accessing or using the Service, or the company, or other legal entity on behalf of which such individual is accessing or using the Service, as applicable."]})})]}),E.jsx("h2",{children:"Collecting and Using Your Personal Data"}),E.jsx("h3",{children:"Types of Data Collected"}),E.jsx("h4",{children:"Personal Data"}),E.jsx("p",{children:"While using Our Service, We may ask You to provide Us with certain personally identifiable information that can be used to contact or identify You. Personally identifiable information may include, but is not limited to:"}),E.jsx("ul",{children:E.jsx("li",{children:"Usage Data"})}),E.jsx("h4",{children:"Usage Data"}),E.jsx("p",{children:"Usage Data is collected automatically when using the Service."}),E.jsx("p",{children:"Usage Data may include information such as Your Device's Internet Protocol address (e.g. IP address), browser type, browser version, the pages of our Service that You visit, the time and date of Your visit, the time spent on those pages, unique device identifiers and other diagnostic data."}),E.jsx("p",{children:"When You access the Service by or through a mobile device, We may collect certain information automatically, including, but not limited to, the type of mobile device You use, Your mobile device unique ID, the IP address of Your mobile device, Your mobile operating system, the type of mobile Internet browser You use, unique device identifiers and other diagnostic data."}),E.jsx("p",{children:"We may also collect information that Your browser sends whenever You visit our Service or when You access the Service by or through a mobile device."}),E.jsx("h3",{children:"Use of Your Personal Data"}),E.jsx("p",{children:"The Company may use Personal Data for the following purposes:"}),E.jsxs("ul",{children:[E.jsx("li",{children:E.jsxs("p",{children:[E.jsx("strong",{children:"To provide and maintain our Service"}),", including to monitor the usage of our Service."]})}),E.jsx("li",{children:E.jsxs("p",{children:[E.jsx("strong",{children:"To manage Your Account:"})," to manage Your registration as a user of the Service. The Personal Data You provide can give You access to different functionalities of the Service that are available to You as a registered user."]})}),E.jsx("li",{children:E.jsxs("p",{children:[E.jsx("strong",{children:"For the performance of a contract:"})," the development, compliance and undertaking of the purchase contract for the products, items or services You have purchased or of any other contract with Us through the Service."]})}),E.jsx("li",{children:E.jsxs("p",{children:[E.jsx("strong",{children:"To contact You:"})," To contact You by email, telephone calls, SMS, or other equivalent forms of electronic communication, such as a mobile application's push notifications regarding updates or informative communications related to the functionalities, products or contracted services, including the security updates, when necessary or reasonable for their implementation."]})}),E.jsx("li",{children:E.jsxs("p",{children:[E.jsx("strong",{children:"To provide You"})," with news, special offers and general information about other goods, services and events which we offer that are similar to those that you have already purchased or enquired about unless You have opted not to receive such information."]})}),E.jsx("li",{children:E.jsxs("p",{children:[E.jsx("strong",{children:"To manage Your requests:"})," To attend and manage Your requests to Us."]})}),E.jsx("li",{children:E.jsxs("p",{children:[E.jsx("strong",{children:"For business transfers:"})," We may use Your information to evaluate or conduct a merger, divestiture, restructuring, reorganization, dissolution, or other sale or transfer of some or all of Our assets, whether as a going concern or as part of bankruptcy, liquidation, or similar proceeding, in which Personal Data held by Us about our Service users is among the assets transferred."]})}),E.jsx("li",{children:E.jsxs("p",{children:[E.jsx("strong",{children:"For other purposes"}),": We may use Your information for other purposes, such as data analysis, identifying usage trends, determining the effectiveness of our promotional campaigns and to evaluate and improve our Service, products, services, marketing and your experience."]})})]}),E.jsx("p",{children:"We may share Your personal information in the following situations:"}),E.jsxs("ul",{children:[E.jsxs("li",{children:[E.jsx("strong",{children:"With Service Providers:"})," We may share Your personal information with Service Providers to monitor and analyze the use of our Service, to contact You."]}),E.jsxs("li",{children:[E.jsx("strong",{children:"For business transfers:"})," We may share or transfer Your personal information in connection with, or during negotiations of, any merger, sale of Company assets, financing, or acquisition of all or a portion of Our business to another company."]}),E.jsxs("li",{children:[E.jsx("strong",{children:"With Affiliates:"})," We may share Your information with Our affiliates, in which case we will require those affiliates to honor this Privacy Policy. Affiliates include Our parent company and any other subsidiaries, joint venture partners or other companies that We control or that are under common control with Us."]}),E.jsxs("li",{children:[E.jsx("strong",{children:"With business partners:"})," We may share Your information with Our business partners to offer You certain products, services or promotions."]}),E.jsxs("li",{children:[E.jsx("strong",{children:"With other users:"})," when You share personal information or otherwise interact in the public areas with other users, such information may be viewed by all users and may be publicly distributed outside."]}),E.jsxs("li",{children:[E.jsx("strong",{children:"With Your consent"}),": We may disclose Your personal information for any other purpose with Your consent."]})]}),E.jsx("h3",{children:"Retention of Your Personal Data"}),E.jsx("p",{children:"The Company will retain Your Personal Data only for as long as is necessary for the purposes set out in this Privacy Policy. We will retain and use Your Personal Data to the extent necessary to comply with our legal obligations (for example, if we are required to retain your data to comply with applicable laws), resolve disputes, and enforce our legal agreements and policies."}),E.jsx("p",{children:"The Company will also retain Usage Data for internal analysis purposes. Usage Data is generally retained for a shorter period of time, except when this data is used to strengthen the security or to improve the functionality of Our Service, or We are legally obligated to retain this data for longer time periods."}),E.jsx("h3",{children:"Transfer of Your Personal Data"}),E.jsx("p",{children:"Your information, including Personal Data, is processed at the Company's operating offices and in any other places where the parties involved in the processing are located. It means that this information may be transferred to  and maintained on  computers located outside of Your state, province, country or other governmental jurisdiction where the data protection laws may differ than those from Your jurisdiction."}),E.jsx("p",{children:"Your consent to this Privacy Policy followed by Your submission of such information represents Your agreement to that transfer."}),E.jsx("p",{children:"The Company will take all steps reasonably necessary to ensure that Your data is treated securely and in accordance with this Privacy Policy and no transfer of Your Personal Data will take place to an organization or a country unless there are adequate controls in place including the security of Your data and other personal information."}),E.jsx("h3",{children:"Delete Your Personal Data"}),E.jsx("p",{children:"You have the right to delete or request that We assist in deleting the Personal Data that We have collected about You."}),E.jsx("p",{children:"Our Service may give You the ability to delete certain information about You from within the Service."}),E.jsx("p",{children:"You may update, amend, or delete Your information at any time by signing in to Your Account, if you have one, and visiting the account settings section that allows you to manage Your personal information. You may also contact Us to request access to, correct, or delete any personal information that You have provided to Us."}),E.jsx("p",{children:"Please note, however, that We may need to retain certain information when we have a legal obligation or lawful basis to do so."}),E.jsx("h3",{children:"Disclosure of Your Personal Data"}),E.jsx("h4",{children:"Business Transactions"}),E.jsx("p",{children:"If the Company is involved in a merger, acquisition or asset sale, Your Personal Data may be transferred. We will provide notice before Your Personal Data is transferred and becomes subject to a different Privacy Policy."}),E.jsx("h4",{children:"Law enforcement"}),E.jsx("p",{children:"Under certain circumstances, the Company may be required to disclose Your Personal Data if required to do so by law or in response to valid requests by public authorities (e.g. a court or a government agency)."}),E.jsx("h4",{children:"Other legal requirements"}),E.jsx("p",{children:"The Company may disclose Your Personal Data in the good faith belief that such action is necessary to:"}),E.jsxs("ul",{children:[E.jsx("li",{children:"Comply with a legal obligation"}),E.jsx("li",{children:"Protect and defend the rights or property of the Company"}),E.jsx("li",{children:"Prevent or investigate possible wrongdoing in connection with the Service"}),E.jsx("li",{children:"Protect the personal safety of Users of the Service or the public"}),E.jsx("li",{children:"Protect against legal liability"})]}),E.jsx("h3",{children:"Security of Your Personal Data"}),E.jsx("p",{children:"The security of Your Personal Data is important to Us, but remember that no method of transmission over the Internet, or method of electronic storage is 100% secure. While We strive to use commercially acceptable means to protect Your Personal Data, We cannot guarantee its absolute security."}),E.jsx("h2",{children:"Children's Privacy"}),E.jsx("p",{children:"Our Service does not address anyone under the age of 13. We do not knowingly collect personally identifiable information from anyone under the age of 13. If You are a parent or guardian and You are aware that Your child has provided Us with Personal Data, please contact Us. If We become aware that We have collected Personal Data from anyone under the age of 13 without verification of parental consent, We take steps to remove that information from Our servers."}),E.jsx("p",{children:"If We need to rely on consent as a legal basis for processing Your information and Your country requires consent from a parent, We may require Your parent's consent before We collect and use that information."}),E.jsx("h2",{children:"Links to Other Websites"}),E.jsx("p",{children:"Our Service may contain links to other websites that are not operated by Us. If You click on a third party link, You will be directed to that third party's site. We strongly advise You to review the Privacy Policy of every site You visit."}),E.jsx("p",{children:"We have no control over and assume no responsibility for the content, privacy policies or practices of any third party sites or services."}),E.jsx("h2",{children:"Changes to this Privacy Policy"}),E.jsx("p",{children:"We may update Our Privacy Policy from time to time. We will notify You of any changes by posting the new Privacy Policy on this page."}),E.jsx("p",{children:'We will let You know via email and/or a prominent notice on Our Service, prior to the change becoming effective and update the "Last updated" date at the top of this Privacy Policy.'}),E.jsx("p",{children:"You are advised to review this Privacy Policy periodically for any changes. Changes to this Privacy Policy are effective when they are posted on this page."}),E.jsx("h2",{children:"Contact Us"}),E.jsx("p",{children:"If you have any questions about this Privacy Policy, You can contact us:"}),E.jsx("ul",{children:E.jsx("li",{children:"By email: camerachess1@gmail.com"})})]})})}),E.jsx("div",{className:"footer",children:E.jsx("div",{className:"container"})})]});function JF(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Sle(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function e6(t,e,n){return e&&Sle(t.prototype,e),t}function Qi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Aw(){return(Aw=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function R_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function t6(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n6(t,e)}function Ew(t){return(Ew=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(t)}function n6(t,e){return(n6=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n})(t,e)}function va(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ale(t,e){return!e||typeof e!="object"&&typeof e!="function"?va(t):e}function r6(t){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var n,r=Ew(t);if(e){var s=Ew(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return Ale(this,n)}}var Wm={return:13,arrowLeft:37,arrowUp:38,arrowRight:39,arrowDown:40,space:32};Wm.keyCodes=Object.keys(Wm).reduce(function(t,e){return t[Wm[e]]=e,t},{});var $r={"faq-row-wrapper":"styles_faq-row-wrapper__3vA1D","faq-row":"styles_faq-row__2YF3c","row-body":"styles_row-body__1NvUo","row-title":"styles_row-title__1YiiY","no-tabfocus":"styles_no-tabfocus__1HmyD","row-title-text":"styles_row-title-text__1MuhU","icon-wrapper":"styles_icon-wrapper__2cftw",closed:"styles_closed__39w54","row-content":"styles_row-content__QOGZd",animate:"styles_animate__3ecdr",static:"styles_static__3chYW",expanded:"styles_expanded__3elPy",expanding:"styles_expanding__2OAFB","row-content-text":"styles_row-content-text__2sgAB"};(function(t,e){e===void 0&&(e={});var n=e.insertAt;if(typeof document<"u"){var r=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",n==="top"&&r.firstChild?r.insertBefore(s,r.firstChild):r.appendChild(s),s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t))}})(`.styles_faq-row-wrapper__3vA1D {
  background-color: var(--faq-bg-color, white); }
  .styles_faq-row-wrapper__3vA1D h2 {
    margin: 0;
    color: var(--title-text-color, black);
    font-size: var(--title-text-size, 30px); }
  .styles_faq-row-wrapper__3vA1D .styles_faq-row__2YF3c {
    display: flex;
    justify-content: space-between;
    padding: 5px 0;
    border-bottom: 1px solid #ccc; }
  .styles_faq-row-wrapper__3vA1D .styles_row-body__1NvUo .styles_faq-row__2YF3c {
    flex-direction: column;
    position: relative; }
    .styles_faq-row-wrapper__3vA1D .styles_row-body__1NvUo .styles_faq-row__2YF3c .styles_row-title__1YiiY {
      padding: 10px 0;
      display: flex;
      justify-content: space-between;
      color: var(--row-title-color, black);
      font-size: var(--row-title-text-size, large);
      cursor: pointer;
      align-items: center; }
      .styles_faq-row-wrapper__3vA1D .styles_row-body__1NvUo .styles_faq-row__2YF3c .styles_row-title__1YiiY.styles_no-tabfocus__1HmyD {
        outline: none; }
      .styles_faq-row-wrapper__3vA1D .styles_row-body__1NvUo .styles_faq-row__2YF3c .styles_row-title__1YiiY .styles_row-title-text__1MuhU {
        padding-right: 3em; }
      .styles_faq-row-wrapper__3vA1D .styles_row-body__1NvUo .styles_faq-row__2YF3c .styles_row-title__1YiiY .styles_icon-wrapper__2cftw {
        max-width: 25px;
        max-height: 25px;
        margin: 0;
        padding: 0;
        color: var(--arrow-color, black);
        transform: rotate(0deg);
        transition: transform var(--transition-duration, 0.3s);
        position: absolute;
        top: 13px;
        right: 12px; }
        .styles_faq-row-wrapper__3vA1D .styles_row-body__1NvUo .styles_faq-row__2YF3c .styles_row-title__1YiiY .styles_icon-wrapper__2cftw svg {
          width: 100%;
          height: 100%; }
        .styles_faq-row-wrapper__3vA1D .styles_row-body__1NvUo .styles_faq-row__2YF3c .styles_row-title__1YiiY .styles_icon-wrapper__2cftw svg {
          fill: var(--arrow-color, black); }
      .styles_faq-row-wrapper__3vA1D .styles_row-body__1NvUo .styles_faq-row__2YF3c .styles_row-title__1YiiY.styles_closed__39w54 + .styles_row-content__QOGZd {
        visibility: hidden; }
        .styles_faq-row-wrapper__3vA1D .styles_row-body__1NvUo .styles_faq-row__2YF3c .styles_row-title__1YiiY.styles_closed__39w54 + .styles_row-content__QOGZd.styles_animate__3ecdr {
          opacity: 0;
          transition: height var(--transition-duration, 0.3s); }
        .styles_faq-row-wrapper__3vA1D .styles_row-body__1NvUo .styles_faq-row__2YF3c .styles_row-title__1YiiY.styles_closed__39w54 + .styles_row-content__QOGZd.styles_static__3chYW {
          display: none; }
      .styles_faq-row-wrapper__3vA1D .styles_row-body__1NvUo .styles_faq-row__2YF3c .styles_row-title__1YiiY.styles_expanded__3elPy + .styles_row-content__QOGZd {
        visibility: visible; }
        .styles_faq-row-wrapper__3vA1D .styles_row-body__1NvUo .styles_faq-row__2YF3c .styles_row-title__1YiiY.styles_expanded__3elPy + .styles_row-content__QOGZd.styles_static__3chYW {
          display: block; }
      .styles_faq-row-wrapper__3vA1D .styles_row-body__1NvUo .styles_faq-row__2YF3c .styles_row-title__1YiiY.styles_expanded__3elPy .styles_icon-wrapper__2cftw {
        transform: rotate(180deg); }
      .styles_faq-row-wrapper__3vA1D .styles_row-body__1NvUo .styles_faq-row__2YF3c .styles_row-title__1YiiY.styles_expanding__2OAFB .styles_icon-wrapper__2cftw {
        transform: rotate(180deg); }
    .styles_faq-row-wrapper__3vA1D .styles_row-body__1NvUo .styles_faq-row__2YF3c .styles_row-content__QOGZd {
      overflow: hidden;
      transition: height var(--transition-duration, 0.3s);
      transition-timing-function: var(--timing-function, ease); }
      .styles_faq-row-wrapper__3vA1D .styles_row-body__1NvUo .styles_faq-row__2YF3c .styles_row-content__QOGZd .styles_row-content-text__2sgAB {
        color: var(--row-content-color, black);
        font-size: var(--row-content-text-size, medium);
        padding: var(--row-content-padding-top, 0) var(--row-content-padding-right, 0) var(--row-content-padding-bottom, 0) var(--row-content-padding-left, 0); }
`);var s6=function(t){t6(n,P.PureComponent);var e=r6(n);function n(){var r;JF(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return Qi(va(r=e.call.apply(e,[this].concat(i))),"state",{isExpanded:!1,ref:Tn.createRef(),rowRef:Tn.createRef(),height:0,rowClassName:"closed"}),Qi(va(r),"finishTransition",function(){var a=r.state.isExpanded;r.setState({rowClassName:a?"expanded":"closed"})}),Qi(va(r),"toggle",function(a){r.setState(function(){return{isExpanded:a}})}),Qi(va(r),"expand",function(){r.setState(function(a){return{isExpanded:!a.isExpanded}})}),Qi(va(r),"keyPress",function(a){var u=a.keyCode?a.keyCode:a.which;switch(Wm.keyCodes[u]){case"space":case"return":a.preventDefault(),a.stopPropagation(),r.expand()}}),Qi(va(r),"setHeight",function(){var a=r.state,u=a.ref,l=a.isExpanded,c=u.current.scrollHeight;r.setState({height:l?c:0})}),r}return e6(n,[{key:"getSnapshotBeforeUpdate",value:function(r,s){var i=s.isExpanded,o=this.state.isExpanded,a=this.props.config,u=(a=a===void 0?{}:a).animate,l=u===void 0||u;return o!==i?{rowClassName:o?l?"expanding":"expanded":l?"closing":"closed"}:null}},{key:"componentDidUpdate",value:function(r,s,i){var o=this.props.config,a=(o=o===void 0?{}:o).animate,u=a===void 0||a;i!==null&&this.setState(function(l){for(var c=1;c<arguments.length;c++){var d=arguments[c]!=null?arguments[c]:{};c%2?R_(Object(d),!0).forEach(function(f){Qi(l,f,d[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(d)):R_(Object(d)).forEach(function(f){Object.defineProperty(l,f,Object.getOwnPropertyDescriptor(d,f))})}return l}({},i),u?this.setHeight:void 0)}},{key:"componentDidMount",value:function(){var r=this,s=this.state.rowRef;if(this.props.openOnload&&this.expand(),this.props.getRowOptions){var i={expand:function(){r.toggle(!0)},close:function(){r.toggle(!1)},scrollIntoView:function(o){o?s.current.scrollIntoView(o):s.current.scrollIntoView()}};this.props.getRowOptions(i)}}},{key:"render",value:function(){var r=this.props,s=r.data,i=s.title,o=s.content,a=r.config,u=(a=a===void 0?{}:a).animate,l=u===void 0||u,c=a.arrowIcon,d=a.expandIcon,f=a.collapseIcon,h=a.tabFocus,p=h!==void 0&&h,y=this.state,b=y.isExpanded,g=y.ref,v=y.height,w=y.rowClassName,x=y.rowRef,N={onClick:this.expand,role:"button","aria-expanded":b,"aria-controls":"react-faq-rowcontent-".concat(this.props.rowid),onKeyPress:this.keyPress,onKeyDown:this.keyPress};p&&(N.tabIndex=0);var k={role:"region",id:"react-faq-rowcontent-".concat(this.props.rowid),"aria-expanded":b,"aria-hidden":!b,onTransitionEnd:this.finishTransition};l&&(k.style={height:v});var O=["row-title",w,$r["row-title"],$r[w],p?"":$r["no-tabfocus"]].filter(Boolean).join(" "),_=null;_=d&&f?b?f:d:c||Tn.createElement("div",{dangerouslySetInnerHTML:{__html:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="black" width="36px" height="36px"><path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/><path d="M0 0h24v24H0V0z" fill="none"/></svg>'},className:"arrow-image ".concat($r["arrow-image"]),alt:"Expand arrow"});var $=[$r["row-content"],"row-content",l?$r.animate:$r.static].join(" "),M=[$r["row-content-text"],"row-content-text"].join(" "),K=o&&typeof o=="string"?Tn.createElement("div",{className:M,dangerouslySetInnerHTML:{__html:o}}):Tn.createElement("div",{className:M},o);return Tn.createElement("section",{className:"faq-row ".concat($r["faq-row"]),role:"listitem",ref:x},Tn.createElement("div",Aw({className:O},N),Tn.createElement("div",{className:"row-title-text ".concat($r["row-title-text"]),id:"react-faq-rowtitle-".concat(this.props.rowid)},i),Tn.createElement("span",{className:"icon-wrapper ".concat($r["icon-wrapper"]),"aria-hidden":"true"},_)),Tn.createElement("div",Aw({className:$},k,{ref:g}),K))}}]),n}();Qi(s6,"propTypes",{config:Ge.object,data:Ge.object,rowid:Ge.number,getRowOptions:Ge.func,openOnload:Ge.bool});var i6=function(t){t6(n,P.PureComponent);var e=r6(n);function n(){var r;JF(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return Qi(va(r=e.call.apply(e,[this].concat(i))),"state",{rowsOption:[]}),r}return e6(n,[{key:"componentDidMount",value:function(){this.props.getRowOptions&&this.props.getRowOptions(this.state.rowsOption)}},{key:"render",value:function(){var r=this,s=this.props.data||{},i=s.title,o=s.rows,a=o===void 0?[]:o,u=this.props,l=u.styles,c=l===void 0?{}:l,d=u.config,f=((d=d===void 0?{}:d).animate,d.openOnload),h={"--faq-bg-color":c.bgColor,"--title-text-color":c.titleTextColor,"--title-text-size":c.titleTextSize,"--row-title-color":c.rowTitleColor,"--row-title-text-size":c.rowTitleTextSize,"--row-content-color":c.rowContentColor,"--row-content-text-size":c.rowContentTextSize,"--row-content-padding-top":c.rowContentPaddingTop,"--row-content-padding-bottom":c.rowContentPaddingBottom,"--row-content-padding-right":c.rowContentPaddingRight,"--row-content-padding-left":c.rowContentPaddingLeft,"--arrow-color":c.arrowColor,"--transition-duration":c.transitionDuration,"--timing-function":c.timingFunc},p="faq-row-wrapper ".concat($r["faq-row-wrapper"]),y="faq-title ".concat($r["faq-row"]),b="faq-body ".concat($r["row-body"]);return Tn.createElement("div",{className:p,style:h},i?Tn.createElement("section",{className:y},Tn.createElement("h2",null,i)):null,a.length?Tn.createElement("section",{className:b,role:"list"},a.map(function(g,v){return Tn.createElement(s6,{openOnload:f===v,data:g,key:v,rowid:v+1,config:r.props.config,getRowOptions:function(w){return r.state.rowsOption[v]=w}})})):null)}}]),n}();Qi(i6,"propTypes",{data:Ge.object,styles:Ge.object,config:Ge.object,getRowOptions:Ge.func});const Ele={title:"Frequently Asked Questions",rows:[{title:"Where can I buy a stand?",content:E.jsxs("p",{children:["You can buy a stand for 12.99 at:",E.jsx("a",{target:"_blank",href:"https://www.amazon.co.uk/dp/B07NVBXYPJ",rel:"noreferrer",children:"https://www.amazon.co.uk/dp/B07NVBXYPJ"}),"."]})},{title:"Is there a mobile app?",content:E.jsxs("p",{children:["If you have an Android, you can download the free ChessCam app",E.jsx("a",{target:"_blank",href:"https://play.google.com/store/apps/details?id=com.camerachess.www.twa",rel:"noreferrer",children:"here"}),". If you have an IPhone, you can add ChessCam to your home screen from the browser. See ",E.jsx("a",{target:"blank",href:"https://support.google.com/chrome/answer/9658361?hl=en-GB&co=GENIE.Platform%3DiOS",rel:"noreferrer",children:"here"})," for more detail."]})},{title:"How do I setup my camera?",content:E.jsx("div",{children:E.jsxs("ul",{children:[E.jsx("li",{children:"Place your camera on the stand to the side of the board."}),E.jsx("li",{children:"Make sure that the stand is stable and that the camera can see all 4 corners."}),E.jsx("li",{children:"If you are using your devices native camera app and have 0.5x zoom available, use it."}),E.jsx("li",{children:"Make sure that the tallest piece (the king or queen) is still in shot when placed on the furthest square from the camera."}),E.jsx("li",{children:E.jsxs("figure",{className:"figure",children:[E.jsx("img",{src:"halfZoom.webp",className:"figure-img img-fluid rounded",alt:"0.5x zoom setup"}),E.jsx("figcaption",{className:"figure-caption text-white",children:"My setup with 0.5x zoom"})]})}),E.jsx("li",{children:E.jsxs("figure",{className:"figure",children:[E.jsx("img",{src:"fullZoom.webp",className:"figure-img img-fluid rounded",alt:"1x zoom setup"}),E.jsx("figcaption",{className:"figure-caption text-white",children:"My setup with 1x zoom"})]})})]})})},{title:"Will the app work if the board or the camera move mid-way through?",content:E.jsxs("p",{children:["If the camera moves so that the squares are not aligned then the app will break. When the corners algorithm is fast and consistent enough the app may support a moving board/camera. See ",E.jsx("a",{target:"_blank",href:"https://www.youtube.com/watch?v=XV8EKqScaKs",rel:"noreferrer",children:"https://www.youtube.com/watch?v=XV8EKqScaKs"})," for a brief demo."]})},{title:"How powerful does my device have to be?",content:E.jsx("p",{children:"The app works best if you can achieve at least 4 FPS."})},{title:"How do I record?",content:E.jsxs("ol",{children:[E.jsxs("li",{children:["Click the ",E.jsx("b",{children:"Record"})," button from the Home page. Alternatively, go straight to ",E.jsx("a",{target:"_blank",href:"https://www.chesscam.net/record",rel:"noreferrer",children:"https://www.chesscam.net/record"}),"."]}),E.jsx("li",{children:'Setup your device (see "How do I set up my camera?")'}),E.jsxs("li",{children:["Click ",E.jsx("b",{children:"Find Corners"}),' to align the 4 corners with your board. If they are not correct, then adjust them manually. Clockwise the corners go "h1", "a1", "a8", "h8", starting from the bottom-right corner (relative to White).']}),E.jsxs("li",{children:["Click the ",E.jsx("b",{children:"Play"})," button to start recording your game."]})]})},{title:"How do I upload a game?",content:E.jsxs("div",{children:[E.jsxs("ol",{children:[E.jsxs("li",{children:["Click the ",E.jsx("b",{children:"Upload"})," button from the Home page. Alternatively, go straight to ",E.jsx("a",{target:"_blank",href:"https://www.chesscam.net/upload",rel:"noreferrer",children:"https://www.chesscam.net/upload"}),"."]}),E.jsx("li",{children:'Setup your device (see "How do I set up my camera?")'}),E.jsxs("li",{children:["Click ",E.jsx("b",{children:"Find Corners"}),' to align the 4 corners with your board. If they are not correct, then adjust them manually. Clockwise the corners go "h1", "a1", "a8", "h8", starting from the bottom-right corner (relative to White).']}),E.jsxs("li",{children:["Click the ",E.jsx("b",{children:"Play"})," button to start recording your game."]})]}),E.jsx("p",{children:"You can adjust the speed to 1x, 2x or 4x, but you must pause the game first. It is recommended that you keep the speed at 1x."}),E.jsx("p",{children:"You can reset the video by clicking the back button."})]})},{title:"How do I save my game?",content:E.jsxs("p",{children:["After you have finished uploading or recording your game, copy it to the clipboard by clicking ",E.jsx("b",{children:"Copy PGN"}),"."]})},{title:"How do I export my game to Lichess?",content:E.jsxs("div",{children:["This guide assumes that you have already recorded or uploaded a game successfully.",E.jsxs("ol",{children:[E.jsxs("li",{children:["If you haven't done so already, click ",E.jsx("b",{children:"Login"})," from the home screen. After giving ChessCam permissions to the Lichess API you will be redirected back to the Home screen."]}),E.jsxs("li",{children:["Click ",E.jsx("b",{children:"Export"})," from the home screen."]}),E.jsx("li",{children:"Choose a study that you would like to export your game to. If none are listed then go and create one on the Lichess website."}),E.jsxs("li",{children:["Click ",E.jsx("b",{children:"Export Game"})," to save your game to your study. It will be saved as the current timestamp."]})]})]})},{title:"Does the app work offline?",content:E.jsx("p",{children:"If you have used the app once with an internet connection, then it will work offline in the future. In offline mode, you cannot export your game to Lichess, but you can still copy the PGN."})},{title:"How are illegal moves handled?",content:E.jsx("p",{children:"Illegal moves will be ignored by the app. There are plans to raise an alert when an illegal move is played."})},{title:"Are variants supported?",content:E.jsx("p",{children:"Not at the moment."})},{title:"When I upload a video, is it kept private?",content:E.jsx("p",{children:"When a video is uploaded it is processed locally ensuring full data privacy. ChessCam never receives any videos that a user uploads."})},{title:"How can I get in touch?",content:E.jsxs("div",{children:[E.jsxs("p",{children:["Message me on Lichess:",E.jsx("a",{target:"_blank",href:"https://lichess.org/@/BlindfoldBlunderer",rel:"noreferrer",children:"https://lichess.org/@/BlindfoldBlunderer"})]}),E.jsx("p",{children:"I am always happy to chat about any ideas or problems that you might have!"})]})}]},Cle={bgColor:"#212529",titleTextColor:"white",rowTitleColor:"white",rowContentColor:"white",arrowColor:"white"},Nle=()=>E.jsxs("div",{className:"bg-dark h-100 text-white justify-content-center",children:[E.jsx(i6,{data:Ele,styles:Cle}),E.jsx(_L,{})]});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vu={},dm={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function _le(t,e){Vu[t]=e}function Li(t,e){if(!(t in Vu)||e!=null){const r=Ile(t,e);if(r!==null)Vu[t]=r;else return console.log("Could not get context for WebGL version",t),null}const n=Vu[t];return n==null||n.isContextLost()?(delete Vu[t],Li(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),Vu[t])}function Tle(t){if(!X().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function Ile(t,e){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=e??Tle(t);return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete Vu[t]},!1),X().getBool("SOFTWARE_WEBGL_ENABLED")&&(dm.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",dm)||n.getContext("experimental-webgl",dm):n.getContext("webgl2",dm)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var kh;(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(kh||(kh={}));var ls;(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(ls||(ls={}));var Pn;(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(Pn||(Pn={}));function Jh(t,e){return[e,t]}function kle(t,e){return t*e}function fm(t){const e=de(t),n=Math.ceil(e/4);return bv(n)}function Od(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function Rle(t,e){const[n,r]=Od(t,e);return n*r*4}function lS(t,e){const n=t;let r,s,i,o,a,u,l,c,d,f;return X().getNumber("WEBGL_VERSION")===2?(r=n.R32F,s=n.R16F,i=n.RGBA16F,o=n.RGBA32F,a=n.RED,l=4,c=1,d=n.HALF_FLOAT,f=n.FLOAT,u=n.RGBA8):(r=t.RGBA,s=t.RGBA,i=t.RGBA,o=n.RGBA,a=t.RGBA,l=4,c=4,d=e!=null?e.HALF_FLOAT_OES:null,f=t.FLOAT,u=t.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:s,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:o,textureFormatFloat:a,downloadTextureFormat:u,downloadUnpackNumChannels:l,defaultNumChannels:c,textureTypeHalfFloat:d,textureTypeFloat:f}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ye(t,e){const n=e();return X().getBool("DEBUG")&&Ole(t),n}function Ole(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+Fle(t,e))}const Ple=596e-10,Dle=65504;function Lle(t){return!!(X().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||Ple<Math.abs(t)&&Math.abs(t)<Dle)}function Fle(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function hm(t,e){return ea(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function $le(t,e){const n=ea(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(ye(t,()=>t.shaderSource(n,e)),ye(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function Ble(t,e){const n=ea(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(ye(t,()=>t.shaderSource(n,e)),ye(t,()=>t.compileShader(n)),X().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw o6(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const Mle=/ERROR: [0-9]+:([0-9]+):/g;function o6(t,e){const n=Mle.exec(e);if(n==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(t);return}const r=+n[1],s=t.split(`
`),i=s.length.toString().length+2,o=s.map((d,f)=>Vc((f+1).toString(),i)+d);let a=0;for(let d=0;d<o.length;d++)a=Math.max(o[d].length,a);const u=o.slice(0,r-1),l=o.slice(r-1,r),c=o.slice(r);console.log(u.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${Vc(l[0],a)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(c.join(`
`))}function Vle(t){return ea(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function Ule(t,e){if(ye(t,()=>t.linkProgram(e)),!X().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function lb(t,e){if(ye(t,()=>t.validateProgram(e)),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function zle(t,e){const n=ea(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return ye(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),ye(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function jle(t,e){const n=ea(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return ye(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),ye(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function Wle(t){return ea(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function qle(t,e){const n=X().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const r=`[${t}x${e}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n){const r=`[${t}x${e}]`,s=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+s+".")}}function Gle(t){return ea(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function O_(t,e,n,r,s,i,o){const a=t.getAttribLocation(e,n);return a===-1?!1:(ye(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),ye(t,()=>t.vertexAttribPointer(a,s,t.FLOAT,!1,i,o)),ye(t,()=>t.enableVertexAttribArray(a)),!0)}function Hle(t,e,n){Zle(t,n),ye(t,()=>t.activeTexture(t.TEXTURE0+n)),ye(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function Kle(t,e,n){return ea(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function Xle(t,e,n){return t.getUniformLocation(e,n)}function Yle(t,e,n,r){ye(t,()=>Hle(t,e,r)),ye(t,()=>t.uniform1i(n,r))}function cb(t,e,n){ye(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),ye(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function P_(t,e){ye(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),ye(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function pm(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+Qle(t,e))}function Qle(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function ea(t,e,n){const r=ye(t,()=>e());if(r==null)throw new Error(n);return r}function Zle(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n){const s=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${s}.`)}}function hd(t,e=2){return de(t.slice(0,t.length-e))}function pd(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function mm(t){let e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[hd(t),...pd(t)]),e}function Jle(t,e=!1){let n=X().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=X().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&X().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),e&&(n=n*2,r=r*2,t=t.map((a,u)=>u>=t.length-2?Vx(t[u]):t[u]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=tu(t).newShape);let s=de(t),i=null;t.length<=1&&s<=n?i=[1,s]:t.length===2&&t[0]<=n&&t[1]<=n?i=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?i=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?i=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?i=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(i=[t[0],t[1]*t[2]*t[3]]);const o=i!=null&&Math.max(...i)>r&&Math.min(...i)<=(e?2:1)&&Math.min(...i)>0;if(i==null||o)if(e){const a=hd(t);let u=2,l=2;t.length&&([u,l]=pd(t)),s=a*(u/2)*(l/2),i=bv(s).map(c=>c*2)}else i=bv(s);return i}function gm(t){return t%2===0}function ng(t,e){if(t=t.slice(-2),e=e.slice(-2),Gt(t,e)||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){const n=t[t.length-1],r=e[e.length-1];if(n===r||gm(n)&&gm(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&gm(t[0])&&gm(e[0])}let db,fb;function ece(t){if(db==null){const e=Li(t);db=e.getParameter(e.MAX_TEXTURE_SIZE)}return db}function tce(t){if(fb==null){const e=Li(t);fb=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,fb)}function nce(t){if(t===0)return 0;let e;const n=Li(t);return Hs(n,"EXT_disjoint_timer_query_webgl2")&&t===2?e=2:Hs(n,"EXT_disjoint_timer_query")?e=1:e=0,e}function Hs(t,e){return t.getExtension(e)!=null}function D_(t){try{if(Li(t)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function rce(t){if(t===0)return!1;const e=Li(t);if(t===1){if(!Hs(e,"OES_texture_float"))return!1}else if(!Hs(e,"EXT_color_buffer_float"))return!1;return Cw(e)}function sce(t){if(t===0)return!1;const e=Li(t);if(t===1){if(!Hs(e,"OES_texture_float")||!Hs(e,"WEBGL_color_buffer_float"))return!1}else{if(Hs(e,"EXT_color_buffer_float"))return Cw(e);const r="EXT_color_buffer_half_float";if(Hs(e,r)){const s=e.getExtension(r);return ice(e,s)}return!1}return Cw(e)}function Cw(t){const e=lS(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);const i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(i),o}function ice(t,e){const n=lS(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(o),a}function oce(t){return t!==2?!1:Li(t).fenceSync!=null}function ep(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&R(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ne=X();Ne.registerFlag("HAS_WEBGL",()=>Ne.getNumber("WEBGL_VERSION")>0);Ne.registerFlag("WEBGL_VERSION",()=>D_(2)?2:D_(1)?1:0);Ne.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);Ne.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>Ne.get("WEBGL_VERSION")===2);Ne.registerFlag("WEBGL_CPU_FORWARD",()=>!0);Ne.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);Ne.registerFlag("WEBGL_PACK",()=>Ne.getBool("HAS_WEBGL"));Ne.registerFlag("WEBGL_PACK_NORMALIZATION",()=>Ne.getBool("WEBGL_PACK"));Ne.registerFlag("WEBGL_PACK_CLIP",()=>Ne.getBool("WEBGL_PACK"));Ne.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>Ne.getBool("WEBGL_PACK"));Ne.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>Ne.getBool("WEBGL_PACK"));Ne.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>Ne.getBool("WEBGL_PACK"));Ne.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>Ne.getBool("WEBGL_PACK"));Ne.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>Ne.getBool("WEBGL_PACK"));Ne.registerFlag("WEBGL_PACK_REDUCE",()=>Ne.getBool("WEBGL_PACK"));Ne.registerFlag("WEBGL_LAZILY_UNPACK",()=>Ne.getBool("WEBGL_PACK"));Ne.registerFlag("WEBGL_CONV_IM2COL",()=>Ne.getBool("WEBGL_PACK"));Ne.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>Ne.getBool("WEBGL_PACK"));Ne.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>ece(Ne.getNumber("WEBGL_VERSION")));Ne.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>tce(Ne.getNumber("WEBGL_VERSION")));Ne.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=Ne.getNumber("WEBGL_VERSION");return t===0?0:nce(t)});Ne.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>Ne.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!TP());Ne.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>rce(Ne.getNumber("WEBGL_VERSION")));Ne.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>Ne.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:Ne.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));Ne.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>sce(Ne.getNumber("WEBGL_VERSION")));Ne.registerFlag("WEBGL_FENCE_API_ENABLED",()=>oce(Ne.getNumber("WEBGL_VERSION")));Ne.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>Ne.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);Ne.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});Ne.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>TP()?1:-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)});Ne.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);Ne.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);Ne.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);Ne.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);Ne.registerFlag("WEBGL_EXP_CONV",()=>!1);Ne.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>Ne.getBool("IS_TEST"));Ne.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);Ne.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);Ne.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);Ne.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hr(){let t,e,n,r,s,i,o,a,u,l;return X().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",s="texture",i="outputColor",o="out vec4 outputColor;",a=X().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",u="",l=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",s="texture2D",i="gl_FragColor",o="",a=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,u=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,l=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:s,output:i,defineOutput:o,defineSpecialNaN:a,defineSpecialInf:u,defineRound:l}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $l(t,e,n="index"){const r=Ln(e);return r.map((s,i)=>{const o=`int ${t[i]} = ${n} / ${s}`,a=i===r.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * ${s}`:`index -= ${t[i]} * ${s}`;return`${o}; ${a};`}).join("")}function p1(t,e,n="index"){const r=Ln(e);return r.map((s,i)=>{const o=`int ${t[i]} = ${n} / outShapeStrides[${i}]`,a=i===r.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * outShapeStrides[${i}]`:`index -= ${t[i]} * outShapeStrides[${i}]`;return`${o}; ${a};`}).join("")}function ace(t,e){const n=t.length,r=t.map(i=>`${e}[${i}]`),s=new Array(n-1);s[n-2]=r[n-1];for(let i=n-3;i>=0;--i)s[i]=`(${s[i+1]} * ${r[i+1]})`;return s}function uce(t,e,n="index"){const r=t.map((i,o)=>o),s=ace(r,e);return s.map((i,o)=>{const a=`int ${t[o]} = ${n} / ${s[o]}`,u=o===s.length-1?`int ${t[o+1]} = ${n} - ${t[o]} * ${s[o]}`:`index -= ${t[o]} * ${s[o]}`;return`${a}; ${u};`}).join("")}function cS(t){const e=Ln(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function dS(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const a6=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:u6}=eQ;function lce(t,e,n){const r=[];if(t.forEach(h=>{const p=de(h.shapeInfo.logicalShape);if(h.shapeInfo.isUniform?r.push(`uniform float ${h.name}${p>1?`[${p}]`:""};`):(r.push(`uniform sampler2D ${h.name};`),r.push(`uniform int offset${h.name};`)),n.enableShapeUniforms){const{uniformShape:y}=fS(n.packedInputs,h.shapeInfo.logicalShape,h.shapeInfo.texShape);switch(y.length){case 1:r.push(`uniform int ${h.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${h.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${h.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${h.name}Shape;`);break}r.push(`uniform ivec2 ${h.name}TexShape;`)}}),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(h=>{r.push(`uniform ${h.type} ${h.name}${h.arrayIndex?`[${h.arrayIndex}]`:""};`)});const s=r.join(`
`),i=t.map(h=>cce(h,e,n.packedInputs,n.enableShapeUniforms)).join(`
`),o=e.texShape,a=hr(),u=hce(a);let l,c,d=gce(a);return e.isPacked?(l=dce(e.logicalShape,o,n.enableShapeUniforms),c=mce(a)):(l=fce(e.logicalShape,o,n.enableShapeUniforms),c=pce(a)),n.packedInputs&&(d+=wce),[d,u,c,s,l,i,n.userCode].join(`
`)}function Pd(t,e=!1){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return Oce(t,e);case 1:return Dce(t,e);case 2:return Fce(t,e);case 3:return Bce(t,e);case 4:return Vce(t,e);case 5:return Uce(t);case 6:return zce(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function l6(t,e){switch(t.shapeInfo.logicalShape.length){case 0:return Rce(t);case 1:return Pce(t,e);case 2:return Lce(t,e);case 3:return $ce(t,e);default:return Mce(t,e)}}function cce(t,e,n=!1,r){let s="";n?s+=l6(t,r):s+=Pd(t,r);const i=t.shapeInfo.logicalShape,o=e.logicalShape;return i.length<=o.length&&(n?s+=jce(t,e):s+=Wce(t,e)),s}function dce(t,e,n){switch(t.length){case 0:return c6();case 1:return xce(t,e,n);case 2:return Ice(t,e,n);case 3:return Ace(t,e,n);default:return Cce(t,e,n)}}function fce(t,e,n){switch(t.length){case 0:return c6();case 1:return Sce(t,e,n);case 2:return kce(t,e,n);case 3:return Ece(t,e,n);case 4:return Nce(t,e,n);case 5:return _ce(t,e);case 6:return Tce(t,e);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function hce(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function pce(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function mce(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function gce(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${yce}
    ${bce}
    ${vce}
  `}const yce=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,bce=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,vce=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,wce=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function c6(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function xce(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return r[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function Sce(t,e,n){return e[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function Ace(t,e,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],s=Math.ceil(t[2]/2),i=s*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec3(b, r, c);
    }
  `}function Ece(t,e,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${p1(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;const r=$l(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function Cce(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],s=Math.ceil(t[t.length-1]/2),i=s*Math.ceil(t[t.length-2]/2);let o=i,a="",u="b, r, c";for(let l=2;l<t.length-1;l++)o*=t[t.length-l-1],a=`
      int b${l} = index / ${o};
      index -= b${l} * ${o};
    `+a,u=`b${l}, `+u;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${a}

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec${t.length}(${u});
    }
  `}function Nce(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${p1(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;const r=$l(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function _ce(t,e){const n=$l(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function Tce(t,e){const n=$l(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function Ice(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(Gt(t,e))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const s=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec2(r, c);
    }
  `}function kce(t,e,n){return Gt(t,e)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function Bl(t){return`offset${t}`}function Rce(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=hr();return`
    vec4 ${n}() {
      return ${r.texture2D}(${e}, halfCR);
    }
  `}function Oce(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[s,i]=t.shapeInfo.texShape;if(s===1&&i===1)return`
      float ${r}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const o=Bl(n);if(e)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${o});
      return sampleTexture(${n}, uv);
    }
  `;const[a,u]=t.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${a}, ${u}, ${o});
      return sampleTexture(${n}, uv);
    }
  `}function Pce(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=t.shapeInfo.texShape,i=hr();if(e)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${i.texture2D}(${n}, uv);
    }
  `;const o=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${o[0]}, ${o[1]}, index);
      return ${i.texture2D}(${n}, uv);
    }
  `}function Dce(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${Dd(t)}
      }
    `;const s=t.shapeInfo.texShape,i=s[0],o=s[1];if(o===1&&i===1)return`
      float ${r}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const a=Bl(n);return o===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / ${i}.0);
        return sampleTexture(${n}, uv);
      }
    `:i===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / ${o}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:e?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${a});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${i}, ${o}, index + ${a});
      return sampleTexture(${n}, uv);
    }
  `}function Lce(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,o=i[0],a=i[1],u=hr();if(i!=null&&Gt(n,i))return e?`
      vec4 ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${u.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${a}.0, ${o}.0);

        return ${u.texture2D}(${r}, uv);
      }
    `;if(e)return`
    vec4 ${s}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${u.texture2D}(${r}, uv);
    }
  `;const l=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],c=Math.ceil(n[1]/2);return`
    vec4 ${s}(int row, int col) {
      vec2 uv = packedUVfrom2D(${c}, ${l[0]}, ${l[1]}, row, col);
      return ${u.texture2D}(${r}, uv);
    }
  `}function Fce(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape;if(i!=null&&Gt(n,i)){if(e)return`
      float ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const f=i[0],h=i[1];return`
    float ${s}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${h}.0, ${f}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:o,keptDims:a}=tu(n),u=o;if(u.length<n.length){const f=Ld(t,u),h=["row","col"];return`
      ${Pd(f,e)}
      float ${s}(int row, int col) {
        return ${s}(${Fd(h,a)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${Dd(t)}
      }
    `;const l=i[0],c=i[1],d=Bl(r);return c===1?e?`
      float ${s}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${l}.0);
      return sampleTexture(${r}, uv);
    }
  `:l===1?e?`
      float ${s}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${c}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:e?`
      float ${s}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${d};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${s}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${d};
    vec2 uv = uvFromFlat(${l}, ${c}, index);
    return sampleTexture(${r}, uv);
  }
`}function $ce(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(n[0]===1){const f=n.slice(1),h=[1,2],p=Ld(t,f),y=["b","row","col"];return`
        ${l6(p,e)}
        vec4 ${s}(int b, int row, int col) {
          return ${s}(${Fd(y,h)});
        }
      `}const a=hr();if(e)return`
    vec4 ${s}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `;const u=o[0],l=o[1],c=Math.ceil(n[2]/2),d=c*Math.ceil(n[1]/2);return`
    vec4 ${s}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${u}, ${l}, ${d}, ${c}, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `}function Bce(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[1]*n[2],o=n[2],{newShape:a,keptDims:u}=tu(n),l=a;if(l.length<n.length){const y=Ld(t,l),b=["row","col","depth"];return`
        ${Pd(y,e)}
        float ${s}(int row, int col, int depth) {
          return ${s}(${Fd(b,u)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${i}, ${o}, 1)));
        ${Dd(t)}
      }
    `;const c=t.shapeInfo.texShape,d=c[0],f=c[1],h=t.shapeInfo.flatOffset;if(f===i&&h==null)return e?`
      float ${s}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${s}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${o}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${f}.0, ${d}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(f===o&&h==null)return e?`
      float ${s}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${f}.0, ${d}.0);
      return sampleTexture(${r}, uv);
    }
  `;const p=Bl(r);return e?`
    float ${s}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${p};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${s}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${i} + col * ${o} + depth + ${p};
        vec2 uv = uvFromFlat(${d}, ${f}, index);
        return sampleTexture(${r}, uv);
      }
  `}function Mce(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=hr();if(e)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${s.texture2D}(${n}, uv);
    }
  `;const i=t.shapeInfo.logicalShape,o=i.length,a=t.shapeInfo.texShape,u=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],l=u[0],c=u[1],d=Math.ceil(i[o-1]/2);let f=d*Math.ceil(i[o-2]/2),h="int b, int row, int col",p=`b * ${f} + (row / 2) * ${d} + (col / 2)`;for(let y=2;y<o-1;y++)h=`int b${y}, `+h,f*=i[o-y-1],p=`b${y} * ${f} + `+p;return`
    vec4 ${r}(${h}) {
      int index = ${p};
      int texR = index / ${c};
      int texC = index - texR * ${c};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${c}, ${l});
      return ${s.texture2D}(${n}, uv);
    }
  `}function Vce(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[3],o=n[2]*i,a=n[1]*o,{newShape:u,keptDims:l}=tu(n);if(u.length<n.length){const v=Ld(t,u),w=["row","col","depth","depth2"];return`
      ${Pd(v,e)}
      float ${s}(int row, int col, int depth, int depth2) {
        return ${s}(${Fd(w,l)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${a}, ${o}, ${i}, 1)));
        ${Dd(t)}
      }
    `;const c=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,f=d[0],h=d[1],p=`int stride2 = ${r}Shape[3];`,y=`int stride1 = ${r}Shape[2] * stride2;`,b=`int stride0 = ${r}Shape[1] * stride1;`;if(h===a&&c==null)return e?`
      float ${s}(int row, int col, int depth, int depth2) {
        ${p}
        ${y}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${o}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${f}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(h===i&&c==null)return e?`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${f}.0);
        return sampleTexture(${r}, uv);
      }
    `;const g=Bl(r);return e?`
    float ${s}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${p}
      ${y}
      ${b}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${g});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${s}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${o} +
          depth * ${i} + depth2;
      vec2 uv = uvFromFlat(${f}, ${h}, index + ${g});
      return sampleTexture(${r}, uv);
    }
  `}function Uce(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=e[4],i=e[3]*s,o=e[2]*i,a=e[1]*o,{newShape:u,keptDims:l}=tu(e);if(u.length<e.length){const y=Ld(t,u),b=["row","col","depth","depth2","depth3"];return`
      ${Pd(y)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${Fd(b,l)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${a}, ${o}, ${i}, ${s})) +
          depth3;
        ${Dd(t)}
      }
    `;const c=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,f=d[0],h=d[1];if(h===a&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${o}, ${i}, ${s}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(h===s&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;const p=Bl(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${o} + depth * ${i} +
          depth2 * ${s} + depth3 + ${p};
      vec2 uv = uvFromFlat(${f}, ${h}, index);
      return sampleTexture(${n}, uv);
    }
  `}function zce(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:s,keptDims:i}=tu(e);if(s.length<e.length){const b=Ld(t,s),g=["row","col","depth","depth2","depth3","depth4"];return`
      ${Pd(b)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${Fd(g,i)});
      }
    `}const o=e[5],a=e[4]*o,u=e[3]*a,l=e[2]*u,c=e[1]*l;if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${c}, ${l}, ${u}, ${a})) +
          dot(
            vec2(depth3, depth4),
            vec2(${o}, 1)));
        ${Dd(t)}
      }
    `;const d=t.shapeInfo.flatOffset,f=t.shapeInfo.texShape,h=f[0],p=f[1];if(p===c&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${l}, ${u}, ${a}, ${o})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${p}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(p===o&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${p}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;const y=Bl(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${c} + col * ${l} + depth * ${u} +
          depth2 * ${a} + depth3 * ${o} + depth4 + ${y};
      vec2 uv = uvFromFlat(${h}, ${p}, index);
      return sampleTexture(${n}, uv);
    }
  `}function Dd(t){const e=t.name,n=de(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function jce(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),s="get"+r+"AtOutCoords",i=t.shapeInfo.logicalShape.length,o=e.logicalShape.length,a=u6(t.shapeInfo.logicalShape,e.logicalShape),u=wt(o),l=o-i;let c;const d=["x","y","z","w","u","v"];i===0?c="":o<2&&a.length>=1?c="coords = 0;":c=a.map(v=>`coords.${d[v+l]} = 0;`).join(`
`);let f="";o<2&&i>0?f="coords":f=t.shapeInfo.logicalShape.map((v,w)=>`coords.${d[w+l]}`).join(", ");let h="return outputValue;";const y=de(t.shapeInfo.logicalShape)===1,g=de(e.logicalShape)===1;if(i===1&&!y&&!g)h=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(y&&!g)o===1?h=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:h=`
        return vec4(outputValue.x);
      `;else if(a.length){const v=i-2,w=i-1;a.indexOf(v)>-1&&a.indexOf(w)>-1?h="return vec4(outputValue.x);":a.indexOf(v)>-1?h="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":a.indexOf(w)>-1&&(h="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${s}() {
      ${u} coords = getOutputCoords();
      ${c}
      vec4 outputValue = get${r}(${f});
      ${h}
    }
  `}function Wce(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),s="get"+r+"AtOutCoords",i=e.texShape,o=t.shapeInfo.texShape,a=t.shapeInfo.logicalShape.length,u=e.logicalShape.length;if(!t.shapeInfo.isUniform&&a===u&&t.shapeInfo.flatOffset==null&&Gt(o,i))return`
      float ${s}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const l=wt(u),c=u6(t.shapeInfo.logicalShape,e.logicalShape),d=u-a;let f;const h=["x","y","z","w","u","v"];a===0?f="":u<2&&c.length>=1?f="coords = 0;":f=c.map(y=>`coords.${h[y+d]} = 0;`).join(`
`);let p="";return u<2&&a>0?p="coords":p=t.shapeInfo.logicalShape.map((y,b)=>`coords.${h[b+d]}`).join(", "),`
    float ${s}() {
      ${l} coords = getOutputCoords();
      ${f}
      return get${r}(${p});
    }
  `}function wt(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function fS(t,e,n){const{newShape:r,keptDims:s}=tu(e),i=e.length,o=t&&i===3&&e[0]===1,a=o?e.slice(1):r,u=!t&&i>1&&!Gt(e,n)&&r.length<i||o;return{useSqueezeShape:u,uniformShape:u?a:e,keptDims:s}}function Ld(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function Fd(t,e){return e.map(n=>t[n]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qce(t,e,n,r){const s=n.map((c,d)=>{const f={logicalShape:c.shape,texShape:c.isUniform?null:c.texData.texShape,isUniform:c.isUniform,isPacked:c.isUniform?!1:c.texData.isPacked,flatOffset:null};return c.texData!=null&&c.texData.slice!=null&&c.texData.slice.flatOffset>0&&(f.flatOffset=c.texData.slice.flatOffset),{name:e.variableNames[d],shapeInfo:f}}),i=s.map(c=>c.shapeInfo),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},a=lce(s,o,e),u=Ble(t.gl,a),l=t.createProgram(u);return X().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:u,source:a,webGLProgram:l,inShapeInfos:i,outShapeInfo:o,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(l),Object.assign({program:e,fragmentShader:u,source:a,webGLProgram:l,inShapeInfos:i,outShapeInfo:o},d6(t,e,l)))}function d6(t,e,n){const r=[],s=[];let i,o,a,u=null,l=null;l=t.getUniformLocation(n,"NAN",!1),X().getNumber("WEBGL_VERSION")===1&&(u=t.getUniformLocation(n,"INFINITY",!1));const c=!1;for(const d of e.variableNames){const f={name:d,uniform:t.getUniformLocation(n,d,c),offset:t.getUniformLocation(n,`offset${d}`,c)};e.enableShapeUniforms&&(f.shape=t.getUniformLocation(n,`${d}Shape`,c),f.texShape=t.getUniformLocation(n,`${d}TexShape`,c)),r.push(f)}if(e.enableShapeUniforms&&(i=t.getUniformLocation(n,"outShape",c),a=t.getUniformLocation(n,"outShapeStrides",c),o=t.getUniformLocation(n,"outTexShape",c)),e.customUniforms)for(const d of e.customUniforms)s.push(t.getUniformLocation(n,d.name,c));return{variablesLocations:r,customUniformLocations:s,infLoc:u,nanLoc:l,outShapeLocation:i,outShapeStridesLocation:a,outTexShapeLocation:o}}function L_(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((n,r)=>{const s=n.logicalShape,i=e[r],o=i.shape;if(!Gt(s,o))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${s} and ${o} must match`);if(n.isUniform&&i.isUniform)return;const a=n.texShape,u=i.isUniform?null:i.texData.texShape;if(!Gt(a,u))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${a} and ${u} must match`)})}function Gce(t,e,n,r,s){e.program.enableShapeUniforms||(L_(e.inShapeInfos,n),L_([e.outShapeInfo],[r]));const i=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(i.texture,o[0],o[1]):t.setOutputMatrixTexture(i.texture,o[0],o[1]),t.setProgram(e.webGLProgram),t.bindVertexArray(e.webGLProgram.vao),X().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN);for(let u=0;u<n.length;++u){const l=n[u],{uniform:c,offset:d,shape:f,texShape:h}=e.variablesLocations[u];if(f){const{uniformShape:p}=fS(e.program.packedInputs,l.shape,l.texData.texShape);switch(p.length){case 1:t.gl.uniform1iv(f,new Int32Array(p));break;case 2:t.gl.uniform2iv(f,new Int32Array(p));break;case 3:t.gl.uniform3iv(f,new Int32Array(p));break;case 4:t.gl.uniform4iv(f,new Int32Array(p));break}}if(h&&t.gl.uniform2i(h,l.texData.texShape[0],l.texData.texShape[1]),c!=null){if(l.isUniform){if(de(l.shape)<2)t.gl.uniform1f(c,l.uniformValues[0]);else{let p=l.uniformValues;p instanceof Float32Array||(p=new Float32Array(p)),t.gl.uniform1fv(c,p)}continue}l.texData.slice!=null&&d!=null&&t.gl.uniform1i(d,l.texData.slice.flatOffset),t.setInputMatrixTexture(l.texData.texture.texture,c,u)}}const a=e.outShapeLocation;if(a)switch(r.shape.length){case 1:t.gl.uniform1iv(a,new Int32Array(r.shape));break;case 2:t.gl.uniform2iv(a,new Int32Array(r.shape));break;case 3:t.gl.uniform3iv(a,new Int32Array(r.shape));break;case 4:t.gl.uniform4iv(a,new Int32Array(r.shape));break}if(e.outShapeStridesLocation){const u=Ln(r.shape);switch(r.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(u));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(u));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(u));break}}if(e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),e.program.customUniforms&&s)for(let u=0;u<e.program.customUniforms.length;++u){const l=e.program.customUniforms[u],c=e.customUniformLocations[u],d=s[u];if(l.type==="float")t.gl.uniform1fv(c,d);else if(l.type==="vec2")t.gl.uniform2fv(c,d);else if(l.type==="vec3")t.gl.uniform3fv(c,d);else if(l.type==="vec4")t.gl.uniform4fv(c,d);else if(l.type==="int")t.gl.uniform1iv(c,d);else if(l.type==="ivec2")t.gl.uniform2iv(c,d);else if(l.type==="ivec3")t.gl.uniform3iv(c,d);else if(l.type==="ivec4")t.gl.uniform4iv(c,d);else throw Error(`uniform type ${l.type} is not supported yet.`)}t.executeProgram()}function Hce(t,e,n){let r="";e.concat(n).forEach(o=>{const a=o.texData!=null&&o.texData.slice!=null&&o.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!o.isUniform){const u=o.texData.texShape,{useSqueezeShape:l,uniformShape:c,keptDims:d}=fS(t.packedInputs,o.shape,u);let f="",h="",p="";if(c.length===1&&t.packedInputs){const N=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)];f=`${N[0]>1}_${N[1]>1}`}else if(c.length===2&&!t.packedInputs)h=`${c[0]>1}_${c[1]>1}`;else if(c.length>2&&!t.packedInputs){const N=Ln(c);p=`${N[0]===u[1]}_${N[N.length-1]===u[1]}`}const y=o.shape.length,b=c.length===2&&Gt(o.shape,u),g=de(o.shape)===1,v=$0(o.shape,n.shape),w=!t.packedInputs&&y===n.shape.length&&Gt(u,n.texData.texShape),x=t.packedInputs||c.length>2?"":`${u[0]>1}_${u[1]>1}`;r+=`${y}_${w}_${l?d:""}_${c.length}_${g}_${v}_${b}_${f}_${h}_${p}_${x}_${a}`}else{const u=o.isUniform?"uniform":o.texData.texShape;r+=`${o.shape}_${u}_${a}`}});const s=t.userCode;let i=t.constructor.name;return i+="_"+r+"_"+s+`${X().getNumber("WEBGL_VERSION")}`,i}function Hn(t){return X().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Kce{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=kh.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=hr();this.outputShape=e,this.enableShapeUniforms=Hn(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?p1(["r","c","d"],e):$l(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Xce{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=kh.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=hr();this.outputShape=e,this.enableShapeUniforms=Hn(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?p1(["r","c","d"],e):$l(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Yce{constructor(e){this.variableNames=["A"],this.outTexUsage=ls.DOWNLOAD;const n=hr();this.outputShape=e,this.userCode=`
      ${a6}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Qce{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=ls.DOWNLOAD;const n=hr();this.outputShape=e,this.userCode=`
      ${a6}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zce={R:0,G:1,B:2,A:3};class F_{constructor(e,n=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const s=hr();this.outputShape=e,this.enableShapeUniforms=Hn(this.outputShape.length);let i="result";n&&(i="floor(result * 255. + 0.5)");let o="";for(let a=0;a<r.length;a++){const u=r[a];o+=`
          if(offset == ${a}) {
            result = values[${Zce[u]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?dS():cS(e)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${s.texture2D}(A, uv);
          ${o}
        }
        ${s.output} = vec4(${i}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Jce{constructor(e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=hr();this.outputShape=e,this.enableShapeUniforms=Hn(this.outputShape.length);let s="",i="result";n&&(i="floor(result * 255. + 0.5)");for(let o=0;o<=1;o++)for(let a=0;a<=1;a++){const u=o*2+a;s+=`
          localCoords = coords;
          if(localCoords[2] + ${a} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${a};
          if (localCoords[1] + ${o} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${o};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${u}] = values[0];
            } else if (offset == 1) {
              result[${u}] = values[1];
            } else if (offset == 2) {
              result[${u}] = values[2];
            } else {
              result[${u}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?dS():cS(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${s}

          ${r.output} = ${i};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ede(t){const e=hr(),n=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return $le(t,n)}function tde(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return zle(t,e)}function nde(t){const e=new Uint16Array([0,1,2,2,1,3]);return jle(t,e)}function tp(t,e,n,r,s,i){qle(e,n);const o=Wle(t),a=t.TEXTURE_2D;return ye(t,()=>t.bindTexture(a,o)),ye(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),ye(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),ye(t,()=>t.texParameteri(a,t.TEXTURE_MIN_FILTER,t.NEAREST)),ye(t,()=>t.texParameteri(a,t.TEXTURE_MAG_FILTER,t.NEAREST)),X().getNumber("WEBGL_VERSION")===1?ye(t,()=>t.texImage2D(a,0,r,e,n,0,s,i,null)):ye(t,()=>t.texStorage2D(a,1,r,e,n)),ye(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:o,texShape:[n,e]}}function f6(t){return t.internalFormatFloat}function rde(t,e,n,r){const[s,i]=Jh(e,n);return tp(t,s,i,f6(r),r.textureFormatFloat,t.FLOAT)}function h6(t){return t.internalFormatHalfFloat}function sde(t,e,n,r){const[s,i]=Jh(e,n);return tp(t,s,i,h6(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function p6(t){return t.downloadTextureFormat}function ide(t,e,n,r){const[s,i]=Jh(e,n);return tp(t,s,i,p6(r),t.RGBA,t.UNSIGNED_BYTE)}function m6(t){return t.internalFormatPackedFloat}function ode(t,e,n,r){const[s,i]=Od(e,n);return tp(t,s,i,m6(r),t.RGBA,t.FLOAT)}function g6(t){return t.internalFormatPackedHalfFloat}function ade(t,e,n,r){const[s,i]=Od(e,n);return tp(t,s,i,g6(r),t.RGBA,r.textureTypeHalfFloat)}function ude(t,e,n){return ye(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),O_(t,e,"clipSpacePos",n,3,20,0)&&O_(t,e,"uv",n,2,20,12)}function lde(t,e,n,r,s,i){ye(t,()=>t.bindTexture(t.TEXTURE_2D,e));let o,a,u;s instanceof Uint8Array?(o=new Uint8Array(n*r*4),a=t.UNSIGNED_BYTE,u=t.RGBA):(o=new Float32Array(n*r*4),a=t.FLOAT,u=i.internalFormatPackedFloat),o.set(s),X().getNumber("WEBGL_VERSION")===2?ye(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,r,t.RGBA,a,o)):ye(t,()=>t.texImage2D(t.TEXTURE_2D,0,u,n,r,0,t.RGBA,a,o)),ye(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function cde(t,e,n){ye(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?X().getNumber("WEBGL_VERSION")===2?ye(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):ye(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):X().getNumber("WEBGL_VERSION")===2?ye(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):ye(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),ye(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function dde(t,e,n,r){const s=t.createBuffer();ye(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,s));const a=4*4*e*n;return ye(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,a,t.STREAM_READ)),ye(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),ye(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),s}function fde(t,e,n){const r=t,s=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,s),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),s}function hde(t,e,n,r){const[s,i]=Jh(e,n),o=4,a=new Uint8Array(kle(e*n,o));return ye(t,()=>t.readPixels(0,0,s,i,r.downloadTextureFormat,t.UNSIGNED_BYTE,a)),new Float32Array(a.buffer)}function pde(t,e,n,r,s,i,o,a){const u=t,l=new Float32Array(Rle(i,o));return u.bindBuffer(u.PIXEL_PACK_BUFFER,e),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,l),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),l}function mde(t,e,n){const r=new Float32Array(e*n*4);return ye(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r)),r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hb{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const n=X().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,_le(n,e)):this.gl=Li(n),e=this.gl,X().getNumber("WEBGL_VERSION")===2){const i=e;this.createVertexArray=()=>ye(i,()=>i.createVertexArray()),this.bindVertexArray=o=>ye(i,()=>i.bindVertexArray(o)),this.deleteVertexArray=o=>ye(i,()=>i.deleteVertexArray(o)),this.getVertexArray=()=>ye(i,()=>i.getParameter(i.VERTEX_ARRAY_BINDING))}else if(e!=null){const i=e.getExtension("OES_vertex_array_object");if(i==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>ye(e,()=>i.createVertexArrayOES()),this.bindVertexArray=o=>ye(e,()=>i.bindVertexArrayOES(o)),this.deleteVertexArray=o=>ye(e,()=>i.deleteVertexArrayOES(o)),this.getVertexArray=()=>ye(e,()=>e.getParameter(i.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float";const s="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),X().getNumber("WEBGL_VERSION")===1){const i="OES_texture_float",o="OES_texture_half_float";if(this.textureFloatExtension=hm(this.gl,i),Hs(this.gl,o))this.textureHalfFloatExtension=hm(this.gl,o);else if(X().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),Hs(this.gl,s))this.colorBufferHalfFloatExtension=hm(this.gl,s);else if(X().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",Hs(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(Hs(this.gl,s))this.colorBufferHalfFloatExtension=this.gl.getExtension(s);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=tde(this.gl),this.indexBuffer=nde(this.gl),this.framebuffer=Gle(this.gl),this.textureConfig=lS(this.gl,this.textureHalfFloatExtension)}get debug(){return X().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;ye(e,()=>e.finish()),ye(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),ye(e,()=>e.deleteFramebuffer(this.framebuffer)),ye(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),ye(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),ye(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,n){return this.throwIfDisposed(),rde(this.gl,e,n,this.textureConfig)}createFloat16MatrixTexture(e,n){return this.throwIfDisposed(),sde(this.gl,e,n,this.textureConfig)}createUnsignedBytesMatrixTexture(e,n){return this.throwIfDisposed(),ide(this.gl,e,n,this.textureConfig)}uploadPixelDataToTexture(e,n){this.throwIfDisposed(),cde(this.gl,e,n)}uploadDenseMatrixToTexture(e,n,r,s){this.throwIfDisposed(),lde(this.gl,e,n,r,s,this.textureConfig)}createFloat16PackedMatrixTexture(e,n){return this.throwIfDisposed(),ade(this.gl,e,n,this.textureConfig)}createPackedMatrixTexture(e,n){return this.throwIfDisposed(),ode(this.gl,e,n,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(P_(this.gl,this.framebuffer),this.outputTexture=null),ye(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,n,r){return this.downloadMatrixDriver(e,()=>hde(this.gl,n,r,this.textureConfig))}downloadPackedMatrixFromBuffer(e,n,r,s,i,o){return pde(this.gl,e,n,r,s,i,o,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,n){return fde(this.gl,e,n)}createBufferFromTexture(e,n,r){this.bindTextureToFrameBuffer(e);const s=dde(this.gl,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),s}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let n,r;if(X().getBool("WEBGL_FENCE_API_ENABLED")){const s=e,i=s.fenceSync(s.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{const o=s.clientWaitSync(i,0,0);return o===s.ALREADY_SIGNALED||o===s.CONDITION_SATISFIED},n=i}else X().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(n,X().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:n,isFencePassed:r}}downloadMatrixFromPackedTexture(e,n,r){return this.downloadMatrixDriver(e,()=>mde(this.gl,n,r))}createProgram(e){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=ede(n));const r=Vle(n);ye(n,()=>n.attachShader(r,this.vertexShader)),ye(n,()=>n.attachShader(r,e)),Ule(n,r);const s=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&lb(n,s),s}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const n=this.gl;ye(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),ude(n,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&(ye(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&lb(this.gl,this.program),ye(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,n,r=!0){return this.throwIfDisposed(),r?Kle(this.gl,e,n):Xle(this.gl,e,n)}getAttributeLocation(e,n){return this.throwIfDisposed(),ye(this.gl,()=>this.gl.getAttribLocation(e,n))}getUniformLocationNoThrow(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)}setInputMatrixTexture(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),Yle(this.gl,e,n,r)}setOutputMatrixTexture(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)}setOutputPackedMatrixTexture(e,n,r){this.throwIfDisposed();const[s,i]=Od(n,r);this.setOutputMatrixTextureDriver(e,s,i)}setOutputMatrixWriteRegion(e,n,r,s){this.setOutputMatrixWriteRegionDriver(r,e,s,n)}setOutputPackedMatrixWriteRegion(e,n,r,s){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&lb(this.gl,this.program),pm(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}ye(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),ye(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=hm(this.gl,X().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(X().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,s=this.getQueryTimerExtensionWebGL2(),i=r.createQuery();return r.beginQuery(s.TIME_ELAPSED_EXT,i),i}const e=this.getQueryTimerExtensionWebGL1(),n=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,n),n}endQuery(){if(X().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await OC(()=>this.disposed||this.isQueryAvailable(e,X().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,X().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,n){if(n===0)return null;if(n===2){const r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,n){if(n===0)return!0;if(n===2){const r=this.gl,s=this.getQueryTimerExtensionWebGL2(),i=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(s.GPU_DISJOINT_EXT)),i&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),s=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),s&&!this.disjoint}}pollFence(e){return new Promise(n=>{this.addItemToPoll(()=>e.isFencePassed(),()=>n())})}pollItems(){const e=gde(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=e;++n){const{resolveFn:r}=this.itemsToPoll[n];r()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,n){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in X().platform&&(r=X().platform.setTimeoutCustom.bind(X().platform)),OC(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),cb(this.gl,e,this.framebuffer),this.debug&&pm(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(cb(this.gl,this.outputTexture,this.framebuffer),this.debug&&pm(this.gl)):P_(this.gl,this.framebuffer)}downloadMatrixDriver(e,n){this.bindTextureToFrameBuffer(e);const r=n();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,n,r){this.throwIfDisposed();const s=this.gl;cb(s,e,this.framebuffer),this.debug&&pm(s),this.outputTexture=e,ye(s,()=>s.viewport(0,0,n,r)),ye(s,()=>s.scissor(0,0,n,r))}setOutputMatrixWriteRegionDriver(e,n,r,s){this.throwIfDisposed(),ye(this.gl,()=>this.gl.scissor(e,n,r,s))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function gde(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yde(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Or(t){return(e,n,r,s,i)=>{const o=it(e,n),a=o.length,u=Ln(o),l=de(o),c=qa(i,l),d=e.length,f=n.length,h=Ln(e),p=Ln(n),y=$0(e,o),b=$0(n,o);if(y.length+b.length===0)for(let g=0;g<c.length;++g)c[g]=t(r[g%r.length],s[g%s.length]);else for(let g=0;g<c.length;++g){const v=Ux(g,a,u),w=v.slice(-d);y.forEach(O=>w[O]=0);const x=Sv(w,d,h),N=v.slice(-f);b.forEach(O=>N[O]=0);const k=Sv(N,f,p);c[g]=t(r[x],s[k])}return[c,o]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bde(t,e,n,r){if(r==="int32"){const s=Int32Array.from(t);return[e,"int32",s]}if(r==="bool"){const s=Dg([0],n),[i,o]=Or((a,u)=>a!==u?1:0)(e,[],t,s,"bool");return[o,"bool",i]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vde=Or((t,e)=>t+e);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wde(t,e,n,r,s){const i=de(r),o=Ga(s,n);for(let a=0;a<t.length;a++){const u=t[a];if(u<0)throw new Error("Input x must be non-negative!");u>=s||(i>0?o[u]+=e[a]:o[u]+=1)}return o}function xde(t,e,n,r=!1){const s=t.shape[0],i=t.shape[1],o=Ht([s,n],e.dtype);for(let a=0;a<s;a++)for(let u=0;u<i;u++){const l=t.get(a,u);if(l<0)throw new Error("Input x must be non-negative!");l>=n||(r?o.set(1,a,l):e.size>0?o.set(o.get(a,l)+e.get(a,u),a,l):o.set(o.get(a,l)+1,a,l))}return o}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sde=Or((t,e)=>t&e);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ta(t){return(e,n,r)=>{const s=Sn(n,e.length);for(let i=0;i<e.length;++i)s[i]=t(e[i],r);return s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ade=ta(t=>Math.ceil(t));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ede(t,e,n,r){const s=Sn(n,de(e));if(r&&n!=="string"){let i=0;t.forEach(o=>{const a=de(o.shape);s.set(o.vals,i),i+=a})}else{let i=0;t.forEach(o=>{const a=n==="string"?cd(o.vals):o.vals;let u=0;for(let l=0;l<o.shape[0];++l){const c=l*e[1]+i;for(let d=0;d<o.shape[1];++d)s[c+d]=a[u++]}i+=o.shape[1]})}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cde=Or((t,e)=>t===e?1:0);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nde=ta(t=>Math.exp(t));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _de=ta(t=>Math.expm1(t));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tde=ta(t=>Math.floor(t));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ide=Or((t,e)=>Math.floor(t/e));/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kde(t,e,n,r,s,i,o,a,u){const l=Ht([r,i],n);for(let c=0;c<r;c++){const d=[];let f=0;for(let h=0;h<s;h++){const p=t[c*s+h];f+=p*o[h],d.push(p)}if(f<0||f>=u/i)throw new Error(`Invalid indices: ${d} does not index into ${a}`);for(let h=0;h<i;h++)l.values[c*i+h]=e.get(...e.indexToLoc(f*i+h))}return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rde(t,e,n){const r=Ht(n,t.dtype);for(let s=0;s<r.size;++s){const o=r.indexToLoc(s).slice(),a=o[0],u=o[2],l=e.locToIndex([a,u]);o[2]=e.values[l];const c=t.locToIndex(o);0<=c&&c<t.values.length&&(r.values[s]=t.values[c])}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ode=Or((t,e)=>t>e?1:0);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pde=Or((t,e)=>t>=e?1:0);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dde=Or((t,e)=>t<e?1:0);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lde=Or((t,e)=>t<=e?1:0);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fde(t,e,n){const r=(e-t)/(n-1),s=Ga(n,"float32");s[0]=t;for(let i=1;i<s.length;i++)s[i]=s[i-1]+r;return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $de=ta(t=>Math.log(t));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bde(t,e,n,r){const s=qa(r,de(n));for(let i=0;i<s.length;++i){const o=i*e;let a=t[o];for(let u=0;u<e;++u){const l=t[o+u];(Number.isNaN(l)||l>a)&&(a=l)}s[i]=a}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mde=Or((t,e)=>Math.max(t,e));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vde=Or((t,e)=>Math.min(t,e));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y6=Or((t,e)=>t*e);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ude(t,e,n){const r=wd(-1,n);return y6([],e,r,t,n)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zde=Or((t,e)=>t!==e?1:0);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jde(t,e,n,r,s){const i=e.length,o=de(e),a=Ln(e),u=Ln(s),l=qa(n,de(s));for(let c=0;c<o;++c){const d=Ux(c,i,a),f=new Array(d.length);for(let p=0;p<f.length;p++)f[p]=d[r[p]];const h=Sv(f,i,u);l[h]=t[c]}return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wde(t,e,n,r){const[s,i]=po(t,r),o=fo(e,"int32"),a=Ga(de(s),o),u=de(i);for(let l=0;l<a.length;++l){const c=l*u;let d=1;for(let f=0;f<u;++f)d*=n[c+f];a[l]=d}return{outVals:a,outShape:s,outDtype:o}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qde(t,e,n){t.forEach((r,s)=>{if(r<0||r>=n){const i=Ux(s,e.length,Ln(e)).join(",");throw new Error(`indices[${i}] = ${r} is not in [0, ${n})`)}})}function Gde(t,e){for(let n=0;n<t.length;++n){const r=t[n],s=n===t.length-1?e:t[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>s)throw new Error("Ragged splits must not point past values");for(let i=1;i<r.length;++i)if(r[i-1]>r[i])throw new Error("Ragged splits must be sorted in ascending order")}}function Hde(t,e,n,r){const s=[];let i=0;const o=e.length-1+n.length,a=new Array(o).fill(null).map(()=>[0]);Gde(n,r);let u=1;for(let l=0;l<e.length-1;++l){u*=e[l];const c=e[l+1];for(let d=1;d<u+1;++d)a[l].push(d*c)}for(let l=0;l<t.length;++l){let c=t[l],d=t[l]+1;for(let f=0;f<n.length;++f){const h=n[f],p=f+e.length-1;if(p>=0){const y=a[p],b=y[y.length-1]-h[c];for(let g=c;g<d;++g)a[p].push(h[g+1]+b)}c=h[c],d=h[d]}d!==c&&(s.push([c,d]),i+=d-c)}return{outSplits:a,valueSlices:s,numValues:i}}function Kde(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n].length,s=Sn("int32",r);e.push(s),t[n].forEach((i,o)=>s[o]=i)}return e}function $_(t,e){const n=t.slice(0,e);for(;n.length<e;)n.push(1);for(let r=e;r<t.length;r++)n[e-1]*=t[r];return n}function Xde(t,e,n,r,s,i){const o=$_(e,2)[1],a=$_(i,2)[1];let u=0;for(const l of n)for(let c=l[0];c<l[1];++c){for(let d=0;d<r;++d)s[u*a+d]=t[c*o+d];++u}}function Yde(t,e,n,r,s){const i=e.slice();i[0]=s;const o=Sn(n,de(i)),a=t.length,u=a===0?0:a/e[0];return Xde(t,e,r,u,o,i),[o,i]}function Qde(t,e,n,r,s,i,o,a){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const u=e[0][0]-1;if(qde(i,o,u),r.length===0)throw new Error("params.rank must be nonzero");const l=r[0],{outSplits:c,valueSlices:d,numValues:f}=Hde(i,o,t,l),h=Kde(c),p=Yde(n,r,s,d,f);return[h,p[0],p[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B_=2147483647;function Zde(t,e,n,r,s,i,o){if(e.length>1)throw new Error("starts must be a scalar or vector");if(s.length>1)throw new Error("limits must be a scalar or vector");if(o.length>1)throw new Error("deltas must be a scalar or vector");const a=e.length===0,u=s.length===0,l=o.length===0,c=[];a||c.push(e[0]),u||c.push(s[0]),l||c.push(o[0]);for(let b=1;b<c.length;++b)if(c[b]!==c[b-1])throw new Error("starts, limits, and deltas must have the same shape");const d=c.length===0?1:c[0],f=Sn("int32",d+1);f[0]=0;for(let b=0;b<d;++b){const g=a?t[0]:t[b],v=u?r[0]:r[b],w=l?i[0]:i[b];if(w===0)throw new Error("Requires delta != 0");let x;if(w>0&&v<g||w<0&&v>g)x=0;else if(x=Math.ceil(Math.abs((v-g)/w)),x>B_)throw new Error(`Requires ((limit - start) / delta) <= ${B_}`);f[b+1]=f[b]+x}const h=f[d],p=Sn(n,h);let y=0;for(let b=0;b<d;++b){const g=f[b+1]-f[b];let v=a?t[0]:t[b];const w=l?i[0]:i[b];for(let x=0;x<g;++x)p[y++]=v,v+=w}return[f,p]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Ls=Ni;class rg{constructor(e,n,r,s,i,o,a,u,l,c){this.shape=e,this.shapeShape=n,this.values=r,this.valuesShape=s,this.valuesDType=i,this.defaultValue=o,this.defaultValueShape=a,this.rowPartitionValues=u,this.rowPartitionValuesShapes=l,this.rowPartitionTypes=iD(c),this.raggedRank=oD(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===Ls.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===Ls.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const n=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case Ls.VALUE_ROWIDS:return rg.getMaxWidthValueRowID(n);case Ls.ROW_SPLITS:return rg.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${Ls[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const n=e.length;if(n===0||n===1)return 0;let r=0;for(let s=0;s<n-1;++s){const i=e[s+1]-e[s];i>r&&(r=i)}return r}static getMaxWidthValueRowID(e){const n=e.length;if(n===0)return 0;let r=0,s=e[0],i=0;for(let o=1;o<n;++o){const a=e[o];a!==s&&(s=a,i=Math.max(o-r,i),r=o)}return Math.max(n-r,i)}tensorShapeFromTensor(e,n,r=!0){if(n.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return V_(e,r)}calculateOutputSize(e){const n=this.valuesShape,r=this.defaultValueShape;aD(r,n);const s=this.tensorShapeFromTensor(this.shape,this.shapeShape),o=sD(this.raggedRank,s,n);o[0]<0&&(o[0]=e);for(let a=1;a<=this.raggedRank;++a)o[a]<0&&(o[a]=this.getMaxWidth(a));return o}calculateFirstParentOutputIndex(e,n,r){const s=Math.min(e,r),i=[];let o=0;for(let a=0;a<s;++a,o+=n)i.push(o);for(let a=s;a<e;++a)i.push(-1);return R(i.length===e,()=>"Final length of result must be equal to firstDimension."),i}calculateOutputIndexRowSplit(e,n,r,s){const i=e.length,o=[];for(let a=0;a<i-1;++a){const u=e[a+1]-e[a];let l=Math.min(s,u),c=n[a];c===-1&&(l=0);for(let d=0;d<l;++d)o.push(c),c+=r;for(let d=0;d<u-l;++d)o.push(-1)}if(i>0&&o.length!==e[i-1])throw new Error("Invalid row split size.");return o}calculateOutputIndexValueRowID(e,n,r,s){const i=e.length,o=[];if(i===0)return[];let a=0,u=e[0];if(u>=n.length)throw new Error(`Got currentValueRowId=${u}, which is not less than ${n.length}`);let l=n[u];o.push(l);for(let c=1;c<i;++c){const d=e[c];if(d===u)l>=0&&(++a,a<s?l+=r:l=-1);else{if(a=0,u=d,d>=n.length)throw new Error(`Got nextValueRowId=${d} which is not less than ${n.length}`);l=n[d]}o.push(l)}if(o.length!==e.length)throw new Error("Invalid row ids.");return o}calculateOutputIndex(e,n,r,s){const i=this.getRowPartitionTensor(e),o=this.getRowPartitionTypeByDimension(e);switch(o){case Ls.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(i,n,r,s);case Ls.ROW_SPLITS:if(i.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${i.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(i,n,r,s);default:throw new Error(`Unsupported partition type: ${Ls[o]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case Ls.FIRST_DIM_SIZE:return e[0];case Ls.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case Ls.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${Ls[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const n=this.getFirstDimensionSize(),r=this.calculateOutputSize(n),s=new Array(this.raggedRank+1);s[s.length-1]=1;for(let u=s.length-2;u>=0;--u)s[u]=s[u+1]*r[u+1];const i=V_(r,!1),o=Sn(this.valuesDType,de(i));if(s[0]*r[0]>0){let u=this.calculateFirstParentOutputIndex(n,s[0],r[0]);for(let l=1;l<=this.raggedRank;++l)u=this.calculateOutputIndex(l-1,u,s[l],r[l]);this.setOutput(this.raggedRank,u,o,i)}return[i,o]}setOutput(e,n,r,s){if(r.length===0)return;const i=this.values,o=r;let a=s.slice();a=a.slice(e+1);const u=de(a),l=n.length;let c=this.defaultValue;if(c.length!==u&&c.length!==1){const p=this.defaultValueShape;He(()=>{const y=te(c,p);c=Kf(y,a).dataSync()})}let d=0,f=0,h=0;for(let p=0;p<=l;++p){let y=p<l?n[p]:-1;if(y===h){++h;continue}if(f<h){const b=i.subarray(d*u),g=o.subarray(f*u),v=(h-f)*u;M_(g,b,v)}if(p>=l){const b=r.length;y=Math.floor(b/u)}if(y>h)if(this.defaultValue.length===1)o.subarray(h*u,y*u).fill(this.defaultValue[0]),h=y;else for(;y>h;){const b=o.slice(h*u);M_(b,c,u),++h}y<0?(d=p+1,f=h):(d=p,f=h,h=f+1)}}}function M_(t,e,n){for(let r=0;r<n;r++)t[r]=e[r]}function V_(t,e){const n=[];for(let r of t){if(r<0){if(!e)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function Jde(t,e,n,r,s,i,o,a,u,l){return new rg(t,e,n,r,s,i,o,a,u,l).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function efe(t,e,n,r){const s=t===e,i=t<e&&n<0,o=e<t&&n>1;if(s||i||o)return Ga(0,r);const a=Math.abs(Math.ceil((e-t)/n)),u=Ga(a,r);e<t&&n===1&&(n=-1),u[0]=t;for(let l=1;l<u.length;l++)u[l]=u[l-1]+n;return u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tfe=ta(t=>1/Math.sqrt(t));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nfe(t,e,n,r,s,i,o,a,u,l){const c=[r/s,s],d=t.values,f=e.values;if(r===0)return Ht(n,e.dtype);const h=u instanceof ad?u:Ht(c,e.dtype);typeof u=="string"||typeof u=="number"?h.values.fill(u):typeof u=="boolean"&&h.values.fill(+u);for(let p=0;p<i;p++){const y=[];let b=0;for(let g=0;g<o;g++){const v=d[p*o+g];y.push(v),b+=v*a[g]}if(b<0||b>=r/s)throw new Error(`Invalid indices: ${y} does not index into ${n}`);for(let g=0;g<s;g++)l?h.values[b*s+g]+=f[p*s+g]:h.values[b*s+g]=e.rank===0?f[0]:f[p*s+g]}return h}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rfe=ta(t=>1/(1+Math.exp(-t)));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sfe(t,e,n,r,s){const i=x2(r,e,n),o=de(n),a=Ln(r);if(i){const d=S2(e,a);return s==="string"?t.slice(d,d+o):t.subarray(d,d+o)}const u=s==="string"?cd(t):t,l=Ht(r,s,u),c=Ht(n,s);for(let d=0;d<c.size;++d){const f=c.indexToLoc(d),h=f.map((p,y)=>p+e[y]);c.set(l.get(...h),...f)}return s==="string"?MD(c.values):c.values}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ife(t,e,n,r,s,i,o){const a=e[0],u=i[0],l=new Array(u),c=new Array(a),d=e[1];if(u===0){if(a!==0)throw new Error(CD(a));const b=Sn(n,0),g=Sn(s,0);return[b,[0,d],g,l,c]}let f=!0,h=0;const p=new Array(u).fill(0);for(let b=0;b<a;++b){const g=t[b*d];if(g<0)throw new Error(ND(b,g));if(g>=u)throw new Error(_D(b,g,u));++p[g],f=f&&g>=h,h=g}let y=!0;for(let b=0;b<u;++b){const g=p[b]===0;l[b]=g,y=y&&!g,p[b]=Math.max(p[b],1),b>0&&(p[b]+=p[b-1])}if(y&&f){const b=t,g=r;for(let v=0;v<a;++v)c[v]=v;return[b,[a,d],g,l,c]}else{const b=p[u-1],g=Sn(n,b*d),v=Sn(s,b),w=new Array(u).fill(0);for(let x=0;x<a;++x){const N=t[x*d],k=w[N],O=(N===0?0:p[N-1])+k;w[N]++;for(let _=0;_<d;++_)g[O*d+_]=t[x*d+_];v[O]=r[x],c[x]=O}for(let x=0;x<u;++x)if(w[x]===0){const k=x===0?0:p[x-1];g[k*d+0]=x;for(let O=1;O<d;++O)g[k*d+O]=0;v[k]=o}return[g,[b,d],v,l,c]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ofe(t,e,n,r,s){const i=de(r),o=e[0],a=s.length,u=[];let l=1,c=-1;for(let b=0;b<a;++b){const g=s[b];if(g===-1){if(c!==-1)throw new Error(TD(c,b));c=b,u.push(1)}else{if(g<0)throw new Error(ID(b,g));l*=g,u.push(g)}}if(c!==-1){if(l<=0)throw new Error(kD());const b=Math.trunc(i/l);if(l*b!==i)throw new Error(RD(r,u));u[c]=b}if(de(u)!==i)throw new Error(OD(r,u));const f=r.length,h=[];if(f>0){h[f-1]=1;for(let b=f-2;b>=0;--b)h[b]=h[b+1]*r[b+1]}const p=[];if(a>0){p[a-1]=1;for(let b=a-2;b>=0;--b)p[b]=p[b+1]*u[b+1]}const y=Sn(n,o*a);for(let b=0;b<o;++b){let g=0;for(let v=0;v<f;++v)g+=t[b*f+v]*h[v];for(let v=0;v<a;++v)y[b*a+v]=Math.trunc(g/p[v]),g%=p[v]}return[y,[o,a],u]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function afe(t,e,n,r,s,i=!1,o=0){const a=r.length,u=[e[0],t.length/e[0]],l=u[1],d=a>0?s[a-1]+1:0;if(d<0)throw new Error(Wv());const f=e.slice();f[0]=d;const h=f.reduce((w,x)=>w*x,1),p=Sn(n,h);if(a===0)return d>0&&p.fill(o),[p,f];if(d<=0)throw new Error(Wv());let y=0,b=1,g=0,v=s[y];for(;;){let w=0;if(b<a){if(w=s[b],v===w){++b;continue}if(v>=w)throw new Error(PD())}if(v<0||v>=d)throw new Error(DD(v,d));v>g&&p.fill(o,g*l,v*l);for(let x=y;x<b;++x){const N=r[x];if(N<0||N>=u[0])throw new Error(LD(x,r[x],u[0]));for(let k=0;k<l;k++)p[v*l+k]+=t[N*l+k]}if(i)for(let x=0;x<l;x++)p[v*l+x]/=b-y;if(y=b,++b,g=v+1,v=w,b>a)break}return g<d&&p.fill(o,g*l,d*l),[p,f]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ufe=ta(t=>Math.sqrt(t));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lfe=Or((t,e)=>{const n=t-e;return n*n});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cfe=ta((t,e)=>{const{pattern:n,replaceGlobal:r,rewrite:s}=e;return t.replace(new RegExp(n,r?"g":""),s)});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dfe(t,e,n,r){const s=Ht(t,e.dtype);for(let i=0;i<s.size;i++){const o=s.indexToLoc(i),a=new Array(o.length);for(let u=0;u<a.length;u++)a[u]=o[u]*n[u]+r[u];s.set(e.get(...a),...o)}return s}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ffe{constructor(e,n,r,s,i,o){this.separator=Qu(e),this.nGramWidths=n,this.leftPad=Qu(r),this.rightPad=Qu(s),this.padWidth=i,this.preserveShort=o}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){const r=this.getPadWidth(n);return Math.max(0,e+2*r-n+1)}createNGrams(e,n,r,s,i,o){for(let a=0;a<i;++a){const u=this.getPadWidth(o),l=Math.max(0,u-a),c=Math.max(0,u-(i-(a+1))),d=o-(l+c),f=n+(l>0?0:a-u);let h=0;h+=l*this.leftPad.length;for(let v=0;v<d;++v)h+=e[f+v].length;h+=c*this.rightPad.length;const p=l+c+d-1;h+=p*this.separator.length,r[s+a]=new Uint8Array(h);const y=r[s+a];let b=0;const g=v=>v.forEach(w=>y[b++]=w);for(let v=0;v<l;++v)g(this.leftPad),g(this.separator);for(let v=0;v<d-1;++v)g(e[f+v]),g(this.separator);if(d>0){g(e[f+d-1]);for(let v=0;v<c;++v)g(this.separator),g(this.rightPad)}else{for(let v=0;v<c-1;++v)g(this.rightPad),g(this.separator);g(this.rightPad)}}}compute(e,n){const r=e.length,s=n.length;if(s>0){let u=n[0];if(u!==0)throw new Error(`First split value must be 0, got ${u}`);for(let l=1;l<s;++l){let c=n[l]>=u;if(c=c&&n[l]<=r,!c)throw new Error(`Invalid split value ${n[l]}, must be in [${u}, ${r}]`);u=n[l]}if(u!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${u}`)}const i=s-1,o=Sn("int32",s);if(r===0||s===0){const u=new Array(r);for(let l=0;l<=i;++l)o[l]=0;return[u,o]}o[0]=0;for(let u=1;u<=i;++u){const l=n[u]-n[u-1];let c=0;this.nGramWidths.forEach(d=>{c+=this.getNumNGrams(l,d)}),this.preserveShort&&l>0&&c===0&&(c=1),o[u]=o[u-1]+c}const a=new Array(o[i]);for(let u=0;u<i;++u){const l=n[u];let c=o[u];if(this.nGramWidths.forEach(d=>{const f=n[u+1]-n[u],h=this.getNumNGrams(f,d);this.createNGrams(e,l,a,c,h,d),c+=h}),this.preserveShort&&c===o[u]){const d=n[u+1]-n[u];if(d===0)continue;const f=d+2*this.padWidth;this.createNGrams(e,l,a,c,1,f)}}return[a,o]}}function hfe(t,e,n,r,s,i,o,a){return new ffe(n,r,s,i,o,a).compute(t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pfe(t,e,n,r){if(!t.length)return;if(e.length===0){for(let i=0;i<t.length;++i)r.push(t.subarray(i,i+1));return}if(e.length===1){const i=e[0];let o=t.indexOf(i);for(;o!==-1;){const a=t.subarray(0,o);(!n||a.length!==0)&&r.push(a),t=t.subarray(o+1),o=t.indexOf(i)}(!n||t.length!==0)&&r.push(t);return}let s=0;for(let i=0;i<t.length+1;i++)if(i===t.length||e.indexOf(t[i])!==-1){const o=t.subarray(s,i);(!n||o.length!==0)&&r.push(o),s=i+1}}function mfe(t,e,n){const r=t.length,s=[];let i=0,o=0;const a=new Array(r);for(let f=0;f<r;++f){const h=s.length;pfe(t[f],e,n,s);const p=s.length-h;a[f]=p,i+=p,o=Math.max(o,p)}const u=Sn("int32",i*2),l=new Array(i),c=[r,o];let d=0;for(let f=0;f<r;++f)for(let h=0;h<a[f];++h)u[d*2]=f,u[d*2+1]=h,l[d]=s[d],++d;return[u,l,c]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gfe(t,e){const n=Sn("int32",t.length);for(let r=0;r<t.length;++r)n[r]=u7(t[r]).modulo(e).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yfe=Or((t,e)=>t-e);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bfe(t,e){const n=new Array(t.rank);for(let s=0;s<n.length;s++)n[s]=t.shape[s]*e[s];const r=Ht(n,t.dtype);for(let s=0;s<r.values.length;++s){const i=r.indexToLoc(s),o=new Array(t.rank);for(let u=0;u<o.length;u++)o[u]=i[u]%t.shape[u];const a=t.locToIndex(o);r.values[s]=t.values[a]}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $f=(t,e)=>{const n=e.value-t.value;return n===0?t.index-e.index:n};function b6(t,e,n=0,r=t.length-1){for(;r>n;){if(r-n>600){const a=r-n+1,u=e-n+1,l=Math.log(a),c=.5*Math.exp(2*l/3),d=.5*Math.sqrt(l*c*(a-c)/a)*Math.sign(u-a/2),f=Math.max(n,Math.floor(e-u*c/a+d)),h=Math.min(r,Math.floor(e+(a-u)*c/a+d));b6(t,e,f,h)}const s=t[e];let i=n,o=r;for(cf(t,n,e),$f(t[r],s)>0&&cf(t,n,r);i<o;){for(cf(t,i,o),i++,o--;$f(t[i],s)<0;)i=i+1;for(;$f(t[o],s)>0;)o=o-1}$f(t[n],s)===0?cf(t,n,o):(o=o+1,cf(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}}function vfe(t,e,n,r,s){const i=e[e.length-1],[o,a]=[t.length/i,i],u=qa(n,o*r),l=qa("int32",o*r);for(let d=0;d<o;d++){const f=d*a,h=t.subarray(f,f+a);let p=new Array(h.length);h.forEach((v,w)=>p[w]={value:v,index:w}),r<p.length&&(b6(p,r),p=p.slice(0,r)),s&&p.sort($f);const y=d*r,b=u.subarray(y,y+r),g=l.subarray(y,y+r);for(let v=0;v<r;v++)b[v]=p[v].value,g[v]=p[v].index}const c=e.slice();return c[c.length-1]=r,[Ht(c,n,u),Ht(c,"int32",l)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wfe(t,e,n,r){const s=An(e,n)[0],i=[1,n[0],1];for(let p=0;p<s;p++)i[0]*=n[p];i[1]=n[s];for(let p=s+1;p<n.length;p++)i[2]*=n[p];const o=new Map,a=new Int32Array(n[s]),u=new ad(i,r,t),l=[],c=i[0]===1&&i[2]===1;for(let p=0;p<n[s];p++){let y;if(c)y=t[p].toString();else{const g=[];for(let v=0;v<i[0];v++)for(let w=0;w<i[2];w++)g.push(u.get(v,p,w));y=g.join(",")}const b=o.get(y);if(b!=null)a[p]=b;else{const g=o.size;o.set(y,g),a[p]=g,l.push(p)}}const d=i.slice();d[1]=o.size;const f=new ad(d,r);l.forEach((p,y)=>{for(let b=0;b<i[0];b++)for(let g=0;g<i[2];g++)f.set(u.get(b,p,g),b,y,g)});const h=n.slice();return h[s]=d[1],{outputValues:f.values,outputShape:h,indices:a}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xfe=Object.freeze(Object.defineProperty({__proto__:null,addImpl:vde,bincountImpl:wde,bincountReduceImpl:xde,bitwiseAndImpl:Sde,castImpl:bde,ceilImpl:Ade,concatImpl:Ede,equalImpl:Cde,expImpl:Nde,expm1Impl:_de,floorDivImpl:Ide,floorImpl:Tde,gatherNdImpl:kde,gatherV2Impl:Rde,greaterEqualImpl:Pde,greaterImpl:Ode,lessEqualImpl:Lde,lessImpl:Dde,linSpaceImpl:Fde,logImpl:$de,maxImpl:Bde,maximumImpl:Mde,minimumImpl:Vde,multiplyImpl:y6,negImpl:Ude,notEqualImpl:zde,prodImpl:Wde,raggedGatherImpl:Qde,raggedRangeImpl:Zde,raggedTensorToTensorImpl:Jde,rangeImpl:efe,rsqrtImpl:tfe,scatterImpl:nfe,sigmoidImpl:rfe,simpleAbsImpl:yde,sliceImpl:sfe,sparseFillEmptyRowsImpl:ife,sparseReshapeImpl:ofe,sparseSegmentReductionImpl:afe,sqrtImpl:ufe,squaredDifferenceImpl:lfe,staticRegexReplaceImpl:cfe,stridedSliceImpl:dfe,stringNGramsImpl:hfe,stringSplitImpl:mfe,stringToHashBucketFastImpl:gfe,subImpl:yfe,tileImpl:bfe,topKImpl:vfe,transposeImpl:jde,uniqueImpl:wfe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:Sfe,bincountImpl:v6,bincountReduceImpl:Afe,bitwiseAndImpl:Efe,castImpl:Cfe,ceilImpl:Nfe,concatImpl:_fe,equalImpl:Tfe,expImpl:Ife,expm1Impl:kfe,floorImpl:Rfe,gatherNdImpl:Ofe,gatherV2Impl:Pfe,greaterImpl:Dfe,greaterEqualImpl:Lfe,lessImpl:Ffe,lessEqualImpl:$fe,linSpaceImpl:Bfe,logImpl:Mfe,maxImpl:Vfe,maximumImpl:Ufe,minimumImpl:zfe,multiplyImpl:jfe,negImpl:Wfe,notEqualImpl:qfe,prodImpl:Gfe,raggedGatherImpl:Hfe,raggedRangeImpl:Kfe,raggedTensorToTensorImpl:Xfe,rangeImpl:Yfe,rsqrtImpl:Qfe,scatterImpl:Zfe,sigmoidImpl:Jfe,simpleAbsImpl:w6,sliceImpl:ehe,sparseFillEmptyRowsImpl:the,sparseReshapeImpl:nhe,sparseSegmentReductionImpl:x6,sqrtImpl:rhe,staticRegexReplaceImpl:she,stridedSliceImpl:ihe,stringNGramsImpl:ohe,stringSplitImpl:ahe,stringToHashBucketFastImpl:uhe,subImpl:lhe,tileImpl:che,topKImpl:dhe,transposeImpl:hS,uniqueImpl:fhe}=xfe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S6(t,e){return["x","y","z","w","u","v"].slice(0,e).map(n=>`${t}.${n}`)}function lr(t,e){return e===1?[t]:S6(t,e)}function hhe(t,e){if(t===1)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class phe{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=Hn(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=lr("rc",this.rank),r=wt(this.rank),s=this.getOutOfBoundsCondition(n),i=this.getSetup(n),o=this.getOutput(n);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${s}) {
            setOutput(vec4(0));
          } else {
            ${i}

            setOutput(vec4(${o}));
          }
        }
      `}}getSourceCoordsArr(e){const n=[];for(let r=0;r<=1;r++)for(let s=0;s<=1;s++){let i=`${r===0?"r":"rp1"}, ${s===0?"c":"cp1"}`;for(let o=2;o<this.rank;o++)i=`${e[e.length-1-o]},`+i;n.push(i)}return n}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let r=this.rank-2;r<this.rank;r++)n+=`${e[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(n+="||");return n}getSetup(e){if(this.rank===1)return"";const n=e.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],s=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${s};
    `}getOutput(e){const n=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class A6{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=Hn(this.outputShape.length);let r="";for(let s=0;s<4;s++){let i="thisRC = rc;";s%2===1&&(i+="thisRC.z += 1;"),s>1&&(i+="thisRC.y += 1;"),r+=`
        ${i}
        ${s>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${s}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${s>0?"}":""}
      `}this.userCode=`
      ${mhe(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?dS():cS(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${r}

        setOutput(result);
      }
    `}}function mhe(t,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?uce(["r","c","d"],"inputShape"):$l(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ghe{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,n,r){const s=z_(n,r),i=j_(e,s,r);i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]);const o=U_(e,s,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();const u=this.freeTextures[i].pop();return this.usedTextures[i].push(u),u}let a;return s===Pn.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):s===Pn.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):s===Pn.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):s===Pn.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):s===Pn.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[i].push(a),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),a}releaseTexture(e,n,r,s){if(this.freeTextures==null)return;const i=z_(r,s),o=j_(n,i,s);o in this.freeTextures||(this.freeTextures[o]=[]);const a=U_(n,i,this.gpgpu.gl,this.gpgpu.textureConfig,s),u=X().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");u!==-1&&this._numBytesAllocated>u?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=a):(this.freeTextures[o].push(e),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;const l=this.usedTextures[o],c=l&&l.indexOf(e);if(c==null||c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");l[c]=l[l.length-1],l.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function yhe(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function U_(t,e,n,r,s){const i=bhe(e,r);let o;if(s){const[u,l]=Od(t[0],t[1]);o=u*l}else{const[u,l]=Jh(t[0],t[1]);o=u*l}const a=yhe(n,i);return o*a}function bhe(t,e){switch(t){case Pn.PACKED_2X2_FLOAT32:return m6(e);case Pn.PACKED_2X2_FLOAT16:return g6(e);case Pn.UNPACKED_FLOAT32:return f6(e);case Pn.UNPACKED_FLOAT16:return h6(e);case Pn.PACKED_4X1_UNSIGNED_BYTE:return p6(e);default:throw new Error(`Unknown physical texture type ${t}`)}}function vhe(t){return X().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?Pn.PACKED_2X2_FLOAT32:Pn.UNPACKED_FLOAT32:t?Pn.PACKED_2X2_FLOAT16:Pn.UNPACKED_FLOAT16}function z_(t,e){if(t===ls.UPLOAD)return Pn.PACKED_2X2_FLOAT32;if(t===ls.RENDER||t==null)return vhe(e);if(t===ls.DOWNLOAD||t===ls.PIXELS)return Pn.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function j_(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class io{constructor(e,n){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=Hn(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const ii="if (isnan(x)) return x;",whe="return x;",W_="return abs(x);",xhe="return (x >= 0.0) ? x : (exp(x) - 1.0);",She=ii+`
  return (x < 0.0) ? 0.0 : x;
`,Ahe=ii+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,wa="return x;",Ehe="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Che="return x;",Nhe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,_he=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,The=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Ihe="return 1.0 / (1.0 + exp(-1.0 * x));";class Ia{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=Hn(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class khe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=Hn(this.outputShape.length);const n=e.length,r=lr("rc",n),s=wt(n),i=hhe(n,r),o=r.slice(-2),a=n<=1?"rc":`vec2(${o.join(",")})`;this.userCode=`
      void main() {
        ${s} rc = getOutputCoords();
        vec4 packedInput = getA(${i});

        setOutput(getChannel(packedInput, ${a}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rhe=I4,Ohe=1e-7,Phe=1e-4,ym={};function Dhe(t){return t in ym||(ym[t]={}),ym[t]}const Lhe=X().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),Fhe=600;function $he(){return X().global.screen==null?1024:X().global.screen.height*X().global.screen.width*window.devicePixelRatio*Fhe/1024/1024}class m1 extends y3{nextDataId(){return m1.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!X().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(e!=null){if(e instanceof hb)n=e;else{const r=Li(X().getNumber("WEBGL_VERSION"),e);n=new hb(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=Li(X().getNumber("WEBGL_VERSION"));n=new hb(r),this.binaryCache=Dhe(X().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new ghe(this.gpgpu),this.numMBBeforeWarning=$he(),this.texData=new _z(this,aa())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,n,r,s,i,o){const a=this.makeTensorInfo(n,r),u=this.texData.get(a.dataId);u.isPacked=!1,u.texture={texture:e,texShape:[s,i]},u.texShape=[s,i];const l=mm(n),c=new F_(l,!1,o),d=this.runWebGLProgram(c,[a],r,[[s,i]]);return d.shape=n,u.texture=null,this.disposeIntermediateTensorInfo(a),d.dataId}write(e,n,r){if((X().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||X().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const s={id:this.nextDataId()};return this.texData.set(s,{shape:n,dtype:r,values:e,usage:ls.UPLOAD,refCount:1}),s}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const n=this.texData.get(e);n.refCount++}decRef(e){if(this.texData.has(e)){const n=this.texData.get(e);n.refCount--}}move(e,n,r,s,i){if(X().getBool("DEBUG")&&this.checkNumericalProblems(n),s==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:s,values:n,usage:ls.UPLOAD,refCount:i})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const n=this.texData.get(e),{values:r,dtype:s,complexTensorInfos:i,slice:o,shape:a,isPacked:u}=n;if(o!=null){let f;u?f=new Ia(a,wa):f=new io(a,wa);const h=this.runWebGLProgram(f,[{dataId:e,shape:a,dtype:s}],s),p=this.readSync(h.dataId);return this.disposeIntermediateTensorInfo(h),p}if(r!=null)return this.convertAndCacheOnCPU(e);if(s==="string")return r;const l=this.activeTimers!=null;let c;l&&(c=Ai());let d;if(s==="complex64"){const f=this.readSync(i.real.dataId),h=this.readSync(i.imag.dataId);d=jv(f,h)}else d=this.getValuesFromTexture(e);return l&&(this.downloadWaitMs+=Ai()-c),this.convertAndCacheOnCPU(e,d)}async read(e){if(this.pendingRead.has(e)){const p=this.pendingRead.get(e);return new Promise(y=>p.push(y))}const n=this.texData.get(e),{values:r,shape:s,slice:i,dtype:o,complexTensorInfos:a,isPacked:u}=n;if(i!=null){let p;u?p=new Ia(s,wa):p=new io(s,wa);const y=this.runWebGLProgram(p,[{dataId:e,shape:s,dtype:o}],o),b=this.read(y.dataId);return this.disposeIntermediateTensorInfo(y),b}if(r!=null)return this.convertAndCacheOnCPU(e);if(X().getBool("DEBUG")&&!X().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&X().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let l=null,c;if(o!=="complex64"&&X().get("WEBGL_BUFFER_SUPPORTED")){c=this.decode(e);const p=this.texData.get(c.dataId);l=this.gpgpu.createBufferFromTexture(p.texture.texture,...fm(s))}this.pendingRead.set(e,[]),o!=="complex64"&&await this.gpgpu.createAndWaitForFence();let d;if(o==="complex64"){const p=await Promise.all([this.read(a.real.dataId),this.read(a.imag.dataId)]),y=p[0],b=p[1];d=jv(y,b)}else if(l==null)d=this.getValuesFromTexture(e);else{const p=de(s);d=this.gpgpu.downloadFloat32MatrixFromBuffer(l,p)}if(c!=null&&this.disposeIntermediateTensorInfo(c),l!=null){const p=this.gpgpu.gl;ye(p,()=>p.deleteBuffer(l))}const f=this.convertAndCacheOnCPU(e,d),h=this.pendingRead.get(e);return this.pendingRead.delete(e),h.forEach(p=>p(f)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&aa().removeDataId(e,this),this.pendingDeletes--),f}readToGPU(e,n={}){const r=this.texData.get(e),{values:s,shape:i,slice:o,dtype:a,isPacked:u,texture:l}=r;if(a==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(o!=null){let h;u?h=new Ia(i,wa):h=new io(i,wa);const p=this.runWebGLProgram(h,[{dataId:e,shape:i,dtype:a}],a),y=this.readToGPU(p,n);return this.disposeIntermediateTensorInfo(p),y}if(l==null)throw s!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const c=this.decode(e,n.customTexShape),d=aa().makeTensorFromTensorInfo(c),f=this.texData.get(c.dataId);return Object.assign({tensorRef:d},f.texture)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(s=>od(s));return Ht(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Ht(e.shape,e.dtype,n)}checkNumericalProblems(e){if(e!=null)for(let n=0;n<e.length;n++){const r=e[n];if(!Lle(r))throw X().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:n,dtype:r,isPacked:s}=this.texData.get(e),i=de(n);if(X().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const f=this.decode(e),h=this.texData.get(f.dataId),p=this.gpgpu.downloadMatrixFromPackedTexture(h.texture.texture,...fm(n)).subarray(0,i);return this.disposeIntermediateTensorInfo(f),p}const o=X().getBool("WEBGL_PACK")&&s===!0,a=o?mm(n):n,u=o?new Qce(a):new Yce(a),l=this.runWebGLProgram(u,[{shape:a,dtype:r,dataId:e}],"float32"),c=this.texData.get(l.dataId),d=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(c.texture.texture,c.texShape[0],c.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(l),d}timerAvailable(){return X().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const n=this.activeTimers,r=[];let s=!1;this.programTimersStack==null?(this.programTimersStack=r,s=!0):this.activeTimers.push(r),this.activeTimers=r,e();const i=dl(this.activeTimers.map(u=>u.query)).filter(u=>u!=null),o=dl(this.activeTimers.map(u=>u.name)).filter(u=>u!=null);this.activeTimers=n,s&&(this.programTimersStack=null);const a={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(X().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const u=await Promise.all(i);a.kernelMs=Tz(u),a.getExtraProfileInfo=()=>u.map((l,c)=>({name:o[c],ms:l})).map(l=>`${l.name}: ${l.ms}`).join(", ")}else a.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,a})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return X().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Ai(),endMs:null}}endTimer(e){return X().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Ai(),e)}async getQueryTime(e){if(X().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const n=e;return n.endMs-n.startMs}disposeData(e,n=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(n?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!n&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,n),this.disposeData(r.imag.dataId,n)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:n,dtype:r,texShape:s,usage:i,isPacked:o,slice:a}=this.texData.get(e),u=a&&a.origDataId||e,l=this.dataRefCount.get(u);l>1?this.dataRefCount.set(u,l-1):(this.dataRefCount.delete(u),n!=null&&(this.numBytesInGPU-=this.computeBytes(s,r),this.textureManager.releaseTexture(n,s,i,o)));const c=this.texData.get(e);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,n=Lhe){return X().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&de(r.shape)<n)}getGPGPUContext(){return this.gpgpu}where(e){Ti("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=e.dataSync();return Rhe(e.shape,n)}packedUnaryOp(e,n,r){const s=new Ia(e.shape,n),i=this.compileAndRun(s,[e],r);return aa().makeTensorFromTensorInfo(i)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const s=w6(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,s)}if(X().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,W_,e.dtype);const n=new io(e.shape,W_),r=this.compileAndRun(n,[e]);return aa().makeTensorFromTensorInfo(r)}makeTensorInfo(e,n,r){let s;if(n==="string"&&r!=null&&r.length>0&&Og(r[0])){const i=r.map(o=>Qu(o));s=this.write(i,e,n)}else s=this.write(r,e,n);return this.texData.get(s).usage=null,{dataId:s,shape:e,dtype:n}}makeOutput(e,n,r){return aa().makeTensorFromTensorInfo(this.makeTensorInfo(e,n,r),this)}unpackTensor(e){const n=new khe(e.shape);return this.runWebGLProgram(n,[e],e.dtype)}packTensor(e){const n=new phe(e.shape);return this.runWebGLProgram(n,[e],e.dtype,null,!0)}packedReshape(e,n){const r=[hd(e.shape),...pd(e.shape)],s={dtype:e.dtype,shape:r,dataId:e.dataId},i=[hd(n),...pd(n)],o=new A6(i,r),a=!0,u=[r],l=this.runWebGLProgram(o,[s],e.dtype,u,a);return{dataId:l.dataId,shape:n,dtype:l.dtype}}decode(e,n){const r=this.texData.get(e),{isPacked:s,shape:i,dtype:o}=r;if(n!=null){const f=de(i),h=n[0]*n[1]*4;R(f<=h,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const a=mm(i);let u;s?u=new Xce(a):u=new Kce(a);const l=!0,c=[n??fm(a)],d=this.runWebGLProgram(u,[{shape:a,dtype:o,dataId:e}],o,c,l,n);return{dtype:o,shape:i,dataId:d.dataId}}runWebGLProgram(e,n,r,s,i=!1,o){const a=this.makeTensorInfo(e.outputShape,r),u=this.texData.get(a.dataId);if(e.packedOutput&&(u.isPacked=!0),e.outPackingScheme===kh.DENSE){const g=o??fm(e.outputShape);u.texShape=g.map(v=>v*2)}if(e.outTexUsage!=null&&(u.usage=e.outTexUsage),de(a.shape)===0)return u.values=qa(a.dtype,0),a;const l=[],c=n.map(g=>{if(g.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let v=this.texData.get(g.dataId);if(v.texture==null){if(!e.packedInputs&&de(g.shape)<=X().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:g.shape,texData:null,isUniform:!0,uniformValues:v.values};e.packedInputs&&(v.isPacked=!0,v.shape=g.shape)}if(this.uploadToGPU(g.dataId),!!v.isPacked!=!!e.packedInputs)g=v.isPacked?this.unpackTensor(g):this.packTensor(g),l.push(g),v=this.texData.get(g.dataId);else if(v.isPacked&&!ng(v.shape,g.shape)){const w=g,x=g.shape;g.shape=v.shape,g=this.packedReshape(g,x),l.push(g),v=this.texData.get(g.dataId),w.shape=x}return{shape:g.shape,texData:v,isUniform:!1}});this.uploadToGPU(a.dataId);const d={shape:a.shape,texData:u,isUniform:!1},f=Hce(e,c,d),h=this.getAndSaveBinary(f,()=>qce(this.gpgpu,e,c,d)),p=this.activeTimers!=null;let y;p&&(y=this.startTimer()),X().get("ENGINE_COMPILE_ONLY")||Gce(this.gpgpu,h,c,d,s),l.forEach(g=>this.disposeIntermediateTensorInfo(g)),p&&(y=this.endTimer(y),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(y)}));const b=X().getNumber("WEBGL_FLUSH_THRESHOLD");if(b>0){const g=Ai();g-this.lastGlFlushTime>b&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=g)}if(!X().getBool("WEBGL_LAZILY_UNPACK")&&u.isPacked&&i===!1){const g=this.unpackTensor(a);return this.disposeIntermediateTensorInfo(a),g}return a}compileAndRun(e,n,r,s,i=!1){return r=r||n[0].dtype,this.runWebGLProgram(e,n,r,s,i)}getAndSaveBinary(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(X().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=He(()=>{if(!X().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=X().getBool("DEBUG");X().set("DEBUG",!1);const n=this.abs(Qe(1e-8)).dataSync()[0];if(X().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?Ohe:Phe}uploadToGPU(e){const n=this.texData.get(e),{shape:r,dtype:s,values:i,texture:o,usage:a,isPacked:u}=n;if(o!=null)return;const l=this.activeTimers!=null;let c;l&&(c=Ai());let d=n.texShape;if(d==null&&(d=Jle(r,u),n.texShape=d),i!=null){const f=mm(r);let h,p=d[1],y=d[0];const b=i instanceof Uint8Array||i instanceof Uint8ClampedArray;(u||!b)&&([p,y]=Od(d[0],d[1])),u?h=new Jce(f,b):h=new F_(f,b);const g=b?[y,p]:d,v=this.makeTensorInfo(g,s),w=this.texData.get(v.dataId);b?w.usage=ls.PIXELS:w.usage=ls.UPLOAD,w.texShape=g,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(v.dataId),p,y,i);const x=[[y,p]],k=this.runWebGLProgram(h,[v],s,x,!0),O=this.texData.get(k.dataId);n.texShape=O.texShape,n.isPacked=O.isPacked,n.usage=O.usage,X().get("ENGINE_COMPILE_ONLY")?this.disposeData(k.dataId):(n.texture=O.texture,n.values=null,this.texData.delete(k.dataId)),this.disposeIntermediateTensorInfo(v),l&&(this.uploadWaitMs+=Ai()-c)}else{const f=this.acquireTexture(d,a,s,u);n.texture=f}}convertAndCacheOnCPU(e,n){const r=this.texData.get(e),{dtype:s}=r;return n!=null&&(r.values=Bhe(n,s)),r.values}acquireTexture(e,n,r,s){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const i=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${i} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,n,s)}computeBytes(e,n){return e[0]*e[1]*O0(n)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(n));return Promise.all(e)}else{for(const[,n]of Object.entries(this.binaryCache)){const r=new Promise(s=>{try{this.checkCompletion_(n),s(!0)}catch(i){throw i}});e.push(r)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await jY(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(o6(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:n,customUniformLocations:r,infLoc:s,nanLoc:i,outShapeLocation:o,outShapeStridesLocation:a,outTexShapeLocation:u}=d6(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=n,e.customUniformLocations=r,e.infLoc=s,e.nanLoc=i,e.outShapeLocation=o,e.outShapeStridesLocation=a,e.outTexShapeLocation=u}}createTensorFromGPUData(e,n,r){e.channels=e.channels||"RGBA";const{texture:s,height:i,width:o,channels:a}=e,u=aa().backend;if(!u.gpgpu.gl.isTexture(s))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const l=u.writeTexture(s,n,r,i,o,a);return aa().makeTensorFromDataId(l,n,r,u)}}m1.nextDataId=0;function Bhe(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){const n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}else throw new Error(`Unknown dtype ${e}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */IP()&&I7("webgl",()=>new m1,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pS=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class Sl{constructor(e,n,r){this.variableNames=["A","B"],this.outputShape=it(n,r),this.enableShapeUniforms=Hn(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ml=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class $d{constructor(e,n,r,s=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=it(n,r);const i=this.outputShape.length;this.enableShapeUniforms=Hn(i);let o="";if(s)if(i===0||de(this.outputShape)===1)o=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(o=`
          ${wt(i)} coords = getOutputCoords();
        `,i===1)this.enableShapeUniforms?o+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:o+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const u=lr("coords",i);this.enableShapeUniforms?o+=`
            bool nextRowOutOfBounds =
              (${u[i-2]} + 1) >= outShape[${i} - 2];
            bool nextColOutOfBounds =
              (${u[i-1]} + 1) >= outShape[${i} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:o+=`
            bool nextRowOutOfBounds =
              (${u[i-2]} + 1) >= ${this.outputShape[i-2]};
            bool nextColOutOfBounds =
              (${u[i-1]} + 1) >= ${this.outputShape[i-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${o}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hr(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const Mhe={kernelName:qx,backendName:"webgl",kernelFunc:Hr};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iu(t){const{inputs:e,backend:n}=t,{real:r,imag:s}=e,i=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(i.dataId),a=Hr({inputs:{x:r},backend:n}),u=Hr({inputs:{x:s},backend:n});return o.complexTensorInfos={real:a,imag:u},i}const Vhe={kernelName:W3,backendName:"webgl",kernelFunc:iu};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E6="return (a < 0.) ? b * a : a;",C6=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function Uhe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{alpha:i}=r,o=n.makeTensorInfo([],"float32",wd(i,"float32")),a=X().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new $d(C6,s.shape,o.shape):new Sl(E6,s.shape,o.shape),u=n.runWebGLProgram(a,[s,o],"float32");return n.disposeIntermediateTensorInfo(o),u}const zhe={kernelName:PR,backendName:"webgl",kernelFunc:Uhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N6="return (a < 0.) ? b * a : a;",_6=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function jhe(t){const{inputs:e,backend:n}=t,{x:r,alpha:s}=e,i=X().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new $d(_6,r.shape,s.shape):new Sl(N6,r.shape,s.shape);return n.runWebGLProgram(i,[r,s],"float32")}const Whe={kernelName:dO,backendName:"webgl",kernelFunc:jhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bd="if (isnan(x)) return x;";function st({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:r}){return({inputs:s,backend:i})=>{const{x:o}=s,a=i,u=r||o.dtype;if(a.shouldExecuteOnCPU([o])&&n!=null){const d=a.texData.get(o.dataId),f=n(d.values,u);return a.makeTensorInfo(o.shape,u,f)}const l=X().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let c;return l?c=new Ia(o.shape,e):c=new io(o.shape,t),a.runWebGLProgram(c,[o],u)}}function Bn({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:s,dtype:i}){return({inputs:o,backend:a})=>{const{a:u,b:l}=o,c=a;if(r&&u.dtype==="complex64"){const p=c.texData.get(u.dataId),y=c.texData.get(l.dataId),[b,g]=[[p.complexTensorInfos.real,y.complexTensorInfos.real],[p.complexTensorInfos.imag,y.complexTensorInfos.imag]].map(w=>{const[x,N]=w,k={dataId:x.dataId,dtype:x.dtype,shape:u.shape},O={dataId:N.dataId,dtype:N.dtype,shape:l.shape},_=new Sl(t,u.shape,l.shape);return c.runWebGLProgram(_,[k,O],fo(x.dtype,N.dtype))}),v=iu({inputs:{real:b,imag:g},backend:c});return c.disposeIntermediateTensorInfo(b),c.disposeIntermediateTensorInfo(g),v}const d=i||fo(u.dtype,l.dtype);if((u.dtype==="string"||l.dtype==="string"||c.shouldExecuteOnCPU([u,l]))&&s!=null){const p=c.texData.get(u.dataId).values,y=c.texData.get(l.dataId).values,b=u.dtype==="string"?cd(p):p,g=u.dtype==="string"?cd(y):y,[v,w]=s(u.shape,l.shape,b,g,d),x=c.makeTensorInfo(w,d),N=c.texData.get(x.dataId);return N.values=v,x}const f=X().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let h;return f?h=new $d(e,u.shape,l.shape,n):h=new Sl(t,u.shape,l.shape),c.runWebGLProgram(h,[u,l],d)}}function Rh(t,e=!1){if(t==="linear")return e?Che:whe;if(t==="relu")return e?_he:She;if(t==="elu")return e?Nhe:xhe;if(t==="relu6")return e?The:Ahe;if(t==="prelu")return e?_6:N6;if(t==="leakyrelu")return e?C6:E6;if(t==="sigmoid")return e?Ihe:Ehe;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class T6{constructor(e,n,r,s=!1,i=!1,o=!1,a=null,u=!1,l=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=Hn(this.outputShape.length);const c=s?e[1]:e[2],d=Math.ceil(c/2),f=s?"i * 2, rc.y":"rc.y, i * 2",h=i?"rc.z, i * 2":"i * 2, rc.z",p=s?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],y=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let b="",g="";a&&(u?b=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${a}
        }`:l?b=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${a}
        }`:b=`vec4 activation(vec4 x) {
          ${a}
        }`,g="result = activation(result);");const v=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),u&&this.variableNames.push("preluActivationWeights"),l&&this.variableNames.push("leakyreluAlpha");let w="rc.x",x="rc.x";e[0]<n[0]?w=`imod(rc.x, ${e[0]})`:n[0]<e[0]&&(x=`imod(rc.x, ${n[0]})`),this.userCode=`
      ${b}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${d}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${w};
        int batchB = ${x};
        for (int i = 0; i < ${d}; i++) {
          vec4 a = getMatrixA(batchA, ${f});
          vec4 b = getMatrixB(batchB, ${h});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${p[0]} * ${y[0]});
          result += (${p[1]} * ${y[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${v}

        ${g}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q_={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class G_{constructor(e,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=it(n,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H_="return a * b;";function mS(t){const{inputs:e,backend:n}=t,{a:r,b:s}=e,i=fo(r.dtype,s.dtype);if(r.dtype==="complex64"){const a=n.texData.get(r.dataId),u=n.texData.get(s.dataId),l=new G_(q_.REAL,r.shape,s.shape),c=new G_(q_.IMAG,r.shape,s.shape),d=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:r.shape},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:u.complexTensorInfos.real.dataId,dtype:u.complexTensorInfos.real.dtype,shape:s.shape},{dataId:u.complexTensorInfos.imag.dataId,dtype:u.complexTensorInfos.imag.dtype,shape:s.shape}],f=n.runWebGLProgram(l,d,"float32"),h=n.runWebGLProgram(c,d,"float32"),p=iu({inputs:{real:f,imag:h},backend:n});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),p}if(n.shouldExecuteOnCPU([r,s])){const a=n.texData.get(r.dataId),u=n.texData.get(s.dataId),[l,c]=jfe(r.shape,s.shape,a.values,u.values,i),d=n.makeTensorInfo(c,i),f=n.texData.get(d.dataId);return f.values=l,d}let o;return X().getBool("WEBGL_PACK_BINARY_OPERATIONS")?o=new $d(H_,r.shape,s.shape):o=new Sl(H_,r.shape,s.shape),n.runWebGLProgram(o,[r,s],i)}const qhe={kernelName:eO,backendName:"webgl",kernelFunc:mS};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ghe(t,e,n){const r=[hd(t.shape),...pd(t.shape)],s={dtype:t.dtype,shape:r,dataId:t.dataId},i=[hd(e),...pd(e)],o=new A6(i,r),a=!0,u=[r],l=n.runWebGLProgram(o,[s],t.dtype,u,a);return{dataId:l.dataId,shape:e,dtype:l.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function me(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{shape:i}=r,o=n,a=de(s.shape),u=kz(i,a),l=de(u);R(a===l,()=>`The new shape (${u}) has ${l} elements and the old shape (${s.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`);const c=o.texData.get(s.dataId);return c.isPacked&&!ng(s.shape,u)&&!(c.texture!==null&&ng(c.shape,u))?Ghe(s,u,o):(o.incRef(s.dataId),{dataId:s.dataId,shape:u,dtype:s.dtype})}const Hhe={kernelName:wO,backendName:"webgl",kernelFunc:me};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class K_{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:s,inSize:i,outSize:o}=e;this.outputShape=[s,o];const a=Math.floor(r/4)*4,u=r%4;let l="sumValue += dot(values, ones);";if(n!=null){const d=1/n;l=`sumValue += dot(values * ${sd(d)?d.toPrecision(2):d}, ones);`}let c="";i%r>0&&(c=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${c}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${a}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${l}
        }

        int inIdx = inOffset + ${a};
        if (${u===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${l}
        } else if (${u===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${l}
        } else if (${u===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${l}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Khe{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:s,inSize:i,outSize:o}=e;this.outputShape=[s,o];let a="0.0",u="";n==="prod"?a="1.0":n==="min"?(a="1.0 / 1e-20",u="min"):n==="max"&&(a="-1.0 / 1e-20",u="max");let l=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?l="sumValue":n==="prod"?l="prodValue":n==="all"?l="allValue":n==="any"&&(l="anyValue");const c=Math.floor(r/4)*4,d=r%4;let f=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${u}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${u}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,h="vec4";n==="all"?(a="1.0",f=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,h="bvec4"):n==="any"&&(a="0.0",f=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,h="bvec4");let p="";i%r>0&&(p=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${a};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${p}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${a});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${f}
        }

        int inIdx = inOffset + ${c};
        if (${d===1}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${f}
        } else if (${d===2}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${f}
        } else if (${d===3}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${f}
        }
        setOutput(${l});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xhe(t){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const n=e.length?e[e.length-1].outSize:t[1],r=Gg(n);e.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return e}function Vl(t,e,n,r){const s=Xhe(t.shape);let i=t;for(let o=0;o<s.length;o++){const{inSize:a,windowSize:u,outSize:l}=s[o];let c,d;n==="mean"?c=o===0?new K_({windowSize:u,inSize:a,batchSize:t.shape[0],outSize:l},a):new K_({windowSize:u,inSize:a,batchSize:t.shape[0],outSize:l}):c=new Khe({windowSize:u,inSize:a,batchSize:t.shape[0],outSize:l},n),d=i,i=r.runWebGLProgram(c,[i],e),d.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(d)}return i}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Yhe{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[n[o]];this.outputShape=r,this.rank=r.length;const s=wt(this.rank),i=Qhe(n);this.userCode=`
    void main() {
      ${s} resRC = getOutputCoords();
      setOutput(getA(${i}));
    }
    `}}function Qhe(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let s=0;s<t.length;s++)r[t[s]]=n[s];return r.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Zhe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(e.length);for(let c=0;c<r.length;c++)r[c]=e[n[c]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const s=wt(this.rank),i=S6("rc",this.rank),o=new Array(this.rank);for(let c=0;c<n.length;c++)o[n[c]]=i[c];const a=`vec2(${o.slice(-2).join()})`,u=`++${i[this.rank-1]} < ${r[this.rank-1]}`,l=`getChannel(getA(${o.join()}), ${a})`;this.userCode=`
    void main() {
      ${s} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${l};
      if(${u}) {
        result[1] = ${l};
      }
      --${i[this.rank-1]};
      if(++${i[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${l};
        if(${u}) {
          result[3] = ${l};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g1(t,e,n){const r=X().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Zhe(t.shape,e):new Yhe(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jhe(t,e,n,r){const s=e,i=t.shape.length,o=An(s,t.shape);let a=o;const u=ni(a,i),l=u!=null;let c=t;l&&(c=g1(t,u,r),a=ri(a.length,i)),Bi("sum",a,i);const[d,f]=po(c.shape,a);let h=d;n&&(h=Ss(d,o));const p=de(f),b=de(t.shape)/p,g=me({inputs:{x:c},attrs:{shape:[b,p]},backend:r}),v=Kx(t.dtype),w=Vl(g,v,"sum",r),x=me({inputs:{x:w},attrs:{shape:h},backend:r});return r.disposeIntermediateTensorInfo(g),r.disposeIntermediateTensorInfo(w),l&&r.disposeIntermediateTensorInfo(c),x}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y1(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r;return Jhe(s,i,o,n)}const epe={kernelName:MO,backendName:"webgl",kernelFunc:y1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dr(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{perm:i}=r,o=n,a=s.shape.length,u=new Array(a);for(let c=0;c<u.length;c++)u[c]=s.shape[i[c]];let l;if(o.shouldExecuteOnCPU([s])){const d=o.texData.get(s.dataId).values,f=hS(d,s.shape,s.dtype,i,u);l=o.makeTensorInfo(u,s.dtype);const h=o.texData.get(l.dataId);h.values=f}else l=g1(s,i,o);return l}const tpe={kernelName:Pm,backendName:"webgl",kernelFunc:dr};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I6=1e3;function sg({a:t,b:e,transposeA:n,transposeB:r,backend:s,bias:i=null,preluActivationWeights:o=null,leakyreluAlpha:a=0,activation:u=null}){const l=t.shape.length,c=e.shape.length,d=n?t.shape[l-2]:t.shape[l-1],f=r?e.shape[c-1]:e.shape[c-2],h=n?t.shape[l-1]:t.shape[l-2],p=r?e.shape[c-2]:e.shape[c-1],y=t.shape.slice(0,-2),b=e.shape.slice(0,-2),g=de(y),v=de(b),x=it(t.shape.slice(0,-2),e.shape.slice(0,-2)).concat([h,p]);R(d===f,()=>`Error in matMul: inner shapes (${d}) and (${f}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${r} must match.`);const N=n?[g,d,h]:[g,h,d],k=r?[v,p,f]:[v,f,p],O=me({inputs:{x:t},backend:s,attrs:{shape:N}}),_=me({inputs:{x:e},backend:s,attrs:{shape:k}}),$=[O,_],M=Math.max(g,v),K=n?O.shape[1]:O.shape[2],Z=i!=null,ie=o!=null,ee=u==="leakyrelu",W=u!=null?Rh(u,!0):null,V=Z||ie||ee||W!=null;let D;if((h===1||p===1)&&K>I6&&V===!1){let U=O,F=_;n&&(U=dr({inputs:{x:O},backend:s,attrs:{perm:[0,2,1]}}),$.push(U)),r&&(F=dr({inputs:{x:_},backend:s,attrs:{perm:[0,2,1]}}),$.push(F));const ue=p!==1,se=p===1;let he=U;ue&&(he=me({inputs:{x:U},backend:s,attrs:{shape:[M,K,1]}}),$.push(he));const ae=p===1?2:1;let be=F;se&&(be=me({inputs:{x:F},backend:s,attrs:{shape:[M,1,K]}}),$.push(be));const Te=mS({inputs:{a:he,b:be},backend:s});D=y1({inputs:{x:Te},backend:s,attrs:{axis:ae,keepDims:!0}}),$.push(Te)}else{const U=fo(t.dtype,e.dtype),F=new T6(N,k,[M,h,p],n,r,Z,W,ie,ee),ue=[O,_];if(i!=null&&ue.push(i),ie&&ue.push(o),ee){const se=s.makeTensorInfo([],"float32",wd(a,"float32"));ue.push(se),$.push(se)}D=s.runWebGLProgram(F,ue,U)}const L=me({inputs:{x:D},backend:s,attrs:{shape:x}});$.push(D);for(const U of $)s.disposeIntermediateTensorInfo(U);return L}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function npe(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:i,bias:o,preluActivationWeights:a}=e,{transposeA:u,transposeB:l,activation:c,leakyreluAlpha:d}=r;return sg({a:s,b:i,transposeA:u,transposeB:l,backend:n,bias:o,preluActivationWeights:a,leakyreluAlpha:d,activation:c})}const rpe={kernelName:Ev,backendName:"webgl",kernelFunc:npe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X_="return abs(x);";function spe(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const i=n.texData.get(r.dataId),o=w6(i.values);return n.makeTensorInfo(r.shape,r.dtype,o)}let s;return X().getBool("WEBGL_PACK_UNARY_OPERATIONS")?s=new Ia(r.shape,X_):s=new io(r.shape,X_),n.runWebGLProgram(s,[r],r.dtype)}const ipe={kernelName:S3,backendName:"webgl",kernelFunc:spe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ope=ii+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,ape=st({opSnippet:ope}),upe={kernelName:A3,backendName:"webgl",kernelFunc:ape};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lpe=ii+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,cpe=st({opSnippet:lpe}),dpe={kernelName:E3,backendName:"webgl",kernelFunc:cpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y_="return a + b;",fpe=Bn({opSnippet:Y_,packedOpSnippet:Y_,supportsComplex:!0,cpuKernelImpl:Sfe}),hpe={kernelName:jx,backendName:"webgl",kernelFunc:fpe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ppe{constructor(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((i,o)=>`T${o}`);const r=[];this.variableNames.forEach(i=>{r.push(`float v${i} = get${i}AtOutCoords();`)});const s=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${s};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mpe{constructor(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((i,o)=>`T${o}`);const r=[];this.variableNames.forEach(i=>{r.push(`vec4 v${i} = get${i}AtOutCoords();`)});const s=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${s};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qm(t){const{inputs:e,backend:n}=t,r=e;if(r.length===1)return Hr({inputs:{x:r[0]},backend:n});if(r.length>X().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const u=Math.floor(r.length/2),l=qm({inputs:r.slice(0,u),backend:n}),c=qm({inputs:r.slice(u),backend:n});return qm({inputs:[l,c],backend:n})}const s=r.map(u=>u.dtype).reduce((u,l)=>fo(u,l)),i=r.map(u=>u.shape),a=X().getBool("WEBGL_PACK")?new mpe(r[0].shape,i):new ppe(r[0].shape,i);return n.runWebGLProgram(a,r,s)}const gpe={kernelName:C3,backendName:"webgl",kernelFunc:qm};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ype(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r,a=s.shape.length,u=An(i,s.shape);let l=u;const c=ni(l,a);let d=s;c!=null&&(d=dr({inputs:{x:s},backend:n,attrs:{perm:c}}),l=ri(l.length,a)),Bi("all",l,a);const[f,h]=po(d.shape,l),p=de(h),y=me({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),b=Vl(y,y.dtype,"all",n);let g;if(o){const v=Ss(f,u);g=me({inputs:{x:b},backend:n,attrs:{shape:v}})}else g=me({inputs:{x:b},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),c!=null&&n.disposeIntermediateTensorInfo(d),g}const bpe={kernelName:N3,backendName:"webgl",kernelFunc:ype};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vpe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r,a=s.shape.length,u=An(i,s.shape);let l=u;const c=ni(l,a);let d=s;c!=null&&(d=dr({inputs:{x:s},backend:n,attrs:{perm:c}}),l=ri(l.length,a)),Bi("any",l,a);const[f,h]=po(d.shape,l),p=de(h),y=me({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),b=Vl(y,y.dtype,"any",n);let g;if(o){const v=Ss(f,u);g=me({inputs:{x:b},backend:n,attrs:{shape:v}})}else g=me({inputs:{x:b},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),c!=null&&n.disposeIntermediateTensorInfo(d),g}const wpe={kernelName:_3,backendName:"webgl",kernelFunc:vpe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xpe{constructor(e,n,r){this.variableNames=["A"];const{windowSize:s,batchSize:i,outSize:o}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[i,o];const a=n==="max"?">":"<",u=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${s};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${s}; i++) {
          int inIdx = ${u};
          float candidate = getA(batch, inIdx);
          if (candidate ${a} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Spe{constructor(e,n,r,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,R(e.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const i=e[e.length-1],o=Math.ceil(i/n);this.outputShape=e.slice(0,-1),o>1&&this.outputShape.push(o),s||this.variableNames.push("bestIndicesA");const a=this.outputShape,u=a.length,l=wt(u),c=lr("coords",u);let d,f;if(o===1){f=u+1;const _=wt(f);d=`
        ${_} sourceLocR = ${_}(${c.join()}, 0);
        ++${c[u-1]};
        ${_} sourceLocG = ${_}(${c.join()}, 0);
        ++${c[u-2]};
        ${_} sourceLocA = ${_}(${c.join()}, 0);
        --${c[u-1]};
        ${_} sourceLocB = ${_}(${c.join()}, 0);
        --${c[u-2]};`}else f=u,d=`
        ${l} sourceLocR = coords;
        ++${c[u-1]};
        ${l} sourceLocG = coords;
        ++${c[u-2]};
        ${l} sourceLocA = coords;
        --${c[u-1]};
        ${l} sourceLocB = coords;
        --${c[u-2]};`;const h=["x","y","z","w","u","v"].slice(0,f),p="."+h[f-1],y=h.map(_=>"int "+_),b=lr("sourceLocR",f-1).concat("inIdx.r"),g=lr("sourceLocG",f-1).concat("inIdx.g"),v=lr("sourceLocB",f-1).concat("inIdx.b"),w=lr("sourceLocA",f-1).concat("inIdx.a"),x=r==="max"?"greaterThan":"lessThan",N=s?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${b.join()}),
                             getBestIndicesAChannel(${g.join()}),
                             getBestIndicesAChannel(${v.join()}),
                             getBestIndicesAChannel(${w.join()})));`,k=`vec4(
            getAChannel(${b.join()}),
            hasNextCol ? getAChannel(${g.join()}) : 0.,
            hasNextRow ? getAChannel(${v.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${w.join()}) : 0.)`,O=s?"":`
      float getBestIndicesAChannel(${y.join()}) {
        return getChannel(getBestIndicesA(${h.join()}),
                                          vec2(${h.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${y.join()}) {
        return getChannel(getA(${h.join()}),
                               vec2(${h.slice(-2).join()}));
      }
      ${O}
      void main() {
        ${l} coords = getOutputCoords();
        bool hasNextCol = ${c[u-1]} < ${a[u-1]-1};
        bool hasNextRow = ${c[u-2]} < ${a[u-2]-1};
        ${d}
        ivec4 srcIdx = ivec4(sourceLocR${p}, sourceLocG${p},
          sourceLocB${p}, sourceLocA${p}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${k};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${N}
          vec4 candidate = ${k};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${x}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k6(t,e,n,r=null){let s=e.shape[0],i=e.shape[1];r!=null&&(s=r.shape[0],i=r.shape[1]);const o=Gg(i),a={windowSize:o,inSize:i,batchSize:s,outSize:Math.ceil(i/o)},u=new xpe(a,n,r==null),l=[e];r!=null&&l.push(r);const c=t.runWebGLProgram(u,l,"int32");if(c.shape[1]===1)return c;const d=k6(t,e,n,c);return t.disposeIntermediateTensorInfo(c),d}function R6(t,e,n,r=null){const s=r!=null?r.shape:e.shape,i=s[s.length-1],o=Gg(i),a=new Spe(s,o,n,r==null),u=r==null?[e]:[e,r],l=t.runWebGLProgram(a,u,"int32");if(l.shape.length===e.shape.length){const c=R6(t,e,n,l);return t.disposeIntermediateTensorInfo(l),c}return l}function O6(t,e,n,r){const s=[n];if(Bi("arg"+r.charAt(0).toUpperCase()+r.slice(1),s,e.shape.length),!X().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const i=[],o=t.texData.get(e.dataId),a=o!==null&&o.isPacked;let u=e;a&&(u=t.unpackTensor(e),i.push(u));const[l,c]=po(u.shape,s),d=de(c),f=me({inputs:{x:u},backend:t,attrs:{shape:[-1,d]}});i.push(f);const h=k6(t,f,r);i.push(h);const p=me({inputs:{x:h},backend:t,attrs:{shape:l}});return i.forEach(y=>t.disposeIntermediateTensorInfo(y)),p}return R6(t,e,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ape(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i}=r;let o=An(i,s.shape);const a=ni(o,s.shape.length);let u=s;const l=[];a!=null&&(u=dr({inputs:{x:s},backend:n,attrs:{perm:a}}),l.push(u),o=ri(o.length,u.shape.length)),Bi("argMax",[o[0]],u.shape.length);const c=O6(n,u,o[0],"max");return l.forEach(d=>n.disposeIntermediateTensorInfo(d)),c}const Epe={kernelName:T3,backendName:"webgl",kernelFunc:Ape};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cpe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i}=r;let o=An(i,s.shape);const a=ni(o,s.shape.length);let u=s;const l=[];a!=null&&(u=dr({inputs:{x:s},backend:n,attrs:{perm:a}}),l.push(u),o=ri(o.length,u.shape.length)),Bi("argMin",[o[0]],u.shape.length);const c=O6(n,u,o[0],"min");return l.forEach(d=>n.disposeIntermediateTensorInfo(d)),c}const Npe={kernelName:I3,backendName:"webgl",kernelFunc:Cpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _pe=ii+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,Tpe=st({opSnippet:_pe}),Ipe={kernelName:k3,backendName:"webgl",kernelFunc:Tpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kpe=ii+"return log(x + sqrt(x * x + 1.0));",Rpe=st({opSnippet:kpe}),Ope={kernelName:R3,backendName:"webgl",kernelFunc:Rpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ppe=ii+`
  return atan(x);
`,Dpe=st({opSnippet:Ppe}),Lpe={kernelName:O3,backendName:"webgl",kernelFunc:Dpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fpe=pS+`
  return atan(a, b);
`,$pe=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Ml+`
  return result;
`,Bpe=Bn({opSnippet:Fpe,packedOpSnippet:$pe}),Mpe={kernelName:D3,backendName:"webgl",kernelFunc:Bpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vpe=ii+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,Upe=st({opSnippet:Vpe}),zpe={kernelName:P3,backendName:"webgl",kernelFunc:Upe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Oh{constructor(e,n,r,s=!1,i=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,a=e.strideHeight,u=e.strideWidth,l=e.dilationHeight,c=e.dilationWidth,d=e.effectiveFilterHeight,f=e.effectiveFilterWidth,h=e.padInfo.top,p=e.padInfo.left;this.outputShape=e.outShape;const y=n==="avg",b=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,g=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let v="0.0";if(y||(v="-1.0 / 1e-20"),r){const _=">=";this.userCode=`
        const ivec2 strides = ivec2(${a}, ${u});
        const ivec2 pads = ivec2(${h}, ${p});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${d};
              wR += ${l}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${f};
                wC += ${c}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${_} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${s?i?b:g:`wR * ${f} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const w="max";let x=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(x="avgValue / max(count, 1.0)");const N=Math.floor(o/4)*4,k=o%4,O=`
      if (${y}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${w}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${u});
      const ivec2 pads = ivec2(${h}, ${p});
      const float initializationValue = ${v};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${v});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${d};
            wR += ${l}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${N}; wC += 4) {
            int xC = xCCorner + wC * ${c};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              getValue(batch, xR, xC + 3 * ${c}, d)
            );

            ${O}
          }

          int xC = xCCorner + ${N};
          if (${k===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${O}
          } else if (${k===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              initializationValue,
              initializationValue
            );

            ${O}
          } else if (${k===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              initializationValue
            );

            ${O}
          }
        }
        setOutput(${x});
      }
    `}}class gS{constructor(e,n,r,s=!1,i=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,a=e.strideDepth,u=e.strideHeight,l=e.strideWidth,c=e.dilationDepth,d=e.dilationHeight,f=e.dilationWidth,h=e.effectiveFilterDepth,p=e.effectiveFilterHeight,y=e.effectiveFilterWidth,b=e.padInfo.front,g=e.padInfo.top,v=e.padInfo.left;this.outputShape=e.outShape;const w=n==="avg";let x="0.0";if(w||(x="-1.0 / 1e-20"),r){const M=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${a}, ${u}, ${l});
        const ivec3 pads = ivec3(${b}, ${g}, ${v});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${h};
              wD += ${c}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${p};
                wR += ${d}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${y};
                  wC += ${f}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${M} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${s?i?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${p} * ${y} +
                      wR * ${y} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const N="max";let k=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(k="avgValue / max(count, 1.0)");const O=Math.floor(o/4)*4,_=o%4,$=`
      if (${w}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${N}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${a}, ${u}, ${l});
      const ivec3 pads = ivec3(${b}, ${g}, ${v});
      const float initializationValue = ${x};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${x});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${h};
            wD += ${c}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p};
            wR += ${d}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${O}; wC += 4) {
              int xC = xCCorner + wC * ${f};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                getValue(batch, xD, xR, xC + 2 * ${f}, ch),
                getValue(batch, xD, xR, xC + 3 * ${f}, ch)
              );

              ${$}
            }

            int xC = xCCorner + ${O};
            if (${_===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${$}
            } else if (${_===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                initializationValue,
                initializationValue
              );

              ${$}
            } else if (${_===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                getValue(batch, xD, xR, xC + 2 * ${f}, ch),
                initializationValue
              );

              ${$}
            }
          }
        }
        setOutput(${k});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jpe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;ep(s,"avgPool");const{filterSize:i,strides:o,pad:a,dimRoundingMode:u}=r,l=1;R(Xr(o,l),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${l}'`);const c=Tl(s.shape,i,o,l,a,u);if(c.filterWidth===1&&c.filterHeight===1&&Gt(c.inShape,c.outShape))return Hr({inputs:{x:s},backend:n});const d=new Oh(c,"avg",!1);return n.runWebGLProgram(d,[s],"float32")}const Wpe={kernelName:L3,backendName:"webgl",kernelFunc:jpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qpe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:i,strides:o,pad:a,dimRoundingMode:u,dataFormat:l}=r,c=[1,1,1],d=qh(s.shape,i,o,c,a,u,l),f=new gS(d,"avg",!1);return n.runWebGLProgram(f,[s],"float32")}const Gpe={kernelName:F3,backendName:"webgl",kernelFunc:qpe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Hpe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,i=e.strideWidth,o=e.dilationHeight,a=e.dilationWidth,u=e.effectiveFilterHeight,l=e.effectiveFilterWidth,c=u-1-e.padInfo.top,d=l-1-e.padInfo.left,f=1/(n*r);this.userCode=`
      const ivec2 pads = ivec2(${c}, ${d});
      const float avgMultiplier = float(${f});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${u};
            wR += ${o}) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${l};
            wC+= ${a}) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class Kpe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,s=e.filterWidth,i=e.strideDepth,o=e.strideHeight,a=e.strideWidth,u=e.dilationDepth,l=e.dilationHeight,c=e.dilationWidth,d=e.effectiveFilterDepth,f=e.effectiveFilterHeight,h=e.effectiveFilterWidth,p=d-1-e.padInfo.front,y=f-1-e.padInfo.top,b=h-1-e.padInfo.left,g=1/(n*r*s);this.userCode=`
      const ivec3 pads = ivec3(${p}, ${y}, ${b});
      const float avgMultiplier = float(${g});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${u}) {
          float dyD = float(dyDCorner + wD) / ${i}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${f};
              wR += ${l}) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${h};
                wC += ${c}) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xpe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,o=i,{filterSize:a,strides:u,pad:l,dimRoundingMode:c}=r,d=[1,1,1],f=qh(o.shape,a,u,d,l,c),h=new Kpe(f);return n.runWebGLProgram(h,[s],o.dtype)}const Ype={kernelName:Wz,backendName:"webgl",kernelFunc:Xpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qpe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,o=i;ep([s,i],"avgPoolGrad");const{filterSize:a,strides:u,pad:l}=r,c=Tl(o.shape,a,u,1,l),d=new Hpe(c);return n.runWebGLProgram(d,[s],o.dtype)}const Zpe={kernelName:jz,backendName:"webgl",kernelFunc:Qpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jpe(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:i}=e,{transposeA:o,transposeB:a}=r;return sg({a:s,b:i,transposeA:o,transposeB:a,backend:n})}const eme={kernelName:$3,backendName:"webgl",kernelFunc:Jpe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tme{constructor(e,n,r,s,i,o){this.outputShape=[],this.variableNames=["x","mean","variance"],it(e,n),it(e,r);let a="0.0";s!=null&&(it(e,s),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let u="1.0";i!=null&&(it(e,i),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${a};
        float scale = ${u};
        float inv = scale * inversesqrt(variance + float(${o}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nme{constructor(e,n,r,s,i,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],it(e,n),it(e,r);let a="vec4(0.0)";s!=null&&(it(e,s),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let u="vec4(1.0)";i!=null&&(it(e,i),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${a};
        vec4 scale = ${u};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${o}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rme=({inputs:t,backend:e,attrs:n})=>{const{x:r,mean:s,variance:i,offset:o,scale:a}=t;R(s.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),R(o==null||s.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),R(a==null||s.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:u}=n;u==null&&(u=.001);const l=[r,s,i];let c=null;o!=null&&(c=o.shape,l.push(o));let d=null;a!=null&&(d=a.shape,l.push(a));const f=X().getBool("WEBGL_PACK_NORMALIZATION")?new nme(r.shape,s.shape,i.shape,c,d,u):new tme(r.shape,s.shape,i.shape,c,d,u);return e.runWebGLProgram(f,l,l[0].dtype)},sme={kernelName:AR,backendName:"webgl",kernelFunc:rme};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ime{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const n=wt(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=ome(this.rank);let s;const i=e.map((o,a)=>`sourceLoc.${Nw[a]} = start[${a}] + coords.${Nw[a]};`);s=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${i.join(`
`)}
      `,this.userCode=`
      void main() {
        ${s}
        setOutput(getSource(${r}));
      }
    `}}const Nw=["x","y","z","w","u","v"];function ome(t){if(t===1)return"sourceLoc";if(t<=6)return Nw.slice(0,t).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ame{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=wt(this.rank),r=lr("coords",this.rank),s=lr("sourceLoc",this.rank),i=this.rank===1?"sourceLoc":`vec2(${s.slice(-2).join()})`,o=`getChannel(getSource(${s.join()}), ${i})`,a=`
      result.x = ${o};
      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
        ++${s[this.rank-1]};
        result.y = ${o};
        --${s[this.rank-1]};
      }
    `,u=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {
        ++${s[this.rank-2]};
        result.z = ${o};
        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
          ++${s[this.rank-1]};
          result.w = ${o};
        }
      }
    `,l=this.rank<=4?`sourceLoc = coords +
            ${n}(${e.map((c,d)=>`start[${d}]`).join()});`:e.map((c,d)=>`${s[d]} = ${r[d]} + start[${d}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${l}
        vec4 result = vec4(0.);
        ${a}
        ${u}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ume(t,e,n,r){const s=r.texData.get(t.dataId),i=r.makeTensorInfo(n,t.dtype),o=r.texData.get(i.dataId);Object.assign(o,s),o.refCount=1,o.shape=n,o.dtype=t.dtype;let a=S2(e,Ln(t.shape));s.slice&&(a+=s.slice.flatOffset),o.slice={flatOffset:a,origDataId:s.slice&&s.slice.origDataId||t.dataId};const u=r.dataRefCount.get(o.slice.origDataId)||1;return r.dataRefCount.set(o.slice.origDataId,u+1),i}function Md(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:i,size:o}=r,[a,u]=tD(s,i,o);if(q4(s,a,u),de(u)===0)return n.makeTensorInfo(u,s.dtype,[]);if(n.shouldExecuteOnCPU([s])||s.dtype==="string"){const d=n.texData.get(s.dataId),f=ehe(d.values,a,u,s.shape,s.dtype);return n.makeTensorInfo(u,s.dtype,f)}const{isPacked:l}=n.texData.get(s.dataId),c=x2(s.shape,a,u);if(l||!c){const d=X().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new ame(u):new ime(u),f=[a];return n.runWebGLProgram(d,[s],s.dtype,f)}return n.uploadToGPU(s.dataId),ume(s,a,u,n)}const lme={kernelName:OO,backendName:"webgl",kernelFunc:Md};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cme=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:i,crops:o}=r;R(s.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const a=i.reduce((v,w)=>v*w),u=E2(s.shape,i,a),l=C2(u.length,i.length),c=N2(s.shape,i,a),d=lD(o,i.length),f=cD(c,o,i.length),h=[],p=me({inputs:{x:s},backend:n,attrs:{shape:u}}),y=dr({inputs:{x:p},backend:n,attrs:{perm:l}}),b=me({inputs:{x:y},backend:n,attrs:{shape:c}}),g=Md({inputs:{x:b},backend:n,attrs:{begin:d,size:f}});return h.push(p),h.push(y),h.push(b),h.forEach(v=>n.disposeIntermediateTensorInfo(v)),g},dme={kernelName:B3,backendName:"webgl",kernelFunc:cme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fme(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:i}=e,{size:o}=r,a=n.readSync(s.dataId),u=n.readSync(i.dataId),l=v6(a,u,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,l)}const hme={kernelName:M3,backendName:"webgl",kernelFunc:fme};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pme=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,mme=`
  return float(int(a.r) & int(b.r));
`;function gme(t){const{inputs:e,backend:n}=t,{a:r,b:s}=e,i=X().getBool("WEBGL_PACK_BINARY_OPERATIONS"),o=X().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,s])||o===1){const u=n.texData.get(r.dataId).values,l=n.texData.get(s.dataId).values,[c,d]=Efe(r.shape,s.shape,u,l,r.dtype),f=n.makeTensorInfo(d,r.dtype),h=n.texData.get(f.dataId);return h.values=c,f}let a;return i?a=new $d(pme,r.shape,s.shape,!1):a=new Sl(mme,r.shape,s.shape),n.runWebGLProgram(a,[r,s],r.dtype)}const yme={kernelName:V3,backendName:"webgl",kernelFunc:gme};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bme(t){const{inputs:e,backend:n}=t,{s0:r,s1:s}=e,i=n.readSync(r.dataId),o=n.readSync(s.dataId),a=it(Array.from(i),Array.from(o));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const vme={kernelName:U3,backendName:"webgl",kernelFunc:bme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wme="return float(a != b);",P6=Bn({opSnippet:wme,cpuKernelImpl:qfe,dtype:"bool"}),xme={kernelName:nO,backendName:"webgl",kernelFunc:P6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function np(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.texData.get(r.dataId);return Hr({inputs:{x:s.complexTensorInfos.real},backend:n})}const Sme={kernelName:yO,backendName:"webgl",kernelFunc:np};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ame="return float(int(x));";function Eme(t,e){const n=new io(t.shape,Ame),r=e.runWebGLProgram(n,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _w(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dtype:i}=r;if(i==="complex64"){if(s.dtype==="complex64")return Hr({inputs:{x:s},backend:n});const o=Xa(s.shape),a=_w({inputs:{x:s},backend:n,attrs:{dtype:"float32"}}),u=iu({inputs:{real:a,imag:o},backend:n});return o.dispose(),n.disposeIntermediateTensorInfo(a),u}if(s.dtype==="complex64"){const o=np({inputs:{input:s},backend:n}),a=_w({inputs:{x:o},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(o),a}if(!Pz(s.dtype,i)){const o=Hr({inputs:{x:s},backend:n});return{dataId:o.dataId,shape:o.shape,dtype:i}}if(n.shouldExecuteOnCPU([s])){const o=n.texData.get(s.dataId).values,[a,u,l]=Cfe(o,s.shape,s.dtype,i);return n.makeTensorInfo(a,u,l)}if(i==="int32")return Eme(s,n);if(i==="bool"){const o=n.makeTensorInfo([],"bool",qa("bool",1)),u=P6({inputs:{a:s,b:o},backend:n});return n.disposeIntermediateTensorInfo(o),u}throw new Error(`Error in Cast: failed to cast ${s.dtype} to ${i}`)}const Cme={kernelName:Wx,backendName:"webgl",kernelFunc:_w};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q_="return ceil(x);",Nme=st({opSnippet:Q_,packedOpSnippet:Q_,cpuKernelImpl:Nfe}),_me={kernelName:z3,backendName:"webgl",kernelFunc:Nme};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Tme{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ime{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kme(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{clipValueMin:i,clipValueMax:o}=r;let a;X().getBool("WEBGL_PACK_CLIP")?a=new Ime(s.shape):a=new Tme(s.shape);const u=[[i],[o]];return n.runWebGLProgram(a,[s],s.dtype,u)}const Rme={kernelName:j3,backendName:"webgl",kernelFunc:kme};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ome{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z_(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function Pme(t){const{inputs:e,backend:n}=t,{x:r}=e,s=n.texData.get(r.dataId),i=new Ome(r.shape),o=[Z_(r,s.complexTensorInfos.real),Z_(r,s.complexTensorInfos.imag)];return n.runWebGLProgram(i,o,o[0].dtype)}const Dme={kernelName:q3,backendName:"webgl",kernelFunc:Pme};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Lme{constructor(e){this.outputShape=[],this.outputShape=vl(e,1),this.variableNames=e.map((o,a)=>`T${a}`);const n=new Array(e.length-1);n[0]=e[0][1];for(let o=1;o<n.length;o++)n[o]=n[o-1]+e[o][1];const r=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let o=1;o<n.length;o++){const a=n[o-1];r.push(`else if (yC < ${n[o]}) setOutput(getT${o}(yR, yC-${a}));`)}const s=n.length,i=n[n.length-1];r.push(`else setOutput(getT${s}(yR, yC-${i}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Fme{constructor(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=vl(e,n);const r=this.outputShape,s=r.length,i=wt(s),o=lr("coords",s),a=["x","y","z","w","u","v"].slice(0,s);this.variableNames=e.map((y,b)=>`T${b}`);const u=new Array(e.length-1);u[0]=e[0][n];for(let y=1;y<u.length;y++)u[y]=u[y-1]+e[y][n];const l=a[n],c=a.slice(-2),d=a.join();let f=`if (${l} < ${u[0]}) {
        return getChannel(
            getT0(${d}), vec2(${c.join()}));
        }`;for(let y=1;y<u.length;y++){const b=u[y-1];f+=`
        if (${l} < ${u[y]}  && ${l} >= ${u[y-1]}) {
          return getChannel(
            getT${y}(${bm(a,l,b)}),
            vec2(${bm(c,l,b)}));
        }`}const h=u.length,p=u[u.length-1];f+=`
        return getChannel(
          getT${h}(${bm(a,l,p)}),
          vec2(${bm(c,l,p)}));`,this.userCode=`
      float getValue(${a.map(y=>"int "+y)}) {
        ${f}
      }

      void main() {
        ${i} coords = getOutputCoords();
        vec4 result = vec4(getValue(${o}), 0., 0., 0.);

        ${o[s-1]} = ${o[s-1]} + 1;
        if (${o[s-1]} < ${r[s-1]}) {
          result.g = getValue(${o});
        }

        ${o[s-2]} = ${o[s-2]} + 1;
        if (${o[s-2]} < ${r[s-2]}) {
          result.a = getValue(${o});
        }

        ${o[s-1]} = ${o[s-1]} - 1;
        if (${o[s-2]} < ${r[s-2]} &&
            ${o[s-1]} < ${r[s-1]}) {
          result.b = getValue(${o});
        }
        setOutput(result);
      }
    `}}function bm(t,e,n){const r=t.indexOf(e);return t.map((i,o)=>o===r?`${i} - ${n}`:i).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b1(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.texData.get(r.dataId);return Hr({inputs:{x:s.complexTensorInfos.imag},backend:n})}const $me={kernelName:IR,backendName:"webgl",kernelFunc:b1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bf(t,e,n){const r=t[0].dtype;if(r==="complex64"){const h=t.map(v=>np({inputs:{input:v},backend:n})),p=t.map(v=>b1({inputs:{input:v},backend:n})),y=Bf(h,e,n),b=Bf(p,e,n),g=iu({inputs:{real:y,imag:b},backend:n});return h.forEach(v=>n.disposeIntermediateTensorInfo(v)),p.forEach(v=>n.disposeIntermediateTensorInfo(v)),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),g}let s=n.shouldExecuteOnCPU(t);if(r==="string"&&(s=!0),s){const h=t.map(x=>{const k=[-1,de(x.shape.slice(e))];return me({inputs:{x},backend:n,attrs:{shape:k}})}),p=h.map(x=>({vals:n.readSync(x.dataId),shape:x.shape})),y=vl(h.map(x=>x.shape),1),b=h[0].shape[0]===1,g=_fe(p,y,r,b),v=vl(t.map(x=>x.shape),e),w=n.makeTensorInfo(v,r,g);return h.forEach(x=>n.disposeIntermediateTensorInfo(x)),w}const i=t.filter(h=>de(h.shape)>0),o=X().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&i[0].shape.length>1;if(i.length===1){const h=o?new io(t[0].shape,wa):new Ia(t[0].shape,wa);return n.runWebGLProgram(h,t,r)}const a=X().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(i.length>a){const h=[];for(let y=0;y<i.length;y+=a){const b=i.slice(y,y+a);h.push(Bf(b,e,n))}const p=Bf(h,e,n);for(const y of h)n.disposeIntermediateTensorInfo(y);return p}if(o){const h=new Fme(i.map(p=>p.shape),e);return n.runWebGLProgram(h,i,r)}const{tensors2D:u,outShape:l}=Bme(i,e,n),c=new Lme(u.map(h=>h.shape)),d=n.runWebGLProgram(c,u,r);u.forEach(h=>n.disposeIntermediateTensorInfo(h));const f=me({inputs:{x:d},attrs:{shape:l},backend:n});return n.disposeIntermediateTensorInfo(d),f}function Bme(t,e,n){const r=vl(t.map(i=>i.shape),e);return{tensors2D:t.map(i=>me({inputs:{x:i},attrs:{shape:[-1,de(i.shape.slice(e))]},backend:n})),outShape:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D6(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r,i=An(s,e[0].shape)[0],o=e.map(l=>l.shape);rD(o,i);const a=vl(e.map(l=>l.shape),i);if(de(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const u=e.filter(l=>de(l.shape)>0);return u.length===1?Hr({inputs:{x:u[0]},backend:n}):Bf(u,i,n)}const Mme={kernelName:G3,backendName:"webgl",kernelFunc:D6};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class L6{constructor(e,n=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const o=e.padInfo.top,a=e.padInfo.left,u=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,d=e.dilationWidth,f=e.filterHeight,h=e.filterWidth,p=Math.floor(e.inChannels/4)*4,y=e.inChannels%4,b=e.dataFormat==="channelsLast",g=b?1:2,v=b?2:3,w=b?3:1;let x="",N="";r&&(s?x=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?x=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:x=`
          float activation(float x) {
            ${r}
          }
        `,N="result = activation(result);");const k=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${x}

      const ivec2 strides = ivec2(${u}, ${l});
      const ivec2 pads = ivec2(${o}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${w}];

        ivec2 xRCCorner =
            ivec2(coords[${g}], coords[${v}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${f}; wR++) {
          int xR = xRCorner + wR * ${c};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${h}; wC++) {
            int xC = xCCorner + wC * ${d};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${p}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${b}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${y===1}) {

              if (${b}) {
                dotProd +=
                    getX(batch, xR, xC, ${p}) *
                    getW(wR, wC, ${p}, d2);
              } else {
                dotProd +=
                    getX(batch, ${p}, xR, xC) *
                    getW(wR, wC, ${p}, d2);
              }

            } else if (${y===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2)
              );

              if (${b}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${y===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2),
                getW(wR, wC, ${p} + 2, d2)
              );

              if (${b}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1),
                  getX(batch, xR, xC, ${p} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC),
                  getX(batch, ${p} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${k}
        ${N}
        setOutput(result);
      }
    `}}class Vme{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const n=e.padInfo.front,r=e.padInfo.top,s=e.padInfo.left,i=e.strideDepth,o=e.strideHeight,a=e.strideWidth,u=e.dilationDepth,l=e.dilationHeight,c=e.dilationWidth,d=e.filterDepth,f=e.filterHeight,h=e.filterWidth,p=Math.floor(e.inChannels/4)*4,y=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${i}, ${o}, ${a});
      const ivec3 pads = ivec3(${n}, ${r}, ${s});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${d}; wF++) {
          int xF = xFCorner + wF * ${u};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${f}; wR++) {
            int xR = xRCorner + wR * ${l};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${h}; wC++) {
              int xC = xCCorner + wC * ${c};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${p}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${y===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${p}) *
                  getW(wF, wR, wC, ${p}, d2);
              } else if (${y===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${y===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1),
                  getX(batch, xF, xR, xC, ${p} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2),
                  getW(wF, wR, wC, ${p} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class F6{constructor(e,n=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Hn(this.outputShape.length);const o=e.padInfo.left,a=e.strideWidth,u=e.dilationWidth,l=e.filterHeight,c=e.filterWidth,d=c;let f=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let b=0;b<c;b++)f+=`
           vec4 xTexelC${b*2};
           int xTexelC${b*2}Ready;
           vec4 xTexelC${b*2+1};
           int xTexelC${b*2+1}Ready;
           vec4 xC${b};`;f+=`
     for (int r = 0; r < ${l}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let b=0;b<c;b++)f+=`
           xTexelC${b*2} = vec4(0.0);
           xTexelC${b*2}Ready = 0;
           xTexelC${b*2+1} = vec4(0.0);
           xTexelC${b*2+1}Ready = 0;
           xC${b} = vec4(0.0);`;f+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let b=0;b<(d+1)/2;b++){const g=b*2;if(f+=`
           xC = xCCorner + ${g*u};
           `,a===1){if(g<c&&(o%2===1?(f+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g}Ready == 0) {
                   xTexelC${g} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${g}.zw = vec2(0.0);
                   }
                   xTexelC${g}Ready = 1;
                 }
               `,u===1&&g>0?f+=`
                 xC${g} = vec4(xTexelC${g-2}.zw, xTexelC${g}.xy);
                 `:f+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${g} = vec4(previous.zw, xTexelC${g}.xy);
                   } else {
                     xC${g} = vec4(0.0, 0.0, xTexelC${g}.xy);
                   }
                   `):f+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${g}Ready == 0) {
                   xTexelC${g} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${g}.zw = vec2(0.0);
                   }
                   xTexelC${g}Ready = 1;
                 }

                 xC${g} = xTexelC${g};
                 `,g+1<c)){const v=o%2===0?Vx(u):u;u%2===0&&o%2===1||u%2!==0&&o%2!==1?(f+=`
                   xCOffset = xC + imod(pads[1], 2) + ${v};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g+1}Ready == 0) {
                     xTexelC${g+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${g+1}.zw = vec2(0.0);
                     }
                     xTexelC${g+1}Ready = 1;
                   }
                   `,u>1?f+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${g+1} = vec4(previous.zw, xTexelC${g+1}.xy);
                     } else {
                      xC${g+1} = vec4(0.0, 0.0, xTexelC${g+1}.xy);
                     }
                     `:f+=`
                     xC${g+1} = vec4(xTexelC${g}.zw, xTexelC${g+1}.xy);
                     `):v===1?f+=`
                     xC${g+1} = xTexelC${g};
                     `:f+=`
                     xCOffset = xC + ${v};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g+1}Ready == 0) {
                       xTexelC${g+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${g+1}.zw = vec2(0.0);
                       }
                       xTexelC${g+1}Ready = 1;
                     }

                     xC${g+1} = xTexelC${g+1};
                     `}}else g<c&&(o%2===1?(f+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g}Ready == 0) {
                   xTexelC${g} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${g}.zw = vec2(0.0);
                   }
                   xTexelC${g}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${g+1}Ready == 0) {
                   xTexelC${g+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${g+1}.zw = vec2(0.0);
                   }
                   xTexelC${g+1}Ready = 1;
                 }

                 xC${g} = vec4(xTexelC${g}.zw, xTexelC${g+1}.zw);
               `,g+1<c&&(f+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${g+1} = vec4(xTexelC${g+1}.xy, final.xy);
                 `)):(f+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${g}Ready == 0) {
                   xTexelC${g} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${g}.zw = vec2(0.0);
                   }
                   xTexelC${g}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g+1}Ready == 0) {
                   xTexelC${g+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${g+1}.zw = vec2(0.);
                   }
                   xTexelC${g+1}Ready = 1;
                 }

                 xC${g} = vec4(
                   xTexelC${g}.xy, xTexelC${g+1}.xy);
               `,g+1<c&&(f+=`
                   xC${g+1} = vec4(xTexelC${g}.zw, xTexelC${g+1}.zw);
                 `)));g<c&&(f+=`
             wTexel = getW(r, ${g}, d1, d2);
             dotProd += xC${g}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${g}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,g+1<c&&(f+=`
               wTexel = getW(r, ${g+1}, d1, d2);
               dotProd += xC${g+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${g+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}f+=`
     }
   `,f+=`
     }
   `,f+=`
     }
   `;let h="",p="";r&&(s?h=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:i?h=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:h=`vec4 activation(vec4 x) {
           ${r}
         }`,p="result = activation(result);");const y=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${h}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${f}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${y}
         ${p}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ume{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=Hn(this.outputShape.length);const{dataFormat:r}=n,s=hr(),i=r==="channelsLast",o=i?1:2,a=i?2:3,u=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let l="";for(let c=0;c<=1;c++)for(let d=0;d<=1;d++)l+=`
          blockIndex = rc.z + ${d};
          pos = rc.y + ${c};

          ${u}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${o}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${a}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${i}) {
                  innerDims = vec2(d1, ch);
                  result[${c*2+d}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${c*2+d}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${l}

        ${s.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ig(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&n===1&&t[0]>1?[t[0],1]:null}function $6({x:t,filter:e,convInfo:n,backend:r,bias:s=null,preluActivationWeights:i=null,leakyreluAlpha:o=0,activation:a=null}){const u=t.shape,l=r.texData.get(t.dataId),c=n.inChannels,d=u[0]*u[1]*u[2],f=n.outChannels,h=n.dataFormat==="channelsLast",p=!1,y=!1;let b;const g=[];if(i!=null){const x=ig(i.shape,h);x!=null&&(i=me({inputs:{x:i},backend:r,attrs:{shape:x}}),g.push(i))}if(s!=null){const x=ig(s.shape,h);x!=null&&(s=me({inputs:{x:s},backend:r,attrs:{shape:x}}),g.push(s))}if(!((d===1||f===1)&&c>I6)&&l.isPacked&&h&&l.texture!=null&&u[2]%2!==0&&Gt(l.shape.slice(-3),u.slice(-3))){const x=u[0]*u[1]*(u[2]+1),N={dataId:t.dataId,shape:[1,x,n.inChannels],dtype:t.dtype},k=l.shape;l.shape=l.shape.slice(),l.shape[l.shape.length-2]++,R(ng(l.shape,N.shape),()=>`packed reshape ${l.shape} to ${N.shape} isn't free`);const O=me({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});g.push(O);const _=sg({a:N,b:O,backend:r,transposeA:p,transposeB:y,bias:s,activation:a,preluActivationWeights:i,leakyreluAlpha:o}),$=r.texData.get(_.dataId);R($.isPacked,()=>"batchMatMul result is expected to be packed"),l.shape=k,$.shape=n.outShape,b=Hr({inputs:{x:_},backend:r}),b.shape=n.outShape,g.push(_)}else{const x=n.outHeight*n.outWidth,N=me({inputs:{x:t},backend:r,attrs:{shape:h?[n.batchSize,x,n.inChannels]:[n.batchSize,n.inChannels,x]}}),k=me({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),O=sg({a:h?N:k,b:h?k:N,transposeA:!h,transposeB:y,backend:r,bias:s,activation:a,preluActivationWeights:i,leakyreluAlpha:o});b=me({inputs:{x:O},backend:r,attrs:{shape:n.outShape}}),g.push(N),g.push(k),g.push(O)}for(const x of g)r.disposeIntermediateTensorInfo(x);return b}function B6({x:t,filter:e,convInfo:n,backend:r,bias:s=null,preluActivationWeights:i=null,leakyreluAlpha:o=0,activation:a=null}){const{filterWidth:u,filterHeight:l,inChannels:c,outWidth:d,outHeight:f,dataFormat:h}=n,p=h==="channelsLast",y=u*l*c,b=f*d,g=[n.batchSize,y,b],v=!0,w=!1,x=[];if(i!=null){const L=ig(i.shape,p);L!=null&&(i=me({inputs:{x:i},backend:r,attrs:{shape:L}}),x.push(i))}if(s!=null){const L=ig(s.shape,p);L!=null&&(s=me({inputs:{x:s},backend:r,attrs:{shape:L}}),x.push(s))}const N=me({inputs:{x:e},backend:r,attrs:{shape:[1,y,de(e.shape)/y]}});x.push(N);const k=new Ume(g,n),O=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],_=r.runWebGLProgram(k,[t],"float32",O),$=me({inputs:{x:_},backend:r,attrs:{shape:g}});x.push(_),x.push($);const M=s!=null,K=i!=null,Z=a==="leakyrelu",ie=a?Rh(a,!0):null,ee=new T6(p?$.shape:N.shape,p?N.shape:$.shape,p?[n.batchSize,b,n.outChannels]:[n.batchSize,n.outChannels,b],v,w,M,ie,K,Z),W=p?[$,N]:[N,$];if(s&&W.push(s),K&&W.push(i),Z){const L=r.makeTensorInfo([],"float32",wd(o,"float32"));W.push(L),x.push(L)}const V=r.runWebGLProgram(ee,W,"float32"),D=me({inputs:{x:V},backend:r,attrs:{shape:n.outShape}});x.push(V);for(const L of x)r.disposeIntermediateTensorInfo(L);return D}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zme(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dataFormat:u,dilations:l,dimRoundingMode:c}=r,d=xd(u),f=xs(s.shape,i.shape,o,l,a,c,!1,d);let h;if(f.filterHeight===1&&f.filterWidth===1&&f.dilationHeight===1&&f.dilationWidth===1&&f.strideHeight===1&&f.strideWidth===1&&(f.padInfo.type==="SAME"||f.padInfo.type==="VALID"))h=$6({x:s,filter:i,convInfo:f,backend:n});else if(f.strideWidth<=2&&d==="channelsLast"&&X().getBool("WEBGL_EXP_CONV")){const y=new F6(f),b=[[f.padInfo.top,f.padInfo.left],[f.strideHeight,f.strideWidth],[f.dilationHeight,f.dilationWidth],[f.inHeight,f.inWidth]];h=n.runWebGLProgram(y,[s,i],"float32",b)}else if(X().getBool("WEBGL_CONV_IM2COL"))h=B6({x:s,filter:i,convInfo:f,backend:n});else{const y=new L6(f);h=n.runWebGLProgram(y,[s,i],"float32")}const p=me({inputs:{x:h},backend:n,attrs:{shape:f.outShape}});return n.disposeIntermediateTensorInfo(h),p}const jme={kernelName:H3,backendName:"webgl",kernelFunc:zme};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Wme{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,s=e.padInfo.top,i=e.padInfo.left,o=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${s};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              ${o?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class qme{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,i=e.strideWidth,o=e.dataFormat==="channelsLast",a=n-1-e.padInfo.top,u=r-1-e.padInfo.left,l=o?1:2,c=o?2:3,d=o?3:1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${u});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${d}];

        ivec2 dyCorner = ivec2(coords[${l}], coords[${c}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${o}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Gme{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideDepth,r=e.strideHeight,s=e.strideWidth,i=e.padInfo.front,o=e.padInfo.top,a=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${i};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${o};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${s} - ${a};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Hme{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,s=e.filterWidth,i=e.strideDepth,o=e.strideHeight,a=e.strideWidth,u=n-1-e.padInfo.front,l=r-1-e.padInfo.top,c=s-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${u}, ${l}, ${c});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${i}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${s}; wC++) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${s} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kme(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:o,pad:a,dataFormat:u,dimRoundingMode:l,filterShape:c}=r,d=xd(u),f=xs(s.shape,c,o,1,a,l,!1,d),h=new Wme(f);return n.runWebGLProgram(h,[s,i],"float32")}const Xme={kernelName:K3,backendName:"webgl",kernelFunc:Kme};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Yme{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=Hn(this.outputShape.length);const n=e.filterHeight,r=e.filterWidth,s=n-1-e.padInfo.top,i=r-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${i});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            int wCPerm = ${r} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qme(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{inputShape:o,strides:a,pad:u,dataFormat:l,dimRoundingMode:c}=r,d=xd(l),f=xs(o,i.shape,a,1,u,c,!1,d);if(X().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&d==="channelsLast"){const h=[[f.strideHeight,f.strideWidth]],p=new Yme(f);return n.runWebGLProgram(p,[s,i],"float32",h)}else{const h=new qme(f);return n.runWebGLProgram(h,[s,i],"float32")}}const Zme={kernelName:X3,backendName:"webgl",kernelFunc:Qme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jme(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dilations:u}=r,l=Gh(s.shape,i.shape,o,u,a),c=new Vme(l);return n.runWebGLProgram(c,[s,i],"float32")}const e0e={kernelName:Y3,backendName:"webgl",kernelFunc:Jme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t0e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:o,pad:a,filterShape:u}=r,l=Gh(s.shape,u,o,1,a),c=new Gme(l);return n.runWebGLProgram(c,[s,i],"float32")}const n0e={kernelName:qz,backendName:"webgl",kernelFunc:t0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r0e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{pad:o,strides:a,inputShape:u}=r,l=Gh(u,i.shape,a,1,o),c=new Hme(l);return n.runWebGLProgram(c,[s,i],"float32")}const s0e={kernelName:Q3,backendName:"webgl",kernelFunc:r0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i0e=Bd+`
  return cos(x);
`,o0e=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${Ml}
  return result;
`,a0e=st({opSnippet:i0e,packedOpSnippet:o0e}),u0e={kernelName:Z3,backendName:"webgl",kernelFunc:a0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l0e=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,c0e=st({opSnippet:l0e}),d0e={kernelName:J3,backendName:"webgl",kernelFunc:c0e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class f0e{constructor(e,n,r,s,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[o,a,u,l]=e,[c]=n,[d,f]=r;this.outputShape=[c,d,f,l];const h=s==="bilinear"?1:0,[p,y]=[`${a-1}.0`,`${u-1}.0`],[b,g,v]=d>1?[`${(a-1)/(d-1)}`,"(y2-y1) * height_ratio",`y1*${p} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${p}`],[w,x,N]=f>1?[`${(u-1)/(f-1)}`,"(x2-x1) * width_ratio",`x1*${y} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${y}`];this.userCode=`
      const float height_ratio = float(${b});
      const float width_ratio = float(${w});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${o}) {
          return;
        }

        float height_scale = ${g};
        float width_scale = ${x};

        float in_y = ${v};
        if( in_y < 0.0 || in_y > ${p} ) {
          setOutput(float(${i}));
          return;
        }
        float in_x = ${N};
        if( in_x < 0.0 || in_x > ${y} ) {
          setOutput(float(${i}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${h} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h0e=t=>{const{inputs:e,backend:n,attrs:r}=t,{image:s,boxes:i,boxInd:o}=e,{cropSize:a,method:u,extrapolationValue:l}=r,c=new f0e(s.shape,i.shape,a,u,l);return n.runWebGLProgram(c,[s,i,o],"float32")},p0e={kernelName:nR,backendName:"webgl",kernelFunc:h0e};var Ph;(function(t){t.Prod="*",t.Sum="+"})(Ph||(Ph={}));class J_{constructor(e,n,r,s){this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const i=this.outputShape.length,o=this.op===Ph.Prod?"1.0":"0.0",a=r?o:`getX(${eT(i,"coords",this.op)})`,u=this.outputShape[this.outputShape.length-1];let l="",c="";r?(l=s?`end != ${u-1}`:"end != 0",c=s?"end + 1":"end - 1"):(l=s?`end + pow2 < ${u}`:"end >= pow2",c=s?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${wt(i)} coords = getOutputCoords();
        int end = ${tT(i,"coords",this.op)};
        float val = ${a};
        int pow2 = int(pow(2.0, index));
        if (${l}) {
          int idx = ${c};
          ${tT(i,"coords",this.op)} = idx;
          val ${this.op}= getX(${eT(i,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function eT(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.x, ${e}.y`;if(t===3)return`${e}.x, ${e}.y, ${e}.z`;if(t===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function tT(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.y`;if(t===3)return`${e}.z`;if(t===4)return`${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M6(t,e,n,r,s,i){const o=e.shape.length,a=ni([r],o);let u=e;a!=null&&(u=dr({inputs:{x:e},backend:n,attrs:{perm:a}}));const l=ri(1,o)[0];if(l!==o-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${r}`);const c=u.shape[l];let d=Hr({inputs:{x:u},backend:n});for(let f=0;f<=Math.ceil(Math.log2(c))-1;f++){const h=new J_(t,u.shape,!1,i),p=[[f]],y=d;d=n.runWebGLProgram(h,[d],d.dtype,p),n.disposeIntermediateTensorInfo(y)}if(s){const f=new J_(t,u.shape,s,i),h=d;d=n.runWebGLProgram(f,[d],d.dtype),n.disposeIntermediateTensorInfo(h)}if(a!=null){const f=t2(a),h=dr({inputs:{x:d},backend:n,attrs:{perm:f}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(u),h}return d}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m0e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,exclusive:o,reverse:a}=r;return M6(Ph.Prod,s,n,i,o,a)}const g0e={kernelName:eR,backendName:"webgl",kernelFunc:m0e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y0e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,exclusive:o,reverse:a}=r;return M6(Ph.Sum,s,n,i,o,a)}const b0e={kernelName:tR,backendName:"webgl",kernelFunc:y0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v0e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:i}=e,{size:o,binaryOutput:a}=r;if(s.shape.length===1){const u=n.readSync(s.dataId),l=n.readSync(i.dataId),c=v6(u,l,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}else if(s.shape.length===2){const u=n.bufferSync(s),l=n.bufferSync(i),c=Afe(u,l,o,a);return n.makeTensorInfo(c.shape,i.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${s.shape.length}.`)}const w0e={kernelName:rR,backendName:"webgl",kernelFunc:v0e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class x0e{constructor(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S0e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockSize:i,dataFormat:o}=r,a=s.shape[0],u=o==="NHWC"?s.shape[1]:s.shape[2],l=o==="NHWC"?s.shape[2]:s.shape[3],c=o==="NHWC"?s.shape[3]:s.shape[1],d=u*i,f=l*i,h=c/(i*i),p=o==="NHWC"?[a,d,f,h]:[a,h,d,f],y=new x0e(p,i,o);return n.runWebGLProgram(y,[s],s.dtype)}const A0e={kernelName:sR,backendName:"webgl",kernelFunc:S0e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class V6{constructor(e,n=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Hn(this.outputShape.length);const o=e.filterHeight,a=e.filterWidth,u=e.outChannels/e.inChannels;let l="",c="";r&&(s?l=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?l=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:l=`
          float activation(float x) {
            ${r}
          }
        `,c="result = activation(result);");const d=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${l}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${u};
        int q = d2 - d1 * ${u};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${o}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${a}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${d}
        ${c}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class U6{constructor(e,n=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Hn(this.outputShape.length);const o=e.outChannels/e.inChannels,a=e.padInfo.left,u=e.strideWidth,l=e.dilationWidth,c=e.filterHeight,d=e.filterWidth,f=d;let h=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let g=0;g<d;g++)h+=`
          vec4 xTexelC${g*2};
          int xTexelC${g*2}Ready;
          vec4 xTexelC${g*2+1};
          int xTexelC${g*2+1}Ready;
          vec4 xC${g};`;h+=`
    for (int r = 0; r < ${c}; r++) {
      `;for(let g=0;g<d;g++)h+=`
          xTexelC${g*2} = vec4(0.0);
          xTexelC${g*2}Ready = 0;
          xTexelC${g*2+1} = vec4(0.0);
          xTexelC${g*2+1}Ready = 0;
          xC${g} = vec4(0.0);`;h+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let g=0;g<(f+1)/2;g++){const v=g*2;if(h+=`
          xC = xCCorner + ${v*l};
          `,u===1){if(v<d&&(a%2===1?(h+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }
              `,l===1&&v>0?h+=`
                xC${v} = vec4(xTexelC${v-2}.zw, xTexelC${v}.xy);
                `:h+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${v} = vec4(previous.zw, xTexelC${v}.xy);
                  } else {
                    xC${v} = vec4(0.0, 0.0, xTexelC${v}.xy);
                  }
                  `):h+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }

                xC${v} = xTexelC${v};
                `,v+1<d)){const w=a%2===0?Vx(l):l;l%2===0&&a%2===1||l%2!==0&&a%2!==1?(h+=`
                  xCOffset = xC + imod(pads[1], 2) + ${w};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                    xTexelC${v+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${v+1}.zw = vec2(0.0);
                    }
                    xTexelC${v+1}Ready = 1;
                  }
                  `,l>1?h+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${v+1} = vec4(previous.zw, xTexelC${v+1}.xy);
                    } else {
                     xC${v+1} = vec4(0.0, 0.0, xTexelC${v+1}.xy);
                    }
                    `:h+=`
                    xC${v+1} = vec4(xTexelC${v}.zw, xTexelC${v+1}.xy);
                    `):w===1?h+=`
                    xC${v+1} = xTexelC${v};
                    `:h+=`
                    xCOffset = xC + ${w};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                      xTexelC${v+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${v+1}.zw = vec2(0.0);
                      }
                      xTexelC${v+1}Ready = 1;
                    }

                    xC${v+1} = xTexelC${v+1};
                    `}}else v<d&&(a%2===1?(h+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${v+1}Ready == 0) {
                  xTexelC${v+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${v+1}.zw = vec2(0.0);
                  }
                  xTexelC${v+1}Ready = 1;
                }

                xC${v} = vec4(xTexelC${v}.zw, xTexelC${v+1}.zw);
              `,v+1<d&&(h+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${v+1} = vec4(xTexelC${v+1}.xy, final.xy);
                `)):(h+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                  xTexelC${v+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${v+1}.zw = vec2(0.);
                  }
                  xTexelC${v+1}Ready = 1;
                }

                xC${v} = vec4(
                  xTexelC${v}.xy, xTexelC${v+1}.xy);
              `,v+1<d&&(h+=`
                  xC${v+1} = vec4(xTexelC${v}.zw, xTexelC${v+1}.zw);
                `)));v<d&&(h+=`
            wTexel = getW(r, ${v}, d1, q);
            dotProd += xC${v} * vec4(wTexel.xz, wTexel.xz);
          `,v+1<d&&(h+=`
              wTexel = getW(r, ${v+1}, d1, q);
              dotProd += xC${v+1} * vec4(wTexel.xz, wTexel.xz);
            `))}h+=`
    }
  `,h+=`
      }
    `;let p="",y="";r&&(s?p=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?p=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:p=`vec4 activation(vec4 x) {
          ${r}
        }`,y="result = activation(result);");const b=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${p}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${o};
        int q = d2 - d1 * ${o};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${h}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${b}
        ${y}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E0e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dilations:u,dimRoundingMode:l}=r;let c=u;c==null&&(c=[1,1]),R(Xr(o,c),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const d=xs(s.shape,i.shape,o,c,a,l,!0);let f;X().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?f=new U6(d):f=new V6(d);const h=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(f,[s,i],"float32",h)}const C0e={kernelName:iR,backendName:"webgl",kernelFunc:E0e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class N0e{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,s=e.padInfo.top,i=e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${o} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${s};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class _0e{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,i=e.strideWidth,o=n-1-e.padInfo.top,a=r-1-e.padInfo.left,u=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${u}; dm++) {
              int d2 = d1 * ${u} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T0e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:o,dilations:a,pad:u,dimRoundingMode:l,filterShape:c}=r,d=xs(s.shape,c,o,a,u,l,!0),f=new N0e(d);return n.runWebGLProgram(f,[s,i],"float32")}const I0e={kernelName:oR,backendName:"webgl",kernelFunc:T0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k0e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{strides:o,dilations:a,pad:u,dimRoundingMode:l,inputShape:c}=r,d=xs(c,i.shape,o,a,u,l,!0),f=new _0e(d);return n.runWebGLProgram(f,[s,i],"float32")}const R0e={kernelName:aR,backendName:"webgl",kernelFunc:k0e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class O0e{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P0e(t){const{inputs:e,backend:n}=t,{x:r}=e,s=[...r.shape,...r.shape],i=de(r.shape),o=me({inputs:{x:r},backend:n,attrs:{shape:[i]}}),a=new O0e(i),u=n.runWebGLProgram(a,[o],o.dtype),l=me({inputs:{x:u},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),l}const D0e={kernelName:uR,backendName:"webgl",kernelFunc:P0e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class L0e{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:n,inWidth:r,padInfo:s,strideHeight:i,strideWidth:o,filterHeight:a,filterWidth:u,dilationHeight:l,dilationWidth:c}=e,{top:d,left:f}=s;this.userCode=`
      const ivec2 strides = ivec2(${i}, ${o});
      const ivec2 pads = ivec2(${d}, ${f});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${a}; h++) {
          int hIn = hBeg + h * ${l};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${u}; w++) {
              int wIn = wBeg + w * ${c};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F0e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dilations:u}=r,l=YP(s.shape,i.shape,o,a,"NHWC",u);let c;const d=new L0e(l);c=n.runWebGLProgram(d,[s,i],"float32");const f=me({inputs:{x:c},backend:n,attrs:{shape:l.outShape}});return n.disposeIntermediateTensorInfo(c),f}const $0e={kernelName:lR,backendName:"webgl",kernelFunc:F0e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B0e(t){const{inputs:e,backend:n,attrs:r}=t,{equation:s}=r,i=e,{allDims:o,summedDims:a,idDims:u}=vD(s,i.length);xD(o.length,u,i);const{path:l,steps:c}=SD(a,u),d=c.length;let f=null,h=o.length;const p=[];for(let y=0;y<d;++y){for(const b of c[y]){const{permutationIndices:g,expandDims:v}=wD(h,u[b]);let w;AD(g)?w=i[b]:(w=dr({inputs:{x:i[b]},backend:n,attrs:{perm:g}}),p.push(w));const x=w.shape.slice();for(let N=0;N<v.length;++N)x.splice(v[N],0,1);Gt(w.shape,x)||(w=me({inputs:{x:w},backend:n,attrs:{shape:x}}),p.push(w)),f===null?f=w:(f=mS({inputs:{a:w,b:f},backend:n}),p.push(f))}y<d-1&&(l[y]>=0&&(f=y1({inputs:{x:f},backend:n,attrs:{axis:l[y]-(o.length-h),keepDims:!1}}),p.push(f)),h--)}for(const y of p)y!==f&&n.disposeIntermediateTensorInfo(y);return f}const M0e={kernelName:dR,backendName:"webgl",kernelFunc:B0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V0e="return (x >= 0.0) ? x : (exp(x) - 1.0);",U0e=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,z0e=st({opSnippet:V0e,packedOpSnippet:U0e}),j0e={kernelName:fR,backendName:"webgl",kernelFunc:z0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W0e="return (b >= 0.0) ? a : a * (b + 1.0);",q0e=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,G0e=t=>{const{inputs:e,backend:n}=t,{dy:r,y:s}=e,i=X().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new $d(q0e,r.shape,s.shape):new Sl(W0e,r.shape,s.shape);return n.runWebGLProgram(i,[r,s],r.dtype)},H0e={kernelName:Gz,backendName:"webgl",kernelFunc:G0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K0e=`
  return vec4(equal(a, b));
`,X0e="return float(a == b);",Y0e=Bn({opSnippet:X0e,packedOpSnippet:K0e,dtype:"bool",cpuKernelImpl:Tfe}),Q0e={kernelName:pR,backendName:"webgl",kernelFunc:Y0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z0e=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${hD};
  float a1 = ${pD};
  float a2 = ${mD};
  float a3 = ${gD};
  float a4 = ${yD};
  float a5 = ${bD};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,J0e=st({opSnippet:Z0e}),ege={kernelName:hR,backendName:"webgl",kernelFunc:J0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tge=Bd+`
  return exp(x);
`,nge=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,z6=st({opSnippet:tge,packedOpSnippet:nge,cpuKernelImpl:Ife,dtype:"float32"}),rge={kernelName:mR,backendName:"webgl",kernelFunc:z6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tw(t){const{inputs:e,attrs:n,backend:r}=t,{dim:s}=n,{input:i}=e,o=i.shape.length,a=i.shape.slice();let u=s;return s<0&&(R(-(o+1)<=s,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),u=o+s+1),a.splice(u,0,1),me({inputs:{x:i},backend:r,attrs:{shape:a}})}const sge={kernelName:gR,backendName:"webgl",kernelFunc:Tw};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nT="return exp(x) - 1.0;",ige=st({opSnippet:nT,packedOpSnippet:nT,cpuKernelImpl:kfe}),oge={kernelName:yR,backendName:"webgl",kernelFunc:ige};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rT{constructor(e,n,r){this.variableNames=["real","imag"];const s=n[1];this.outputShape=n;const i=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,o=r?`${s}.0`:"1.0";let a;if(e==="real")a="return real * expR - imag * expI;";else if(e==="imag")a="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${i};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${a}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${s});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${s}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${o};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j6(t,e,n){const r=n.texData.get(t.dataId),s=de(t.shape),i=t.shape[t.shape.length-1],o=s/i,a=me({inputs:{x:t},backend:n,attrs:{shape:[o,i]}}),u=a.shape,l=new rT("real",u,e),c=new rT("imag",u,e),d=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:u},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:u}],f=n.runWebGLProgram(l,d,"float32"),h=n.runWebGLProgram(c,d,"float32"),p=iu({inputs:{real:f,imag:h},backend:n});n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h);const y=me({inputs:{x:p},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(p),y}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function age(t){const{inputs:e,backend:n}=t,{input:r}=e;return j6(r,!1,n)}const uge={kernelName:bR,backendName:"webgl",kernelFunc:age};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lge{constructor(e,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rp(t){const{backend:e,attrs:n}=t,{shape:r,value:s}=n;let{dtype:i}=n;if(i=i||jh(s),i==="string"){const o=Sn(i,de(r));return o.fill(s),e.makeTensorInfo(r,i,o)}else{const o=new lge(r,s),a=[[s]];return e.runWebGLProgram(o,[],i,a)}}const cge={kernelName:vR,backendName:"webgl",kernelFunc:rp};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dge{constructor(e){this.variableNames=["Image"],this.outputShape=[];const n=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fge={kernelName:wR,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,r=e,s=new dge(n.shape);return r.runWebGLProgram(s,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sT="return floor(x);",hge=st({opSnippet:sT,packedOpSnippet:sT,cpuKernelImpl:Rfe}),pge={kernelName:xR,backendName:"webgl",kernelFunc:hge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mge=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,gge=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,yge=Bn({opSnippet:mge,packedOpSnippet:gge,dtype:"int32"}),bge={kernelName:SR,backendName:"webgl",kernelFunc:yge};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vge{constructor(e){this.variableNames=["A"];const n=hr(),[r,s]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${s}.0, ${r}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wge{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=hr(),[r,s]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${s}.0, ${r}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xge={kernelName:Av,backendName:"webgl",kernelFunc:Sge};let cc,pb=X().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function Sge(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:s}=e;const{numChannels:i}=r,o=typeof HTMLVideoElement<"u"&&s instanceof HTMLVideoElement,a=typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement,[u,l]=o?[s.videoWidth,s.videoHeight]:[s.width,s.height],c=[l,u],d=[l,u,i];if(a||o){const y=X().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(cc==null||y!==pb)&&(pb=y,cc=document.createElement("canvas").getContext("2d",{willReadFrequently:pb})),cc.canvas.width=u,cc.canvas.height=l,cc.drawImage(s,0,0,u,l),s=cc.canvas}const f=n.makeTensorInfo(c,"int32");n.texData.get(f.dataId).usage=ls.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(f.dataId),s);const h=X().getBool("WEBGL_PACK")?new wge(d):new vge(d),p=n.runWebGLProgram(h,[f],"int32");return n.disposeData(f.dataId),p}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Age(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i,bias:o,preluActivationWeights:a}=e,{strides:u,pad:l,dataFormat:c,dilations:d,dimRoundingMode:f,activation:h,leakyreluAlpha:p}=r,y=xd(c),b=xs(s.shape,i.shape,u,d,l,f,!1,y);let g;const v=[],w=o!=null,x=a!=null,N=h==="leakyrelu",k=()=>{const _=[s,i],$=(M,K)=>{if(K==="NCHW"&&M.shape.length===1&&M.shape[0]!==1){const Z=me({inputs:{x:M},backend:n,attrs:{shape:[M.shape[0],1,1]}});return v.push(Z),Z}return M};if(w&&_.push($(o,c)),x&&_.push($(a,c)),N){const M=n.makeTensorInfo([],"float32",wd(p,"float32"));_.push(M),v.push(M)}return _};if(b.filterHeight===1&&b.filterWidth===1&&b.dilationHeight===1&&b.dilationWidth===1&&b.strideHeight===1&&b.strideWidth===1&&(b.padInfo.type==="SAME"||b.padInfo.type==="VALID"))g=$6({x:s,filter:i,convInfo:b,backend:n,bias:o,activation:h,preluActivationWeights:a,leakyreluAlpha:p});else if(b.strideWidth<=2&&y==="channelsLast"&&X().getBool("WEBGL_EXP_CONV")){const _=h?Rh(h,!0):null,$=new F6(b,w,_,x,N),M=[[b.padInfo.top,b.padInfo.left],[b.strideHeight,b.strideWidth],[b.dilationHeight,b.dilationWidth],[b.inHeight,b.inWidth]],K=k();g=n.runWebGLProgram($,K,"float32",M)}else if(X().getBool("WEBGL_CONV_IM2COL"))g=B6({x:s,filter:i,convInfo:b,backend:n,bias:o,activation:h,preluActivationWeights:a,leakyreluAlpha:p});else{const _=h?Rh(h,!1):null,$=new L6(b,w,_,x,N),M=k();g=n.runWebGLProgram($,M,"float32")}const O=me({inputs:{x:g},backend:n,attrs:{shape:b.outShape}});return v.push(g),v.forEach(_=>n.disposeIntermediateTensorInfo(_)),O}const Ege={kernelName:Cv,backendName:"webgl",kernelFunc:Age};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cge(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i,bias:o,preluActivationWeights:a}=e,{strides:u,pad:l,dilations:c,dimRoundingMode:d,activation:f,leakyreluAlpha:h}=r,p=[];let y=c;y==null&&(y=[1,1]),R(Xr(u,y),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${u} and dilations '${y}'`);const b=xs(s.shape,i.shape,u,y,l,d,!0),g=X().getBool("WEBGL_PACK_DEPTHWISECONV")&&b.strideWidth<=2&&b.outChannels/b.inChannels===1,v=f?Rh(f,g):null,w=[s,i],x=o!=null,N=a!=null,k=f==="leakyrelu";if(x&&w.push(o),N&&w.push(a),k){const M=n.makeTensorInfo([],"float32",wd(h,"float32"));w.push(M),p.push(M)}let O;g?O=new U6(b,x,v,N,k):O=new V6(b,x,v,N,k);const _=[[b.padInfo.top,b.padInfo.left],[b.strideHeight,b.strideWidth],[b.dilationHeight,b.dilationWidth],[b.inHeight,b.inWidth]],$=n.runWebGLProgram(O,w,"float32",_);return p.forEach(M=>n.disposeIntermediateTensorInfo(M)),$}const Nge={kernelName:Nv,backendName:"webgl",kernelFunc:Cge};class _ge{constructor(e,n,r,s){this.sliceDim=e,this.strides=n,this.paramsShape=s,this.variableNames=["x","indices"],this.outputShape=r;const i=wt(r.length);let o=`
    int index;`;for(let a=0;a<this.sliceDim;a++)o+=`
          index = round(getIndices(coords[0], ${a}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[a]};
          flattenIndex += index * ${this.strides[a]};`;this.userCode=`
         void main() {
          ${i} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${o}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tge(t){const{inputs:e,backend:n}=t,{params:r,indices:s}=e,i=s.shape,o=i[i.length-1],a=de(r.shape),[u,l,c,d]=W4(r,s),f=me({inputs:{x:s},backend:n,attrs:{shape:[l,o]}}),h=me({inputs:{x:r},backend:n,attrs:{shape:[de(r.shape)/c,c]}});if(n.shouldExecuteOnCPU([r,s])||r.dtype==="string"){const g=n.readSync(s.dataId),v=n.bufferSync(r),w=Ofe(g,v,r.dtype,l,o,c,d,r.shape,a);return n.makeTensorInfo(u,r.dtype,w.values)}const p=new _ge(o,d,[l,c],r.shape),y=n.runWebGLProgram(p,[h,f],h.dtype),b=me({inputs:{x:y},backend:n,attrs:{shape:u}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(y),b}const Ige={kernelName:CR,backendName:"webgl",kernelFunc:Tge};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kge{constructor(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const r=wt(this.rank),s=Rge(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${s}));
      }
    `}}function Rge(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let s=0;s<t.length;s++)s===2?r.push("index"):r.push(`${n[s]}`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W6(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,indices:i}=e,{axis:o,batchDims:a}=r,u=An(o,s.shape)[0];if(X().get("DEBUG")){const v=n.readSync(i.dataId),w=s.shape[u];for(let x=0;x<v.length;++x){const N=v[x];R(N<=w-1&&N>=0,()=>`GatherV2: the index value ${N} is not in [0, ${w-1}]`)}}const l=BD(s,i,u,a),c=de(i.shape),d=[],f=me({inputs:{x:s},backend:n,attrs:{shape:[l.batchSize,l.outerSize,l.dimSize,l.sliceSize]}}),h=me({inputs:{x:i},backend:n,attrs:{shape:[l.batchSize,c/l.batchSize]}});d.push(f),d.push(h);const p=[l.batchSize,l.outerSize,c/l.batchSize,l.sliceSize];if(n.shouldExecuteOnCPU([s,i])||s.dtype==="string"){const v=n.bufferSync(h),w=n.bufferSync(f),x=Pfe(w,v,p);return d.forEach(N=>n.disposeIntermediateTensorInfo(N)),n.makeTensorInfo(l.outputShape,x.dtype,x.values)}const y=new kge(f.shape,p),b=n.runWebGLProgram(y,[f,h],f.dtype);d.push(b);const g=me({inputs:{x:b},backend:n,attrs:{shape:l.outputShape}});return d.forEach(v=>n.disposeIntermediateTensorInfo(v)),g}const Oge={kernelName:ER,backendName:"webgl",kernelFunc:W6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pge="return float(a > b);",Dge=`
  return vec4(greaterThan(a, b));
`,Lge=Bn({opSnippet:Pge,packedOpSnippet:Dge,cpuKernelImpl:Dfe,dtype:"bool"}),Fge={kernelName:NR,backendName:"webgl",kernelFunc:Lge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $ge="return float(a >= b);",Bge=`
  return vec4(greaterThanEqual(a, b));
`,Mge=Bn({opSnippet:$ge,packedOpSnippet:Bge,dtype:"bool",cpuKernelImpl:Lfe}),Vge={kernelName:_R,backendName:"webgl",kernelFunc:Mge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uge(t){const{inputs:e,backend:n}=t,{input:r}=e;return j6(r,!0,n)}const zge={kernelName:TR,backendName:"webgl",kernelFunc:Uge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jge="return float(!isnan(x) && !isinf(x));",Wge=st({opSnippet:jge,dtype:"bool"}),qge={kernelName:kR,backendName:"webgl",kernelFunc:Wge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gge="return float(isinf(x));",Hge=st({opSnippet:Gge,dtype:"bool"}),Kge={kernelName:RR,backendName:"webgl",kernelFunc:Hge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xge="return float(isnan(x));",Yge=st({opSnippet:Xge,dtype:"bool"}),Qge={kernelName:OR,backendName:"webgl",kernelFunc:Yge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zge="return float(a < b);",Jge=`
  return vec4(lessThan(a, b));
`,e1e=Bn({opSnippet:Zge,packedOpSnippet:Jge,cpuKernelImpl:Ffe,dtype:"bool"}),t1e={kernelName:DR,backendName:"webgl",kernelFunc:e1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n1e="return float(a <= b);",r1e=`
  return vec4(lessThanEqual(a, b));
`,s1e=Bn({opSnippet:n1e,packedOpSnippet:r1e,cpuKernelImpl:$fe,dtype:"bool"}),i1e={kernelName:LR,backendName:"webgl",kernelFunc:s1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o1e(t){const{backend:e,attrs:n}=t,{start:r,stop:s,num:i}=n,o=Bfe(r,s,i);return e.makeTensorInfo([o.length],"float32",o)}const a1e={kernelName:FR,backendName:"webgl",kernelFunc:o1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u1e=Bd+`
  return x < 0.0 ? 0./0. : log(x);
`,l1e=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,c1e=st({opSnippet:u1e,packedOpSnippet:l1e,cpuKernelImpl:Mfe}),d1e={kernelName:$R,backendName:"webgl",kernelFunc:c1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f1e=Bd+`
  return log(1.0 + x);
`,h1e=st({opSnippet:f1e}),p1e={kernelName:BR,backendName:"webgl",kernelFunc:h1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m1e="return float(a >= 1.0 && b >= 1.0);",g1e=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,y1e=Bn({opSnippet:m1e,packedOpSnippet:g1e,dtype:"bool"}),b1e={kernelName:MR,backendName:"webgl",kernelFunc:y1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v1e="return float(!(x >= 1.0));",w1e=st({opSnippet:v1e}),x1e={kernelName:VR,backendName:"webgl",kernelFunc:w1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S1e="return float(a >= 1.0 || b >= 1.0);",A1e=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,E1e=Bn({opSnippet:S1e,packedOpSnippet:A1e,dtype:"bool"}),C1e={kernelName:UR,backendName:"webgl",kernelFunc:E1e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class N1e{constructor(e,n,r,s,i){this.variableNames=["x"],this.outputShape=[];const o=n,a=e[3]-1;this.outputShape=e;let u;const l=`float(${r}) + float(${s}) * sum`;i===.5?u=`inversesqrt(${l})`:i===1?u=`1.0/(${l})`:u=`exp(log(${l}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${o}; j <= ${o}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${a}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${u};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _1e{constructor(e,n,r,s,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const o=n,a=e[3]-1;this.outputShape=e;let u;const l=`float(${r}) + float(${s}) * sum`;i===.5?u=`inversesqrt(${l})`:i===1?u=`1.0/(${l})`:u=`exp(log(${l}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${o};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${o}; j <= ${o}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${a}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${u};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T1e=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{depthRadius:i,bias:o,alpha:a,beta:u}=r,l=X().getBool("WEBGL_PACK_NORMALIZATION")?new _1e(s.shape,i,o,a,u):new N1e(s.shape,i,o,a,u);return n.runWebGLProgram(l,[s],s.dtype)},I1e={kernelName:zR,backendName:"webgl",kernelFunc:T1e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class k1e{constructor(e,n,r,s,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=r,this.alpha=s,this.beta=i,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${s}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${s})
                * float(${i})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${i});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R1e=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s,y:i,dy:o}=e,{depthRadius:a,bias:u,alpha:l,beta:c}=r,d=new k1e(s.shape,a,u,l,c);return n.runWebGLProgram(d,[s,i,o],s.dtype)},O1e={kernelName:Hz,backendName:"webgl",kernelFunc:R1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P1e(t,e,n,r){const s=de(e),o=de(t.shape)/s,a=me({inputs:{x:t},attrs:{shape:[o,s]},backend:r}),u=Vl(a,t.dtype,"max",r),l=me({inputs:{x:u},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(u),l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q6(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reductionIndices:i,keepDims:o}=r,a=s.shape.length,u=An(i,s.shape);let l=u;const c=ni(l,a),d=c!=null,f=n.shouldExecuteOnCPU([s]);let h=s;if(d){if(f){const w=n.texData.get(h.dataId).values,x=new Array(a);for(let O=0;O<x.length;O++)x[O]=s.shape[c[O]];const N=hS(w,s.shape,s.dtype,c,x);h=n.makeTensorInfo(x,s.dtype);const k=n.texData.get(h.dataId);k.values=N}else h=g1(s,c,n);l=ri(l.length,a)}Bi("max",l,a);const[p,y]=po(h.shape,l);let b=p;o&&(b=Ss(p,u));let g;if(f){const w=n.texData.get(h.dataId).values,x=Vfe(w,de(y),b,s.dtype);g=n.makeTensorInfo(b,s.dtype);const N=n.texData.get(g.dataId);N.values=x}else g=P1e(h,y,b,n);return d&&n.disposeIntermediateTensorInfo(h),g}const D1e={kernelName:jR,backendName:"webgl",kernelFunc:q6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L1e=pS+`
  return max(a, b);
`,F1e=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Ml+`
  return result;
`,$1e=Bn({opSnippet:L1e,packedOpSnippet:F1e,cpuKernelImpl:Ufe}),B1e={kernelName:WR,backendName:"webgl",kernelFunc:$1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;ep(s,"maxPool");const{filterSize:i,strides:o,pad:a,dimRoundingMode:u}=r,l=1;R(Xr(o,l),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${l}'`);const c=Tl(s.shape,i,o,l,a,u);if(c.filterWidth===1&&c.filterHeight===1&&Gt(c.inShape,c.outShape))return Hr({inputs:{x:s},backend:n});const d=new Oh(c,"max",!1);return n.runWebGLProgram(d,[s],s.dtype)}const V1e={kernelName:qR,backendName:"webgl",kernelFunc:M1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:i,strides:o,pad:a,dataFormat:u,dimRoundingMode:l}=r,c=[1,1,1],d=qh(s.shape,i,o,c,a,l,u),f=new gS(d,"max",!1);return n.runWebGLProgram(f,[s],s.dtype)}const z1e={kernelName:GR,backendName:"webgl",kernelFunc:U1e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class j1e{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideHeight,r=e.strideWidth,s=e.dilationHeight,i=e.effectiveFilterHeight,o=e.effectiveFilterWidth,a=i-1-e.padInfo.top,u=o-1-e.padInfo.left,l=i*o-1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${u});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${i};
          wR += ${s}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${o}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${l} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${o} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class W1e{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideDepth,r=e.strideHeight,s=e.strideWidth,i=e.dilationDepth,o=e.dilationHeight,a=e.dilationWidth,u=e.effectiveFilterDepth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,d=u-1-e.padInfo.front,f=l-1-e.padInfo.top,h=c-1-e.padInfo.left,p=u*l*c-1;this.userCode=`
      const ivec3 pads = ivec3(${d}, ${f}, ${h});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${u};
           wD += ${i}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${l};
              wR += ${o}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${c};
                wC += ${a}) {
              float dyC = float(dyCCorner + wC) / ${s}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${p} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${l} * ${c} +
                  wR * ${c} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q1e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,o=i,{filterSize:a,strides:u,pad:l,dimRoundingMode:c}=r,d=[1,1,1],f=qh(o.shape,a,u,d,l,c),h=new gS(f,"max",!0),p=n.runWebGLProgram(h,[o],o.dtype),y=new W1e(f),b=n.runWebGLProgram(y,[s,p],o.dtype);return n.disposeIntermediateTensorInfo(p),b}const G1e={kernelName:Xz,backendName:"webgl",kernelFunc:q1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H1e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i,output:o}=e,a=i;ep([i,o],"maxPoolGrad");const{filterSize:u,strides:l,pad:c,dimRoundingMode:d}=r,f=Tl(a.shape,u,l,1,c,d),h=!0,p=new Oh(f,"max",h),y=n.runWebGLProgram(p,[a],a.dtype),b=new j1e(f),g=n.runWebGLProgram(b,[s,y],a.dtype);return n.disposeIntermediateTensorInfo(y),g}const K1e={kernelName:Kz,backendName:"webgl",kernelFunc:H1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X1e(t,e,n,r){let s=new Oh(n,"max",!1);const i=r.runWebGLProgram(s,[t],"float32");s=new Oh(n,"max",!0,!0,e);const o=r.runWebGLProgram(s,[t],"float32");return[i,o]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y1e={kernelName:HR,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:s,strides:i,pad:o,includeBatchInIndex:a}=e,u=n;R(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const l=[1,1];R(Xr(i,l),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${l}'`);const c=Tl(r.shape,s,i,l,o),[d,f]=X1e(r,a,c,u);return[d,f]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q1e(t,e,n,r){const s=de(e),o=de(t.shape)/s,a=me({inputs:{x:t},attrs:{shape:[o,s]},backend:r}),u=Vl(a,"float32","mean",r),l=me({inputs:{x:u},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(u),l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z1e={kernelName:KR,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{keepDims:s,axis:i}=e,o=n,a=r.shape.length,u=An(i,r.shape);let l=u;const c=ni(l,a),d=c!=null,f=o.shouldExecuteOnCPU([r]),h=[];let p=r;if(d){if(f){const x=o.texData.get(p.dataId).values,N=new Array(a);for(let _=0;_<N.length;_++)N[_]=r.shape[c[_]];const k=hS(x,r.shape,r.dtype,c,N);p=o.makeTensorInfo(N,r.dtype);const O=o.texData.get(p.dataId);O.values=k}else p=g1(r,c,o);h.push(p),l=ri(l.length,a)}Bi("sum",l,a);const[y,b]=po(p.shape,l);let g=y;s&&(g=Ss(y,u));const v=Q1e(p,b,g,o);for(const w of h)o.disposeIntermediateTensorInfo(w);return v}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r,a=s.shape.length,u=An(i,s.shape);let l=u;const c=ni(l,a);let d=s;c!=null&&(d=dr({inputs:{x:s},backend:n,attrs:{perm:c}}),l=ri(l.length,s.shape.length)),Bi("min",l,a);const[f,h]=po(d.shape,l),p=de(h),y=me({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),b=Vl(y,y.dtype,"min",n);let g;if(o){const v=Ss(f,u);g=me({inputs:{x:b},backend:n,attrs:{shape:v}})}else g=me({inputs:{x:b},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),c!=null&&n.disposeIntermediateTensorInfo(d),g}const eye={kernelName:XR,backendName:"webgl",kernelFunc:J1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tye=pS+`
  return min(a, b);
`,nye=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Ml+`
  return result;
`,rye=Bn({opSnippet:tye,packedOpSnippet:nye,cpuKernelImpl:zfe}),sye={kernelName:YR,backendName:"webgl",kernelFunc:rye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iye{constructor(e,n,r){this.variableNames=["x"],this.outputShape=n.map((c,d)=>c[0]+e[d]+c[1]);const s=e.length,i=wt(s),o=n.map(c=>c[0]).join(","),a=n.map((c,d)=>c[0]+e[d]).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s),l=r==="reflect"?0:1;if(s===1){this.userCode=`
        int start = ${o};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${l};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${l};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${o});
      ${i} end = ${i}(${a});

      void main() {
        ${i} outC = getOutputCoords();
        for (int i = 0; i < ${s}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${l};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${l};
          }
        }
        ${i} coords = outC - start;
        setOutput(getX(${u}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oye{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((p,y)=>p[0]+e[y]+p[1]);const s=e.length,i=wt(s),o=n.map(p=>p[0]).join(","),a=n.map((p,y)=>p[0]+e[y]).join(","),u=lr("rc",s),l=lr("source",s),c=`${u[s-1]} < ${this.outputShape[s-1]}`,d=s===1?"source":`vec2(${l.slice(-2).join()})`,f=r==="reflect"?0:1;let h="";if(s===1){const p=`
        ${i} source = rc;
        if (source < start) {
          source = start * 2 - source - ${f};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${f};
        }
        source -= start;
      `;h=`
        ${i} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${l.join()}), ${d});
        ${u[s-1]} += 1;
        if(${c}) {
          ${p}
          result[1] = getChannel(getX(${l.join()}), ${d});
        }
      `}else{const p=`
        ${i} source = rc;
        ${i} lt = ${i}(lessThan(source, start));
        ${i} gte = ${i}(greaterThanEqual(source, end));
        ${i} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${f}) +
                gte * ((end - 1) * 2 - source + ${f});
        source -= start;
      `;h=`
        ${i} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${l.join()}), ${d});
        ${u[s-1]} += 1;
        if(${c}) {
          ${p}
          result[1] = getChannel(getX(${l.join()}), ${d});
        }
        rc = outputLoc;
        ${u[s-2]} += 1;
        if(${u[s-2]} < ${this.outputShape[s-2]}) {
          ${p}
          result[2] = getChannel(getX(${l.join()}), ${d});
          ${u[s-1]} += 1;
          if(${c}) {
            ${p}
            result[3] = getChannel(getX(${l.join()}), ${d});
          }
        }
      `}this.userCode=`
      const ${i} start = ${i}(${o});
      const ${i} end = ${i}(${a});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${h}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aye=({inputs:t,backend:e,attrs:n})=>{const{x:r}=t,{paddings:s,mode:i}=n,o=X().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new oye(r.shape,s,i):new iye(r.shape,s,i);return e.runWebGLProgram(o,[r],r.dtype)},uye={kernelName:QR,backendName:"webgl",kernelFunc:aye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lye=`if (b == 0.0) return NAN;
  return mod(a, b);`,cye=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+Ml+`
  return result;
`,dye=Bn({opSnippet:lye,packedOpSnippet:cye}),fye={kernelName:ZR,backendName:"webgl",kernelFunc:dye};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hye{constructor(e,n,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pye=`
if (a == b) {
  return 1.0;
};
return a / b;`,mye=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,G6=Bn({opSnippet:pye,packedOpSnippet:mye,checkOutOfBounds:!0}),gye={kernelName:cR,backendName:"webgl",kernelFunc:G6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iT="return a - b;",H6=Bn({opSnippet:iT,packedOpSnippet:iT,supportsComplex:!0,cpuKernelImpl:lhe}),yye={kernelName:eP,backendName:"webgl",kernelFunc:H6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K6(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{dim:i}=r,o=An([i],s.shape),a=q6({inputs:{x:s},backend:n,attrs:{reductionIndices:o,keepDims:!1}}),u=Ss(a.shape,o),l=me({inputs:{x:a},backend:n,attrs:{shape:u}}),c=H6({inputs:{a:s,b:l},backend:n}),d=z6({inputs:{x:c},backend:n}),f=y1({inputs:{x:d},backend:n,attrs:{axis:o,keepDims:!1}}),h=me({inputs:{x:f},backend:n,attrs:{shape:u}}),p=G6({inputs:{a:d,b:h},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),p}const bye={kernelName:zO,backendName:"webgl",kernelFunc:K6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vye(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{numSamples:i,seed:o,normalized:a}=r,u=a?s:K6({inputs:{logits:s},backend:n,attrs:{dim:s.shape.length-1}}),l=u.shape[0],c=u.shape[1],d=new hye(l,c,i),f=[[o]],h=n.runWebGLProgram(d,[u],"int32",f);return a||n.disposeIntermediateTensorInfo(u),h}const wye={kernelName:JR,backendName:"webgl",kernelFunc:vye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xye=ii+`
  return -x;
`,Sye=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function Aye(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])){const i=n.texData.get(r.dataId),[o,a]=Wfe(i.values,r.shape,r.dtype);return n.makeTensorInfo(a,r.dtype,o)}let s;return X().getBool("WEBGL_PACK_UNARY_OPERATIONS")?s=new Ia(r.shape,Sye):s=new io(r.shape,xye),n.runWebGLProgram(s,[r],r.dtype)}const Eye={kernelName:tO,backendName:"webgl",kernelFunc:Aye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cye=D4;function Nye(t){Ti("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:u}=r,l=n.readSync(s.dataId),c=n.readSync(i.dataId),{selectedIndices:d}=Cye(l,c,o,a,u);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const _ye={kernelName:rO,backendName:"webgl",kernelFunc:Nye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tye=L4;function Iye(t){Ti("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:u,padToMaxOutputSize:l}=r,c=n.readSync(s.dataId),d=n.readSync(i.dataId),{selectedIndices:f,validOutputs:h}=Tye(c,d,o,a,u,l);return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}const kye={kernelName:sO,backendName:"webgl",kernelFunc:Iye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rye=F4;function Oye(t){Ti("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:u,softNmsSigma:l}=r,c=n.readSync(s.dataId),d=n.readSync(i.dataId),f=o,h=a,p=u,y=l,{selectedIndices:b,selectedScores:g}=Rye(c,d,f,h,p,y);return[n.makeTensorInfo([b.length],"int32",new Int32Array(b)),n.makeTensorInfo([g.length],"float32",new Float32Array(g))]}const Pye={kernelName:iO,backendName:"webgl",kernelFunc:Oye};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Dye{constructor(e,n,r,s){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${s}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lye=t=>{const{inputs:e,backend:n,attrs:r}=t,{indices:s}=e,{dtype:i,depth:o,onValue:a,offValue:u}=r,l=de(s.shape),c=new Dye(l,o,a,u),d=me({inputs:{x:s},backend:n,attrs:{shape:[l]}}),f=n.runWebGLProgram(c,[d],i);n.disposeIntermediateTensorInfo(d);const h=[...s.shape,o],p=me({inputs:{x:f},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(f),p},Fye={kernelName:aO,backendName:"webgl",kernelFunc:Lye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function og(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="complex64"){const s=np({inputs:{input:r},backend:n}),i=og({inputs:{x:s},backend:n}),o=b1({inputs:{input:r},backend:n}),a=og({inputs:{x:o},backend:n}),u=iu({inputs:{real:i,imag:a},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),u}else return rp({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}const $ye={kernelName:uP,backendName:"webgl",kernelFunc:og};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X6(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const s=np({inputs:{input:r},backend:n}),i=X6({inputs:{x:s},backend:n}),o=b1({inputs:{input:r},backend:n}),a=og({inputs:{x:o},backend:n}),u=iu({inputs:{real:i,imag:a},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),u}else return rp({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const Bye={kernelName:oO,backendName:"webgl",kernelFunc:X6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mye(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r;if(e.length===1)return Tw({inputs:{input:e[0]},backend:n,attrs:{dim:s}});const i=e[0].shape,o=e[0].dtype;e.forEach(c=>{vs(i,c.shape,"All tensors passed to stack must have matching shapes"),R(o===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],u=e.map(c=>{const d=Tw({inputs:{input:c},backend:n,attrs:{dim:s}});return a.push(d),d}),l=D6({inputs:u,backend:n,attrs:{axis:s}});return a.forEach(c=>n.disposeIntermediateTensorInfo(c)),l}const Vye={kernelName:uO,backendName:"webgl",kernelFunc:Mye};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Uye{constructor(e,n,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((l,c)=>l[0]+e[c]+l[1]);const s=e.length,i=wt(s),o=n.map(l=>l[0]).join(","),a=n.map((l,c)=>l[0]+e[c]).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s);if(s===1){this.userCode=`
        int start = ${o};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${o});
      ${i} end = ${i}(${a});

      void main() {
        ${i} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${i} coords = outC - start;
          setOutput(getX(${u}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zye{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((y,b)=>y[0]+e[b]+y[1]);const s=e.length,i=wt(s),o=n.map(y=>y[0]).join(","),a=n.map((y,b)=>y[0]+e[b]).join(","),u=lr("rc",s),l=lr("source",s),c=`${u[s-1]} < ${this.outputShape[s-1]}`,d=s===1?"source":`vec2(${l.slice(-2).join()})`,f=[`${i} rc = outputLoc;`,`${u[s-1]} += 1;
       if(${c}) {
      `,s===1?"":`}
       rc = outputLoc;
       ${u[s-2]} += 1;
       if(${u[s-2]} < ${this.outputShape[s-2]}) {`,s===1?"":`  ${u[s-1]} += 1;
         if(${c}) {`],h=s===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let p="";for(let y=0,b=s===1?2:4;y<b;y++)p+=`
        ${f[y]}
        if (${h}) {
          result[${y}] = float(value);
        } else {
          ${i} source = rc - start;
          result[${y}] = getChannel(getX(${l.join()}), ${d});
        }
      `;p+=s===1?"} ":"}}",this.userCode=`
      const ${i} start = ${i}(${o});
      const ${i} end = ${i}(${a});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${p}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y6=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{paddings:i,constantValue:o}=r;if(de(s.shape)===0){const l=i.map((c,d)=>c[0]+s.shape[d]+c[1]);return rp({backend:n,attrs:{shape:l,value:o,dtype:s.dtype}})}const a=X().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new zye(s.shape,i,o):new Uye(s.shape,i,o),u=[[o]];return n.runWebGLProgram(a,[s],s.dtype,u)},jye={kernelName:lO,backendName:"webgl",kernelFunc:Y6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wye=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,qye=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+Ml+`
  return result;
`,Gye=Bn({opSnippet:Wye,packedOpSnippet:qye}),Hye={kernelName:cO,backendName:"webgl",kernelFunc:Gye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kye(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r,a=s.shape.length,u=[],l=An(i,s.shape);let c=l;const d=ni(c,a);let f=s;d!=null&&(f=dr({inputs:{x:s},backend:n,attrs:{perm:d}}),c=ri(c.length,a),u.push(f)),Bi("prod",c,a);let h;if(n.shouldExecuteOnCPU([f])){const p=n.texData.get(f.dataId).values,{outVals:y,outShape:b,outDtype:g}=Gfe(f.shape,f.dtype,p,c);h=n.makeTensorInfo(b,g,y)}else{const[p,y]=po(f.shape,c),b=de(y),g=me({inputs:{x:f},backend:n,attrs:{shape:[-1,b]}}),v=Kx(s.dtype),w=Vl(g,v,"prod",n);h=me({inputs:{x:w},backend:n,attrs:{shape:p}}),u.push(g),u.push(w)}if(o){u.push(h);const p=Ss(h.shape,l);h=me({inputs:{x:h},backend:n,attrs:{shape:p}})}return u.forEach(p=>n.disposeIntermediateTensorInfo(p)),h}const Xye={kernelName:fO,backendName:"webgl",kernelFunc:Kye};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yye(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:s,paramsDenseValues:i,indices:o}=e,{outputRaggedRank:a}=r,u=s.map(g=>n.readSync(g.dataId)),l=s.map(g=>g.shape),c=n.readSync(i.dataId),d=n.readSync(o.dataId),[f,h,p]=Hfe(u,l,c,i.shape,i.dtype,d,o.shape,a),y=f.map(g=>n.makeTensorInfo([g.length],"int32",g)),b=n.makeTensorInfo(p,i.dtype,h);return y.concat([b])}const Qye={kernelName:hO,backendName:"webgl",kernelFunc:Yye};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zye(t){const{inputs:e,backend:n}=t,{starts:r,limits:s,deltas:i}=e,o=n.readSync(r.dataId),a=n.readSync(s.dataId),u=n.readSync(i.dataId),[l,c]=Kfe(o,r.shape,r.dtype,a,s.shape,u,i.shape),d=n.makeTensorInfo([l.length],"int32",l),f=n.makeTensorInfo([c.length],r.dtype,c);return[d,f]}const Jye={kernelName:pO,backendName:"webgl",kernelFunc:Zye};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ebe(t){const{inputs:e,backend:n,attrs:r}=t,{shape:s,values:i,defaultValue:o,rowPartitionTensors:a}=e,{rowPartitionTypes:u}=r,l=n.readSync(s.dataId),c=n.readSync(i.dataId),d=n.readSync(o.dataId),f=a.map(b=>n.readSync(b.dataId)),h=a.map(b=>b.shape),[p,y]=Xfe(l,s.shape,c,i.shape,i.dtype,d,o.shape,f,h,u);return n.makeTensorInfo(p,i.dtype,y)}const tbe={kernelName:mO,backendName:"webgl",kernelFunc:ebe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q6=t=>{const{backend:e,attrs:n}=t,{start:r,stop:s,step:i,dtype:o}=n,a=Yfe(r,s,i,o);return e.makeTensorInfo([a.length],o,a)},nbe={kernelName:gO,backendName:"webgl",kernelFunc:Q6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rbe="return 1.0 / x;",sbe=st({opSnippet:rbe}),ibe={kernelName:bO,backendName:"webgl",kernelFunc:sbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const obe=ii+`
  return (x < 0.0) ? 0.0 : x;
`,abe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,ube=st({opSnippet:obe,packedOpSnippet:abe}),lbe={kernelName:vO,backendName:"webgl",kernelFunc:ube};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cbe=ii+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,dbe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,fbe=st({opSnippet:cbe,packedOpSnippet:dbe}),hbe={kernelName:AO,backendName:"webgl",kernelFunc:fbe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pbe{constructor(e,n,r,s,i){this.variableNames=["A"],this.outputShape=[];const[o,a,u,l]=e;this.outputShape=[o,n,r,l];const c=[s&&n>1?a-1:a,s&&r>1?u-1:u],d=[s&&n>1?n-1:n,s&&r>1?r-1:r];let f;i?f="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":f="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/d[0]},
          ${c[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${u}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${f};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mbe{constructor(e,n,r,s,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,a,u,l]=e;this.outputShape=[o,n,r,l];const c=[s&&n>1?a-1:a,s&&r>1?u-1:u],d=[s&&n>1?n-1:n,s&&r>1?r-1:r];let f;i?f="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":f="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/d[0]},
          ${c[1]/d[1]},
          ${c[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${u}.0,
                                     ${u}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${f};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${l-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gbe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:i,halfPixelCenters:o,size:a}=r,[u,l]=a,c=X().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new mbe(s.shape,u,l,i,o):new pbe(s.shape,u,l,i,o);return n.runWebGLProgram(c,[s],"float32")}const ybe={kernelName:SO,backendName:"webgl",kernelFunc:gbe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bbe{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,s,i]=n,[,o,a]=e,u=[r&&o>1?s-1:s,r&&a>1?i-1:i],l=[r&&o>1?o-1:o,r&&a>1?a-1:a],c=u[0]/l[0],d=u[1]/l[1],f=1/c,h=1/d,p=Math.ceil(f)*2+2,y=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${d});

        const float invHeightScale = float(${f});
        const float invWidthScale = float(${h});

        const int winHeight = int(${p});
        const int winWidth = int(${y});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${s-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${i-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vbe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:i}=e,{alignCorners:o}=r,a=new bbe(i.shape,s.shape,o);return n.runWebGLProgram(a,[i],i.dtype)}const wbe={kernelName:Qz,backendName:"webgl",kernelFunc:vbe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xbe{constructor(e,n,r,s,i){this.variableNames=["A"],this.outputShape=[];const[o,a,u,l]=e;this.outputShape=[o,n,r,l];const c=[s&&n>1?a-1:a,s&&r>1?u-1:u],d=[s&&n>1?n-1:n,s&&r>1?r-1:r],f=s?"0.5":"0.0";let h;i?h="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":h="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/d[0]},
          ${c[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${u}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${f})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Sbe{constructor(e,n,r,s,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,a,u,l]=e;this.outputShape=[o,n,r,l];const c=[s&&n>1?a-1:a,s&&r>1?u-1:u],d=[s&&n>1?n-1:n,s&&r>1?r-1:r],f=s?"0.5":"0.0";let h;i?h="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":h="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/d[0]},
          ${c[1]/d[1]},
          ${c[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${u}.0,
                                     ${u}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${f})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${l-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Abe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:i,halfPixelCenters:o,size:a}=r,[u,l]=a,c=X().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Sbe(s.shape,u,l,i,o):new xbe(s.shape,u,l,i,o);return n.runWebGLProgram(c,[s],s.dtype)}const Ebe={kernelName:xO,backendName:"webgl",kernelFunc:Abe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Cbe{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,s,i]=n,[,o,a]=e,u=[r&&o>1?s-1:s,r&&a>1?i-1:i],l=[r&&o>1?o-1:o,r&&a>1?a-1:a],c=u[0]/l[0],d=u[1]/l[1],f=1/c,h=1/d,p=Math.ceil(f)*2+2,y=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${d});

        const float invHeightScale = float(${f});
        const float invWidthScale = float(${h});

        const int winHeight = int(${p});
        const int winWidth = int(${y});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float sourceFracRow =
              float(${u[0]}) *
                (float(dyR) / float(${l[0]}));

            float sourceFracCol =
                float(${u[1]}) *
                  (float(dyC) / float(${l[1]}));

            int sourceNearestRow = int(min(
                float(int(${s}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${i}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nbe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:i}=e,{alignCorners:o}=r,a=new Cbe(i.shape,s.shape,o);return n.runWebGLProgram(a,[i],i.dtype)}const _be={kernelName:Yz,backendName:"webgl",kernelFunc:Nbe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Tbe{constructor(e,n){this.variableNames=["x"];const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const s=a=>n.indexOf(a)!==-1&&e[a]!==1?`${e[a]} - coords[${a}] - 1`:`coords[${a}]`,i=e.map((a,u)=>s(u)).join(","),o=wt(r);this.userCode=`
      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${i}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ibe{constructor(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;const s=lr("rc",r),i=`${s[r-1]} + 1 < ${this.outputShape[r-1]}`,o=`${s[r-2]} + 1 < ${this.outputShape[r-2]}`,a=wt(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${i}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${a} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${u(s.slice())};
          if(${i}){
            result.g = ${l(s.slice())};
          }
          if(${o}) {
            result.b = ${c(s.slice())};
            if(${i}) {
              result.a = ${d(s.slice())};
            }
          }
          setOutput(result);
        }
    `;function u(p){return f(p)}function l(p){return p[r-1]="("+p[r-1]+" + 1)",f(p)}function c(p){return p[r-2]="("+p[r-2]+" + 1)",f(p)}function d(p){return p[r-1]="("+p[r-1]+" + 1)",p[r-2]="("+p[r-2]+" + 1)",f(p)}function f(p){const y=e.map((v,w)=>h(w,p)),b=y.join(","),g=y.slice(-2).join(",");return`getChannel(getX(${b}), vec2(${g}))`}function h(p,y){return n.indexOf(p)!==-1&&e[p]!==1?`${e[p]} - ${y[p]} - 1`:`${y[p]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dims:i}=r,o=s.shape.length,a=An(i,s.shape);if(o===0)return Hr({inputs:{x:s},backend:n});const u=X().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Ibe(s.shape,a):new Tbe(s.shape,a);return n.runWebGLProgram(u,[s],s.dtype)}const Rbe={kernelName:EO,backendName:"webgl",kernelFunc:kbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Obe{constructor(e,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=e[1],s=e[2];this.outputShape=e;let i="";typeof n=="number"?i=`float outputValue = ${n.toFixed(2)};`:i=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${i}
          if(coordX >= 0 && coordX < ${s} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pbe={kernelName:cP,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:s,fillValue:i,center:o}=e,a=n,u=new Obe(r.shape,i),[l,c]=uD(o,r.shape[1],r.shape[2]),d=[[l,c,Math.sin(s),Math.cos(s)]];return a.runWebGLProgram(u,[r],r.dtype,d)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dbe=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,Lbe=st({opSnippet:Dbe}),Fbe={kernelName:CO,backendName:"webgl",kernelFunc:Lbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $be="return inversesqrt(x);",Bbe=st({opSnippet:$be,cpuKernelImpl:Qfe}),Mbe={kernelName:NO,backendName:"webgl",kernelFunc:Bbe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yS{constructor(e,n,r,s,i,o,a=!0,u=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;const l=wt(i.length),c=wt(o.length);let d="";r===1?d="i":r===2&&(d="i, j");const f=`getIndices(${d})`;let h="";s===1?h="i":s===2&&(h="i, coords[1]");const p=`getUpdates(${h})`;let y="";u&&(y="coords[0], coords[1]");const b=`getDefaultValue(${y})`,g=n>1?"strides[j]":"strides";this.userCode=`
        ${l} strides = ${l}(${i});

        void main() {
          ${c} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${f});
              flattenedIndex += index * ${g};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${p};
              found = true;
            }
          }
          setOutput(mix(${b}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Vbe{constructor(e,n,r,s,i,o,a=!0,u=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=o;const l=wt(i.length),c=wt(o.length);let d="";r===1?d="i":r===2&&(d="i, j");const f=`getIndices(${d})`;let h="";s===1?h="i":s===2&&(h="i, coords[1]");const p=`getUpdates(${h})`;let y="";u&&(y="coords[0], coords[1]");const b=`getDefaultValue(${y})`,g=n>1?"strides[j]":"strides",v=n>1?"strides[j + 1]":"strides";this.userCode=`
        ${l} strides = ${l}(${i});

        void main() {
          ${c} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${e}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${n}; j+=2) {
              ivec4 index = round(${f});
              flattenedIndex += index.xz * ${g};
              if (j + 1 < ${n}) {
                flattenedIndex += index.yw * ${v};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${p};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${b}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ube(t){const{inputs:e,backend:n,attrs:r}=t,{indices:s,updates:i}=e,{shape:o}=r,{sliceRank:a,numUpdates:u,sliceSize:l,strides:c,outputSize:d}=Ug(i,s,o),f=[d/l,l];if(d===0)return n.makeTensorInfo(o,s.dtype);const h=me({inputs:{x:s},backend:n,attrs:{shape:[u,a]}}),p=me({inputs:{x:i},backend:n,attrs:{shape:[u,l]}}),y=n.makeTensorInfo([],"float32",new Float32Array([0]));let b;X().getBool("WEBGL_PACK")?b=new Vbe(u,a,h.shape.length,p.shape.length,c,f):b=new yS(u,a,h.shape.length,p.shape.length,c,f);const g=n.runWebGLProgram(b,[p,h,y],p.dtype),v=me({inputs:{x:g},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),v}const zbe={kernelName:_O,backendName:"webgl",kernelFunc:Ube};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jbe{constructor(e,n,r,s){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,r];const i="while (left < right) {",o=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,a=X().getNumber("WEBGL_VERSION")===2?i:o,u=s==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${a}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${u} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wbe(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:s,values:i}=e,{side:o}=r,a=new jbe(s.shape[0],s.shape[1],i.shape[1],o),u=[[s.shape[1]]];return n.runWebGLProgram(a,[s,i],"int32",u)}const qbe={kernelName:IO,backendName:"webgl",kernelFunc:Wbe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Gbe{constructor(e,n,r){this.variableNames=["c","a","b"],this.outputShape=n;let s,i;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)i="resRC",s="resRC";else{const a=["resRC.x","resRC.y","resRC.z","resRC.w"],u=[],l=[];for(let c=0;c<n.length;c++)l.push(`${a[c]}`),c<e&&u.push(`${a[c]}`);s=u.join(),i=l.join()}const o=wt(r);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        float cVal = getC(${s});
        if (cVal >= 1.0) {
          setOutput(getA(${i}));
        } else {
          setOutput(getB(${i}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hbe(t){const{inputs:e,backend:n}=t,{condition:r,t:s,e:i}=e,o=new Gbe(r.shape.length,s.shape,s.shape.length);return n.runWebGLProgram(o,[r,s,i],fo(s.dtype,i.dtype))}const Kbe={kernelName:kO,backendName:"webgl",kernelFunc:Hbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xbe=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${dD};
  float scale = ${fD};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,Ybe=st({opSnippet:Xbe}),Qbe={kernelName:RO,backendName:"webgl",kernelFunc:Ybe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zbe=Bd+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,Jbe=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,eve=st({opSnippet:Zbe,packedOpSnippet:Jbe,cpuKernelImpl:Jfe}),tve={kernelName:FO,backendName:"webgl",kernelFunc:eve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nve=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,rve=st({opSnippet:nve}),sve={kernelName:LO,backendName:"webgl",kernelFunc:rve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ive=Bd+`
  return sin(x);
`,ove=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${Ml}
  return result;
`,ave=st({opSnippet:ive,packedOpSnippet:ove}),uve={kernelName:PO,backendName:"webgl",kernelFunc:ave};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lve=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,cve=st({opSnippet:lve}),dve={kernelName:DO,backendName:"webgl",kernelFunc:cve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fve=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,hve=st({opSnippet:fve}),pve={kernelName:$O,backendName:"webgl",kernelFunc:hve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mve=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:i,paddings:o}=r;R(s.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const a=i.reduce((g,v)=>g*v),u=[[0,0]];u.push(...o);for(let g=1+i.length;g<s.shape.length;++g)u.push([0,0]);const l=[],c=Y6({inputs:{x:s},backend:n,attrs:{paddings:u,constantValue:0}}),d=E2(c.shape,i,a,!1),f=C2(d.length,i.length,!1),h=N2(c.shape,i,a,!1),p=me({inputs:{x:c},backend:n,attrs:{shape:d}}),y=dr({inputs:{x:p},backend:n,attrs:{perm:f}}),b=me({inputs:{x:y},backend:n,attrs:{shape:h}});return l.push(c),l.push(p),l.push(y),l.forEach(g=>n.disposeIntermediateTensorInfo(g)),b},gve={kernelName:VO,backendName:"webgl",kernelFunc:mve};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yve(t){const{inputs:e,backend:n}=t,{indices:r,values:s,denseShape:i,defaultValue:o}=e;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${i.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(s.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${s.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const a=n.readSync(r.dataId),u=n.readSync(s.dataId),l=n.readSync(i.dataId),c=n.readSync(o.dataId)[0],[d,f,h,p,y]=the(a,r.shape,r.dtype,u,s.dtype,l,c);return[n.makeTensorInfo(f,r.dtype,d),n.makeTensorInfo([f[0]],s.dtype,h),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(b=>Number(b)))),n.makeTensorInfo([y.length],r.dtype,new Int32Array(y))]}const bve={kernelName:jO,backendName:"webgl",kernelFunc:yve};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vve(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:s,newShape:i}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(s.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${s.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);const o=Array.from(n.readSync(s.dataId)),a=n.readSync(r.dataId),u=Array.from(n.readSync(i.dataId)),[l,c,d]=nhe(a,r.shape,r.dtype,o,u);return[n.makeTensorInfo(c,r.dtype,l),n.makeTensorInfo([d.length],i.dtype,new Int32Array(d))]}const wve={kernelName:WO,backendName:"webgl",kernelFunc:vve};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xve(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${s.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${i.shape}`);const o=n.readSync(r.dataId),a=n.readSync(s.dataId),u=n.readSync(i.dataId),[l,c]=x6(o,r.shape,r.dtype,a,u,!0);return n.makeTensorInfo(c,r.dtype,l)}const Sve={kernelName:qO,backendName:"webgl",kernelFunc:xve};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ave(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${s.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${i.shape}`);const o=n.readSync(r.dataId),a=n.readSync(s.dataId),u=n.readSync(i.dataId),[l,c]=x6(o,r.shape,r.dtype,a,u);return n.makeTensorInfo(c,r.dtype,l)}const Eve={kernelName:GO,backendName:"webgl",kernelFunc:Ave};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cve(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:s,sparseValues:i,defaultValue:o}=e,{outputShape:a}=r,{sliceRank:u,numUpdates:l,sliceSize:c,strides:d,outputSize:f}=Ug(i,s,a),h=!1;if(i.dtype==="string"){const g=n.bufferSync(s),v=n.bufferSync(i),w=od(n.readSync(o.dataId)[0]),x=Zfe(g,v,a,f,c,l,u,d,w,h);return n.makeTensorInfo(a,x.dtype,x.values)}const p=new yS(l,u,s.shape.length,i.shape.length,d,[f,1],h),y=n.runWebGLProgram(p,[i,s,o],i.dtype),b=me({inputs:{x:y},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(y),b}const Nve={kernelName:HO,backendName:"webgl",kernelFunc:Cve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ve(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{numOrSizeSplits:i,axis:o}=r,a=An(o,s.shape)[0],u=ED(s,i,a),l=s.shape.length,c=new Array(l).fill(0),d=s.shape.slice();return u.map(f=>{const h=[...d];h[a]=f;const p=Md({inputs:{x:s},backend:n,attrs:{begin:c,size:h}});return c[a]+=f,p})}const Tve={kernelName:UO,backendName:"webgl",kernelFunc:_ve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oT="return sqrt(x);",Ive=st({opSnippet:oT,packedOpSnippet:oT,cpuKernelImpl:rhe}),kve={kernelName:BO,backendName:"webgl",kernelFunc:Ive};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rve="return x * x;",Ove=st({opSnippet:Rve}),Pve={kernelName:Zz,backendName:"webgl",kernelFunc:Ove};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aT="return (a - b) * (a - b);",Dve=Bn({opSnippet:aT,packedOpSnippet:aT}),Lve={kernelName:KO,backendName:"webgl",kernelFunc:Dve};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fve(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");const i=n.readSync(s.dataId),o=cd(i),a=she(o,"string",r);return n.makeTensorInfo(s.shape,"string",a)}const $ve={kernelName:XO,backendName:"webgl",kernelFunc:Fve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bve({inputs:t,attrs:e,backend:n}){const{x:r}=t,s=ii+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,i=new io(r.shape,s);return n.runWebGLProgram(i,[r],r.dtype)}const Mve={kernelName:lP,backendName:"webgl",kernelFunc:Bve};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Vve{constructor(e,n,r){this.variableNames=["x"],this.outputShape=r;const s=r.length,i=wt(r.length),o=wt(r.length);let a="";if(s===1)a="coords * strides + begin";else{let u=0;a=r.map((l,c)=>(u++,r.length===1?`coords * strides[${c}] + begin[${c}]`:`coords[${u-1}] * strides[${c}] + begin[${c}]`)).join(",")}this.userCode=`
      ${i} begin = ${i}(${e});
      ${i} strides = ${i}(${n});

      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uve(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:i,end:o,strides:a,beginMask:u,endMask:l,ellipsisMask:c,newAxisMask:d,shrinkAxisMask:f}=r,{finalShapeSparse:h,finalShape:p,isIdentity:y,sliceDim0:b,isSimpleSlice:g,begin:v,end:w,strides:x}=nD(s.shape,i,o,a,u,l,c,d,f);let N;if(y)N=me({inputs:{x:s},backend:n,attrs:{shape:p}});else if(b||g){R(s.shape.length>=1,()=>`Input must have rank at least 1, got: ${s.shape.length}`);const O=G4(v,w,x),_=Md({inputs:{x:s},backend:n,attrs:{begin:v,size:O}});N=me({inputs:{x:_},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(_)}else if(n.shouldExecuteOnCPU([s])){const _=n.readSync(s.dataId),$=Ht(s.shape,s.dtype,_),M=ihe(h,$,x,v);N=n.makeTensorInfo(p,s.dtype,M.values)}else{const _=new Vve(v,x,h);N=n.runWebGLProgram(_,[s],s.dtype)}const k=me({inputs:{x:N},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(N),k}const zve={kernelName:YO,backendName:"webgl",kernelFunc:Uve};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jve(t){const{inputs:e,backend:n,attrs:r}=t,{separator:s,nGramWidths:i,leftPad:o,rightPad:a,padWidth:u,preserveShortSequences:l}=r,{data:c,dataSplits:d}=e,f=n.readSync(c.dataId),h=n.readSync(d.dataId),[p,y]=ohe(f,h,s,i,o,a,u,l);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(d.shape,"int32",y)]}const Wve={kernelName:QO,backendName:"webgl",kernelFunc:jve};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qve(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:s}=r,{input:i,delimiter:o}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const a=n.readSync(i.dataId),u=n.readSync(o.dataId)[0],[l,c,d]=ahe(a,u,s),f=c.length;return[n.makeTensorInfo([f,2],"int32",l),n.makeTensorInfo([f],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const Gve={kernelName:ZO,backendName:"webgl",kernelFunc:qve};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hve(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:s}=r,{input:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(s<=0)throw new Error("Number of buckets must be at least 1");const o=n.readSync(i.dataId),a=uhe(o,s);return n.makeTensorInfo(i.shape,"int32",a)}const Kve={kernelName:JO,backendName:"webgl",kernelFunc:Hve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xve="return tan(x);",Yve=st({opSnippet:Xve}),Qve={kernelName:tP,backendName:"webgl",kernelFunc:Yve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zve=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,Jve=st({opSnippet:Zve}),ewe={kernelName:nP,backendName:"webgl",kernelFunc:Jve};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function twe(t){const{inputs:e,backend:n,attrs:r}=t,{tensor:s,indices:i,updates:o}=e,{sliceRank:a,numUpdates:u,sliceSize:l,strides:c,outputSize:d}=Ug(o,i,s.shape),f=[d/l,l];if(d===0)return n.makeTensorInfo(s.shape,i.dtype);const h=me({inputs:{x:i},backend:n,attrs:{shape:[u,a]}}),p=me({inputs:{x:o},backend:n,attrs:{shape:[u,l]}}),y=me({inputs:{x:s},backend:n,attrs:{shape:f}}),b=new yS(u,a,h.shape.length,p.shape.length,c,f,!1,!0),g=n.runWebGLProgram(b,[p,h,y],y.dtype),v=me({inputs:{x:g},backend:n,attrs:{shape:s.shape}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(g),v}const nwe={kernelName:TO,backendName:"webgl",kernelFunc:twe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rwe{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[o]*n[o];this.outputShape=r,this.rank=r.length;const s=wt(this.rank),i=swe(e);this.userCode=`
      void main() {
        ${s} resRC = getOutputCoords();
        setOutput(getA(${i}));
      }
    `}}function swe(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let s=0;s<t.length;s++)r.push(`imod(${n[s]}, ${t[s]})`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z6(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reps:i}=r;if(s.dtype==="string"||s.shape.length>5){const u=n.readSync(s.dataId),l=s.dtype==="string"?u.map(f=>od(f)):u,c=Ht(s.shape,s.dtype,l),d=che(c,i);return n.makeTensorInfo(d.shape,d.dtype,d.values)}const o=new rwe(s.shape,i);return n.runWebGLProgram(o,[s],s.dtype)}const iwe={kernelName:Gx,backendName:"webgl",kernelFunc:Z6};class owe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class awe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ru(t,e){e!==null&&t.disposeIntermediateTensorInfo(e)}function uT(t){let e=1;for(;e<t;)e*=2;return e}function uwe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{k:i,sorted:o}=r,a=X().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),u=X().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),l=s.shape,c=l[l.length-1];if(n.shouldExecuteOnCPU([s])||c<a||i>u){const M=n.readSync(s.dataId),[K,Z]=dhe(M,l,s.dtype,i,o);return[n.makeTensorInfo(K.shape,K.dtype,K.values),n.makeTensorInfo(Z.shape,Z.dtype,Z.values)]}if(i===0)return l[l.length-1]=0,[n.makeTensorInfo(l,s.dtype,[]),n.makeTensorInfo(l,"int32",[])];if(c===1)return[s,rp({attrs:{shape:l,dtype:"int32",value:0},backend:n})];const d=n.texData.get(s.dataId),f=d!==null&&d.isPacked,h=f?n.unpackTensor(s):s,y=de(l)/c,b=me({inputs:{x:h},attrs:{shape:[y,c]},backend:n});f&&Ru(n,h);const g=uT(i),v=uT(c);let w=null;const x=()=>w===null?[b,b]:[b,w],N=(M,K,Z)=>{const ie=x(),ee=new owe(Z),V=[[c],[w===null?1:0],[Number.NEGATIVE_INFINITY],[M],[K]],D=w;w=n.runWebGLProgram(ee,ie,"int32",V),Ru(n,D)};for(let M=1;M<g;M*=2){const K=M*2;for(let Z=M;Z>=1;Z/=2)N(K,Z,[y,v])}for(let M=v;M>g;M/=2){const K=x(),Z=new awe([y,M/2]),ee=[[c],[w===null?1:0],[g]],W=w;w=n.runWebGLProgram(Z,K,"int32",ee),Ru(n,W);const V=g/2,D=V*2;for(let L=V;L>=1;L/=2)N(D,L,w.shape)}let k=w;w=Md({inputs:{x:w},backend:n,attrs:{begin:0,size:[y,i]}}),Ru(n,k);let O=W6({inputs:{x:b,indices:w},backend:n,attrs:{axis:1,batchDims:1}});Ru(n,b);const _=l.slice(0,-1);_.push(i),k=w,w=me({inputs:{x:w},attrs:{shape:_},backend:n}),Ru(n,k);const $=O;return O=me({inputs:{x:O},attrs:{shape:_},backend:n}),Ru(n,$),[O,w]}const lwe={kernelName:rP,backendName:"webgl",kernelFunc:uwe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cwe{constructor(e,n,r,s,i,o){this.variableNames=["Image","Transforms"],this.outputShape=o;const a=r==="nearest"?1:2;let u;switch(s){case"constant":u=1;break;case"reflect":u=2;break;case"wrap":u=3;break;case"nearest":u=4;break;default:u=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${u} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${u} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${u} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${i});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${i});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${e}));

                if (${a} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dwe(t){const{inputs:e,backend:n,attrs:r}=t,{image:s,transforms:i}=e,{interpolation:o,fillMode:a,fillValue:u,outputShape:l}=r,[c,d,f,h]=s.shape,[p,y]=l??[d,f],b=[c,p,y,h],g=new cwe(d,f,o,a,u,b);return n.runWebGLProgram(g,[s,i],"float32")}const fwe={kernelName:sP,backendName:"webgl",kernelFunc:dwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hwe(t){const{inputs:e,attrs:n,backend:r}=t,{axis:s}=n,{x:i}=e;ep(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const o=r.readSync(i.dataId),{outputValues:a,outputShape:u,indices:l}=fhe(o,s,i.shape,i.dtype);return[r.makeTensorInfo(u,i.dtype,a),r.makeTensorInfo([l.length],"int32",l)]}const pwe={kernelName:iP,backendName:"webgl",kernelFunc:hwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mwe(t){const{inputs:e,backend:n,attrs:r}=t,{value:s}=e;let{axis:i}=r;i<0&&(i+=s.shape.length);const o=s,a=o.shape.length,u=s.shape[i],l=new Array(a-1);let c=0;for(let y=0;y<a;y++)y!==i&&(l[c++]=o.shape[y]);const d=[],f=new Array(a).fill(0),h=o.shape.slice();h[i]=1;const p=new Array(u);for(let y=0;y<p.length;y++){f[i]=y;const b=Md({inputs:{x:o},backend:n,attrs:{begin:f,size:h}}),g=me({inputs:{x:b},backend:n,attrs:{shape:l}});p[y]=g,d.push(b)}return d.forEach(y=>n.disposeIntermediateTensorInfo(y)),p}const gwe={kernelName:oP,backendName:"webgl",kernelFunc:mwe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ywe{constructor(e,n){this.variableNames=["x","segmentIds"];const r=e.windowSize,s=e.batchSize,i=e.inSize,o=e.numSegments,a=o*Math.ceil(i/r);this.outputShape=[s,a];const u="0.0",l="sumValue",c=Math.floor(r/4)*4,d=r%4,f=`
        sumValue += dot(values, segFilter);
    `;let h="";i%r>0&&(h=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `);let p="";i%r>0&&(p=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${u};

      float getValue(int batch, int inIdx) {
        ${h}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${p}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${o})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${o})));

        float sumValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${f}
        }

        int inIdx = inOffset + ${c};
        if (${d===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${f}
        } else if (${d===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${f}
        } else if (${d===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${f}
        }
        setOutput(${l});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bwe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,segmentIds:i}=e,{numSegments:o}=r,a=s.shape.length,u=[];let l=0;const c=ni([l],a);let d=s;c!=null&&(d=dr({inputs:{x:s},backend:n,attrs:{perm:c}}),u.push(d),l=ri(1,a)[0]);const f=$D(d.shape,l,o),h=de([d.shape[l]]),p=me({inputs:{x:d},backend:n,attrs:{shape:[-1,h]}});u.push(p);const y=Kx(s.dtype),b=(x,N,k,O,_)=>{const $=x.shape[0],M=x.shape[1],K=FD(M,_),Z={windowSize:K,inSize:M,batchSize:$,numSegments:_},ie=new ywe(Z,N),ee=n.compileAndRun(ie,[x,k],O);if(u.push(ee),ee.shape[1]===_)return ee;const W=Q6({backend:n,attrs:{start:0,stop:_,step:1,dtype:"float32"}}),V=Z6({inputs:{x:W},backend:n,attrs:{reps:[M/K]}});return u.push(W),u.push(V),b(ee,N,V,O,_)},g=b(p,"unsortedSegmentSum",i,y,o),v=me({inputs:{x:g},backend:n,attrs:{shape:f}});let w=v;if(c!=null){u.push(v);const x=t2(c);w=dr({inputs:{x:w},backend:n,attrs:{perm:x}})}return u.forEach(x=>n.disposeIntermediateTensorInfo(x)),w}const vwe={kernelName:aP,backendName:"webgl",kernelFunc:bwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wwe=[rpe,ipe,upe,dpe,hpe,gpe,bpe,wpe,Epe,Npe,Ipe,Ope,Lpe,Mpe,zpe,Wpe,Gpe,Ype,Zpe,eme,sme,dme,hme,yme,vme,Cme,_me,Rme,Vhe,Dme,Mme,jme,Xme,Zme,e0e,n0e,s0e,u0e,d0e,p0e,g0e,b0e,w0e,A0e,C0e,I0e,R0e,D0e,$0e,M0e,j0e,H0e,Q0e,ege,rge,sge,oge,uge,cge,fge,pge,bge,xge,Ege,Nge,Ige,Oge,Fge,Vge,Mhe,zge,$me,qge,Kge,Qge,zhe,t1e,i1e,a1e,d1e,p1e,b1e,x1e,C1e,I1e,O1e,D1e,B1e,V1e,z1e,G1e,K1e,Y1e,Z1e,eye,sye,uye,fye,wye,qhe,Eye,_ye,kye,Pye,xme,Fye,Bye,Vye,jye,Hye,Whe,Xye,Qye,Jye,tbe,nbe,Sme,gye,ibe,lbe,hbe,Hhe,ybe,wbe,Ebe,_be,Rbe,Pbe,Fbe,Mbe,zbe,qbe,Kbe,Qbe,tve,sve,uve,dve,lme,bye,pve,gve,bve,wve,Sve,Eve,Nve,Tve,kve,Pve,Lve,$ve,Mve,zve,Wve,Gve,Kve,yye,epe,Qve,ewe,nwe,iwe,lwe,fwe,tpe,pwe,gwe,vwe,$ye];for(const t of wwe)t7(t);const xwe=()=>{const t=ei(),e=_g(),n=Zo().token,[r,s]=P.useState(!0),i=P.useRef(),o=P.useRef(),a={piecesModelRef:i,xcornersModelRef:o};return P.useEffect(()=>{n===""&&yz(e,t),s(!1)},[]),E.jsx(E.Fragment,{children:!r&&E.jsx(O5,{context:a})})};var J6,lT=Mh;J6=lT.createRoot,lT.hydrateRoot;var bS="persist:",vS="persist/FLUSH",v1="persist/REHYDRATE",wS="persist/PAUSE",xS="persist/PERSIST",SS="persist/PURGE",AS="persist/REGISTER",Swe=-1;function Gm(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Gm=function(n){return typeof n}:Gm=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Gm(t)}function cT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Awe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cT(n,!0).forEach(function(r){Ewe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cT(n).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ewe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cwe(t,e,n,r){r.debug;var s=Awe({},n);return t&&Gm(t)==="object"&&Object.keys(t).forEach(function(i){i!=="_persist"&&e[i]===n[i]&&(s[i]=t[i])}),s}function Nwe(t){var e=t.blacklist||null,n=t.whitelist||null,r=t.transforms||[],s=t.throttle||0,i="".concat(t.keyPrefix!==void 0?t.keyPrefix:bS).concat(t.key),o=t.storage,a;t.serialize===!1?a=function(N){return N}:typeof t.serialize=="function"?a=t.serialize:a=_we;var u=t.writeFailHandler||null,l={},c={},d=[],f=null,h=null,p=function(N){Object.keys(N).forEach(function(k){g(k)&&l[k]!==N[k]&&d.indexOf(k)===-1&&d.push(k)}),Object.keys(l).forEach(function(k){N[k]===void 0&&g(k)&&d.indexOf(k)===-1&&l[k]!==void 0&&d.push(k)}),f===null&&(f=setInterval(y,s)),l=N};function y(){if(d.length===0){f&&clearInterval(f),f=null;return}var x=d.shift(),N=r.reduce(function(k,O){return O.in(k,x,l)},l[x]);if(N!==void 0)try{c[x]=a(N)}catch(k){console.error("redux-persist/createPersistoid: error serializing state",k)}else delete c[x];d.length===0&&b()}function b(){Object.keys(c).forEach(function(x){l[x]===void 0&&delete c[x]}),h=o.setItem(i,a(c)).catch(v)}function g(x){return!(n&&n.indexOf(x)===-1&&x!=="_persist"||e&&e.indexOf(x)!==-1)}function v(x){u&&u(x)}var w=function(){for(;d.length!==0;)y();return h||Promise.resolve()};return{update:p,flush:w}}function _we(t){return JSON.stringify(t)}function Twe(t){var e=t.transforms||[],n="".concat(t.keyPrefix!==void 0?t.keyPrefix:bS).concat(t.key),r=t.storage;t.debug;var s;return t.deserialize===!1?s=function(o){return o}:typeof t.deserialize=="function"?s=t.deserialize:s=Iwe,r.getItem(n).then(function(i){if(i)try{var o={},a=s(i);return Object.keys(a).forEach(function(u){o[u]=e.reduceRight(function(l,c){return c.out(l,u,a)},s(a[u]))}),o}catch(u){throw u}else return})}function Iwe(t){return JSON.parse(t)}function kwe(t){var e=t.storage,n="".concat(t.keyPrefix!==void 0?t.keyPrefix:bS).concat(t.key);return e.removeItem(n,Rwe)}function Rwe(t){}function dT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Io(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dT(n,!0).forEach(function(r){Owe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dT(n).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Owe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pwe(t,e){if(t==null)return{};var n=Dwe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Dwe(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}var Lwe=5e3;function Fwe(t,e){var n=t.version!==void 0?t.version:Swe;t.debug;var r=t.stateReconciler===void 0?Cwe:t.stateReconciler,s=t.getStoredState||Twe,i=t.timeout!==void 0?t.timeout:Lwe,o=null,a=!1,u=!0,l=function(d){return d._persist.rehydrated&&o&&!u&&o.update(d),d};return function(c,d){var f=c||{},h=f._persist,p=Pwe(f,["_persist"]),y=p;if(d.type===xS){var b=!1,g=function(_,$){b||(d.rehydrate(t.key,_,$),b=!0)};if(i&&setTimeout(function(){!b&&g(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(t.key,'"')))},i),u=!1,o||(o=Nwe(t)),h)return Io({},e(y,d),{_persist:h});if(typeof d.rehydrate!="function"||typeof d.register!="function")throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return d.register(t.key),s(t).then(function(O){var _=t.migrate||function($,M){return Promise.resolve($)};_(O,n).then(function($){g($)},function($){g(void 0,$)})},function(O){g(void 0,O)}),Io({},e(y,d),{_persist:{version:n,rehydrated:!1}})}else{if(d.type===SS)return a=!0,d.result(kwe(t)),Io({},e(y,d),{_persist:h});if(d.type===vS)return d.result(o&&o.flush()),Io({},e(y,d),{_persist:h});if(d.type===wS)u=!0;else if(d.type===v1){if(a)return Io({},y,{_persist:Io({},h,{rehydrated:!0})});if(d.key===t.key){var v=e(y,d),w=d.payload,x=r!==!1&&w!==void 0?r(w,c,v,t):v,N=Io({},x,{_persist:Io({},h,{rehydrated:!0})});return l(N)}}}if(!h)return e(c,d);var k=e(y,d);return k===y?c:l(Io({},k,{_persist:h}))}}function fT(t){return Mwe(t)||Bwe(t)||$we()}function $we(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function Bwe(t){if(Symbol.iterator in Object(t)||Object.prototype.toString.call(t)==="[object Arguments]")return Array.from(t)}function Mwe(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function hT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Iw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hT(n,!0).forEach(function(r){Vwe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hT(n).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Vwe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var e$={registry:[],bootstrapped:!1},Uwe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e$,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case AS:return Iw({},e,{registry:[].concat(fT(e.registry),[n.key])});case v1:var r=e.registry.indexOf(n.key),s=fT(e.registry);return s.splice(r,1),Iw({},e,{registry:s,bootstrapped:s.length===0});default:return e}};function zwe(t,e,n){var r=Rx(Uwe,e$,void 0),s=function(u){r.dispatch({type:AS,key:u})},i=function(u,l,c){var d={type:v1,payload:l,err:c,key:u};t.dispatch(d),r.dispatch(d)},o=Iw({},r,{purge:function(){var u=[];return t.dispatch({type:SS,result:function(c){u.push(c)}}),Promise.all(u)},flush:function(){var u=[];return t.dispatch({type:vS,result:function(c){u.push(c)}}),Promise.all(u)},pause:function(){t.dispatch({type:wS})},persist:function(){t.dispatch({type:xS,register:s,rehydrate:i})}});return o.persist(),o}var ES={},CS={};CS.__esModule=!0;CS.default=qwe;function Hm(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Hm=function(n){return typeof n}:Hm=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Hm(t)}function mb(){}var jwe={getItem:mb,setItem:mb,removeItem:mb};function Wwe(t){if((typeof self>"u"?"undefined":Hm(self))!=="object"||!(t in self))return!1;try{var e=self[t],n="redux-persist ".concat(t," test");e.setItem(n,"test"),e.getItem(n),e.removeItem(n)}catch{return!1}return!0}function qwe(t){var e="".concat(t,"Storage");return Wwe(e)?self[e]:jwe}ES.__esModule=!0;ES.default=Kwe;var Gwe=Hwe(CS);function Hwe(t){return t&&t.__esModule?t:{default:t}}function Kwe(t){var e=(0,Gwe.default)(t);return{getItem:function(r){return new Promise(function(s,i){s(e.getItem(r))})},setItem:function(r,s){return new Promise(function(i,o){i(e.setItem(r,s))})},removeItem:function(r){return new Promise(function(s,i){s(e.removeItem(r))})}}}var t$=void 0,Xwe=Ywe(ES);function Ywe(t){return t&&t.__esModule?t:{default:t}}var Qwe=(0,Xwe.default)("local");t$=Qwe;const Zwe=Kk({game:vee,corners:WJ,user:nz}),Jwe={key:"root",version:1,storage:t$,blacklist:[]},exe=Fwe(Jwe,Zwe),n$=bU({reducer:exe,middleware:t=>t({serializableCheck:{ignoredActions:[vS,v1,wS,xS,SS,AS]}})});function Km(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Km=function(n){return typeof n}:Km=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Km(t)}function txe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nxe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function rxe(t,e,n){return e&&nxe(t.prototype,e),t}function sxe(t,e){return e&&(Km(e)==="object"||typeof e=="function")?e:Xm(t)}function kw(t){return kw=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},kw(t)}function Xm(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ixe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Rw(t,e)}function Rw(t,e){return Rw=Object.setPrototypeOf||function(r,s){return r.__proto__=s,r},Rw(t,e)}function Ym(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var r$=function(t){ixe(e,t);function e(){var n,r;txe(this,e);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r=sxe(this,(n=kw(e)).call.apply(n,[this].concat(i))),Ym(Xm(r),"state",{bootstrapped:!1}),Ym(Xm(r),"_unsubscribe",void 0),Ym(Xm(r),"handlePersistorState",function(){var a=r.props.persistor,u=a.getState(),l=u.bootstrapped;l&&(r.props.onBeforeLift?Promise.resolve(r.props.onBeforeLift()).finally(function(){return r.setState({bootstrapped:!0})}):r.setState({bootstrapped:!0}),r._unsubscribe&&r._unsubscribe())}),r}return rxe(e,[{key:"componentDidMount",value:function(){this._unsubscribe=this.props.persistor.subscribe(this.handlePersistorState),this.handlePersistorState()}},{key:"componentWillUnmount",value:function(){this._unsubscribe&&this._unsubscribe()}},{key:"render",value:function(){return typeof this.props.children=="function"?this.props.children(this.state.bootstrapped):this.state.bootstrapped?this.props.children:this.props.loading}}]),e}(P.PureComponent);Ym(r$,"defaultProps",{children:null,loading:null});const oxe="modulepreload",axe=function(t){return"/"+t},pT={},uxe=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),o=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.all(n.map(a=>{if(a=axe(a),a in pT)return;pT[a]=!0;const u=a.endsWith(".css"),l=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${l}`))return;const c=document.createElement("link");if(c.rel=u?"stylesheet":oxe,u||(c.as="script",c.crossOrigin=""),c.href=a,o&&c.setAttribute("nonce",o),document.head.appendChild(c),u)return new Promise((d,f)=>{c.addEventListener("load",d),c.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${a}`)))})}))}return s.then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})};function lxe(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:s,onRegisteredSW:i,onRegisterError:o}=t;let a,u,l;const c=async(f=!0)=>{await u,await(l==null?void 0:l())};async function d(){if("serviceWorker"in navigator){if(a=await uxe(async()=>{const{Workbox:f}=await import("./workbox-window.prod.es5-D5gOYdM7.js");return{Workbox:f}},[]).then(({Workbox:f})=>new f("/sw.js",{scope:"/",type:"classic"})).catch(f=>{o==null||o(f)}),!a)return;l=async()=>{await(a==null?void 0:a.messageSkipWaiting())};{let f=!1;const h=()=>{f=!0,a==null||a.addEventListener("controlling",p=>{p.isUpdate&&window.location.reload()}),n==null||n()};a.addEventListener("installed",p=>{typeof p.isUpdate>"u"?typeof p.isExternal<"u"?p.isExternal?h():!f&&(r==null||r()):p.isExternal?window.location.reload():!f&&(r==null||r()):p.isUpdate||r==null||r()}),a.addEventListener("waiting",h),a.addEventListener("externalwaiting",h)}a.register({immediate:e}).then(f=>{i?i("/sw.js",f):s==null||s(f)}).catch(f=>{o==null||o(f)})}}return u=d(),c}const cxe=lxe({onNeedRefresh(){confirm("New content available. Reload?")&&(localStorage.clear(),cxe(!0))}}),dxe=F5([{path:"/",element:E.jsx(xwe,{}),children:[{path:"",element:E.jsx(Ez,{})},{path:"/record",element:E.jsx(cm,{mode:"record"})},{path:"/upload",element:E.jsx(cm,{mode:"upload"})},{path:"/broadcast",element:E.jsx(cm,{mode:"broadcast"})},{path:"/play",element:E.jsx(cm,{mode:"play"})},{path:"/export",element:E.jsx(wle,{})},{path:"/privacy",element:E.jsx(xle,{})},{path:"/faq",element:E.jsx(Nle,{})}]}]),fxe=J6(document.getElementById("root")),hxe=zwe(n$);fxe.render(E.jsx(YU,{store:n$,children:E.jsx(r$,{persistor:hxe,children:E.jsx(q5,{router:dxe})})}));
//# sourceMappingURL=index-seKzr5fA.js.map
